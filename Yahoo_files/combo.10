!function(a){"use strict";function b(){var a,b;for(a in i)i.hasOwnProperty(a)&&(b=i[a],e(a,b.requires,b.factory))}function c(){var a,b=d(i);if(0===b)for(;void 0!==(a=j.shift());)a()}function d(a){var b=0;if("object"!=typeof a)return b;for(var c in a)a.hasOwnProperty(c)&&b++;return b}function e(a,c,d){if(f(c)){var e=d(ACT);(!h[a]||"factory"in h[a]&&"ATTRS"in h[a].factory&&h[a].factory.ATTRS.version<e.ATTRS.version)&&(g(h,a,c,e),ACT[a]=e),delete i[a],b(),ACT.ready()}else g(i,a,c,d)}function f(a){var b=0;for(b;b<a.length;b++)if(!h[a[b]])return!1;return!0}function g(a,b,c,d){a[b]=a[b]||{},a[b].requires=c,a[b].factory=d}var h={},i={},j=[],k={},l={},m={adQueue:[],ATTRS:{NAME:"ACT",version:"0.0.1"},define:function(a,b,c){e(a,b,c)},ready:function(a){for(var b,e=d(i),f=d(l);void 0!==(b=ACT.adQueue.shift());)j.push(b);return a&&j.push(a),0===e&&0===f?(c(),!0):!1},requireConfig:function(a){return a in k||a in l?(delete l[a],!0):(l[a]=!0,!1)},getConfig:function(a){var b={};return a in k&&(b=k[a]),b},setConfig:function(a,b){a in l&&delete l[a],k[a]=b}};a&&a.hasOwnProperty("version")&&a.version<m.version?m=a:a.adQueue&&(m.adQueue=a.adQueue),window.ACT=m}(window.ACT||{}),ACT.define("ActionsQueue",["Event","Lang"],function(a){"use strict";function b(){var a=this;d.on("register:Actions",function(b){a.registerActions(b)}),d.on("add:actions",function(b){a.addActions(b)}),d.on("complete:action",function(){a.completeAction()})}var c=a.Lang,d=a.Event;return b.ATTRS={NAME:"ActionsQueue",version:"0.0.1"},b.prototype={registeredActions:{},executeQueue:[],isRunning:!1,currentAction:null,registerActions:function(a){if(c.isArray(a))for(var b=0;b<a.length;b++){var d=a[b];this.registeredActions[d.type]=d}else{if(!c.isObject(a))return!1;this.registeredActions[a.type]=a}return!0},addActions:function(a){if(c.isArray(a))for(var b=0;b<a.length;b++)this.enqueue(a[b]);else{if(!c.isObject(a))return!1;this.enqueue(a)}return this.runQueue(),!0},isActionArgumentsValid:function(a){var b=this.registeredActions[a.type],d=!0;if(b){var e=b.argument;for(var f in e)if(e.hasOwnProperty(f)){var g=e[f];c.isFunction(g.test)&&!g.test(a[f])&&(d=!1)}}else d=!1;return d},executeAction:function(a){if(this.isActionArgumentsValid(a)){var b=this.registeredActions[a.type];return b.process(a),!0}return this.completeAction(),!1},isValidAction:function(a){return c.isObject(a)&&c.isString(a.type)},enqueue:function(a){this.isValidAction(a)&&this.executeQueue.push(a)},dequeue:function(){var a=this.executeQueue[0]||null;return c.isObject(a)&&(this.executeQueue=this.executeQueue.slice(1)),a},runQueue:function(){if(!this.isRunning){var a=this.dequeue();null!==a&&(this.isRunning=!0,this.executeAction(a))}},completeAction:function(){this.isRunning=!1,this.runQueue()}},b}),ACT.define("Base",["Event","Cookie","Lang","Tracking","SecureDarla","StandardAd","ActionsQueue","IO","Environment","UA","Util"],function(a){"use strict";function b(b){var c=b.conf||{},d=b.extend||{},e=b.superConf||null;j.merge(this,d),j.merge(this.config,c),this.config.superConf=e,null!==e?(a.requireConfig(b.superConf),this.config.standardAd=!0):this.config.standardAd=!1;var f=this;a.ready(function(){f.start()})}function c(a,b){b=b.split(".");for(var c=/(.+)\[(\d+)\]/,d=0;d<b.length;d++){var e=c.exec(b[d]);if(e){if(!a[e[1]])return!1;a=a[e[1]][parseInt(e[2])]}else a=a[b[d]]}return a}function d(a,b,d){for(var e in b)if(b.hasOwnProperty(e)){var f=b[e].value?b[e].value:b[e];if(s(f,a)){var g=f.substr(a.length+1),h=c(d,g);b[e].callback&&(h=b[e].callback(h)),b[e]=h}else b[e].value&&(b[e]=b[e].value)}return b}function e(a){if(a.id===a.partialObjectRef.id)if(!a.attrToChange||s(v,a.attrToChange)||a.partialObjectRef[a.GroupToChange]||"events"===a.GroupToChange)if(a.attrToChange&&!s(v,a.attrToChange)&&a.partialObjectRef[a.GroupToChange]&&"events"!==a.GroupToChange){var b=a.partialObjectRef[a.GroupToChange];b[a.attrToChange]=a.newValue,a.partialObjectRef[a.GroupToChange]=b}else"events"===a.GroupToChange&&a.attrToChange&&a.partialObjectRef.eventConfig?a.partialObjectRef.eventConfig=f({id:a.attrToChange,partialObjectRef:a.partialObjectRef.eventConfig,attrToChange:a.GroupToChange,GroupToChange:a.extraLevelToChange,newValue:a.newValue}):s(v,a.GroupToChange)||(a.partialObjectRef[a.GroupToChange]=a.newValue);else a.partialObjectRef[a.GroupToChange]={},a.partialObjectRef[a.GroupToChange][a.attrToChange]=a.newValue;else if(j.objHasKey(a.partialObjectRef,"content"))for(var c=0;c<a.partialObjectRef.content.length;c++)a.partialObjectRef.content[c]=e({id:a.id,partialObjectRef:a.partialObjectRef.content[c],GroupToChange:a.GroupToChange,attrToChange:a.attrToChange,newValue:a.newValue,extraLevelToChange:a.extraLevelToChange});return a.partialObjectRef}function f(a){var b=a.partialObjectRef;if(!j.isArray(b))return b;if(!a.GroupToChange||s(v,a.GroupToChange))return b;for(var c=0;c<b.length;c++)for(var d=0;d<b[c].actions.length;d++)if(b[c].actions[d].id===a.id)return b[c].actions[d][a.GroupToChange]=a.newValue,b}function g(a){var b=a.config;return void 0===a.groupAttrib?b[a.listToForce]=j.merge(b[a.listToForce],a.newData):b[a.listToForce][a.groupAttrib]=a.newData,b}function h(a,b){for(var c in a)if(a.hasOwnProperty(c)){var d=c.split("."),h=d[0],i=b;if(!s(t,h))return;if("layers"===h)for(var j in i.format[h])j===i.format[h][d[1]].layerName&&s(u,d[2])&&3===d.length&&!s(v,d[2])?i.format[h][d[1]][d[2]]=a[c]:!s(u,d[2])&&d.length>3&&(i.format[h][d[1]].contentLayer=e({id:d[2],partialObjectRef:i.format[h][d[1]].contentLayer,GroupToChange:d[3],attrToChange:d[4],extraLevelToChange:d[5],newValue:a[c]}));else"flow"===h?i.format[h]=f({id:d[1],partialObjectRef:i.format[h],GroupToChange:d[2],attrToChange:d[4],extraLevelToChange:d[5],newValue:a[c]}):"darlaLayer"===h?i.format[h].holder[d[1]]=a[c]:"forceEnv"===h&&(i.baseConfig.forceEnv=g({listToForce:d[1],groupAttrib:d[2],newData:a[c],config:i.baseConfig.forceEnv}))}return i}function i(a){return new b(a)}var j=a.Lang,k=a.Event,l=a.Cookie,m=a.Tracking,n=a.SecureDarla,o=a.ActionsQueue,p=a.UA,q=a.IO,r=a.Util,s=r.inArray,t=["forceEnv","darlaLayer","flow","layers"],u=["width","height","type","width","height","x","y","alignH","base","alignH","alignV","cor"],v=["id","type","layerName","content"],w=new RegExp(".*/","");return b.ATTRS={NAME:"Base",version:"0.0.2"},b.prototype={config:{tracking:{rd:"",z1:"",rB:"",beap:[],id:""},pixels:{html:[],backup:[],flash:[]},cookie:{domain:location.hostname.replace(/^www\./,""),pathname:location.pathname.match(w)[0],expires:1728e5,name:"ACTCookie"+(new Date).getDay()},format:{value:""},template:{name:"act_base",type:"lrec",format:"lrec",width:300,height:250}},register:function(){var b=this.config,c=this;if(!0===this.config.standardAd)if(b.customData&&!j.isObjectEmpty(b.customData))if(b.inputData){{new q(b.inputData)}k.on("IO:load:done",function(e){if("JSON"===b.inputData.type)var f=d(b.inputData.id,b.customData,e.response);var g=h(f,a.getConfig(b.superConf));c.config=j.merge(b,g),c.loadStandardAd()})}else{var e=h(b.customData,a.getConfig(b.superConf));c.config=j.merge(b,e),c.loadStandardAd()}else c.config=j.merge(b,a.getConfig(b.superConf)),c.loadStandardAd();else c.trackPixel(b.pixels)},loadStandardAd:function(){var b,c=this,d=c.config,e={};b=new a.StandardAd({config:d,parent:c}),c.config.standardAdRef=b,d.hasOwnProperty("baseConfig")&&d.baseConfig.hasOwnProperty("forceEnv")&&(e=d.baseConfig.forceEnv);var f=new a.Environment({forceEnv:e});this.currentEnv=f.checkEnv(),this.trackPixel(d.pixels)},start:function(){var a=this.config;this.loadListeners(),this.actionsQueue=new o({}),this.cookie=new l(a.cookie||null,this),this.tracking=new m(a.tracking||null,this),this.secureDarla=new n(this.config,this),this.init()},trackPixel:function(a){var b,c=a;if(b=this.hasOwnProperty("currentEnv")?this.currentEnv:p.isHtml5Supported===!0?"html":"backup",j.isObject(a)&&(c=a.hasOwnProperty(b)?a[b]:a),j.isArray(c))for(var d=0,e=c.length;e>d;d++)r.pixelTrack(c[d]);else j.isString(c)&&c.length>3&&r.pixelTrack(c)},loadListeners:function(){this._adInitEvent=k.on("load",this.ad_init,window,this),this._registerEvent=k.on("load",this.register,window,this)},init:function(){},ad_init:function(){}},i.ATTRS=b.ATTRS,i}),ACT.define("Cookie",["Json","Lang","Event"],function(a){"use strict";function b(a,b){var c=this,d=a||{};return this.DEFAULT_EXPIRES=d.expires||h,this.DEFAULT_COOKIE_NAME=d.default_cookie_name||i,this.DEFAULT_PATH=d.path||g,this.DEFAULT_DOMAIN=d.domain||f,this.COOKIE_NAME=d.name||j,b&&(this.ref=b),e.on(s,this.register,null,this),e.on(u,this.register,null,this),e.on("sframe:nosupport",this.get,null,this),e.on(x,function(a){c.registerAd(a.adId)}),e.on(z,function(a){c.saveState(a.stateId,a.stateValue),e.fire(A)}),e.on(B,function(a){c.updateAdEvent(a.eventName)}),e.fire(D,L),this}var c=a.Json,d=a.Lang,e=a.Event,f="yahoo.com",g="/",h=1728e5,i="CRZY",j="ACTCookie",k=encodeURIComponent,l=decodeURIComponent,m=null,n=null,o=null,p=null,q={STANDARD:"standard",SAFEFRAME:"safeFrame"},r="secureDarla:",s=r+"register",t=r+"failed",u=r+"register-update",v=r+"read-cookie",w=r+"write-cookie",x="localRegister:registerAd",y="localRegister:registerAd:complete",z="localRegister:trackState",A="localRegister:trackState:complete",B="localRegister:updateAdEvent",C="localRegister:updateAdEvent:complete",D="register:Actions",E="complete:action",F="Cookie:getData:complete",G="Cookie:internal:ready",H="Cookie:internal:saved",I=0,J=-1,K=10,L=[{type:"trackState",arguments:{stateId:{name:"stateId",test:function(a){return d.isString(a)}},state:{name:"state",test:function(a){return d.isString(a)}}},process:function(a){var b=e.on(A,function(){b.remove(),e.fire(E)});e.fire(z,{stateId:a.stateId,stateValue:a.state})}},{type:"updateAdEvent",arguments:{eventName:{name:"eventName",test:function(a){return d.isString(a)}}},process:function(a){var b=e.on(C,function(){b.remove(),e.fire(E)});e.fire(B,{eventName:a.eventName})}}],M={TYPE:q.STANDARD,test:function(){var a=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="fpadtestcookie",a=-1!==document.cookie.indexOf("fpadtestcookie")?!0:!1),a},set:function(a,b,d,i,j){var l=new Date,m=k(c.stringify(b));d=d||f,j=j||g,i=i||h,l.setTime(l.getTime()+i),document.cookie=a+"="+m+"; expires="+l.toGMTString()+"; domain="+d+"; path="+j,e.fire(H,{})},get:function(a){var b=" "+document.cookie+";",d=new RegExp(" "+a+"=(.*?);"),e=b.match(d),f=0;return e&&(e=l(e[1])),e&&(f=c.parse(e)),f},remove:function(a,b,c){var d=b||f,e=c||g;return M.set(a,"",d,-3456e5,e),!0}},N={TYPE:q.SAFEFRAME,data:null,pending:null,test:function(){return m&&d.isFunction(m.supports)?m.supports("read-cookie")&&m.supports("write-cookie"):!1},set:function(a,b){if(N.test()){var d=e.on(w,function(a){d.remove(),e.fire(H,a)});N.data=b,m.cookie(a,{key:n,value:c.stringify(b)})}},get:function(a){if(N.test()===!0){if(N.pending!==!1)return N.pending===!0?K:(N.getSFCookie(a),K);e.fire(G,{status:I,data:N.data})}else N.data=null,e.fire(G,{status:J,data:N.data});return N.data},getSFCookie:function(a){N.test()?(setTimeout(function(){m.cookie(a,{key:n})},10),N.pending=!0):(N.pending=!1,N.data=null,e.fire(G,{status:J,data:N.data}))},readSFCookie:function(a){"cmd"in a&&"read-cookie"===a.cmd&&("info"in a&&d.isObjectEmpty(a.info)?e.fire(G,{status:J,data:N.data}):(N.data="value"in a?c.parse(l(a.value))||{}:{},N.pending=!1,e.fire(G,{status:I,data:N.data})))},remove:function(a){return N.set(a,""),!0}};return b.ATTRS={NAME:"Cookie",version:"0.0.1"},b.prototype={test:function(){return this.cookie.test()},registerAd:function(){var a=this,b=e.on(F,function(c){b.remove();var f={status:I},g=0,h=!1;d.isObject(c)&&c.status===I?(g=c.data||0,0!==g?g.play=parseInt(g.play)+1:(g={play:0},h=!0),g.states=g.states||{},f.firstPlay=h,f.states=g.states,a.set(g,function(){e.fire(y,f)})):(f.status=c.status,e.fire(y,f))});this.get()},saveState:function(a,b){var c=this,f=e.on(F,function(e){f.remove();var g=e.data;0===g&&(g={}),d.isObject(g.states)||(g.states={}),g.states[a]=b,c.set(g)});this.get()},updateAdEvent:function(a){var b=this,c=e.on(F,function(f){c.remove();var g=!0,h=f.data;0===h&&(h={}),d.isObject(h.events)||(h.events={}),void 0===h.events[a]?(h.events[a]=0,g=!0):(h.events[a]+=1,g=!1),b.set(h),e.fire(C,{unique:g})});this.get()},register:function(a){"key"in a&&(n=a.key,m=a.yAPI||null,this.cookie=N,null===N.pending&&(d.isObjectEmpty(o)&&(o=e.on(v,this.cookie.readSFCookie,null,this),p=e.on(t,this.cookie.readSFCookie,null,this)),this.cookie.getSFCookie(this.DEFAULT_COOKIE_NAME)))},read:function(){var a=this.cookie.get(this.DEFAULT_COOKIE_NAME);return a?a:{}},clean:function(){var a=this.read(),b=(new Date).getTime(),c=null,d=0;if("object"==typeof a)for(c in a)a[c].expires<=b?delete a[c]:d++;return a},remove:function(){var a=this.cookie,b=this.read(),c=this.DEFAULT_PATH,d=this.DEFAULT_DOMAIN,e=this.DEFAULT_EXPIRES,f=this.COOKIE_NAME,g=this.DEFAULT_COOKIE_NAME;return"object"==typeof b&&f in b&&(b[f]=null,delete b[f]),a.set(g,b,d,e,c),!0},set:function(a,b){var c=this.cookie,f=this.DEFAULT_DOMAIN,g=this.DEFAULT_EXPIRES,i=this.DEFAULT_PATH,j=this.DEFAULT_COOKIE_NAME,k=this.COOKIE_NAME,l=this.clean(f,i),m=new Date;m=m.getTime()+h,l.hasOwnProperty(k)?l[k].data=a:l[k]={expires:m,data:a};var n=e.on(H,function(a){n.remove(),d.isFunction(b)&&b(a)});return c.set(j,l,f,g,i),!0},getHelper:function(a){var b,c=this.COOKIE_NAME,f=0,g=a.status||I;d.isObject(a)&&a.status===I&&(a=a.data,d.isObject(a)&&a.hasOwnProperty(c)&&(f=a[c].data)),this.cookie_ready_event&&this.cookie_ready_event.remove(),b={status:g,data:f},e.fire(F,b)},get:function(){var a=this.read();a===K?this.cookie_ready_event=e.on(G,this.getHelper,null,this):this.getHelper({status:this.test()?I:J,data:a})},cookie:M},b}),ACT.define("Environment",["Lang","Event","Class","UA"],function(a){"use strict";function b(a){this.init(a)}var c=a.Lang,d=a.Event,e=a.Class,f=a.UA,g="allBrowsers";b.ATTRS={NAME:"Environment",version:"0.0.2",forceEnv:{},forcedFlash:{},forcedHTML5:{},forcedBackup:{},forcedMobile:{},forcedTablet:{},currentEnvPlaying:"",eventList:[]};var h=function(a){for(var b=a.split(","),c=0;c<b.length;c++)if(parseInt(b[c])===parseInt(f.browser.version))return!0;return!1},i=function(a){function b(){var b=!1;for(var c in e)if(e.hasOwnProperty(c)){var d=e[c](a[i]);if(d)return d}return b}var c=!1,d=parseInt(f.browser.version),e={testForceStart:function(a){return"string"==typeof a&&"*"===a},testForceNumber:function(a){var b=parseInt(a);return"number"==typeof b&&b===d},testForceLowserThan:function(a){return 0===a.indexOf("<=")&&d<=parseInt(a.substring(2))},testForceGreaterThan:function(a){return 0===a.indexOf(">=")&&d>=parseInt(a.substring(2))},testForceList:h};for(var i in a)if(a.hasOwnProperty(i)){if(i.toLowerCase()===g.toLowerCase())return!0;if(i.toLowerCase()!==f.browser.name.toLowerCase())continue;if(b())return c=!0}return c};return c.extend(b,e,{initializer:function(){var a=this;a.forceEnv(),a.get("eventList").push(d.on("env:envRendered",function(){d.fire("env:envRendered:Done",a.get("currentEnvPlaying"))}))},forceByListBrowsers:h,forceEnv:function(a){var b=this;f=a||f,b.set("forcedFlash",i(b.get("forceEnv").forcedFlashList)),b.set("forcedHTML5",i(b.get("forceEnv").forcedHTML5List)),b.set("forcedBackup",i(b.get("forceEnv").forcedBackupList)),b.set("forcedMobile",i(b.get("forceEnv").forcedMobileList)),b.set("forcedTablet",i(b.get("forceEnv").forcedTabletList))},destructor:function(){for(var a=this.get("eventList");a.length>0;)a.pop().remove()},checkEnv:function(){var a=this,b=f.flash,c={checkMobile:function(){return a.get("forcedMobile")&&f.isMobile&&f.isHtml5Supported?"mobile":a.get("forcedMobile")&&f.isMobile&&!f.isHtml5Supported?"backup":!a.get("forcedMobile")||f.isMobile||f.isHtml5Supported?"":"backup"},checkTablet:function(){return a.get("forcedTablet")&&f.isTablet&&f.isHtml5Supported?"tablet":a.get("forcedTablet")&&f.isTablet&&!f.isHtml5Supported?"backup":!a.get("forcedTablet")||f.isTablet||f.isHtml5Supported?"":"backup"},checkHTML5:function(){return a.get("forcedHTML5")&&f.isHtml5Supported?"html":a.get("forcedHTML5")&&!f.isHtml5Supported?"backup":""},checkFlash:function(){return a.get("forcedFlash")&&b?"flash":a.get("forcedFlash")&&!b?"backup":""},checkBackUp:function(){return a.get("forcedBackup")?"backup":""},checkDefault:function(){return f.isMobile&&f.isHtml5Supported?"mobile":f.isTablet&&f.isHtml5Supported?"tablet":f.isHtml5Supported?"html":"backup"}};for(var d in c)if(""!==c[d]()){var e=c[d]();return a.set("currentEnvPlaying",e),e}}}),b}),ACT.define("LayersList",["Lang","Dom","Event","Class","LayerStandard"],function(a){"use strict";function b(a){this.init(a)}var c=a.Event,d=a.Lang,e=a.Class,f=a.LayerStandard;b.ATTRS={NAME:"LayersList",version:"0.0.1",envToPlay:void 0,layersList:[],layersConfig:{},layersMap:{},isDarlaLayerPlaying:!1};var g=[{type:"playLayer",arguments:{to:{name:"to"}},process:function(a){var b=a.to;c.fire("layersList:open",{layerToOpen:b})}},{type:"stopLayer",arguments:{to:{name:"to"},destroy:{name:"destroy"}},process:function(a){a.destroy="true"===a.destroy||a.destroy===!0?!0:!1;var b={layerToStop:a.to,destroy:a.destroy};c.fire("layersList:stop",b)}}],h="act-ad";return d.extend(b,e,{initializer:function(a){var b=this;b.set("layersConfig",a.layersConfig),b.createLayers(),c.on("layersList:open",function(a){return b.get("isDarlaLayerPlaying")?void c.fire("complete:action"):b.isLayerPlaying(a.layerToOpen)?void c.fire("complete:action"):void b.playLayer(a.layerToOpen)}),c.on("layersList:stop",function(a){return b.isLayerPlaying(a.layerToStop)?void b.stopLayer(a):void c.fire("complete:action")}),c.on("layersList:playAllLayers",function(){b.playAllLayers()}),c.on("layersList:stopAllLayers",function(){b.stopAllLayers()}),c.on("layersList:existLayer",function(a){var d=b.checkLayerExists(a.layerName);c.fire("layersList:existLayerResult",d)}),c.on("layersList:resetInlineFrame",function(){var a={type:"contractInlineFrame"};c.fire("add:actions",a)}),c.on("layersList:getLayerPosition",function(a){b.getLayerPosition(a.layerName,a.coordinate,a.attributes)}),c.fire("register:Actions",g)},whatTypeOfLayer:function(a){var b=this;return a.base===h?"normal":b.get("sDarlaAPI")&&a.frame?"frame":"normal"},createLayers:function(a){var b=this,c=a||b.get("layersConfig");for(var d in c)"normal"===b.whatTypeOfLayer(c[d])?this.makeNormalLayer(c[d]):this.makeSdarlaLayer(c[d])},makeNormalLayer:function(a){var b=this,c=b.get("layersList"),d=b.get("layersMap");a.envToPlay=b.get("envToPlay"),a.status=b.get("status");var e=new f(a);c.push(e),b.set("layersList",c),d[a.layerName]=e,b.set("layersMap",d)},makeSdarlaLayer:function(b){var c=this,d=c.get("layersList"),e=c.get("layersMap"),f=new a.LayerSdarla({config:b,envToPlay:c.get("envToPlay"),status:c.get("status")});d.push(f),c.set("layersList",d),e[b.layerName]=f,c.set("layersMap",e)},getLayer:function(a){for(var b=this,c=b.get("layersList"),d=0;d<c.length;d++){var e=c[d];if(e.get("layerName")===a)return e}return!1},checkLayerExists:function(a){var b=this,c=!1,d=b.getLayer(a);return d&&(c=!0),c},playAllLayers:function(){for(var a=this,b=[],d=a.get("layersList"),e=0;e<d.length;e++){var f={type:"playLayer",to:d[e].get("layerName"),animate:!1};b.push(f)}c.fire("add:actions",b)},playLayer:function(a){var b=this,c=b.getLayer(a);c&&(b.playLayerAction(c),c.play())},playLayerAction:function(a){var b=this,d=c.on("layer:played",function(e){a.get("layerName")===e.layerName&&("darla"===a.getType()&&b.set("isDarlaLayerPlaying",!0),c.fire("complete:action"),a.get("config").onResize&&b.onResize(a),d.remove())})},stopAllLayers:function(){for(var a=this,b=a.get("layersList"),d=[],e=0;e<b.length;e++){var f={type:"stopLayer",to:b[e].get("layerName"),animate:!1};d.push(f)}c.fire("add:actions",d)},stopLayer:function(a){var b=this,c=b.getLayer(a.layerToStop);c&&(b.stopLayerAction(c),c.stop(a.destroy))},stopLayerAction:function(a){var b=this,d=c.on("layer:stopped",function(e){a.get("layerName")===e.layerName&&("darla"===a.getType()&&b.set("isDarlaLayerPlaying",!1),c.fire("complete:action"),d.remove())})},isLayerPlaying:function(a){var b=this,c=b.getLayer(a);return c?c.get("playing"):!1},_applyingCoordinate:function(a,b,c,d,e){var f=0;return"x"===a?(f=b[0],"r"===e.split("")[1]&&(f=b[0]-parseInt(c.get("width"))+parseInt(d.get("width")))):"y"===a&&(f=b[1],"b"===e.split("")[0]&&(f=b[1]-parseInt(c.get("height"))+parseInt(d.get("height")))),f},_calculateLayerAttributeValue:function(a,b,c){var d=this,e=b,f=b.split(":")[1],g=b.split(":")[2],h=this.get("layersMap")[f],i=this.get("layersMap")[a],j=h.currentLayerPosition();return d.get("sDarlaAPI")&&(j=[parseInt(d.get("sDarlaAPI").geom().self.l)+1,parseInt(d.get("sDarlaAPI").geom().self.t)+1]),e=this._applyingCoordinate(g,j,i,h,c)},getLayerPosition:function(a,b,d){var e=this,f={};for(var g in d)if(d.hasOwnProperty(g)){var h=d[g];h.toString().indexOf("get:")>-1&&(h=e._calculateLayerAttributeValue(a,h,b)),f[g]=h}c.fire("layersList:getLayerPosition:complete",{layerName:a,newValue:f})},onResize:function(a){var b=this,d=c.on("screen:status",function(){var e=a.get("layerName");d.remove();var f=[{type:"stopLayer",from:e,to:e,destroy:"true",animate:!1},{type:"playLayer",from:e,to:e,animate:!1}];if(b.isLayerPlaying(e)){var g="refresh"===a.get("config").onResize?f:[f[0]];c.fire("add:actions",g)}})}}),b}),ACT.define("LayerStandard",["Dom","Event","Lang","Scaffolding","Class"],function(a){"use strict";function b(a){this.init(a)}var c=a.Lang,d=a.Event,e=a.Dom,f=a.Class,g="standard",h={overlay:{position:"absolute","z-index":"1000000"},inline:{position:"relative"},anchor:{position:"fixed","z-index":"1000000"}},i=function(a){var b=parseInt(a.width)||0;return{"margin-left":-(b/2)+"px",left:"50%"}},j=function(a){var b=parseInt(a.height)||0;return{"margin-top":-(b/2)+"px",top:"50%"}},k=function(a){var b=i(a),d=j(a);return c.merge(b,d)},l={both:k,horizontal:i,vertical:j},m=function(a,b){void 0!==a.alignH?b[a.alignH]=parseInt(a.x)+"px":b.left=parseInt(a.x)+"px"},n=function(a,b){void 0!==a.alignV?b[a.alignV]=parseInt(a.y)+"px":b.top=parseInt(a.y)+"px"},o=function(a,b,d){var e=c.clone(h[a.type])||{};if(("overlay"===a.type||"anchor"===a.type)&&(b!==a.x&&d!==a.y?(e.left=parseInt(b)+"px",e.top=parseInt(d)+"px"):(m(a,e),n(a,e))),e.width=a.width,e.height=a.height,a.center&&a.center in l){var f=l[a.center](a);e=c.merge(e,f)}return e};return b.ATTRS={NAME:"LayerStandard",version:"0.0.1",config:null,layerName:"",container:null,base:"body",playing:!1,envToPlay:"html",currentDevice:"desktop",alignV:"top",alignH:"left",coordinate:"tl",contentAppended:!1,capabilityInstances:[]},c.extend(b,f,{initializer:function(a){this.set("config",a),this.set("width",a.width),this.set("height",a.height),this.createContainer()},getType:function(){return g},createContainer:function(){var a="ACT_"+this.get("layerName"),b=e.nodeCreate('<div style="display:none;" id="'+a+'"></div>').firstChild;this.set("container",b);var c=this.get("base"),d=document.getElementsByTagName(c)[0]||e.byId(c)||e.byClassName(c)[0];d&&d.appendChild(b)},addContent:function(b){var c=this;if(!b){var d=new a.Scaffolding({refObj:c.get("contentLayer"),env:c.get("envToPlay"),status:"status",layerName:c.get("layerName")}),f=d.getHtmlParsered();b=f.rawHtml,c.set("capabilityInstances",f.capabilityInstances)}e.isDomElement(b)?c.get("container").appendChild(b):c.get("container").innerHTML+=b,c.set("contentAppended",!0)},play:function(){var a=this;a.updateLayerPosition(function(){var b=o(a.get("config"),a.get("x"),a.get("y"));e.applyStyles(a.get("container"),b),a.get("contentAppended")||a.addContent(),e.display(a.get("container"),"block"),a.set("playing",!0),d.fire("layer:played",{layerName:a.get("layerName")})})},cleanCapabilityInstance:function(){for(var a=this.get("capabilityInstances");a.length>0;){var b=a.pop();b.destroy()}},stop:function(a){var b=this,c=b.get("container");a&&(b.cleanCapabilityInstance(),e.clear(c),b.set("contentAppended",!1)),e.display(c,"none"),b.set("playing",!1),d.fire("layer:stopped",{layerName:b.get("layerName")})},updateLayerPosition:function(a){var b=this,c=b.get("config"),e=b.get("layerName"),f=b.get("coordinate"),g={x:c.x,y:c.y},h=d.on("layersList:getLayerPosition:complete",function(c){c.layerName===e&&(h.remove(),b.setAttrs(c.newValue),a())});d.fire("layersList:getLayerPosition",{layerName:e,attributes:g,coordinate:f})},currentLayerPosition:function(){return e.getElementPosition(this.get("container"))}}),b}),ACT.define("Scaffolding",["Lang","Class","Dom","ContentContainer","ContentImage"],function(a){"use strict";function b(a){this.init(a)}function c(a,b,c){var d=!1,e={minWidth:function(a,b,c){return"min-width"===a&&parseInt(c.screenWidth)<parseInt(b)},maxWidth:function(a,b,c){return"max-width"===a&&parseInt(c.screenWidth)>parseInt(b)},minHeight:function(a,b,c){return"min-height"===a&&parseInt(c.screenHeight)<parseInt(b)},maxHeight:function(a,b,c){return"max-height"===a&&parseInt(c.screenHeight)>parseInt(b)}};for(var f in a[c])if(a[c].hasOwnProperty(f))for(var g in e)if(e.hasOwnProperty(g)){var h=e[g](f,a[c][f],b);h&&(d=h)}return!d}function d(a,b,d){var e=!0;for(var f in a)if(l.isObject(a[f])&&d in a[f]){e=c(a[f],b,d);break}return e}function e(a,b,c){var e=!0;return e=d(a,b,c)}function f(a,b){var c=!1;if(l.isArray(a))for(var d in a)if(a.hasOwnProperty(d)){if(l.isString(a[d])&&a[d]===b){c=!0;break}if(l.isObject(a[d])&&b in a[d]){c=!0;break}}return c}function g(a,b,c){return a.env=a.env||b,f(a.env,b)&&e(a.env,c,b)?a.orientation&&a.orientation!==c?!1:!0:!1}function h(a,b,c,d){for(var e=0;e<b.length;e++)a[b[e].id]=j(b[e],c,d),a[b[e].id]&&a.appendChild(a[b[e].id]);return a}function i(a){for(var b="",c=a.split("-"),d=0;d<c.length;d++)b+=l.capitaliseFirstLetter(c[d]);return b}function j(b,c,d){if(!g(b,c,d))return!1;var e=i(b.type),f=new a[e](b),j=f.getContent(c,d.orientation),m="";return"undefined"!==j.node&&(m=j.node),l.isObject(j.content)&&(b.content=l.merge(j.content,b.content)),k.isDomElement(m)&&l.isObject(b.content)&&(m=h(m,b.content,c,d)),o.push(f),m}var k=a.Dom,l=a.Lang,m=a.Class,n={},o=[];return b.ATTRS={NAME:"Scaffolding",version:"0.0.1"},l.extend(b,m,{initializer:function(){var a=this.parseHtml();return a},parseHtml:function(){o=[];var a=j(this.get("refObj"),this.get("env"),this.get("status"));return this.set("htmlParsed",a),n[this.get("layerName")]=o,{rawHtml:a,capabilityInstances:n[this.get("layerName")]}},getHtmlParsered:function(){return this.get("htmlParsed")?{rawHtml:this.get("htmlParsed"),capabilityInstances:n[this.get("layerName")]}:this.parseHtml()}}),b}),ACT.define("Screen",["Event","Lang","Dom","Class"],function(a){"use strict";function b(){var a=i.getWindowSize();return a.width}function c(){var a=i.getWindowSize();return a.height}function d(){var a=window.orientation;return 90===a?"L":"P"}function e(a,b){return b>a?"P":"L"}function f(a){this.init(a)}var g=a.Lang,h=a.Event,i=a.Dom,j=a.Class;return f.ATTRS={NAME:"Screen",version:"0.0.1",sDarlaAPI:void 0,status:{screenWidth:0,screenHeight:0,orientation:"P"}},g.extend(f,j,{initializer:function(){var a=this;h.on("screen:getStatus",function(){h.fire("screen:getStatus:Done",a.getStatus())}),a.setStatus()},getStatus:function(){var a=this;return a.setStatus(),a.get("status")},setStatus:function(){var a=this,b=h.on("sframe:darlaCheck:complete",function(c){b.remove(),null!==c.yAPI?(a.set("sDarlaAPI",c.yAPI),a.setStatusSF(),a.startListenScreenSF()):(a.setStatusStandard(),a.startListenScreenStandard())});h.fire("sframe:darlaCheck")},setStatusStandard:function(){var a=this,e={screenWidth:b(),screenHeight:c(),orientation:d()};a.set("status",e)},setStatusSF:function(){var a=this,b=a.get("sDarlaAPI").geom().win.w,c=a.get("sDarlaAPI").geom().win.h,d={screenWidth:b,screenHeight:c,orientation:e(b,c)};a.set("status",d)},startListenScreenStandard:function(){var a,d=this;h.on("resize",function(){(b()!==d.get("status").screenWidth||c()!==d.get("status").screeHeight)&&(a&&clearTimeout(a),a=setTimeout(function(){h.fire("screen:status",d.get("status"))},500),d.setStatusStandard())},window)},startListenScreenSF:function(){var a=this;h.on("secureDarla:geom-update",function(){var b=a.get("sDarlaAPI").geom();(parseInt(a.get("status").screenWidth)!==parseInt(b.win.w)||parseInt(a.get("status").screenHeight)!==parseInt(b.win.h))&&(a.setStatusSF(),h.fire("screen:status",a.get("status")))})}}),f}),ACT.define("SecureDarla",["Lang","Event","Json"],function(a){"use strict";function b(a,b){return e.merge(this.config,a.template),this.yAPI=g,this.secureDarla=null===this.yAPI?!1:!0,b&&(b.isSafeFrame=e.bind(this,null,this.isSafeFrame)),this.register(),this}function c(a,b,c,d){return b===d&&a===c?!0:!1}var d=a.Event,e=a.Lang,f=(a.Debug,a.Json,window.Y||null),g=f&&f.SandBox&&f.SandBox.vendor?f.SandBox.vendor:null,h="secureDarla:",i="register",j="register-update",k="expanded",l="collapsed",m="resize-to",n="sframe:darlaCheck",o="sframe:darlaCheck:complete",p="register:Actions",q="complete:action",r="sframe:msg",s="sframe:msg:complete",t="sframe:resize-to",u="sframe:resize-to:complete",v="sframe:expand",w="sframe:expand:complete",x="sframe:collapse",y="sframe:collapse:complete",z="sframe:nosupport",A=[{type:"darlaMessage",arguments:{msg:{test:function(a){return e.isString(a)}}},process:function(a){if(g){var b=d.on(s,function(){d.fire(q),b.remove()});d.fire(r,a)}else d.fire(q)}},{type:"expandInlineFrame",arguments:{top:{test:function(a){return e.isNumber(a)&&a>=0}},right:{test:function(a){return e.isNumber(a)&&a>=0}},bottom:{test:function(a){return e.isNumber(a)&&a>=0}},left:{test:function(a){return e.isNumber(a)&&a>=0}},push:{test:function(a){return"boolean"==typeof a}}},process:function(a){if(!g)return void d.fire(q);var b=d.on(w,function(){d.fire(q),b.remove()});d.fire(v,a)}},{type:"contractInlineFrame",arguments:{},process:function(){if(!g)return void d.fire(q);var a=d.on(y,function(){d.fire(q),a.remove()});d.fire(x)}},{type:"resizeInlineFrame",arguments:{width:{name:"width",test:function(){return!0}},height:{name:"height",test:function(){return!0}},animationLength:{name:"animationLength",test:function(a){return e.isNumber(a)}}},process:function(a){if(!g)return void d.fire(q);var b=d.on(u,function(){d.fire(q),b.remove()});d.fire(t,a)}}];return b.ATTRS={NAME:"SecureDarla",version:"0.0.1"},b.prototype={config:{width:300,height:250},secureDarla:void 0,isInlineExpanded:!1,register:function(){var a=this.config;!0===this.isSafeFrame()?(this.yAPI.register(a.width,a.height,e.bind(this,null,this.notify)),this.initializeEvents(),d.fire(p,A)):d.fire(z,{error:"Not in SafeFrame"}),d.on(n,this.getAPI,null,this)},getAPI:function(){var a={key:null,yAPI:null};return this.isSafeFrame()&&(a={key:this.key(),yAPI:g}),d.fire(o,a),a},initializeEvents:function(){var a=this;d.on(r,function(b){a.msg(b)}),d.on(t,function(b){a.resizeTo(b)}),d.on(v,function(b){a.expand(b)}),d.on(x,function(){a.collapse()})},msg:function(a){a.msg&&e.isString(a.msg)&&(d.fire(s),g.msg(a.msg))},resizeTo:function(a){var b=this,e=g.geom().self.w,f=g.geom().self.h,i=parseInt(a.width)||0,j=parseInt(a.height)||0,k=parseInt(a.animationLength)||0;if(c(e,f,i,j))return void d.fire(u);var l=d.on(h+m,function(){d.fire(u),l.remove()});g.resizeTo({w:i,h:j,key:b.key(),animTime:k})},expand:function(a){var b=this;if(b.isInlineExpanded)return void d.fire(w);var c=parseInt(a.top)||0,e=parseInt(a.right)||0,f=parseInt(a.bottom)||0,i=parseInt(a.left)||0,j=a.push||!1;if(0>c||0>e||0>f||0>i)return void d.fire(w);var l=d.on(h+k,function(){b.isInlineExpanded=!0,d.fire(w),l.remove()});g.expand({t:c,r:e,b:f,l:i,push:j})},collapse:function(){var a=this;if(!a.isInlineExpanded)return void d.fire(y);var b=d.on(h+l,function(){a.isInlineExpanded=!1,d.fire(y),b.remove()});g.collapse()},key:function(){return this.config.sdKey},isSafeFrame:function(){return void 0===this.secureDarla?!1:this.secureDarla},notify:function(a,b){(i===a||j===a)&&(this.config.sdKey=b.key),e.isObject(b)&&(b.yAPI=g,b.key=b.key||this.key()),d.fire(h+a,b)}},b}),ACT.define("StandardAd",["Lang","Event","Class","Environment","LayersList","Screen"],function(a){
"use strict";function b(a){this.init(a)}var c=a.Lang,d=a.Event,e=a.Class,f=a.Environment,g=a.LayersList,h=a.Screen,i="standardAd:checkActionCondition",j=[{type:"replayAd",arguments:{},process:function(){d.fire("adProduct:stopCounter"),d.fire("layerList:resetInlineFrame"),d.fire("layerList:stopAllLayers"),d.fire("adProduct:playAd",{forceFirstPlay:!0}),d.fire("complete:action")}},{type:"stopProcesses",arguments:{},process:function(){d.fire("adProduct:stopCounter"),d.fire("complete:action")}}],k=[];return b.ATTRS={NAME:"StandardAd",version:"0.0.1",baseConfig:"",tracking:"",format:"",sDarlaAPI:void 0,sDarlaKey:void 0,firstPlay:!0,adEnvToPlay:void 0,status:{},states:[],isCookieAvailable:!0},c.extend(b,e,{initializer:function(a){"parent"in a&&c.mix(this,a.parent),this.setAttrs(this.config);var b=this;d.on("localRegister:registerAd:complete",function(a){0!==a.status?b.set("isCookieAvailable",!1):(b.set("firstPlay",a.firstPlay),b.set("states",a.states)),d.on("adProduct:playAd",function(a){b.onReady(a.forceFirstPlay)}),d.on("adProduct:stopCounter",function(){b.stopCounter()}),d.on("adProduct:getDarlaAPI",function(){d.fire("adProduct:getDarlaAPI:done",{sDarlaAPI:b.get("sDarlaAPI")})}),b.startScreen(),b.startLayers(),b.onReady(!1),d.fire("register:Actions",j)}),b.initializeEvents(),b.startAd()},initializeEvents:function(){var a=this;d.on(i,function(b){b.callback(a.isExecutable(b.actionConfig))})},startAd:function(){var a=this;a.startEnv(),d.fire("localRegister:registerAd",{adId:a.get("adId")})},startEnv:function(){var a;if(this.hasOwnProperty("currentEnv"))a=this.currentEnv;else{var b=new f({forceEnv:this.get("baseConfig").forceEnv});a=b.checkEnv()}this.set("adEnvToPlay",a)},startScreen:function(){var a={sDarlaAPI:this.get("sDarlaAPI")},b=new h(a);this.set("status",b.get("status"))},startLayers:function(a){var b=this,c=this.get("format").layers||a,d=new g({layersConfig:c,sDarlaAPI:b.get("sDarlaAPI"),envToPlay:b.get("adEnvToPlay"),status:b.get("status")});this.set("layersRef",d)},onReady:function(a){var b,c=this,d=a||c.get("firstPlay")?"firstPlay":"cappedPlay";c.get("format").flow&&(b=c.executeFlow(c.get("format").flow,d),b||"cappedPlay"!==d||c.onReady(!0))},executeFlow:function(a,b){for(var c=this,d=!1,e=0;e<a.length;e++)d=c.executeFlowActions(a[e],b)||d;return d},executeFlowActions:function(a,b){var e=this;return a.eventType===b&&e.isExecutable(a)?(c.objHasKey(a,"timeTo")&&""!==a.timeTo?e.addCounterTrigger(a):d.fire("add:actions",a.actions),!0):!1},isExecutable:function(a){var b=!0;if(!c.isObject(a.doIf)||c.isObjectEmpty(a.doIf))return b;var d=a.doIf,e={state:c.bind(this,null,this.isStateMatch),cookie:c.bind(this,null,this.isCookieMatch),date:c.bind(this,null,this.isDateMatch)};for(var f in d)if(c.objHasKey(d,f)&&c.objHasKey(e,f)&&(b=e[f](d[f]),b===!1))break;return b},isStateMatch:function(a){var b=this.get("states");for(var c in b)if(a.id!==c||a.value!==b[c])return!1;return!0},isCookieMatch:function(a){return a===this.get("isCookieAvailable")},isDateMatch:function(a){var b=!0,d=Date.now();if(!c.isObject(a))return!0;if(c.objHasKey(a,"from")){var e=new Date(a.from);b=b&&(d-e)/1e3>=0}if(c.objHasKey(a,"to")){var f=new Date(a.to);b=b&&(f-d)/1e3>=0}return b},addCounterTrigger:function(a){var b=1e3*parseInt(a.timeTo),c=a.actions,e=setInterval(function(){window.clearInterval(e),d.fire("add:actions",c)},b);k.push(e)},stopCounter:function(){for(var a=0;a<k.length;a++)window.clearInterval(k[a])}}),b}),ACT.define("Tracking",["Util","Lang","Event"],function(a){"use strict";function b(a){var b=a.match(/::(.*?)::/g);return b}function c(a,d){if(void 0!==a&&null!==a){var f=b(a);if(e.isArray(f)){var g=f[0].substr(2,f[0].length-4);if(o.hasOwnProperty(g))o[g].process(a,f[0],function(b){b=b.replace(f[0],""),a=c(b,d)});else{var h=a.replace(new RegExp(f[0],"g"),"");a=c(h,d)}}else d(a)}else d(a)}function d(a,b){var c=a||null;this.config={z1:"",rB:"",beap:[],adid:"",unique:"u_"},null!==c&&(e.merge(this.config,c),this.config.beap=this.config.z1.split("{beap_client_event}")),b&&(b.interaction_track=e.bind(this,null,this.interaction_track),b.redirect_track=e.bind(this,null,this.redirect_track),b.track=e.bind(this,null,this.track)),this.initializeEvents(),g.fire("register:Actions",n)}var e=a.Lang,f=a.Util,g=a.Event,h="tracking:track",i="tracking:track:complete",j="tracking:registerRedirect",k="tracking:registerRedirect:complete",l="env:envRendered",m="env:envRendered:Done",n=[{type:"track",arguments:{label:{name:"label",test:function(a){var b=!0;return a?"string"!=typeof a?b=!1:a.split("_")<4&&(b=!1):b=!1,b}}},process:function(a){var b=g.on(i,function(){b.remove(),g.fire("complete:action")});g.fire(h,{label:a.label})}}],o={envRendered:{process:function(a,b,c){var d=g.on(m,function(e){d.remove(),c(a.replace(new RegExp(b,"g"),e))});g.fire(l)}}};return d.ATTRS={NAME:"Tracking",version:"0.0.1"},d.prototype={initializeEvents:function(){var a=this;g.on(j,function(b){var c=b.clickTagName||"clickTAG";g.fire(k,{link:a.redirect_track(c,f.hashString(c),b.clickTag)||b.clickTag})}),g.on(h,function(b){a.track(b.label,null,null,function(){g.fire(i)})})},saveEventLabel:function(a,b,c){if(a===!0){var d=g.on("localRegister:updateAdEvent:complete",function(a){d.remove();var e=a.unique?"u_":"nu_";c(e,b)});g.fire("localRegister:updateAdEvent",{eventName:b})}else c("",b)},redirect_track:function(a,b,c){var d=this.config,e="",f=d.rB.split("))/");return!c||c.length<5?e:(f[0]&&f[1]&&(e=f[0]+"))&id="+a+"&r="+b+"/"+f[1]+c),e)},interaction_track:function(a){var b=this.config,c=b.beap,d=Math.random(),e=a||"",g=f.hashString(e),h="";return c[0]&&c[1]&&e.length>4?(h=c[0]+"seq$"+g+",label$"+e+",type$click,time$"+d+c[1],f.pixelTrack(h),!0):!1},track:function(a,b,d,e){var f=this;c(a,function(a){f.saveEventLabel(f.config.trackUnique,a,function(a,c){var g,h;h=null!==c?a+c:c,g=d?f.redirect_track(h,b,d):f.interaction_track(h),e(g)})})}},d}),ACT.define("AdobeEdgeBridge",["Event","Lang"],function(a){"use strict";function b(){return b.prototype._singleton?b.prototype._singleton:void(b.prototype._singleton=this)}function c(a,b,c,d){g.fire("ContentAdobeEdge:actions",{compositionId:a,eventType:b,action_name:c,special:d})}function d(a){var b=null;return AdobeEdge&&AdobeEdge.hasOwnProperty("getComposition")&&(b=AdobeEdge.getComposition(a)),b}function e(a,b){var c,d,e;if(a&&a.hasOwnProperty("getSymbols")&&(c=a.getSymbols(),f.isArray(c)))for(e=c.length,d=0;e>d;d++)f.isFunction(c[d][b])&&c[d][b](0)}var f=a.Lang,g=a.Event;return b.ATTRS={NAME:"AdobeEdgeBridge",version:"1.0.0"},b.prototype={constructor:b,trackR:c,trackN:c,getComposition:d,stopComposition:function(a){var b=d(a);e(b,"stop")},replayComposition:function(a){var b=d(a);e(b,"play")}},new b}),ACT.define("Animation",["Dom","Lang"],function(a){"use strict";function b(){return b.prototype._singleton?b.prototype._singleton:void(b.prototype._singleton=this)}var c=a.Dom,d=a.Lang;b.ATTRS={NAME:"Animation",version:"0.0.1"};var e={top:"px",bottom:"px",left:"px",right:"px",width:"px",height:"px",marginTop:"px",marginBottom:"px",marginLeft:"px",marginRight:"px",paddingTop:"px",paddingBottom:"px",paddingLeft:"px",paddingRight:"px","default":""},f=function(a,b,c,f,h,i,j,k,l){var m=e.hasOwnProperty(b)?e[b]:e["default"];c=parseInt(c,10)||0,f=parseInt(f,10)||0,d.isFunction(i)&&i(),g({duration:h||1e3,delta:function(a){return a},step:function(d){var e=(f-c)*d+c;a.style[b]=e+m},onComplete:function(a){d.isFunction(j)&&k===l&&j(a)}})},g=function(a){var b=window.requestAnimationFrame,c=new Date,d=function(){var f=new Date-c,g=f/a.duration;g>1&&(g=1);var h=a.delta(g);a.step(h),1===g?(b||clearInterval(e),a.onComplete()):b&&b(d)};if(b)b(d);else var e=setInterval(d,10)};return b.prototype={constructor:b,anim:function(a,b,e,g,h,i,j){if(d.isString(a)&&(a=c.byId(a)),!d.isObject(e)||!e){e=b,b={};for(var k in e)e.hasOwnProperty(k)&&(b[k]=a.style[k])}if(d.isObject(b))var l=setTimeout(function(){var c=1,h=d.size(b);for(var k in b)b.hasOwnProperty(k)&&(f(a,k,b[k],e[k],g,i,j,h,c),c++);clearTimeout(l)},h||0)}},new b}),ACT.define("Capability",["Dom","Lang"],function(a){"use strict";function b(){}var c=a.Dom,d=a.Lang;return b.ATTRS={NAME:"Capability",version:"0.0.1"},b.prototype={constructor:b,applyNodeConfig:function(a,b){return d.isString(b.id)&&""!==b.id&&a.setAttribute("id",b.id),d.isString(b.classNode)&&""!==b.classNode&&(a.className+=" "+b.classNode),d.isObjectEmpty(b.css)||c.applyStyles(a,b.css),a},resize:function(a,b){var d=this.get("node"),e=d.parentNode,f=d.offsetWidth,g=d.offsetHeight;if(e&&"parent"===b.resize.sizeFrom?(f=e.offsetWidth,g=e.offsetHeight):a&&"root"===b.resize.sizeFrom&&(f=a.screenWidth,g=a.screenHeight),b.resize.ratio){var h=b.resize.ratio,i=parseInt(h.split(":")[0]),j=parseInt(h.split(":")[1]);g=Math.round(f*j/i)}c.applyStyles(d,{width:"number"==typeof f||-1===f.indexOf("px")?f+"px":f,height:"number"==typeof g||-1===g.indexOf("px")?g+"px":g})}},b}),ACT.define("Class",["Json"],function(a){"use strict";function b(){}var c=a.Json;return b.ATTRS={NAME:"Class",version:"0.0.1"},b.prototype={constructor:b,init:function(a){this.ATTRS=c.parse(c.stringify(this.constructor.superclass.ATTRS)),this.setAttrs(a),this.initializer(a)},initializer:function(){},destructor:function(){},get:function(a){return this.ATTRS[a]},set:function(a,b){this.ATTRS[a]=b},destroy:function(){this.destructor()},setAttrs:function(a){for(var b in a)a.hasOwnProperty(b)&&this.set(b,a[b])}},b}),ACT.define("Dom",["Lang","UA"],function(a){"use strict";function b(){return b.prototype._singleton?b.prototype._singleton:void(b.prototype._singleton=this)}var c=a.UA;return b.ATTRS={NAME:"Dom",version:"0.0.1"},b.prototype={byId:function(a){return document.getElementById(a)},viewportOffset:function(a){for(var b="string"==typeof a?this.byId(a):a,c=b.offsetTop||0,d=b.offsetLeft||0;b!==document.body;)c+=b.offsetTop||0,d+=b.offsetLeft||0,b=b.offsetParent;return{left:d,top:c}},hasClass:function(b,c){var d=a.Dom;if(d.isDomElement(b)){var e=" ",f=b.className.toString().replace(/\s+/g,e);return c&&(e+f+e).indexOf(e+c+e)>-1}return!1},byClassName:function(b,c){var d,e,f,g=c||document,h=[],i=a.Dom;if(g.getElementsByClassName)h=g.getElementsByClassName(b);else if(g&&g.getElementsByTagName){if(e=g.getElementsByTagName("*"),!e)return[];for(d=0,f=e.length;f>d;++d)i.hasClass(e[d],b)&&(h[h.length]=e[d])}return h},addClass:function(b,c){var d=[],e=a.Dom;return b&&c&&!e.hasClass(b,c)?(b.className&&(d=b.className.split(" ")),d.push(c),b.className=d.join(" "),!0):!1},removeClass:function(b,c){var d,e,f=[],g=a.Dom;if(g.hasClass(b,c)){for(d=b.className.split(" "),e=0;e<d.length;e++)d[e]!==c&&f.push(d[e]);return b.className=f.join(" "),!0}return!1},nodeCreate:function(a){var b,c=document.createElement("DIV"),d=document.createDocumentFragment();for(c.innerHTML=a,b=c.childNodes;b[0];)d.appendChild(b[0].parentNode.removeChild(b[0]));return d},getParent:function(b,c){var d=a.Dom;return d.hasClass(c,b)?c:c.parentNode?d.getParent(b,c.parentNode):null},clear:function(b){var c=a.Dom;c.isDomElement(b)&&(b.innerHTML="")},visible:function(b,c){var d=a.Dom;d.isDomElement(b)&&(b.style.visibility=c?"visible":"hidden")},display:function(b,c){var d=a.Dom;d.isDomElement(b)&&(b.style.display=c?c:"")},addCSSRule:function(a,b,c,d){a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d)},createStylesheet:function(){var a,b,d=c.browser;return"MSIE"===d.name&&d.version>=6&&d.version<=10?a=document.createStyleSheet():(a=document.createElement("style"),b=document.getElementsByTagName("head")[0],a.appendChild(document.createTextNode("")),b.appendChild(a),a.sheet?a.sheet:a.styleSheet)},getWindowSize:function(){var a,b,d=window,e=document,f=e.documentElement,g=e.getElementsByTagName("body")[0],h=c.os.name;return a=d.innerWidth?d.innerWidth:0,b=d.innerHeight?d.innerHeight:0,"ios"!==h&&(a=f.clientWidth&&f.clientWidth>a?f.clientWidth:a,b=f.clientHeight&&f.clientHeight>b?f.clientHeight:b,a&&b||(a=g.clientWidth&&g.clientWidth>a?g.clientWidth:a,b=g.clientHeight&&g.clientHeight>b?g.clientHeight:b)),{width:a,height:b}},getElementPosition:function(a){for(var b=0,c=0;a&&a!==document.body;)b+=a.offsetLeft-a.scrollLeft+a.clientLeft,c+=a.offsetTop-a.scrollTop+a.clientTop,a=a.offsetParent;return[b,c]},applyStyles:function(a,b){for(var c in b)c&&(a.style[c]=b[c])},isDomElement:function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}},new b}),ACT.define("Event",["Lang"],function(a){"use strict";function b(){return b.prototype._singleton?b.prototype._singleton:void(b.prototype._singleton=this)}function c(a,b){b=b||document.createElement(f[a]||"div"),a="on"+a;var c=a in b;return c||(b.setAttribute||(b=document.createElement("div")),b.setAttribute&&b.removeAttribute&&(b.setAttribute(a,""),c="function"==typeof b[a],"undefined"!=typeof b[a]&&(b[a]=void 0),b.removeAttribute(a))),b=null,c}function d(a,b,d,f){var g=b;return f&&(g=e.bind(f,[],b)),d&&c(a,d)?window.addEventListener?d.addEventListener(a,g,0):window.attachEvent&&d.attachEvent("on"+a,g):d=null,{element:d,fn:b,scope:f,event:a,bound:g}}var e=a.Lang,f={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},g={};return b.ATTRS={NAME:"event",version:"0.0.1"},b.prototype={hOP:function(a){return g.hasOwnProperty(a)},on:function(a,b,c,e){var f,h,i=this;return this.hOP.call(g,a)||(g[a]=[]),f=d(a,b,c,e),h=g[a].push(f)-1,{remove:function(){g[a][h]&&(g[a][h].element?i.removeListener(a,b,c):delete g[a][h])}}},addCSSListener:function(a,b,c,d){this.on(a.toLowerCase(),b,c,d),this.on("webkit"+a,b,c,d),this.on("moz"+a,b,c,d),this.on("ms"+a,b,c,d),this.on("o"+a,b,c,d)},removeListenerHelper:function(a,b,c){window.removeEventListener?c.removeEventListener(a,b,0):window.detachEvent&&c.detachEvent("on"+a,b)},removeListener:function(a,b,c){var d,e=g[a]||[],f=[];for(d=0;d<e.length;d++)!e[d]||e[d].element!==c||e[d].fn!==b&&e[d].bound!==b?f.push(e[d]):(this.removeListenerHelper(a,e[d].bound,c),e[d]=null);g[a]=f},ready:function(){var a=function(a){e(a),i()},b=window.document,c=!1,d=[],e=function(a){"function"==typeof a&&d.push(a)},f=function(){for(;d.length;)d.shift()();e=function(a){a()}},g=function(){b.addEventListener?b.removeEventListener("DOMContentLoaded",g,!1):b.detachEvent("onreadystatechange",g),h()},h=function(){if(!a.isReady){if(!b.body)return setTimeout(h,1);a.isReady=!0,f()}},i=function(){var a=!1;if(!c)if(c=!0,"complete"===b.readyState&&h(),b.addEventListener)b.addEventListener("DOMContentLoaded",g,!1),window.addEventListener("load",g,!1);else if(b.attachEvent){b.attachEvent("onreadystatechange",g),window.attachEvent("onload",g);try{a=null===window.frameElement}catch(d){}b.documentElement.doScroll&&a&&j()}},j=function(){if(!a.isReady){try{b.documentElement.doScroll("left")}catch(c){return void setTimeout(j,1)}h()}};return a.isReady=!1,a}(),purgeListeners:function(a){var b,c,d;for(c in g)if(g.hasOwnProperty(c)){for(d=[],b=0;b<g[c].length;b++)g[c][b].element===a?(this.removeListenerHelper(c,g[c][b].bound,a),g[c][b]=null):d.push(g[c][b]);g[c]=d}},fire:function(a,b){var c,d=this,f=b?b:{};if(d.hOP(a))for(var h in g[a])if(g[a].hasOwnProperty(h)){var i=g[a][h];c=f.scope?f.scope:i.scope,c===i.scope&&e.isFunction(i.fn)&&(c?i.fn.call(c,b):i.fn(b))}},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},constructor:b},new b}),ACT.define("Flash",["Dom","Lang","UA"],function(a){"use strict";function b(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&h.hasOwnProperty(c)&&b.push(g.ie>0?"<param name="+c+' value="'+a[c]+'">':c+'="'+a[c]+'"');return b.join(" ")}function c(a){var c="",d=e.byId(a.position)||null,f=b(a);return c=g.ie>0?'<object style="'+a.style+'" type="'+a.type+'" data="'+a.src+'" alt="'+a.alt+'" classid="'+a.clsid+'" id="'+a.id+'" width="'+a.width+'" height="'+a.height+'">'+f+"</object>":'<embed style="'+a.style+'" alt="'+a.alt+'" name="'+a.id+'_name" id="'+a.id+'" '+f+"></embed>",null!==d?(d.innerHTML=c,d.firstChild):c}function d(){return d.prototype._singleton?d.prototype._singleton:void(d.prototype._singleton=this)}var e=a.Dom,f=a.Lang,g=a.UA,h={metadata:"",allowFullScreen:"",allowNetworking:"",allowScriptAccess:"",fullScreenAspectRatio:"",flashvars:"",base:"",bgcolor:"",loop:"",menu:"",play:"",quality:"",salign:"",align:"",scale:"",wmode:"",src:"",width:"",height:"",movie:""};return d.ATTRS={NAME:"flash",version:"0.0.1"},d.prototype={objectEmbed:function(a){var b=f.merge({width:"100%",height:"100%",src:"",id:"swf_"+Math.random(),position:null,wmode:"transparent",alt:"",quality:"high",menu:"false",play:"true",flashvars:{},allowFullScreen:"true",allowScriptAccess:"always",type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash",clsid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",style:"display:block"},a),d=g.ie;return f.isObject(b.flashvars)&&(b.flashvars=f.createHash(b.flashvars)),0!==d&&(b.movie=b.src),c(b)},injectFlashVersion:function(){for(var a=g.flash,b=4,c=["jsenabled","flash-"+a],d=g.html;a>b;)a--,c.push("flash-gt"+a);f.isObject(d)&&(d.className+=c.join(" "))}},new d}),ACT.define("IO",["Event","Lang","Class"],function(a){"use strict";function b(a){this.init(a)}var c=a.Lang,d=a.Event,e=a.Class,f="IO:load:done";return b.ATTRS={NAME:"IO",inputPath:"",version:"0.0.1"},c.extend(b,e,{initializer:function(a){this.load(a.dataFeed)},load:function(a){var b=document.createElement("script"),c=document.getElementsByTagName("head")[0];b.readyState?b.onreadystatechange=function(){("loaded"===b.readyState||"complete"===b.readyState)&&(b.onreadystatechange=null,d.fire(f,getFeed()))}:b.onload=function(){d.fire(f,getFeed())},b.type="text/javascript",b.src=a,c.appendChild(b)}}),b}),ACT.define("Json",[],function(){"use strict";function a(a){return h.lastIndex=0,h.test(a)?'"'+a.replace(h,function(a){var b=i[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(c,d){var h,i,j,k,l,m=e,n=d[c];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(c)),"function"==typeof g&&(n=g.call(d,c,n)),typeof n){case"string":return a(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(k=n.length,h=0;k>h;h+=1)l[h]=b(h,n)||"null";return j=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(g&&"object"==typeof g)for(k=g.length,h=0;k>h;h+=1)i=g[h],"string"==typeof i&&(j=b(i,n),j&&l.push(a(i)+(e?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=b(i,n),j&&l.push(a(i)+(e?": ":":")+j));return j=0===l.length?"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+m+"}":"{"+l.join(",")+"}",e=m,j}}function c(a,c,d){if(window.JSON&&JSON&&JSON.stringify)return JSON.stringify(a);var h;if(e="",f="","number"==typeof d)for(h=0;d>h;h+=1)f+=" ";else"string"==typeof d&&(f=d);return g=c,b("",{"":a})}function d(){return d.prototype._singleton?d.prototype._singleton:void(d.prototype._singleton=this)}var e,f,g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),c?(b=c.charAt(a),a+=1,b):""},h=function(){var a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,isFinite(a)?a:void f("Bad number")},i=function(){var a,c,d,h="";if('"'===b)for(;g();){if('"'===b)return g(),h;if("\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d)}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),a;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=d(),j(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k()}},function(e){if(window.JSON&&JSON&&JSON.parse)return JSON.parse(e);var g;return c=e,a=0,b=" ",g=d(),j(),b&&f("Syntax error"),g}}();return d.ATTRS={NAME:"JSON",version:"0.0.1"},d.prototype={stringify:c,parse:j},new d}),ACT.define("Lang",[],function(){"use strict";function a(){return a.prototype._singleton?a.prototype._singleton:void(a.prototype._singleton=this)}return a.ATTRS={NAME:"Lang",version:"0.0.1"},a.prototype={bind:function(a,b,c){var d;return d=Function.prototype.bind?c.bind(a):function(d){b?c.apply(a,[d,b]):c.apply(a,arguments)}},mix:function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},size:function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},merge:function(a,b){var c,d,e,f=!1;for(var g in b)if(b.hasOwnProperty(g)){if(c=a[g],d=b[g],a[g]===d)continue;f=this.isArray(d),d&&!this.isFunction(d)&&(this.isObject(d)||f)?(f?(f=!1,e=c&&this.isArray(c)?c:[],d=d.concat(e),e=[]):e=c&&this.isObject(c)?c:{},a[g]=this.merge(e,d)):void 0!==d&&(a[g]=d)}return a},delay:function(a,b,c,d){var e=this.bind(c,d,a),f=setTimeout(e,b);return f},createHash:function(a){var b,c=[],d=encodeURIComponent;for(b in a)a.hasOwnProperty(b)&&c.push(d(b)+"="+d(String(a[b])));return c.join("&")},parseHash:function(a){var b,c=null,d={},e=decodeURIComponent,f=0,g=0;if("string"==typeof a)for(b=a.split("&"),g=b.length,f=0;g>f;f++)c=b[f].split("="),d[e(c[0])]=e(c[1]);return d},isObject:function(a){return"object"==typeof a||"function"==typeof a},isObjectEmpty:function(a){if(null===a||void 0===a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},isFunction:function(a){return"function"==typeof a},objHasKey:function(a,b){return this.isObject(a)&&a.hasOwnProperty(b)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},clone:function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},arrayIndexOf:function(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);var d=a.length;for(c=+c||0,c=(c>0||-1)*Math.floor(Math.abs(c)),0>c&&(c+=d,0>c&&(c=0));d>c;++c)if(c in a&&a[c]===b)return c;return-1},arrayDedupe:function(a){var b,c,d,e={},f=[];for(b=0,d=a.length;d>b;++b)c=a[b],Object.prototype.hasOwnProperty.call(e,c)||(e[c]=1,f.push(c));return f},numberific:function(a){var b=a.match(/[0-9]+.?[0-9]*/);return b&&b[0]?parseFloat(b[0]):0},capitaliseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},mixin:function(a,b){void 0!==b.prototype?this.merge(a,b.prototype):this.merge(a,b.constructor.prototype)},create:function(a){function b(){}return b.prototype=a,new b},extend:function(a,b,c){var d=a.prototype,e={};if(this.isArray(b))for(var f in b)b.hasOwnProperty(f)&&(this.mixin(d,b[f]),this.merge(e,b[f].ATTRS));else this.mixin(d,b),this.merge(e,b.ATTRS);return a.prototype=this.create(this.merge(d,c)),a.prototype.constructor=a,a.superclass=d,a.superclass.ATTRS=this.merge(e,a.ATTRS),a}},new a}),ACT.define("SWFBridge",["Lang"],function(a){"use strict";function b(){return b.prototype._singleton?b.prototype._singleton:void(b.prototype._singleton=this)}var c=a.Lang;return b.ATTRS={NAME:"SWFBridge",version:"0.0.1"},b.prototype={constructor:b,swfAction:function(){},callSWF:function(a,b){if(b in a&&c.isFunction(a[b])){var d=Array.prototype.slice,e=arguments.length>2?d.call(arguments,2):[];a[b].apply(a,e)}},register:function(a,b){var d=this;this[b]={swfAction:function(e){e&&e in a&&c.isFunction(a[e])?a[e].apply(a,[b,arguments[2]]):d.swfAction.apply(d,[b,arguments])}}},unregister:function(a){a in this&&delete this[a]}},new b}),ACT.define("UA",["Lang"],function(a){"use strict";function b(a){var b,c="other",d=0,e=a||navigator.userAgent.toString();return/windows|win32/i.test(e)&&!/windows phone/i.test(e)?c="windows":/macintosh|mac_powerpc/i.test(e)?c="macintosh":/iphone|ipod|ipad/i.test(e)?(c="ios",b=/CPU OS ([0-9_]+)/i.exec(e),b&&b[1]&&(d=b[1].replace("_","."))):/windows phone/i.test(e)?(c="Windows Phone",b=/Windows Phone [OS]*\s*([0-9.]+)/.exec(e),b&&b[1]&&(d=b[1])):/android/i.test(e)?(c="android",b=/Android\s*([0-9.]+)/.exec(e),b&&b[1]&&(d=b[1])):/linux/i.test(e)?c="linux":/webOS/i.test(e)?c="webOS":/BlackBerry/i.test(e)?c="BlackBerry":/Opera Mini/i.test(e)&&(c="Opera Mini"),{name:c,version:parseInt(d)}}function c(a){var b=a||navigator.userAgent.toLowerCase(),c=/iphone|ipod|mobile|android|blackberry|opera|mini|windows phone|windows\sce|palm|smartphone|iemobile/i.test(b);return/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(b)?!1:c}function d(a){var b=a||navigator.userAgent.toLowerCase(),c=/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(b);return c}function e(){var a="0",b=!1,c=null;if(navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"])a=navigator.plugins["Shockwave Flash"].description,void 0!==typeof a&&(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1").replace(" ","."));else if(window.ActiveXObject){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(d){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),c.AllowScriptAccess="always"}catch(e){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){b=!0}}}if(null!==c&&"object"==typeof c?(a=c.GetVariable("$version"),void 0!==typeof a&&(a=a.replace(/^\S+\s+(.*)$/,"$1").replace(/,/g,"."))):b=!0,b)return 0}return parseInt(a.split(".")[0])}function f(a,b){var c=0;if(n.isString(a)){var d=a.match(b);d&&(d[1]||d[2])&&(c=n.numberific(d[1]||d[2]))}return c}function g(){var a=document.createElement("canvas"),b=!(!a.getContext||!a.getContext("2d"));return b}function h(){var a=document.createElement("div"),b="draggable"in a||"ondragstart"in a&&"ondrop"in a;return b}function i(){var a=document.createElement("canvas"),b=!(!B||"function"!=typeof a.getContext("2d").fillText);return b}function j(){var a=document.createElement("audio"),b=!1,c=!1,d=!1,e=!1;try{return"canPlayType"in a&&(c=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),d=a.canPlayType("audio/mpeg;").replace(/^no$/,""),e=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),(""!==c||""!==d||""!==e)&&(b=!0)),b}catch(f){return!1}}function k(){var a=document.createElement("video"),b=!1,c=!1,d=!1,e=!1,f=!1,g=!1;try{return"canPlayType"in a&&(c=a.canPlayType('video/ogg; codecs=theora"').replace(/^no$/,""),d=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e=a.canPlayType('video/mp4; codecs="mp4v.20.8"').replace(/^no$/,""),f=a.canPlayType('video/mp4; codecs="mp4a.40.2"').replace(/^no$/,""),g=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),(""!==c||""!==d||""!==e||""!==f||""!==g)&&(b=!0)),b}catch(h){return!1}}function l(){var a={name:"other",version:0};return o?(a.name="MSIE",a.version=o):p?(a.name="Edge",a.version=p):q?(a.name="FireFox",a.version=q):r?(a.name="Safari",a.version=r):s?(a.name="Chrome",a.version=s):t&&(a.name="WebKit",a.version=t),a}var m=navigator.userAgent.toString(),n=a.Lang,o=f(m,/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/),p=f(m,/Edge\/([0-9.]+)/),q=f(m,/Firefox\/([0-9.]+)/),r=f(m,/Version\/([0-9.]+)\s?Safari/),s=f(m,/Chrome\/([0-9.]+)/),t=f(m,/AppleWebKit\/([0-9.]+)/),u=b(m),v=e(),w=c(),x=d(),y=h(),z=k(),A=j(),B=g(),C=i(),D=z&&A&&B&&C,E=l(),F={ATTRS:{NAME:"UA",version:"0.0.1"},html:document.documentElement,checkBrowser:f,detectOS:b,os:u,browser:E,ie:o,firefox:q,safari:r,chrome:s,webkit:t,flash:v,dragDrop:y,canvasText:C,canvas:B,audio:A,video:z,isHtml5Supported:D,checkMobile:c,checkTablet:d,isMobile:w,isTablet:x};return F}),ACT.define("Util",[],function(){"use strict";function a(){return a.prototype._singleton?a.prototype._singleton:void(a.prototype._singleton=this)}var b=decodeURIComponent,c=function(a,b){var c;if(null===this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1};return a.ATTRS={NAME:"Util",version:"0.0.1"},a.prototype={toggleTakeover:function(a){window.ad_takeover&&ad_takeover(a)},adRunning:function(a){window.ad_running&&window.ad_running(a)},adAction:{},registerAdAction:function(a){a.ad&&(this.adAction[a.ad]=a)},inString:function(a,b){return this.inArray(a,b)},getInt:function(a){var b=a.match(/[0-9]+/gi);return null!==b?parseInt(b.join(""),10):0},pixelTrack:function(a){if(a){var b=new Image;b.onload=function(){b=null},b.src=a}},adDate:function(a){var b=new Date,c=new Date(a);return c.getTime()<b.getTime()},hashString:function(a){var b=0,c=0;if(0===a.length)return b;for(c;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return 0>b&&(b=-b),b},getQStrVal:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(location.search);return null===d?"":b(d[1].replace(/\+/g," "))},inArray:function(a,b){return Array.prototype.indexOf||(Array.prototype.indexOf=c),-1!==a.indexOf(b)}},new a}),ACT.define("VideoEvents",["Event","Lang","Dom","UA"],function(a){"use strict";function b(a,b){var c=g.browser,d=c.name||"",e=!0;if(a.controls){var f=m[d]||0,h=a.offsetHeight||0,i=h-f;e=b.hasOwnProperty("x")&&b.hasOwnProperty("y")?b.y<i:!1}return e}function c(a,b,c){this.videoNode=a,this.videoID=b,this.firstPlay=!0,this.videoEnded=!1,this.config={},e.merge(this.config,k),e.merge(this.config,c||{}),h=this.config.resumeThreshold,this.progressParts={25:!1,50:!1,75:!1,ended:!1},this.progress={},!0===this.validateVideoNode()&&this.initializeVideoTracking()}var d=a.Event,e=a.Lang,f=a.Dom,g=a.UA,h=.05,i={ON:"On",OFF:"Off"},j={start:"video:start",stop:"video:stop",resume:"video:resume",replay:"video:replay",pause:"video:pause",soundOn:"video:soundOn",soundOff:"video:soundOff",seeked:"video:seeked",25:"video:25percent",50:"video:50percent",75:"video:75percent",ended:"video:complete",clicked:"video:clicked"},k={resumeThreshold:h,tracking:{}};for(var l in j)j.hasOwnProperty(l)&&(k.tracking[l]="clicked"!==l);var m={Safari:24,FireFox:28,Chrome:35,Edge:0,MSIE:0,WebKit:35};return c.ATTRS={NAME:"VideoEvent",version:"1.0.0"},c.prototype={broadcast:function(a,b){var c=this.config,e=c.tracking;e.hasOwnProperty(a)&&e[a]===!0&&(b=b||{},d.fire("video:action",{videoId:this.videoID,videoNode:this.videoNode,data:b,eventType:a,eventLongName:j[a].replace("video:",""),event:j[a]}))},validateVideoNode:function(){var a=this.videoNode;return e.isString(a)&&(a=f.byId(a),this.videoNode=a),a&&"nodeName"in a&&"video"===a.nodeName.toLowerCase()?!0:!1},initializeVideoTracking:function(){var a=this.videoNode;this.soundState=!0!==a.muted&&a.volume>0?i.ON:i.OFF,this.events={play:d.on("play",this.onPlay,a,this),pause:d.on("pause",this.onPause,a,this),volumechange:d.on("volumechange",this.onVolumeChange,a,this),timeupdate:d.on("timeupdate",this.onTimeUpdate,a,this),ended:d.on("ended",this.onEnded,a,this),seeked:d.on("seeked",this.onSeeked,a,this),clicked:d.on("click",this.onClicked,a,this)}},calculateVideoPercentage:function(){var a=this.videoNode,b=a.duration;if(e.isObjectEmpty(this.progress)){
var c=Math.floor(.25*b),d=Math.floor(.5*b),f=Math.floor(.75*b),g={};isNaN(c)||isNaN(d)||isNaN(f)||(g[c]=e.bind(this,c,this.on25Percent),g[d]=e.bind(this,d,this.on50Percent),g[f]=e.bind(this,f,this.on75Percent),this.progress=g)}},onSeeked:function(){this.broadcast("seeked")},onPause:function(){var a=this.videoNode,b=a.duration,c=a.currentTime,d=b*(1-h),e=c>=d;e||this.broadcast("pause")},onTimeUpdate:function(){this.calculateVideoPercentage();var a=this.videoNode,b=Math.floor(a.currentTime);b in this.progress&&this.progress[b]()},onVolumeChange:function(){var a=this.videoNode,b=!0!==a.muted&&a.volume>0?i.ON:i.OFF;b!==this.soundState&&(this.soundState=b,this.broadcast("sound"+b))},progressTrack:function(a){this.progressParts.hasOwnProperty(a)&&this.progressParts[a]===!1&&(this.broadcast(a),this.progressParts[a]=!0)},onPlay:function(){var a=this.videoNode,b=a.duration,c=a.currentTime,d=b*h,e=b*(1-h);this.firstPlay===!0?(this.firstPlay=!1,this.broadcast("start")):c>=d&&e>=c?this.broadcast("resume"):this.videoEnded===!0&&(this.videoEnded=!1,this.broadcast("replay"))},on25Percent:function(){this.progressTrack("25")},on50Percent:function(){this.progressTrack("50")},on75Percent:function(){this.progressTrack("75")},onEnded:function(){this.videoEnded===!1&&(this.videoEnded=!0),this.resetParts(),this.progressTrack("ended")},onClicked:function(a){var c=this.videoNode,e=this.config,g=e.preventOnClick||!0,h={};if(a.offsetX&&a.offsetY)h={x:a.offsetX,y:a.offsetY};else{var i=f.viewportOffset(c.id);h=i.top&&i.left?{x:i.left,y:i.top}:{x:0,y:0}}var j=b(c,h);j&&(g&&d.preventDefault(a),this.broadcast("clicked"))},resetParts:function(){var a=this.progressParts;for(var b in a)this.progressParts.hasOwnProperty(b)&&(this.progressParts[b]=!1)},destroy:function(){var a,b=this.events;for(a in b)b.hasOwnProperty(a)&&b[a].remove()}},c}),ACT.define("ContentSwf",["Dom","Lang","Event","Class","Capability","Flash","SWFBridge"],function(a){"use strict";function b(a){this.init(a)}function c(a){a.swfConfig.hasOwnProperty("flashvars")||(a.swfConfig.flashvars={});var b=a.id||"swf"+Math.round(1e6*Math.random());return a.swfConfig.id=a.swfConfig.flashvars.swfId=b,a.swfConfig.flashvars.callback="eventHandler",a.swfConfig.flashvars.callscope='ACT.SWFBridge["'+b+'"]',d.nodeCreate(g.objectEmbed(a.swfConfig)).firstChild}var d=a.Dom,e=a.Lang,f=a.Class,g=a.Flash,h=a.Event,i=a.Capability,j=a.SWFBridge,k="screen:status",l="STOP_CONTENT";return b.ATTRS={NAME:"contentSwf",version:"0.0.1",configObject:{},node:null,eventList:[]},e.extend(b,[i,f],{initializer:function(a){this.set("configObject",a),this.initializeListeners()},initializeListeners:function(){var a=this;a.get("eventList").push(h.on(l,function(){var b=a.get("node");b&&j.callSWF(b,"stopContent")}),h.on(k,function(b){a.get("configObject")&&a.get("configObject").resize&&a.resize(b,a.get("configObject"))}))},destructor:function(){var a=this.get("node"),b=this.get("eventList");for(var c in b)b.hasOwnProperty(c)&&b[c].remove();a&&a.parentNode&&a.parentNode.removeChild(a),j.unregister(a.id)},renderContent:function(a){var b=c(a);return b=this.applyNodeConfig(b,a)},getContent:function(a,b){var c=this.renderContent(this.get("configObject"),a,b);return this.set("node",c),j.register(this,c.id),{node:c}},eventHandler:function(a,b){b.hasOwnProperty("type")?h.fire(b.type,{id:a,scope:this}):b.hasOwnProperty("actions")&&h.fire("add:actions",b.actions)}}),b}),ACT.define("ContentVideoFlash",["Event","Lang","Class","Capability","SWFBridge","ContentSwf"],function(a){"use strict";function b(a){g.on("videoflash:"+a.eventType,function(){g.fire("add:actions",a.actions)})}function c(a){var c=a.hasOwnProperty("eventActions")?a.eventActions:{};for(var d in c)c.hasOwnProperty(d)&&u.hasOwnProperty(c[d].eventType)&&b(c[d])}function d(a){var b={};for(var c in a)if(a.hasOwnProperty(c)&&t.hasOwnProperty(c)){var d=a[c];b[c]=d}return b}function e(b,e,g){c(b);var h=b.hasOwnProperty("videoFlashConfig")?b.videoFlashConfig:{},i=d(h,b),j=h.hasOwnProperty("width")?h.width:"100%",k=h.hasOwnProperty("height")?h.height:"100%";f=new a.ContentSwf({id:b.id+"_swf",swfConfig:{width:j,height:k,src:"https://s.yimg.com/cv/ae/global/actjs/ACTPlayer1439433292.swf",flashvars:i}});var l=f.getContent(e,g).node;return l}var f,g=a.Event,h=a.Lang,i=a.Class,j=a.Capability,k=a.SWFBridge,l="video:start",m="video:stop",n="video:play",o="video:pause",p="video:soundOn",q="video:soundOff",r="complete:action",s=[{type:"videoStart",argument:{videoId:{name:"videoId",test:function(a){return h.isString(a)}}},process:function(a){g.fire(l,{videoId:a.videoId}),g.fire(r)}},{type:"videoStop",argument:{videoId:{name:"videoId",test:function(a){return h.isString(a)}}},process:function(a){g.fire(m,{videoId:a.videoId}),g.fire(r)}},{type:"videoPlay",argument:{videoId:{name:"videoId",test:function(a){return h.isString(a)}}},process:function(a){g.fire(n,{videoId:a.videoId}),g.fire(r)}},{type:"videoPause",argument:{videoId:{name:"videoId",test:function(a){return h.isString(a)}}},process:function(a){g.fire(o,{videoId:a.videoId}),g.fire(r)}},{type:"videoSoundOn",argument:{videoId:{name:"videoId",test:function(a){return h.isString(a)}}},process:function(a){g.fire(p,{videoId:a.videoId}),g.fire(r)}},{type:"videoSoundOff",argument:{videoId:{name:"videoId",test:function(a){return h.isString(a)}}},process:function(a){g.fire(q,{videoId:a.videoId}),g.fire(r)}}],t={videoPath:"",autoplay:"",videoMuted:"",width:"",height:"",x:"",y:"",controls:""},u={start:"",stop:"",replay:"",pause:"",play:"",soundon:"",soundoff:"","25percent":"","50percent":"","75percent":"",complete:""},v=function(a){this.init(a)};return v.ATTRS={NAME:"ContentVideoFlash",version:"0.0.1",configObject:{},videoId:null,node:null,eventList:[]},h.extend(v,[j,i],{initializer:function(a){this.set("videoId",a.id),this.set("configObject",a),g.fire("register:Actions",s),this.initializeListeners()},initializeListeners:function(){var a=this;this.get("eventList").push(g.on(l,function(b){a.get("videoId")===b.videoId&&a.start()}),g.on(m,function(b){a.get("videoId")===b.videoId&&a.stop()}),g.on(n,function(b){a.get("videoId")===b.videoId&&a.play()}),g.on(o,function(b){a.get("videoId")===b.videoId&&a.pause()}),g.on(p,function(b){a.get("videoId")===b.videoId&&a.soundOn()}),g.on(q,function(b){a.get("videoId")===b.videoId&&a.soundOff()}))},destructor:function(){var a=this.get("node"),b=this.get("eventList");for(var c in b)b.hasOwnProperty(c)&&b[c].remove();a&&a.parentNode&&a.parentNode.removeChild(a),f.destroy(),k.unregister(a.id)},getContent:function(a,b){var c=this.get("configObject"),d=e(c,a,b);return this.set("node",d),k.register(this,d.id),{node:d}},start:function(){var a=this.get("node");k.callSWF(a,"startVideo")},stop:function(){var a=this.get("node");k.callSWF(a,"stopVideo")},play:function(){var a=this.get("node");k.callSWF(a,"videoResume")},pause:function(){var a=this.get("node");k.callSWF(a,"videoPause")},soundOn:function(){var a=this.get("node");k.callSWF(a,"videoUnmute")},soundOff:function(){var a=this.get("node");k.callSWF(a,"videoMute")},eventHandler:function(a,b){b.hasOwnProperty("type")?g.fire(b.type,{id:a}):b.hasOwnProperty("actions")&&g.fire("add:actions",b.actions)}}),v}),ACT.define("ContentContainer",["Dom","Lang","Event","Class","Capability","Animation"],function(a){"use strict";function b(a){this.init(a)}function c(a,b,c){var d=i.on("tracking:registerRedirect:complete",function(a){""!==a.link&&(window.open(a.link,"_blank"),i.fire("STOP_CONTENT"),c&&c(a.link)),d.remove()});i.fire("tracking:registerRedirect",{clickTag:a,clickTagName:b})}function d(a,b){if("object"==typeof b){a.style.cursor="pointer";for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];-1!==h.arrayIndexOf(w,d.eventType)&&e(a,d)}}}function e(a,b){i.on(b.eventType,function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,i.fire(u,{actionConfig:b,callback:function(a){a&&(h.objHasKey(b,"timeTo")&&""!==b.timeTo?f(b):i.fire("add:actions",b.actions))}})},a)}function f(a){var b=1e3*parseInt(a.timeTo),c=a.actions,d=setInterval(function(){window.clearInterval(d),i.fire("add:actions",c)},b);x.push(d)}var g=a.Dom,h=a.Lang,i=a.Event,j=a.Animation,k=a.Class,l=a.Capability,m="container:show",n="container:hide",o="container:animate",p="container:openURL",q="container:startFadeTo",r="container:stopFadeTo",s="container:changeStyles",t="container:stopCounter",u="standardAd:checkActionCondition",v="complete:action",w=["click","mouseenter","mouseleave"],x=[],y=[{type:"openURL",argument:{URLpath:{name:"URLpath",test:function(a){return h.isString(a)}},URLname:{name:"URLname",test:function(a){return h.isString(a)}}},process:function(a){i.fire(p,{from:a.from,URLpath:a.URLpath,URLname:a.URLname,done:function(a){i.fire(v,{url:a})}})}},{type:"containerShow",argument:{id:{name:"id",test:function(a){return h.isString(a)}}},process:function(a){i.fire(m,{containerId:a.id,done:function(){i.fire(v)}})}},{type:"containerHide",argument:{id:{name:"id",test:function(a){return h.isString(a)}}},process:function(a){i.fire(n,{containerId:a.id,done:function(){i.fire(v)}})}},{type:"containerChangeStyles",argument:{id:{name:"id",test:function(a){return h.isString(a)}},styles:{name:"styles",test:function(a){return h.isObject(a)}}},process:function(a){i.fire(s,{containerId:a.id,styles:a.styles,done:function(){i.fire(v)}})}},{type:"containerStartFadeTo",argument:{id:{name:"id",test:function(a){return h.isString(a)}},to:{name:"to",test:function(a){return h.isString(a)}},delay:{name:"delay",test:function(a){return h.isNumber(a)}}},process:function(a){i.fire(q,{containerId:a.id,targetId:a.to,delay:a.delay}),i.fire(v)}},{type:"containerStopFadeTo",argument:{id:{name:"id",test:function(a){return h.isString(a)}}},process:function(a){i.fire(r,{containerId:a.id}),i.fire(v)}},{type:"containerAnimate",argument:{id:{name:"id",test:function(a){return h.isString(a)}},from:{name:"from",test:function(a){return h.isObject(a)}},to:{name:"to",test:function(a){return h.isObject(a)}},duration:{name:"duration",test:function(a){return h.isNumber(a)}},delay:{name:"delay",test:function(a){return h.isNumber(a)}}},process:function(a){i.fire(o,{containerId:a.id,from:a.from||{},to:a.to||{},duration:a.duration||1,delay:a.delay||0,done:function(){i.fire(v)}})}},{type:"containerStopProcesses",arguments:{},process:function(){i.fire(t),i.fire(v)}}];return b.ATTRS={NAME:"ContentContainer",version:"0.0.1",eventList:[]},i.on(p,function(a){c(a.URLpath,a.URLname,a.done)}),h.extend(b,[l,k],{initializer:function(a){this.initializeListeners(),this.set("configObject",a),i.fire("register:Actions",y)},initializeListeners:function(){var a=this;a.get("eventList").push(i.on("screen:status",function(b){a.get("configObject")&&a.get("configObject").resize&&a.resize(b,a.get("configObject"))}),i.on(m,function(b){b.containerId===a.get("id")&&a.showContainer(b.done)}),i.on(n,function(b){b.containerId===a.get("id")&&a.hideContainer(b.done)}),i.on(s,function(b){b.containerId===a.get("id")&&a.changeStyles(b.styles,b.done)}),i.on(q,function(b){b.containerId===a.get("id")&&a.startFadeTo(b.targetId,b.delay)}),i.on(r,function(b){b.containerId===a.get("id")&&a.stopFadeTo()}),i.on(o,function(b){b.containerId===a.get("id")&&a.animateContainer(b.from||{},b.to||{},b.duration,b.delay||0,b.done)}),i.on(t,function(){a.stopCounter()}))},destructor:function(){var a=this.get("node"),b=this.get("eventList");for(var c in b)b.hasOwnProperty(c)&&b[c].remove();g.isDomElement(a)&&a.parentNode&&a.parentNode.removeChild(a)},renderContent:function(a){var b=document.createElement("div");return b=this.applyNodeConfig(b,a),a.containerConfig&&(b.innerHTML=a.containerConfig.innerText||""),d(b,a.eventConfig),b},getContent:function(a,b){var c=this.renderContent(this.get("configObject"),a,b);return this.set("node",c),{node:c}},showContainer:function(a){this.get("node").style.display="block",a&&a()},hideContainer:function(a){this.get("node").style.display="none",a&&a()},changeStyles:function(a,b){var c=this.get("node");g.applyStyles(c,a),b&&b()},startFadeTo:function(a,b){var c=0,d=g.byId(a),e=this.get("node");this.FADE_EVENT=i.on("mousemove",function(){c&&clearTimeout(c),b&&b>0&&(c=setTimeout(function(){"1"===d.style.opacity&&j.anim(d,{opacity:"0"},null,500),clearTimeout(c)},b)),"0"===d.style.opacity&&j.anim(d,{opacity:"1"},null,500)},e)},stopFadeTo:function(){this.FADE_EVENT&&this.FADE_EVENT.remove()},animateContainer:function(a,b,c,d,e){j.anim(this.get("node"),a,b,c,d,null,e)},stopCounter:function(){for(var a=0;a<x.length;a++)window.clearInterval(x[a])}}),b}),ACT.define("ContentCarousel",["Dom","Lang","Event","Class","Animation","Capability"],function(a){"use strict";function b(a){this.init(a)}function c(a){g.on(s,function(b){b.data===a.eventType&&g.fire(p,{actionConfig:a,callback:function(b){b&&g.fire(n,a.actions)}})})}function d(a){if(f.isArray(a))for(var b=0;b<a.length;b++){var d=a[b];u.hasOwnProperty(d.eventType)?c(d):d.eventType.substring(0,22)===t&&c(d)}}var e=a.Dom,f=a.Lang,g=a.Event,h=a.Animation,i=a.Class,j=a.Capability,k={CAROUSEL_CONTAINER:"carousel-container",RELATIVE_CONTAINER:"carousel-relative-container",HOLDER_CONTAINER:"carousel-holder-container"},l={ROOT_CONTAINER:{overflow:"hidden"},RELATIVE_CONTAINER:{position:"relative"},HOLDER_CONTAINER:{position:"absolute",cursor:"pointer"}},m={LEFT:-1,RIGHT:1},n="add:actions",o="complete:action",p="standardAd:checkActionCondition",q="carousel:slideTransition",r="carousel:jumpToSlide",s="carousel:animationState",t="carouselAnimationPanel",u={carouselAnimationStart:"",carouselAnimationComplete:""},v=[{type:"carouselNextSlide",argument:{to:{name:"to",test:function(a){return f.isString(a)}}},process:function(a){g.fire(q,{to:a.to,direction:"LEFT",done:function(){g.fire(o,{})}})}},{type:"carouselPreviousSlide",argument:{to:{name:"to",test:function(a){return f.isString(a)}}},process:function(a){g.fire(q,{to:a.to,direction:"RIGHT",done:function(){g.fire(o,{})}})}},{type:"carouselJumpToSlide",argument:{to:{name:"to",test:function(a){return f.isString(a)}},slidePositionId:{name:"slidePositionId",test:function(a){return f.isNumber(a)}}},process:function(a){g.fire(r,{to:a.to,slidePositionId:a.slidePositionId,done:function(){g.fire(o,{})}})}}];return b.ATTRS={NAME:"ContentCarousel",version:"0.0.1",node:null,relativeContainer:null,holderContainer:null,transitionTime:1e3,currentSlideId:0,eventList:[],slideContentList:[]},f.extend(b,[i,j],{initializer:function(a){var b=this;b.initializeListeners(),b.set("configObject",a),f.isNumber(a.ContentCarouselConfig.transitionTime)&&b.set("transitionTime",a.ContentCarouselConfig.transitionTime),f.isNumber(a.ContentCarouselConfig.currentSlideId)&&b.set("currentSlideId",a.ContentCarouselConfig.currentSlideId),d(a.eventConfig),g.fire("register:Actions",v)},initializeListeners:function(){var a=this;a.get("eventList").push(g.on(q,function(b){b.to===a.get("configObject").id&&("LEFT"===b.direction&&a.slideLeft(b.done),"RIGHT"===b.direction&&a.slideRight(b.done))}),g.on(r,function(b){b.to===a.get("configObject").id&&a.jumpToSlide(b.slidePositionId,b.done)}))},renderContent:function(a){var b=document.createElement("div");return b=this.applyNodeConfig(b,a),e.applyStyles(b,l.ROOT_CONTAINER),b},getContent:function(a,b){var c=this,d=c.renderContent(c.get("configObject"),a,b);return c.set("node",d),c.createRelativeContainer(),c.createHolderContainer(),{node:d}},createRelativeContainer:function(){var a=this,b=document.createElement("div");f.isString(k.RELATIVE_CONTAINER)&&""!==k.RELATIVE_CONTAINER&&(b.className+=" "+k.RELATIVE_CONTAINER),e.applyStyles(b,l.RELATIVE_CONTAINER),a.set("relativeContainer",b),a.get("node").appendChild(b)},createHolderContainer:function(){var a=this,b=a.get("node"),c=document.createElement("div"),d=0;f.isString(k.HOLDER_CONTAINER)&&""!==k.HOLDER_CONTAINER&&(c.className+=" "+k.HOLDER_CONTAINER),e.applyStyles(c,l.HOLDER_CONTAINER),a.set("holderContainer",c),a.get("relativeContainer").appendChild(c),b.appendChild=function(b){a.appendChildNode(b),d+=parseInt(b.style.width,10),e.applyStyles(c,{width:d+"px"})}},appendChildNode:function(a){var b=this;b.get("holderContainer").appendChild(a),b.addSlideContent(a)},addSlideContent:function(a){var b=this,c=b.get("slideContentList");c.push(a),b.preparePosition()},getNextSlideId:function(a){var b=this;a=a>0?m.RIGHT:m.LEFT;var c=b.get("currentSlideId")+a;return 0>c?c=b.get("slideContentList").length-1:c>=b.get("slideContentList").length&&(c=0),c},jumpToSlide:function(a,b){var c=this;c.set("currentSlideId",a),c.preparePosition(m.LEFT),b&&b()},preparePosition:function(b){for(var c=this,d=c.get("slideContentList"),f=c.getNextSlideId(-1),g=c.getNextSlideId(1),h=a.Lang.numberific(c.get("configObject").css.width),i=0;i<d.length;i++)i===c.get("currentSlideId")?e.applyStyles(d[i],{position:"absolute",left:"0px",display:"block"}):i===f&&b===m.RIGHT?e.applyStyles(d[i],{left:"-"+h+"px",display:"block",position:"absolute"}):i===g&&b===m.LEFT?e.applyStyles(d[i],{left:h+"px",display:"block",position:"absolute"}):e.applyStyles(d[i],{display:"none"})},slideLeft:function(a){this.slideAnimation(m.LEFT),a&&a()},slideRight:function(a){this.slideAnimation(m.RIGHT),a&&a()},slideAnimation:function(a){var b=this;if(!(b.get("slideContentList").length<2)){var c=b.get("holderContainer"),d=b.get("slideContentList"),f=d[b.get("currentSlideId")],i=a*(c.clientWidth/d.length),j=b.get("transitionTime"),k={left:i};b.preparePosition(a),h.anim(c,k,null,j,0,function(){g.fire(s,{data:"carouselAnimationStart"}),g.fire(s,{data:"carouselAnimationPanel"+b.get("currentSlideId")+"Play"}),b.set("currentSlideId",b.getNextSlideId(-1*a))},function(){e.applyStyles(c,{left:"0px"}),e.applyStyles(f,{display:"none"}),e.applyStyles(d[b.get("currentSlideId")],{display:"block",left:"0px"}),g.fire(s,{data:"carouselAnimationComplete"})})}},destructor:function(){var a=this,b=a.get("node"),c=a.get("eventList");for(var d in c)c.hasOwnProperty(d)&&c[d].remove();if(e.isDomElement(b)&&void 0!==b.id){var f=e.byId(b.id);f.parentNode.removeChild(f)}}}),b}),ACT.define("ContentHtml5",["Dom","Lang","Event","Class","Capability","Json"],function(a){"use strict";function b(a){this.init(a)}function c(a){var b=document.createElement("div");b.setAttribute("id",a.id);var c=document.createElement("script");return c.type="text/javascript",c.src=a.html5Config.src,b.appendChild(c),b}function d(a){var b=document.createElement("iframe");if(b.setAttribute("id",a.id),b.setAttribute("marginwidth",0),b.setAttribute("marginheight",0),b.setAttribute("hspace",0),b.setAttribute("vspace",0),b.setAttribute("frameborder",0),b.setAttribute("scrolling","no"),a.html5Config.iframeUrlPath){if(h.isObject(a.html5Config.iframevars)){var c=encodeURI(k.stringify(a.html5Config.iframevars));b.setAttribute("name",c)}b.setAttribute("src",a.html5Config.iframeUrlPath)}else b.onload=function(){var c=this.contentWindow||this.contentDocument,d=c.document?c.document:c,e=a.html5Config.iframevars||{};if(e.frameId=a.id,a.trackingLabels&&(e.trackingLabels=a.trackingLabels),d.open(),a.html5Config.enabler){var f=a.html5Config,g={enabler:!0,enablerPath:f.enablerPath||t,iframevars:e};d.write('<script type="text/javascript" src="'+g.enablerPath+'ACT_Enabler.js"></script>'),g.iframevars&&d.write('<script type="text/javascript"> Enabler.setConfig( '+k.stringify(g.iframevars)+"); </script>")}else d.write('<script type="text/javascript"> var ACT = '+k.stringify(a.html5Config.iframevars)+"; </script>");d.write("<body>"+a.html5Config.src+"</body>"),d.close(),b.onload=null};return b}function e(a,b){if("object"==typeof a)for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];b(d)}}function f(a){j.on(a.eventType,function(){j.fire(r,a.actions)})}var g=a.Dom,h=a.Lang,i=a.Class,j=a.Event,k=a.Json,l=a.Capability,m="html5:broadcast",n="html5:changeStyles",o="complete:action",p="screen:status",q="STOP_CONTENT",r="add:actions",s="Enabler:actions",t="https://s.yimg.com/cv/eng/externals/actjs/1.0.3/min/library/",u=[{type:"html5Broadcast",argument:{to:{name:"to",test:function(a){return h.isString(a)}},name:{name:"name",test:function(a){return h.isString(a)}}},process:function(a){j.fire(m,{containerId:a.to,name:a.name}),j.fire(o)}},{type:"changeHtml5FrameStyles",argument:{to:{name:"to",test:function(a){return h.isString(a)}},css:{name:"css",test:function(a){return h.isObject(a)}}},process:function(a){j.fire(n,{containerId:a.to,css:a.css,callback:function(){j.fire(o)}})}}],v=[];return j.on("message",function(a){for(var b=0;b<v.length;b++)v[b].eventHandler(a)},window),b.ATTRS={NAME:"ContentHtml5",version:"0.0.1",configObject:{},node:null,eventList:[],enablerActions:{},trackingLabels:{}},h.extend(b,[l,i],{initializer:function(a){this.set("nodeId",a.id),this.set("configObject",a),this.initializeListeners(),this.initializeEnablerActions(a),j.fire("register:Actions",u),a.hasOwnProperty("trackingLabels")&&this.set("trackingLabels",a.trackingLabels),v.push(this)},initializeListeners:function(){var a=this;a.get("eventList").push(j.on(m,function(b){a.get("nodeId")===b.containerId&&a.broadcastToHtml5(b.name)}),j.on(n,function(b){a.get("nodeId")===b.containerId&&(a.changeStyles(b.css),h.isFunction(b.callback)&&b.callback())}),j.on(p,function(b){a.get("configObject")&&a.get("configObject").resize&&a.resize(b,a.get("configObject"))}),j.on(q,function(){a.broadcastToHtml5("stop")}))},wrapActionsList:function(a){return function(){j.fire(r,a)}},initializeEnablerActions:function(a){if(h.isObject(a.html5Config)&&a.html5Config.enabler){var b={track:h.bind(this,null,this.fireEnablerTracking)},c=a.eventConfig;if(h.isObject(c))for(var d=0;d<c.length;d++){var e=c[d];if(h.isObject(e)&&e.hasOwnProperty("eventType")&&e.hasOwnProperty("actions")){var f=e.eventType,g=e.actions;b[f]=this.wrapActionsList(g)}}this.set("enablerActions",b)}},fireEnablerTracking:function(a){var b=this.get("trackingLabels");b.hasOwnProperty(a.id)&&j.fire(r,{type:"track",label:b[a.id]})},broadcastToHtml5:function(a){var b=this.get("node"),c=this.get("configObject");if(c.html5Config.hasOwnProperty("iframe")&&c.html5Config.iframe&&b){var d=b.contentWindow||b.contentDocument;d.postMessage({eventName:"html5:message",message:a},"*")}else j.fire("html5:message",{message:a})},destructor:function(){for(var a=this.get("node"),b=this.get("eventList");b.length>0;)b.shift().remove();g.isDomElement(a)&&a.parentNode&&a.parentNode.removeChild(a),v.splice(v.indexOf(this),1)},renderContent:function(a){var b=a.html5Config.iframe?d(a):c(a);return e(a.eventActions,f),b=this.applyNodeConfig(b,a)},getContent:function(b,c){var d=this,e=d.renderContent(this.get("configObject"),b,c);return this.set("node",e),this.get("configObject").html5Config.enabler===!0&&this.get("eventList").push(j.on(s,a.Lang.bind(d,null,d.enablerActionHandler))),{node:e}},eventHandler:function(a){var b=this.get("node"),c=this.get("configObject");if(c.html5Config.hasOwnProperty("iframe")&&c.html5Config.iframe&&b){var d=b.contentWindow||b.contentDocument;if(a.source===d){var e=a.data;e.hasOwnProperty("type")?j.fire(e.type):e.hasOwnProperty("actions")?j.fire(r,e.actions):e.hasOwnProperty("EnablerData")&&(e.EnablerData.frameId=c.id,j.fire(s,e.EnablerData))}}},enablerActionHandler:function(a){if(a.frameId!==this.get("configObject").id)return!1;var b=this.get("enablerActions");return"track"===a.actionName?b.track(a):b.hasOwnProperty(a.id)&&b[a.id](a),!0},changeStyles:function(a){var b=this.get("node");g.applyStyles(b,a)}}),b}),ACT.define("ContentImage",["Dom","Lang","Event","Class","Capability"],function(a){"use strict";function b(a){this.init(a)}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])}var d=a.Dom,e=a.Lang,f=a.Event,g=a.Class,h=a.Capability;return b.ATTRS={NAME:"ContentImage",version:"0.0.1",configObject:{},node:null,eventList:[]},e.extend(b,[h,g],{initializer:function(a){this.initializeListeners(),this.set("configObject",a)},initializeListeners:function(){var a=this;a.get("eventList").push(f.on("screen:status",function(b){a.get("configObject")&&a.get("configObject").resize&&a.resize(b,a.get("configObject"))}))},destructor:function(){var a=this.get("node"),b=this.get("eventList");for(var c in b)b.hasOwnProperty(c)&&b[c].remove();d.isDomElement(a)&&a.parentNode&&a.parentNode.removeChild(a)},renderContent:function(a){var b=d.nodeCreate('<img style="display:none" />').firstChild;return b.onload=function(){this.style.display=""},c(b,{id:a.id,src:a.imageConfig.src,alt:a.imageConfig.alt,title:a.imageConfig.title}),b=this.applyNodeConfig(b,a)},getContent:function(a,b){var c=this.renderContent(this.get("configObject"),a,b);return this.set("node",c),{node:c}}}),b}),ACT.define("ContentThirdParty",["UA","Dom","Lang","Event","Class","Capability"],function(a){"use strict";function b(a){this.init(a)}function c(a,b){return b.style.display="",b.setAttribute("id",a.id),b}function d(a,b){var c=document.createElement("iframe");c.setAttribute("id",a.id),c.setAttribute("marginwidth",0),c.setAttribute("marginheight",0),c.setAttribute("hspace",0),c.setAttribute("vspace",0),c.setAttribute("frameborder",0),c.setAttribute("scrolling","no");var d=function(){8===k.ie?c.detachEvent("onload",d,!1):c.onload=null,setTimeout(function(){var a=c.contentWindow||c.contentDocument,d=a.document?a.document:a,e=8===k.ie?b.childNodes[0].innerHTML:b.innerHTML;e=g(e.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")),k.ie||d.open(),d.write("<body>"+e+"</body>"),k.ie||d.close()},1)};return 8===k.ie?c.attachEvent("onload",d,!1):c.onload=d,c}function e(a,b){if("object"==typeof a)for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];b(d)}}function f(a){w.hasOwnProperty(a.eventType)&&(h(w[a.eventType],window),h(a.eventType,window),i(a.eventType,function(){o.fire("add:actions",a.actions)}))}function g(a){return"<!--"===a.substr(0,4)&&"-->"===a.substr(a.length-3,3)&&(a=a.substr(4),a=a.substring(0,a.length-3)),a}function h(a,b){var c=b||document;document.createEvent?(c[a]=document.createEvent("Event"),c[a].initEvent("thirdparty:"+a,!0,!0)):document.createEventObject&&(c[a]=document.createEventObject(),c[a].eventType="thirdparty:"+a)}function i(a,b,c){var d=c||document;document.addEventListener?d.addEventListener("thirdparty:"+a,b,!1):d.documentElement.attachEvent("onpropertychange",function(c){c.propertyName==="thirdparty:"+a&&b()})}function j(a,b){var c=b||document;document.dispatchEvent?c.dispatchEvent(a):c.documentElement[a.eventType]++}var k=a.UA,l=a.Dom,m=a.Lang,n=a.Class,o=a.Event,p=a.Capability,q="thirdparty:broadcast",r="thirdparty:start",s="thirdparty:stop",t="complete:action",u="screen:status",v="STOP_CONTENT",w={expandEvent:"expandedEvent",contractEvent:"contractedEvent",closeEvent:"closedEvent",openEvent:"openedEvent"},x=[{type:"thirdpartyStart",argument:{to:{name:"to",test:function(a){return m.isString(a)}}},process:function(a){o.fire(r,{containerId:a.to}),o.fire(t)}},{type:"thirdpartyStop",argument:{to:{name:"to",test:function(a){return m.isString(a)}}},process:function(a){o.fire(s,{containerId:a.to}),o.fire(t)}},{type:"thirdpartyBroadcast",argument:{to:{name:"to",test:function(a){return m.isString(a)}},name:{name:"name",test:function(a){return m.isString(a)}}},process:function(a){o.fire(q,{containerId:a.to,name:a.name}),o.fire(t)}}];return b.ATTRS={NAME:"ContentThirdParty",version:"0.0.1",configObject:{},node:null,eventList:[]},m.extend(b,[p,n],{initializer:function(a){this.set("nodeId",a.id),this.set("configObject",a),this.initializeListeners(),o.fire("register:Actions",x)},initializeListeners:function(){var a=this;a.get("eventList").push(o.on(r,function(b){a.get("nodeId")===b.containerId&&a.startThirdParty()}),o.on(s,function(b){a.get("nodeId")===b.containerId&&a.stopThirdParty()}),o.on(q,function(b){a.get("nodeId")===b.containerId&&a.broadcastThirdParty(b.name)}),o.on(u,function(b){a.get("configObject")&&a.get("configObject").resize&&a.resize(b,a.get("configObject"))}),o.on(v,function(){a.stopThirdParty()}))},startThirdParty:function(){var a=this.get("node"),b=this.get("configObject");if(b.thirdPartyConfig.hasOwnProperty("iframe")&&b.thirdPartyConfig.iframe&&a){var c=a.contentWindow||a.contentDocument;c.postMessage("YahooVideoStart","*")}},stopThirdParty:function(){var a=this.get("node"),b=this.get("configObject");if(b.thirdPartyConfig.hasOwnProperty("iframe")&&b.thirdPartyConfig.iframe&&a){var c=a.contentWindow||a.contentDocument;c.postMessage("YahooVideoPause","*")}},broadcastThirdParty:function(a){"object"==typeof window[a]&&j(window[a])},destructor:function(){var a=this.get("node"),b=this.get("eventList");for(var c in b)b.hasOwnProperty(c)&&b[c].remove();l.isDomElement(a)&&a.parentNode&&a.parentNode.removeChild(a)},renderContent:function(a){var b=document.getElementById(a.thirdPartyConfig.id),g=a.thirdPartyConfig.iframe?d(a,b):c(a,b);return e(a.eventActions,f),g=this.applyNodeConfig(g,a)},getContent:function(a,b){var c=this.renderContent(this.get("configObject"),a,b);return this.set("node",c),{node:c}}}),b}),ACT.define("ContentVideoHtml",["Dom","Lang","Event","Class","Capability","VideoEvents"],function(a){"use strict";function b(a){this.init(a)}function c(a,b){var c=k.on(q,function(c){c.videoId===a.id&&c.data===b.eventType&&k.fire(D,{actionConfig:b,callback:function(a){a&&k.fire(C,b.actions)}})});return c}function d(a,b){var d=[];if(!j.isArray(b))return d;for(var e=0;e<b.length;e++){var f=b[e];E.hasOwnProperty(f.eventType)&&d.push(c(a,f))}return d}function e(a,b){return a.controls=b.controls!==!1,a.autoplay=b.autoplay===!0,a.muted=b.videoMuted===!0,a.loop=b.loop===!0,"string"==typeof b.posterImage&&(a.poster=b.posterImage),a}function f(a){for(var b="",c=a.videoPath,d=0;d<c.length;d++){var e=c[d].path,f=o[c[d].type];b+="<source src='"+e+"' type='"+f+"' ></source>"}return b}function g(a){a.videoPath=[];for(var b=0;b<n.length;b++){var c=n[b],d="video"+c;"string"==typeof a[d]&&a.videoPath.push({type:c.toLowerCase(),path:a[d]})}}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])}var i=a.Dom,j=a.Lang,k=a.Event,l=a.Class,m=a.Capability,n=["MP4","WebM","OGG","OGV"],o={mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",ogv:"video/ogg"},p="video:action",q="video:state",r="video:start",s="video:stop",t="video:play",u="video:pause",v="video:soundOn",w="video:soundOff",x="video:resize",y="video:fullscreen",z="screen:status",A="complete:action",B="register:Actions",C="add:actions",D="standardAd:checkActionCondition",E={clicked:"",start:"",replay:"",pause:"",resume:"",soundon:"",soundoff:"","25percent":"","50percent":"","75percent":"",complete:""},F=[{type:"videoStart",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(r,{videoId:a.videoId}),k.fire(A)}},{type:"videoPlay",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(t,{videoId:a.videoId}),k.fire(A)}},{type:"videoStop",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(s,{videoId:a.videoId}),k.fire(A)}},{type:"videoPause",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(u,{videoId:a.videoId}),k.fire(A)}},{type:"videoSoundOn",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(v,{videoId:a.videoId}),k.fire(A)}},{type:"videoSoundOff",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(w,{videoId:a.videoId}),k.fire(A)}},{type:"videoFullScreen",arguments:{videoId:{name:"videoId",test:function(a){return j.isString(a)}}},process:function(a){k.fire(y,{videoId:a.videoId}),k.fire(A)}}];return b.ATTRS={NAME:"ContentVideoHtml",version:"0.0.1",videoConfig:{},configObject:{},videoPath:{},node:null,videoId:null,eventList:[],videoEventsRef:null},j.extend(b,[m,l],{initializer:function(a){this.set("videoId",a.id),this.set("configObject",a),k.fire(B,F),this.initializeListeners()},initializeListeners:function(){var a=this,b=a.get("eventList");b.push(k.on(r,function(b){a.get("videoId")===b.videoId&&a.start()}),k.on(s,function(b){a.get("videoId")===b.videoId&&a.stop();

}),k.on(t,function(b){a.get("videoId")===b.videoId&&a.play()}),k.on(u,function(b){a.get("videoId")===b.videoId&&a.pause()}),k.on(v,function(b){a.get("videoId")===b.videoId&&a.soundOn()}),k.on(w,function(b){a.get("videoId")===b.videoId&&a.soundOff()}),k.on(y,function(b){a.get("videoId")===b.videoId&&a.fullScreen()}),k.on(x,function(b){a.get("videoId")===b.videoId&&a.resize(b.state)}),k.on(z,function(b){a.get("configObject")&&a.get("configObject").resize&&a.resize(b,a.get("configObject"))})),a.set("eventList",b)},destructor:function(){for(var a=this.get("node"),b=this.get("eventList"),c=b.pop(),d=this.get("videoEventsRef");c;)c.remove(),c=b.pop();j.isFunction(d.destroy)&&d.destroy(),a&&a.parentNode&&a.parentNode.removeChild(a)},renderContent:function(a){var b,c,j,k,l;return g(a.videoHtmlConfig),k="<meta http-equiv='X-UA-Compatible' content='IE=Edge'/>",j=f(a.videoHtmlConfig),c="<video preload='auto' autoplay>"+k+j+"</video>",b=i.nodeCreate(c).firstChild,h(b,{id:a.id}),e(b,a.videoHtmlConfig),l=d(b,a.eventConfig),b=this.applyNodeConfig(b,a),{node:b,events:l}},getContent:function(a,b){var c=this.get("eventList"),d=this.renderContent(this.get("configObject"),a,b),e=d.node;return c.concat(d.events),this.createVideoEvents(e),this.set("node",e),{node:e}},broadcastProgress:function(a,b){k.fire(q,{videoId:a,data:b})},createVideoEvents:function(b){var c,d,e=this,f=this.get("videoId"),g=this.get("eventList"),h=this.get("configObject"),i=h.videoHtmlConfig,j=i.clicked||!1,l={tracking:{start:!0,25:!0,50:!0,75:!0,ended:!0,pause:!0,volumechange:!0,seeked:!1,clicked:j}};c=new a.VideoEvents(b,f,l),this.set("videoEventsRef",c),d=k.on(p,function(a){e.onVideoEvents(f,a,e.broadcastProgress)}),g.push(d)},onVideoEvents:function(a,b,c){if(b.hasOwnProperty("videoId")&&b.videoId===a&&b.hasOwnProperty("eventLongName")){var d=b.eventLongName;j.isFunction(c)&&c(a,d)}},start:function(){this.play(0)},play:function(a){var b=this.get("node");j.isNumber(a)&&(b.currentTime=a),b.play()},stop:function(){this.pause(0)},pause:function(a){var b=this.get("node");j.isNumber(a)&&(b.currentTime=a),b.pause()},soundOn:function(){var a=this.get("node");a.muted=!1},soundOff:function(){var a=this.get("node");a.muted=!0},fullScreen:function(){var a=this.get("node"),b=j.isFunction;b(a.requestFullscreen)?a.requestFullscreen():b(a.msRequestFullscreen)?a.msRequestFullscreen():b(a.mozRequestFullScreen)?a.mozRequestFullScreen():b(a.webkitRequestFullscreen)&&a.webkitRequestFullscreen()}}),b}),ACT.define("ContentYtv",["Dom","Lang","Event","Class","Capability"],function(a){"use strict";function b(a){this.init(a)}function c(a){a.ytvConfig=g.merge(y,a.ytvConfig);var b="&lang="+(a.ytvConfig.lang?a.ytvConfig.lang:"en-GB"),c="https://yep.video.yahoo.com/js/3/videoplayer-min.js?r=nextgen-desktop"+b,e=f.nodeCreate('<div id="'+a.id+'"></div>').firstChild,h=document.createElement("script");return h.src=c,h.type="text/javascript",h.onload=function(){var b=window.YAHOO;n=b.VideoPlatform.API_Events,l=new b.VideoPlatform.VideoPlayer(a.ytvConfig),l.render(e),l.on("playbackComplete",function(a){m[a]=!0}),k=l.controls.getMute(),d(a)},e.appendChild(h),e}function d(a){var b=a.hasOwnProperty("eventActions")?a.eventActions:{};for(var c in b)b.hasOwnProperty(c)&&x.hasOwnProperty(b[c].eventType)&&e(b[c])}function e(a){var b=z.hasOwnProperty(a.eventType)?z[a.eventType]:z["default"];l.on(n[x[a.eventType]],b(a.actions))}var f=a.Dom,g=a.Lang,h=a.Event,i=a.Class,j=a.Capability,k=!1,l=null,m=[],n={},o=!1,p="ytv:start",q="ytv:stop",r="ytv:play",s="ytv:pause",t="ytv:soundOn",u="ytv:soundOff",v="complete:action",w="STOP_CONTENT",x={start:"PLAYBACK_START",replay:"PLAYLIST_POSITION_CHANGE",pause:"PLAYBACK_PAUSE",play:"PLAYBACK_RESUMED",soundon:"PLAYER_MUTE_CHANGE",soundoff:"PLAYER_MUTE_CHANGE",complete:"PLAYBACK_COMPLETE",fullscreen:"PLAYER_FULLSCREEN_CHANGE",error:"PLAYER_ERROR"},y={pageSpaceId:"2023392312",comscoreC4:"UK Screen",region:"GB",lang:"en-GB",site:"frontpage",continuousPlay:!0,autoplay:!0,html5:!0,mute:!0,loop:!0},z={replay:function(a){return function(){l&&m[l.playlist.getCurrentItemId()]===!0&&h.fire("add:actions",a)}},soundoff:function(a){return function(b){b===!0&&k===!1&&(k=!0,h.fire("add:actions",a))}},soundon:function(a){return function(b){b===!1&&k===!0&&(k=!1,h.fire("add:actions",a))}},fullscreen:function(a){return function(b){b===!0&&h.fire("add:actions",a)}},start:function(a){return function(){o!==!0&&(o=!0,h.fire("add:actions",a))}},complete:function(a){return function(){o=!1,h.fire("add:actions",a)}},"default":function(a){return function(){h.fire("add:actions",a)}}},A=[{type:"ytvStart",argument:{id:{name:"id",test:function(a){return g.isString(a)}}},process:function(a){h.fire(p,{id:a.id}),h.fire(v)}},{type:"ytvStop",argument:{id:{name:"id",test:function(a){return g.isString(a)}}},process:function(a){h.fire(q,{id:a.id}),h.fire(v)}},{type:"ytvPlay",argument:{id:{name:"id",test:function(a){return g.isString(a)}}},process:function(a){h.fire(r,{id:a.id}),h.fire(v)}},{type:"ytvPause",argument:{id:{name:"id",test:function(a){return g.isString(a)}}},process:function(a){h.fire(s,{id:a.id}),h.fire(v)}},{type:"ytvUnmute",argument:{id:{name:"id",test:function(a){return g.isString(a)}}},process:function(a){h.fire(t,{id:a.id}),h.fire(v)}},{type:"ytvMute",argument:{id:{name:"id",test:function(a){return g.isString(a)}}},process:function(a){h.fire(u,{id:a.id}),h.fire(v)}}];return b.ATTRS={NAME:"ContentYtv",version:"0.0.1",configObject:{},node:null,eventList:[]},g.extend(b,[j,i],{initializer:function(a){this.set("configObject",a),h.fire("register:Actions",A),this.initializeListeners()},initializeListeners:function(){var a=this;a.get("eventList").push(h.on(p,function(b){a.get("id")===b.id&&a.start()}),h.on(q,function(b){a.get("id")===b.id&&a.stop()}),h.on(r,function(b){a.get("id")===b.id&&a.play()}),h.on(s,function(b){a.get("id")===b.id&&a.pause()}),h.on(t,function(b){a.get("id")===b.id&&a.soundOn()}),h.on(u,function(b){a.get("id")===b.id&&a.soundOff()}),h.on(w,function(){a.pause()}))},destructor:function(){var a=this.get("node"),b=this.get("eventList");for(var c in b)b.hasOwnProperty(c)&&b[c].remove();a&&a.parentNode&&a.parentNode.removeChild(a)},renderContent:function(a,b){var d=c(a,b);return d=this.applyNodeConfig(d,a)},getContent:function(a,b){var c=this.renderContent(this.get("configObject"),a,b);return this.set("node",c),{node:c}},start:function(){var a=this.get("node");if(a&&l)try{l.controls.play(0)}catch(b){}},stop:function(){var a=this.get("node");if(a&&l)try{l.controls.seek(0),l.controls.pause()}catch(b){}},play:function(){var a=this.get("node");if(a&&l)try{l.controls.play()}catch(b){}},pause:function(){var a=this.get("node");if(a&&l)try{l.controls.pause()}catch(b){}},soundOn:function(){var a=this.get("node");if(a&&l)try{l.controls.setMute(!1)}catch(b){}},soundOff:function(){var a=this.get("node");if(a&&l)try{l.controls.setMute(!0)}catch(b){}}}),b});ACT.setConfig("config-object-html5billboard", {
    baseConfig: {
        template: 'html5',
        forceEnv: {
            forcedFlashList: {},
            forcedHTML5List: {},
            forcedBackupList: {
                "MSIE": "<=9"
            }
        }
    },
    tracking: {},
    format: {
        flow: [
        {
            eventType: "firstPlay",
            actions: [{
                "type": "playLayer",
                "to": "BILLBOARD",
                "animate": false
            }, {
                "type": "trackState",
                "stateId": "BILLBOARD",
                "state": "open"
            }, {
                "type": "track",
                "label": "billboard_load_ad_::envRendered::"
            }]
		}, {
            eventType: "cappedPlay",
            actions: [{
                "type": "playLayer",
                "to": "BILLBOARD",
                "animate": false
            }, {
                "type": "trackState",
                "stateId": "BILLBOARD",
                "state": "open"
            }, {
                "type": "track",
                "label": "billboard_load_ad_::envRendered::"
            }]
        }],
        layers: {
            BILLBOARD: {
                layerName: "BILLBOARD",
                base: "act-ad",
                type: "inline",
                width: "970px",
                height: "250px",
                x: "0",
                y: "0",
                contentLayer: {
                    type: "content-container",
                    id: "BILLBOARD_container",
                    env: ["mobile","tablet","html", "backup"],
                    css: {
                        width: '970px',
                        height: '250px'
                    },
                    content: [{
                        id: "html5_container",
                        type: "content-html5",
                        env: ["html"],
                        css: {
                            width: "970px",
                            height: "250px"
                        },
                        trackingLabels: {
                            "video0:start": "billboard_view_videoauto0_start",
                            "video0:pause": "billboard_view_videoauto0_pause",
                            "video0:resume": "billboard_view_videoauto0_resume",
                            "video0:replay": "billboard_view_videoauto0_replay",
                            "video0:soundOn": "billboard_view_videoauto0_soundOn",
                            "video0:soundOff": "billboard_view_videoauto0_soundOff",
                            "video0:25": "billboard_view_videoauto0_25percent",
                            "video0:50": "billboard_view_videoauto0_50percent",
                            "video0:75": "billboard_view_videoauto0_75percent",
                            "video0:ended": "billboard_view_videoauto0_complete",
                            
                            /* Click for Sound : video */
							"video1:start": "billboard_click_videouser1_start",
                            "video1:pause": "billboard_click_videouser1_pause",
                            "video1:resume": "billboard_click_videouser1_resume",
                            "video1:replay": "billboard_click_videouser1_replay",
                            "video1:soundOn": "billboard_click_videouser1_soundOn",
                            "video1:soundOff": "billboard_click_videouser1_soundOff",
                            "video1:25": "billboard_click_videouser1_25percent",
                            "video1:50": "billboard_click_videouser1_50percent",
                            "video1:75": "billboard_click_videouser1_75percent",
                            "video1:ended": "billboard_click_videouser1_complete",

                            /* Click for Sound : video */
							"video2:start": "billboard_click_videouser2_start",
                            "video2:pause": "billboard_click_videouser2_pause",
                            "video2:resume": "billboard_click_videouser2_resume",
                            "video2:replay": "billboard_click_videouser2_replay",
                            "video2:soundOn": "billboard_click_videouser2_soundOn",
                            "video2:soundOff": "billboard_click_videouser2_soundOff",
                            "video2:25": "billboard_click_videouser2_25percent",
                            "video2:50": "billboard_click_videouser2_50percent",
                            "video2:75": "billboard_click_videouser2_75percent",
                            "video2:ended": "billboard_click_videouser2_complete",

                             /* Click for sound using Enabler.count() */
                             "click_for_sound" : "billboard_user_clicked_for_sound"                         
                        }
                    }, 
                    {
                        type: 'content-container',
                        id: 'backup_container',
                        env: ["backup"],
                        css: {
                            width: '970px',
                            height: '250px'
                        },
                        eventConfig: [{
                            eventType: 'click',
                            actions: [{
                                id: 'action0',
                                type: 'openURL',
                                URLpath: 'https://ad.doubleclick.net/ddm/trackclk/N1558.153730.6622715363521/B9117258.124310111;dc_trk_aid=297200943;dc_trk_cid=66140126',
                                URLname: 'billboard_click_billboard_clicktagbackup'
                            }]
                        }],
                        content: [{
                            type: 'content-image',
                            id: 'BILLBOARD_backup_image',
                            env: ["backup"],
                            imageConfig: {
                                src:'https://s.yimg.com/cv/eng/capitalone/150929/b/970x250_yellow.jpg',
                                alt: 'Capital One YellowZ2C',
                                title: 'Capital One YellowZ2C'
                            }
                        }]
                    },
					{
                        type: 'content-container',
                        id: 'mobile_backup_container',
                        env: ["mobile"],
                        css: {
                            width: '970px',
                            height: '250px'
                        },
                        eventConfig: [{
                            eventType: 'click',
                            actions: [{
                                id: 'action0',
                                type: 'openURL',
                                URLpath: 'https://ad.doubleclick.net/ddm/trackclk/N1558.153730.6622715363521/B9117258.124310111;dc_trk_aid=297200943;dc_trk_cid=66140126',
                                URLname: 'billboard_click_billboard_clicktagbackup_mobile'
                            }]
                        }],
                        content: [{
                            type: 'content-image',
                            id: 'BILLBOARD_mobile_backup_image',
                            env: ["mobile"],
                            imageConfig: {
                                src:'https://s.yimg.com/cv/eng/capitalone/150929/b/970x250_yellow.jpg',
                                alt: 'Capital One YellowZ2C',
                                title: 'Capital One YellowZ2C'
                            }
                        }]
                    },
					{
                        type: 'content-container',
                        id: 'tablet_backup_container',
                        env: ["tablet"],
                        css: {
                            width: '970px',
                            height: '250px'
                        },
                        eventConfig: [{
                            eventType: 'click',
                            actions: [{
                                id: 'action0',
                                type: 'openURL',
                                URLpath: 'https://ad.doubleclick.net/ddm/trackclk/N1558.153730.6622715363521/B9117258.124310111;dc_trk_aid=297200943;dc_trk_cid=66140126',
                                URLname: 'billboard_click_billboard_clicktagbackup_tablet'
                            }]
                        }],
                        content: [{
                            type: 'content-image',
                            id: 'BILLBOARD_tablet_backup_image',
                            env: ["tablet"],
                            imageConfig: {
                                src:'https://s.yimg.com/cv/eng/capitalone/150929/b/970x250_yellow.jpg',
                                alt: 'Capital One YellowZ2C',
                                title: 'Capital One YellowZ2C'
                            }
                        }]
                    }]
                }
            }
        }
    }
});