require=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({"./lib/capability.js":[function(e,t,n){t.exports=e("TL7Kjz")},{}],TL7Kjz:[function(e,t,n){"use strict";function r(e){var t;return t="html5-hls"===e?{acceptedProtocols:["http"],preferredFormats:["m3u8"],acceptedFormats:["m3u8","m3u8_playlist"]}:"html"===e?a.tv?{acceptedProtocols:["http"],preferredFormats:["m3u8","mp4"],acceptedFormats:["m3u8","m3u8_playlist","mp4"]}:{acceptedProtocols:["http"],preferredFormats:_,acceptedFormats:v}:"dash"===e?{acceptedProtocols:["http"],preferredFormats:["mp4dash"],acceptedFormats:["mp4dash","mpd"]}:{acceptedProtocols:["http","rtmp"],preferredFormats:["m3u8","mp4","flv","f4m"],acceptedFormats:["m3u8","m3u8_playlist","mp4","flv","f4m",""]}}function i(e){return"probably"===e}t.exports=r;var o,a=e("./user-agent"),s=e("../nextgen/src/util"),l=document.createElement("video");try{if(o=!1,l.canPlayType){var c=l.canPlayType('application/vnd.apple.mpegURL; codecs="avc1.42E01E, mp4a.40.2"');o=a.android?!!c:i(c),!o&&a.tv&&(o=i(l.canPlayType("application/vnd.apple.mpegurl")))}}catch(d){o=!1}a.tv&&(window.noHLS&&(o=!1),window.hls&&(o=!0));var p;try{p=l.canPlayType?i(l.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')):!1}catch(d){p=!1}var u;try{u=l.canPlayType?i(l.canPlayType('video/webm; codecs="vp8, vorbis"')):!1}catch(d){u=!1}a.tv&&(u=!1);var _=[];if(a.android&&_.push("mp4b"),(o||a.android&&s.isAndroidVersionAbove4())&&_.push("m3u8"),p&&_.push("mp4"),u){var m=_.indexOf("mp4");a.firefox&&m>-1?_.splice(m,0,"webm"):_.push("webm")}var v=_.slice(),y=v.indexOf("mp4b");y>-1&&v.splice(y+1,0,"mp4"),v.push("")},{"../nextgen/src/util":"jJTEqU","./user-agent":"ty5FFo"}],"./lib/event-bus.js":[function(e,t,n){t.exports=e("3ECu9u")},{}],"3ECu9u":[function(e,t,n){"use strict";function r(e){var t=this;t.name=e?e:"unnamed",t._events={},t._noLogEvents={"controls-bar-change":1,"cc-position-float":1,beaconSend:1,"seek-bar-mouseover":1,"seek-bar-mouseout":1,"volume-hover":1}}t.exports=r;var i=e("./logger");r.prototype.subscribe=function(e,t,n){function r(){i._unsubscribe(e,o)}var i=this;if(i._events){i._events[e]||(i._events[e]=[]);var o={subscriber:n,cb:t};return i._events[e].push(o),r.detach=r,r}},r.prototype._unsubscribe=function(e,t){var n=this;if(n._events&&e in n._events){var r=n._events[e].indexOf(t);r>-1&&n._events[e].splice(r,1)}},r.prototype.publish=function(e){var t=this;if(t._events){var n=Array.prototype.slice.call(arguments,1);if(e in t._events){var r=t._events[e].slice(0);t._log(e,r.length,n);for(var o=0;o<r.length;o++)try{r[o].cb.apply(r[o].subscriber,Array.prototype.slice.call(arguments,1))}catch(a){i.error("error in event handler:",a.message||a,a.stack)}}else t._log(e,0,n)}},r.prototype._log=function(e,t,n){var r=this,o=e.toLowerCase();if(-1===o.indexOf("timeupdate")&&-1===o.indexOf("progress")&&!(e in r._noLogEvents)){var a=["["+r.name+" bus][event]["+e+"]["+t+" subscribers]",n];!n.length&&a.pop(),i.log.apply(i,a)}},r.prototype.destroy=function(){var e=this;e._events=null}},{"./logger":"IS9j5T"}],"./lib/index.js":[function(e,t,n){t.exports=e("bRhrlU")},{}],bRhrlU:[function(e,t,n){function r(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},n.isString=function(e){return"string"==typeof e},n.isObject=function(e){return"[object Object]"===r(e)},n.isFunction=function(e){return"function"==typeof e}},{}],"./lib/logger.js":[function(e,t,n){t.exports=e("IS9j5T")},{}],IS9j5T:[function(e,t,n){var r=e("./index"),i=e("./user-agent");n.keepConsoleLogs="undefined"==typeof false||false,i.phantomJS&&(n.keepConsoleLogs=!1),function(){var e=function(){},t=["log","error","warn"];t.forEach(function(t){if(r.isNullOrUndefined(window.console)||"log"===t&&!n.keepConsoleLogs)n[t]=e;else if(console[t].apply)n[t]=function(){window.console[t].apply(console,arguments)};else{var i=Function.prototype.bind.apply(console[t],console);n[t]=function(){i.apply(console,arguments)}}})}()},{"./index":"bRhrlU","./user-agent":"ty5FFo"}],ty5FFo:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t=e[1];return parseFloat(t.split(".",2).join("."))||1}var i=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,o=navigator.userAgent.toLowerCase().replace(i,"");n.ua=o,n.chromium=r(/chromium\/([^\s]*)/.exec(o)),n.chrome=!n.chromium&&r(/chrome\/([^\s]*)/.exec(o)),n.ie=r(/msie ([^;]*)/.exec(o))||r(/trident.*; rv:([0-9.]+)/.exec(o)),n.opera=/opr\/|opera\//.test(o),n.firefox=r(/firefox\/([^\s]*)/.exec(o)),n.android=/android/.test(o),n.androidTablet=n.android&&!/mobile/.test(o),n.htc_one=/htc_one/.test(o),n.vizio=/Vizio/i.test(o)||window.YAHOO&&window.YAHOO.SmartTV&&"vizio"===window.YAHOO.SmartTV.manufacturer,n.tivo=/TiVo/i.test(o),n.firetv=n.android&&/amazonwebappplatform/.test(o)&&/aft/.test(o),n.tizen=/tizen/.test(o),n.orsay=/smarttv/.test(o)&&!n.tizen,n.samsung=n.orsay||n.tizen,n.sony=/(sony)/.test(o),n.ps4=/(playstation 4)/.test(o),n.ios=/(ipad|iphone|ipod)/.test(o),n.iphone=/(iphone|ipod)/.test(o)&&!/ipad/.test(o),n.ipad=n.ios&&!n.iphone,n.androidBrowser=!n.chrome&&/android/.test(o),n.androidVersion=r(/android\s([0-9\.]*)/.exec(o)),n.safari=!n.chrome&&!n.chromium&&!n.android&&/safari\/([^\s]*)/.test(o)&&r(/version\/([^\s]*)/.exec(o)),n.iosWebView=n.ios&&!navigator.standalone&&!n.safari,n.mobile=n.ios||n.android&&!n.firetv,n.safariDesktop=!n.mobile&&n.safari,n.tv=n.vizio||n.tivo||n.firetv||n.samsung||n.sony||n.ps4,n.desktop=!n.mobile&&!n.tv,n.phantomJS=window.window&&window.window._phantom,n.tv?n.vizio?n.os="vizio":n.tivo?n.os="tivo":n.firetv?n.os="firetv":n.samsung?n.os="samsung":n.sony?n.os="sony":n.os=null:n.ios?n.os="ios":n.android?n.os="android":/windows|win32/.test(o)?n.os="windows":/macintosh|mac_powerpc/.test(o)?n.os="macintosh":/symbos/.test(o)?n.os="symbos":/linux/.test(o)?n.os="linux":n.os=null},{}],"./lib/user-agent.js":[function(e,t,n){t.exports=e("ty5FFo")},{}],11:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this,o=n.YVAP;if(!o||!o.accountId&&!o.standaloneAd)return void(i._enabled=!1);i._enabled=!0,i._ads={},i._eventBus=e,i._model=n,i._view=r,i._vodAdBreaks=[],i._lastBreaks=[],i._seeked=!1;var a=i._view.rootElem.querySelector(".yvp-content");a.setAttribute("id","yvp-content-node-"+Math.floor(1e4*Math.random())),t.skipAd=function(){i._enabled&&i._currentAdId&&(i.cancelAd(),i._maybePlayImpl())},o.volume=n.playbackState.volume,o.mute=n.playbackState.mute,i._view._profiler.add(s.Metrics.YVAP_READY),i._yvap=new m({yvap:o},i._eventBus,a,t,i._view.adsOverlay?i._view.adsOverlay.node:null),i._view._profiler.setEndTime(s.Metrics.YVAP_READY),i._targetBitrate=i._model.playback.desiredBitrate,i._eventBus.subscribe(s.ADS_OBJS_UPDATE,i._onAdsUpdate,i),i._eventBus.subscribe(s.ADS_READY,i._onAdsReady,i),i._eventBus.subscribe(s.AD_BREAK_TIMELINE,i._onAdBreakTimeline,i),i._eventBus.subscribe(s.AD_PLAYBACK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(s.AD_PLAYBACK_ENDED,i._onAdPlaybackEnded,i),i._eventBus.subscribe(s.Ad.PLAYING,i._onPlaying,i),i._eventBus.subscribe(s.Ad.PAUSE,i._onPaused,i),i._eventBus.subscribe(s.Ad.TIMEUPDATE,i._onTimeupdate,i),i._eventBus.subscribe(s.Ad.ENDED,i._onEnded,i),i._eventBus.subscribe(s.Ad.ERROR,i._onError,i),i._eventBus.subscribe(s.Ad.CLICK,i._onClick,i),i._eventBus.subscribe(s.CONTROLS_SEEK_END,i._onSeekEnd,i)}function i(e,t){return!u.isNullOrUndefined(o(e,t))}function o(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];if(t(o))return i}return null}t.exports=r;var a=e("./yvap/ads-json"),s=e("./event"),l=e("./states"),c=e("./stream"),d=e("../../lib/user-agent"),p=e("./media-store"),u=e("../../lib"),_=e("../../lib/logger"),m=e("./yvap/video-ad-plugin");r.prototype.prepare=function(e){var t=this;if(t._enabled){t._ads={},t._lastBreaks=e.progress.adbreaks;try{t._adsReady=!1,e.isCCM?t._yvap.beginAdExperience(e.id,e.progress.position):t._yvap.getAdsFor({clipId:e.id})}catch(n){_.error("[yvap] prepare error",n.message||n,n.stack),t._enabled=!1}}},r.prototype._setupTimeout=function(){var e=this;if(d.desktop&&!e._adsReady){var t=e._model.YVAP&&e._model.YVAP.timeout;t?(clearTimeout(e._adTimeout),e._adTimeout=setTimeout(function(){e._clearAdTimeoutAndPlay()},1e3*t)):(e._adsReady=!0,e._maybePlayImpl())}},r.prototype._clearAdTimeoutAndPlay=function(){var e=this;e._adsReady=!0,e._adTimeout&&(clearTimeout(e._adTimeout),e._adTimeout=null,e._maybePlayImpl())},r.prototype.maybePlay=function(e,t){var n=this;if(!n._enabled)return void t(!1);if(n._cb=t,"start"===e)n._currentAdPosition=a.POSITION.bumper,n._setupTimeout();else{if("end"!==e)return void n._cb(!1);n._currentAdPosition=a.POSITION.postroll}n._resetAdPlaybackInfo(),n._resetState(),n._adTimeout||n._maybePlayImpl()},r.prototype._maybePlayImpl=function(){var e=this,t=e._playCount>0;if(e._currentAdPosition!==a.POSITION.bumper||i(e._ads,function(e){return e.pos===a.POSITION.bumper})||(e._currentAdPosition=a.POSITION.preroll),e._currentAdId=o(e._ads,function(t){return t.pos===e._currentAdPosition}),e._currentAdId){var n=e._ads[e._currentAdId];e._model.playbackState.ad=n,e._currentAdPosition===a.POSITION.midroll?n.type!==a.ADTYPES.NO_AD&&(e._midrollCurrent++,e._eventBus.publish(s.UPDATE_AD_COUNT,e._midrollCurrent,e._midrollCount)):e._eventBus.publish(s.UPDATE_AD_COUNT),e._eventBus.publish(s.AD_PLAYBACK_REQUEST,n.playbackId),e._play(n)}else e._model.playback.adPlaybackOnly||e._cb(t)},r.prototype._resetState=function(){var e=this;e._currentAdId=null,e._model.playbackState.ad=null,e._hasPlaybackStarted=!1},r.prototype._resetAdPlaybackInfo=function(){var e=this;e._playCount=0,e._adsPlayDuration=0},r.prototype._play=function(e){var t=this,n=t._model.playbackState.rendererType;if(e.type===a.ADTYPES.VPAID)t._playVPAIDAd(e);else if(e.type===a.ADTYPES.NO_AD)_.log("Loss of ad opportunity: AdsJson type is NO_AD"),t._eventBus.publish(s.Ad.NO_AD,t._currentAdId),t._onAdPlaybackEnded();else{_.log("Trying to play ad: ",e);var r,i=t._model.capabilities[t._model.playbackState.rendererType];"flash"===n?i={acceptedFormats:["mp4","flv","x-flv"],acceptedProtocols:["http"]}:"dash"===n&&(i={acceptedFormats:["mp4dash","mp4"],acceptedProtocols:["http"]}),r=c.findStreamByProperty(e.streams,"bitrate",t._targetBitrate,i),r?(_.log("Playing ad: ",e),t._playCount++,t._currentAdBitrate=r.bitrate,t._requestedTime=Date.now(),t._model.playbackState.state=l.VIDEO,t._view.syncViewState(),t._view.setStreams({streams:[r]}),t._view.play(),t._model.playback.fullscreen&&t._view.setFullscreen(!0)):(_.log("Could not play ad due to no stream of playable format",e),t._eventBus.publish(s.Ad.NO_PLAYABLE_STREAM,t._currentAdId),t._onEnded())}},r.prototype._playVPAIDAd=function(e){var t=this;t._playCount++,t._model.playbackState.state=l.VIDEO,t._model.playbackState.loading=!1,t._view.syncViewState(),t._model.playbackState.paused||t._view.pause(),t._yvap.renderVPAIDAd(e.playbackId,t._targetBitrate,t._view.rootElem.clientWidth,t._view.rootElem.clientHeight,t._model.playbackState.volume,t._model.playbackState.mute,t._model.playbackState.rendererType)},r.prototype.updateYVAPData=function(e){var t=this;if(t._enabled)try{t._yvap.updatePlayerData(e)}catch(n){_.error("[yvap] updatePlayerData error",n.message||n,n.stack),t._enabled=!1}},r.prototype._onAdsUpdate=function(e){var t=this;e.forEach(function(e){var n=e.playbackId;if(t._ads[n]?Object.keys(e).forEach(function(r){t._ads[n][r]=e[r]}):t._ads[n]=e,e.streams){var r=e.streams.map(function(e){return new p.Stream(e)});t._ads[n].streams=r}})},r.prototype._onAdsReady=function(){var e=this;e._model.YVAP&&(e._model.YVAP.adsReady=!0),e._clearAdTimeoutAndPlay()},r.prototype._onPaused=function(){var e=this;e._model.playbackState.paused=!0,e._eventBus.publish(s.AD_PLAYBACK_PAUSED),e._view.syncViewState()},r.prototype._onPlaying=function(){var e=this;if(e._hasPlaybackStarted)e._eventBus.publish(s.AD_PLAYBACK_RESUMED,e._currentAdId);else{e._hasPlaybackStarted=!0,e._model.playbackState.loading=!1,e._view.syncViewState();var t=Date.now()-e._requestedTime;e._eventBus.publish(s.AD_PLAYBACK_STARTED,e._currentAdId,e._currentAdBitrate,t)}e._model.playbackState.paused=!1,e._view.syncViewState()},r.prototype._onTimeupdate=function(e,t,n){var r=this;r._eventBus.publish(s.AD_PLAYBACK_PROGRESS,r._currentAdId,e,t,n)},r.prototype.cancelAd=function(){var e=this;e._enabled&&(e._eventBus.publish(s.Ad.CANCELED,e._currentAdId),e._clearAndResetAdState(),e._view.syncViewState())},r.prototype._clearAndResetAdState=function(){var e=this;e._currentAdId&&(delete e._ads[e._currentAdId],e._resetState())},r.prototype._onEnded=function(){var e=this;e._eventBus.publish(s.AD_PLAYBACK_ENDED,e._currentAdId)},r.prototype._onAdPlaybackStarted=function(e,t,n,r,i,o){var s=this,l=s._ads[s._currentAdId];if(l&&(s._adsPlayDuration+=l.duration,l.type!==a.ADTYPES.NO_AD&&s._fireAdBreakInfoEvt)){var c=l.type===a.ADTYPES.VPAID?o:n;s._fireAdBreakInfoEvt(c)}},r.prototype._onAdPlaybackEnded=function(){var e=this;e._clearAndResetAdState(),e._maybePlayImpl()},r.prototype._onError=function(e,t){var n=this;_.error("Ad errored out",e),n._eventBus.publish(s.AD_PLAYBACK_ERROR,n._currentAdId,e,t),n._ads[n._currentAdId].pos===a.POSITION.midroll&&(n._midrollCount-=1,n._midrollCurrent-=1),n._onEnded()},r.prototype._onClick=function(e){var t=this;if(t._currentAdId){var n=t._ads[t._currentAdId];t._eventBus.publish(s.AD_CLICK,t._currentAdId,e),window.open(n.clickUrl,"_blank")}},r.prototype.hasOccured=function(e){var t=(new Date).getTime(),n=t-e;return 36e5>n},r.prototype._onAdBreakTimeline=function(e){var t=this;d.mobile||(t._vodAdBreaks=e.map(function(e,n){return{time:e,occurred:t.hasOccured(t._lastBreaks[n]||0)}}),t._eventBus.publish(s.UPDATE_AD_BREAKS,t._vodAdBreaks))},r.prototype._startAdBreak=function(e,t,n){var r=this;r._resetAdPlaybackInfo(),r._resetState(),r._currentAdPosition=a.POSITION.midroll,t.occurred=!0,r._nextBreak=null,void 0!==t.adDuration&&r._eventBus.publish(s.UPDATE_AD_BREAKS,r._vodAdBreaks),r._cb=function(i){r._eventBus.publish(s.AD_BREAK_ENDED,{adsPlayCount:r._playCount,adsPlayDuration:r._adsPlayDuration,contentTime:e,time:t.time}),n(i)};var i=r._yvap.getMidrollAds(t.time,t.adDuration);r._eventBus.publish(s.AD_BREAK_STARTED,e,t.time);var o=i.filter(function(e){return e.type!==a.ADTYPES.NO_AD}),l=null;r._fireAdBreakInfoEvt=function(n){window.clearTimeout(l),l=null,r._fireAdBreakInfoEvt=null,r._eventBus.publish(s.AD_BREAK_INFO,{latency:n||"na",numMidrollsTotal:i.length,numMidrollsValid:o.length,adBreakDuration:t.adDuration,contentTime:e,time:t.time})},i.length>0?(r._midrollCount=o.length,r._midrollCurrent=0,r._eventBus.publish(s.ADS_OBJS_UPDATE,i),r._midrollCount>0?l=window.setTimeout(r._fireAdBreakInfoEvt,3e3,"TO"):r._fireAdBreakInfoEvt(),r._maybePlayImpl()):(r._fireAdBreakInfoEvt(),r._cb(!1))},r.prototype.maybeAdBreak=function(e,t){var n=this,r=e.currentTime,i=e.isLive,o=e.adDuration;if(i||!(10>r)){if(!n._enabled)return void t(!1);if(!n._model.playbackState.seeking){if(i){var a={time:r,adDuration:o};return void n._startAdBreak(r,a,t)}n._nextBreak||(n._nextBreak=n._findNextBreak(r,n._vodAdBreaks.filter(function(e){return!e.occurred})));var s=function(e){t(e,c)};if(n._seeked){n._seeked=!1,n._nextBreak=null;var l=n._findPreviousBreak(r,n._vodAdBreaks),c=n._vodAdBreaks.indexOf(l);l&&!l.occurred&&n._startAdBreak(r,l,s)}else n._nextBreak&&n._nextBreak.time<r?n._startAdBreak(r,n._nextBreak,s):t(!1)}}},r.prototype._findNextBreak=function(e,t){var n=null;return t.forEach(function(t){_.log(t),t.time>e&&(!n||t.time<n.time)&&(n=t)}),n},r.prototype._findPreviousBreak=function(e,t){var n=null;return t.forEach(function(t){t.time<e&&(!n||t.time>n.time)&&(n=t)}),n},r.prototype._onSeekEnd=function(){var e=this;e._seeked=!0}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./media-store":26,"./states":49,"./stream":"Af6MnA","./yvap/ads-json":97,"./yvap/video-ad-plugin":142}],12:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=this;o._eventBus=e,o._view=n,o._model=t,o._controller=r,o._fetcher=i}t.exports=r,t.exports.AGE_GATE_SCREEN_TYPES=l;var i=e("./util"),o=e("../../lib"),a=e("./event"),s=e("./strings"),l={login:"login",birthday:"birthday",warning:"warning",block:"block"},c="vpReleaseTime",d=864e5,p="WAIT";r.prototype._initiateAgeGateScreen=function(e){var t=this;t._view.destroyAgeGateScreen(),t._view.renderAgeGateScreen(t._getScreenStringsObj(e),t),t._activeScreenType=e,t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"age-"+t._ageGateType}),t._model.ui.showAgeGate=!0,t._waitTimeout&&clearTimeout(t._waitTimeout)},r.prototype.run=function(){var e=this,t=e._model.userPreferences.isAuthenticated,n=!i.isOffNetwork(),r=e._model.userPreferences.isAdult,o=e._isUser24HrsBanned();e._ageGateType=e._model.playlist.getCurrentItem()&&e._model.playlist.getCurrentItem().ageGate;var a=e._getApplicableAgeGateScreen(t,n,r,o);a&&"none"!==e._ageGateType?a===p?e._waitTimeout=setTimeout(function(){e._model.ui.showAgeGate||this._initiateAgeGateScreen(l.warning)},1e4):this._initiateAgeGateScreen(a):e._continuePlayerFlow()},r.prototype._getApplicableAgeGateScreen=function(e,t,n,r){var i=this;return e||r?!r&&n?null:o.isNullOrUndefined(i._model.userPreferences.isAdult)&&!r?(i._fetcher.getUserPreferences(),p):l.block:t?l[i._ageGateType]:i._ageGateType===l.birthday?l[i._ageGateType]:l.warning},r.prototype._getScreenStringsObj=function(e){var t=this,n={title:t._getLocalizedString("CONTENT_RESTRICTED"),desc:"",button:"",isBirthday:!1,isBlock:!1};e===l.login?(n.desc=t._getLocalizedString("AGE_GATE_DESC"),n.button=t._getLocalizedString("SIGN_IN_TO_VIEW_ACTION")):e===l.warning?(n.desc=t._getLocalizedString("AGE_GATE_DESC"),n.button=t._getLocalizedString("CONTINUE_ACTION")):e===l.birthday?(n.desc=t._getLocalizedString("AGE_GATE_BDAY_DESC"),n.button=t._getLocalizedString("SUBMIT_ACTION"),n.isBirthday=!0):e===l.block&&(n.desc=t._getLocalizedString("AGE_GATE_NOT_ALLOWED_DESC"),n.isBlock=!0);var r=t._model.playlist.getCurrentItem();return n.imageSrc=r.images.defaultThumbnail,n.width=t._model.uiState.width,n.height=t._model.uiState.height,n},r.prototype._isUser24HrsBanned=function(){var e=this;if(!e._user24HrsBanned){var t=i.localStorage.get(c);isNaN(parseInt(t))||(e._user24HrsBanned=(new Date).getTime()-t<0)}return e._user24HrsBanned},r.prototype._continuePlayerFlow=function(){var e=this;e._model.ui.showAgeGate=!1,e._view.destroyAgeGateScreen(),e._activeScreenType=null,e._waitTimeout&&clearTimeout(e._waitTimeout),e._controller.play()},r.prototype._getLocalizedString=function(e){return s.i18n[e]},r.prototype._handleLoginClick=function(){var e=this;e._eventBus.publish(a.UI_LOGIN,"ui_agebl"),i.showUserAuthPage(e._model)},r.prototype._handleBirthDayClick=function(e,t){if(t){var n=this,r=n._isValidDate(t.inputMonth.value,t.inputDay.value,t.inputYear.value);i.classList(t.inputMonth).remove("validate-error"),i.classList(t.inputDay).remove("validate-error"),i.classList(t.inputYear).remove("validate-error");for(var o=n._getInvalidDateInputNodes(t.inputMonth,t.inputDay,t.inputYear),a=0;a<o.length;a++)i.classList(o[a]).add("validate-error");if(!r||o.length>0)return;n._isUserAdult(new Date(t.inputYear.value,t.inputMonth.value-1,t.inputDay.value),n._model.baseConfig.region)?n._continuePlayerFlow():(n._initiateAgeGateScreen(l.block),i.localStorage.put(c,(new Date).getTime()+d))}},r.prototype._handleWarningClick=function(){var e=this;e._continuePlayerFlow()},r.prototype.handleClickEvent=function(e,t){var n=this;n._activeScreenType===l.login?n._handleLoginClick(e):n._activeScreenType===l.birthday?(n._eventBus.publish(a.CTRL_AGEGATE_BDAY),n._handleBirthDayClick(e,t)):n._activeScreenType===l.warning&&n._handleWarningClick(e),n._eventBus.publish(a.API.UI_INTERACT,{srcElement:"age-"+n._activeScreenType+"-btn"})},r.prototype._isValidDate=function(e,t,n){var r=/^\d{1,2}$/,i=/^\d{4}$/;if(!(r.test(e)&&r.test(t)&&i.test(n)))return!1;var o=parseInt(t),a=parseInt(e),s=parseInt(n);if(1e3>s||s>3e3||0===a||a>12)return!1;var l=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400===0||s%100!==0&&s%4===0)&&(l[1]=29),o>0&&o<=l[a-1]},r.prototype._getInvalidDateInputNodes=function(e,t,n){var r,i,o,a,s,l,c=[];try{r=parseInt(e.value),a=r>=1&&12>=r}catch(d){a=!1}try{i=parseInt(t.value),s=i>=1&&31>=i}catch(d){s=!1}try{o=parseInt(n.value),l=o>=1900&&o<=(new Date).getFullYear()}catch(d){l=!1}return a||c.push(e),s||c.push(t),l||c.push(n),c},r.prototype._isUserAdult=function(e,t){if(o.isNullOrUndefined(e))return!1;var n=new Date((new Date).getTime()-e.getTime()).getUTCFullYear()-1970;return t.toLowerCase()in["kr","sg","th"]?n>=21:n>=18},r.prototype.filterNonDigitInput=function(e){var t,n,r,i,o=[9,37,39];return e?(r=e.keyCode,i=e.shiftKey,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,t=r>=48&&57>=r||r>=96&&105>=r||8===r||46===r,n=o.indexOf(r)>-1,!i&&t||n?!0:(e.preventDefault?e.preventDefault():e.returnValue=!1,!1)):!1},r.prototype.isWaitingAuthentication=function(){var e=this;return!o.isNullOrUndefined(e._waitTimeout)},r.prototype.getPlayerWidth=function(){var e=this;return e._model.uiState.width},r.prototype.getPlayerHeight=function(){var e=this;return e._model.uiState.height},r.prototype.destroy=function(){var e=this;e._model.ui.showAgeGate=!0}},{"../../lib":"bRhrlU","./event":"YJm+dH","./strings":"XwKsC9","./util":"jJTEqU"}],13:[function(e,t,n){"use strict";function r(e,t,n,r){function i(e,t){return e-t}var o=this;o._videoTag=e,o._availableBitrates=t?t.sort(i):[],o.reservoirLength=n||s,o.cushionLength=r||l,o.currentBitrate=0,o._bufferingEventsForBitrates={},o._availableBitrates.forEach(function(e){o._bufferingEventsForBitrates[e]=0}),e&&e.addEventListener("waiting",function(){o._bufferingEventsForBitrates[o.currentBitrate]=o._bufferingEventsForBitrates[o.currentBitrate]+1},!1)}t.exports=r;var i=e("./util"),o="yvpTargetBitrate",a=900,s=10,l=20;r.prototype.setTargetBitrate=function(e){i.localStorage.put(o,e)},r.prototype.getTargetBitrate=function(){var e=this,t=i.localStorage.get(o);return t||(t=a,e.setTargetBitrate(a)),t},r.prototype.getBufferOccupancy=function(){for(var e=this,t=e._videoTag.buffered,n=e._videoTag.currentTime,r=0;r<t.length;r++){var i=t.start(r),o=t.end(r);if(n>=i&&o>=n){var a=o-n;if(a>=e._videoTag.length-n)return Number.MAX_VALUE}return a}return 0},r.prototype._getIdealRecommendedBitrate=function(e,t){var n=this;if(t===Number.MAX_VALUE)return n.currentBitrate;var r=e[0];if(t>n.reservoirLength){var i=e[0],o=e[e.length-1],a=(o-i)/n.cushionLength;r=(t-n.reservoirLength)*a+i}return r},r.prototype._findMaxLessEqualIdealRate=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(t>=r)return r}return e[0]},r.prototype._findMinGreaterEqualIdealRate=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r>=t)return r}return e[e.length-1]},r.prototype.getRecommendedBitrate=function(e,t,n){var r=this;t=t||r._availableBitrates,n=void 0===n?r.getBufferOccupancy():n,e=void 0===e?t.indexOf(r.currentBitrate):e;var i=t[e],o=t[0],a=t[t.length-1],s=i===a?a:t[e+1],l=i===o?o:t[e-1],c=r._getIdealRecommendedBitrate(t,n),d=i;return c>=s?d=r._findMaxLessEqualIdealRate(t,c):l>=c&&(d=r._findMinGreaterEqualIdealRate(t,c)),d},r.prototype.getNumberOfBufferingsForBitrate=function(e){var t=this;return t._bufferingEventsForBitrates[e]}},{"./util":"jJTEqU"}],14:[function(e,t,n){"use strict";function r(e,t){var n=this;n._model=e,n._eventBus=t,s=window.chrome,n._session=null,n._sessionStatus=null,n._mediaSession=null,n._currentLocalMediaItem=null,n._currentCastingYVPMediaItem=null,n._receiverAvailable=!1,n._progressTimer=null,s.cast?s.cast.isAvailable?n._initializeCastApi():setTimeout(n._initializeCastApi.bind(n),1e3):window.__onGCastApiAvailable||(window.__onGCastApiAvailable=function(e,t){e?n._initializeCastApi():p.log("cast api script loading error:",t)},c.lazyLoad(m,1e4,function(e){e&&p.log("cast api fetching failed. Error:",e)})),n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,n._onLocalPlayerMediaItemLoaded,n)}function i(e){return{onSuccess:function(){var t=Array.prototype.slice.call(arguments,1);o("[media command executed]",e,t.length?t:"")},onError:function(){var t=Array.prototype.slice.call(arguments,1);a("[media command failed]",e,t.length?t:"")}}}function o(){p.log.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}function a(){p.warn.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}t.exports=r;var s,l=e("./event"),c=e("./util"),d=e("../../lib"),p=e("../../lib/logger"),u=e("./error"),_=e("./constants"),m="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",v=1e3,y="urn:x-cast:com.yahoo.video.custom",f={hls:"application/vnd.apple.mpegurl",dash:"application/dash+xml",mp4:"video/mp4"};r.prototype._initializeCastApi=function(){var e=this,t={CUSTOM:_.CHROMECAST_RECEIVER_ID,DEFAULT:s.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID},n=new s.cast.SessionRequest(t.CUSTOM),r=e._sessionListener.bind(e),i=e._receiverListener.bind(e),a=s.cast.AutoJoinPolicy.PAGE_SCOPED,c=new s.cast.ApiConfig(n,r,i,a),d=function(){o("cast sender-api initialization: Successful"),e._initialized=!0,e._resetCastState(),e._eventBus.subscribe(l.API.UI_INTERACT,e._onUIInteract,e),e._eventBus.subscribe(l.API.PLAYER_MUTE_CHANGE,e.setMute,e),e._eventBus.subscribe(l.CONTROLS_SET_VOLUME,e.setVolume,e),e._eventBus.subscribe(l.API.PLAYER_VOLUME_CHANGE,e.setVolume,e),e._eventBus.subscribe(l.CONTROLS_SEEKING,e.seek,e),e._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,e._togglePlayPause,e),e._eventBus.subscribe(l.CC.TOGGLE,e._onCCToggle,e)},p=function(t){o("cast sender-api initialization: Error",t),e._initialized=!1};s.cast.initialize(c,d,p)},r.prototype._resetCastState=function(){var e=this;e._model.castState={connected:!1,mediaLoaded:!1,paused:!1,playerState:s.cast.media.PlayerState.IDLE,progress:null,volume:{level:null,muted:null},items:{},currentItemId:null,currentItemYVPUUID:null,captionsOn:!1,captionsAvailable:!1},e._model.castState.getCurrentCastingYVPMediaItem=function(){return e._model.playlist.getMediaItemById(this.currentItemYVPUUID)}},r.prototype._receiverListener=function(e){o("receiverStatus",e);var t=this;t._receiverAvailable=e===s.cast.ReceiverAvailability.AVAILABLE,t._updateCastingAvailability(),!t._receiverAvailable&&t._session&&t._updateSession(null)},r.prototype._togglePlayPause=function(){var e=this;if(e._session)if(e.isCastMediaLoaded()){var t=e._model.castState.playerState;t===s.cast.media.PlayerState.PLAYING?e.pause():e.play()}else e._requestMediaLoad()},r.prototype._onCCToggle=function(e){var t=this;t.isCastMediaLoaded()&&(e?t._enableCaptions():t._disableCaptions())},r.prototype._updateCastingAvailability=function(){var e=this,t=e._receiverAvailable&&e._isMediaItemCastable(e._currentLocalMediaItem);e._eventBus.publish(l.API.CAST_AVAILABILITY_CHANGE,t),o("Is receiver available: %s. Is casting available = %s",e._receiverAvailable,t)},r.prototype._sessionListener=function(e){o("sessionListener found pre-existing session for auto-joining with numMediaItems="+e.media.length);var t=this;t._updateSession(e),0!==e.media.length&&(t._onMediaDiscovered("Auto-Joining exisiting session",e.media[0]),t._onMediaStatusUpdate())},r.prototype._requestNewCastingSession=function(){var e=this;o("requesting new casting session"),s.cast.requestSession(e._onRequestSessionSuccess.bind(e),e._onRequestSessionError.bind(e))},r.prototype._onRequestSessionSuccess=function(e){o("new casting session request: success");var t=this;t._updateSession(e),t._requestMediaLoad()},r.prototype._onRequestSessionError=function(e){var t=this;o("new casting session request: error",e),t._publishCastError(u.CAST_CODES.E_CAST_CONNECTION_REQUEST_FAILED,e)},r.prototype._updateSession=function(e){o("updateSession",{session:e});var t=this;if(t._session=e,!e){var n=t._model.castState.items[t._model.castState.currentItemId];return t._updateCastingMediaSession(null),void t._handleCastConnectionChanged(!1,n)}t._session.addUpdateListener(t._sessionUpdateListener.bind(t)),t._sessionUpdateListener(),t._session.addMediaListener(function(e){o("** Session.Medialistener **** A sender from current session changed a media on cast device",e)}),t._session.addMessageListener(y,function(e,t){var n=JSON.parse(t);o("** cast msg received **",n)})},r.prototype._sessionUpdateListener=function(){var e=this,t=s.cast.SessionStatus;if(o("_sessionUpdateListener, status=",e._session.status,{s:e._session}),e._sessionStatus!==e._session.status)switch(e._sessionStatus=e._session.status,e._session.status){case t.STOPPED:e._updateSession(null);break;case t.CONNECTED:e._handleCastConnectionChanged(!0);break;case t.DISCONNECTED:default:p.warn("[cast] sessionUpdateListner called with status="+e._session.status)}e._session&&(e._model.castState.volume.level!==e._session.receiver.volume.level&&(e._model.castState.volume.level=e._session.receiver.volume.level,e._eventBus.publish(l.CAST.VOLUME_CHANGED,e._session.receiver.volume.level)),e._model.castState.volume.muted!==e._session.receiver.volume.muted&&(e._model.castState.volume.muted=e._session.receiver.volume.muted,e._eventBus.publish(l.CAST.MUTE_CHANGED,e._session.receiver.volume.muted)))},r.prototype._endSession=function(){var e=this,t=function(e){o("end session success")},n=function(){o("end session error",arguments)};e._session.stop(t,n)},r.prototype._onLocalPlayerMediaItemLoaded=function(e){var t=this;t._currentLocalMediaItem=e,t._updateCastingAvailability()},r.prototype._onUIInteract=function(e){var t=this;switch(e.srcElement){case"ctrl-cast-start":case"ctrl-cast-stop":o("chromecast icon clicked"),t.isCastConnected()?t._endSession():t._requestNewCastingSession();break;case"ctrl-cast-disconnect":t._endSession();break;case"ctrl-cast-overlay":t._eventBus.publish(l.TOGGLE_PLAY_PAUSE)}},r.prototype._requestMediaLoad=function(){var e=this;if(o("sending request for media-load"),e._session&&!e._attemptingLoadMedia){var t=e._model.playlist.position,n=e._generateMediaInfo(e._currentLocalMediaItem),r=new s.cast.media.LoadRequest(n);r.autoplay=!0,r.currentTime=e._currentLocalMediaItem.progress.position||0,r.customData={media_uuid:n.customData.uuid,playlist_pos:t>-1?t:"unknown",videoSession:e._currentLocalMediaItem.videoSession,pageSpaceId:e._model.baseConfig.pageSpaceId,site:e._model.baseConfig.site,pls:e._model.guid,senderType:"desktop"};var i=function(t){e._attemptingLoadMedia=!1,e._onMediaDiscovered("loadMedia request",t)},a=function(){e._attemptingLoadMedia=!1,o("receiver cast device media load request errored",arguments)};e._attemptingLoadMedia=!0,e._session.loadMedia(r,i,a)}},r.prototype._onMediaDiscovered=function(e,t){var n=this;if(o("New casting media discovered via:",e),n._mediaSession===t)return void o("same mediasession as before, therefore not updating it");n._updateCastingMediaSession(t);var r=n._onMediaStatusUpdate.bind(n);n._mediaSession.addUpdateListener(r),t.currentTime&&t.items&&t.items.length&&n._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,t.media.customData.uuid,t.currentTime,t.media.duration),setTimeout(function(){var e=n._mediaSession;e&&e.playerState!==n._model.castState.playerState&&(a("playerState not synced. _onMediaStatusUpdate() was not called. calling _checkReceiverPlayerStatus"),n._checkReceiverPlayerStatus())},2e3)},r.prototype._onMediaStatusUpdate=function(){var e=this,t=e._model.castState.currentItemId;if(o("_onMediaStatusUpdate.",e._mediaSession.playerState,{mediasession:e._mediaSession}),e._hasLoadedMediaChanged()&&(e._awaitingPlaybackStart=!0,e._handleCastMediaChanged(e._mediaSession.media.customData)),e._model.castState.currentItemId=e._mediaSession.currentItemId,
e._model.castState.playerState!==e._mediaSession.playerState){e._stopProgressTimer();var n=e._model.castState.playerState;switch(e._model.castState.playerState=e._mediaSession.playerState,n===s.cast.media.PlayerState.BUFFERING&&e._handleCastBufferingChanged(!1),e._mediaSession.playerState){case s.cast.media.PlayerState.PLAYING:e._progressTimer=setInterval(e._updateProgress.bind(e),v),e._awaitingPlaybackStart&&(e._awaitingPlaybackStart=!1,e._handleCastPlayingChanged(!0));break;case s.cast.media.PlayerState.PAUSED:e._awaitingPlaybackStart=!0,e._handleCastPlayingChanged(!1);break;case s.cast.media.PlayerState.BUFFERING:e._handleCastBufferingChanged(!0);break;case s.cast.media.PlayerState.IDLE:e._mediaSession.idleReason===s.cast.media.IdleReason.FINISHED&&e._handleCastVideoEnded(t),e._hasPlaylistEnded()&&(e._handleCastMediaChanged(null),e._handleCastPlaylistEnded(),e._updateCastingMediaSession(null))}}},r.prototype._hasLoadedMediaChanged=function(){var e=this,t=e._mediaSession.currentItemId,n=null!==t&&t!==e._model.castState.currentItemId;return n},r.prototype._hasPlaylistEnded=function(){var e=this;return null===e._mediaSession.items},r.prototype._updateCastingMediaSession=function(e){var t=this;t._mediaSession=e,t._mediaSession||(t._currentCastingYVPMediaItem=null,t._model.castState.currentItemId=null,t._model.castState.currentItemYVPUUID=null,t._model.castState.paused=!1,t._model.castState.mediaLoaded=!1,t._stopProgressTimer(),t._model.castState.captionsAvailable=!1),t._attemptingLoadMedia=!1,t._updatePlaylistItemsData()},r.prototype._handleCastConnectionChanged=function(e,t){if("boolean"==typeof e){var n=this,r=n._model.castState;if(e!==r.connected){var i={};e?i.receiverName=n._session.receiver.friendlyName:t&&(i.uuid=t.media_uuid,i.playlist_pos=t.playlist_pos),n._model.castState.connected=e,n._eventBus.publish(l.CAST.CONNECTION_STATUS_CHANGED,e,i),!e&&n._resetCastState()}}},r.prototype._handleCastMediaChanged=function(e){var t=this;if(t._model.castState.mediaLoaded=!!e,e?(t._model.castState.currentItemYVPUUID=e.uuid,t._currentCastingYVPMediaItem=t._model.castState.getCurrentCastingYVPMediaItem()):t._model.castState.currentItemYVPUUID=null,t._eventBus.publish(l.CAST.MEDIA_CHANGED,e),e){var n=t._mediaSession.media&&t._mediaSession.currentItemId||null,r=null!==n?t._model.castState.items[n]:null;t._model.castState.captionsAvailable=!!(r&&r.captions&&r.captions.length)}else t._model.castState.captionsAvailable=!1;t._eventBus.publish(l.CAST.CAPTION_AVAILABILITY_CHANGED,t._model.castState.captionsAvailable),t._model.castState.captionsAvailable&&t._model.userPreferences.closedCaptions.show&&t._enableCaptions()},r.prototype._handleCastPlayingChanged=function(e){var t=this;t._model.castState.paused=!e,t._eventBus.publish(l.CAST.TOGGLE_PLAYING,e)},r.prototype._handleCastBufferingChanged=function(e){var t=this;t._eventBus.publish(l.CAST.BUFFERING,e)},r.prototype._handleCastVideoEnded=function(e){var t=this;t._model.castState.mediaLoaded=!1,t._model.castState.paused=!1,t._currentCastingYVPMediaItem&&(t._currentCastingYVPMediaItem.progress.position=0);var n=t._model.castState.items[e];t._eventBus.publish(l.CAST.VIDEO_ENDED,n.media_uuid)},r.prototype._handleCastPlaylistEnded=function(e){var t=this;t._eventBus.publish(l.CAST.PLAYLIST_ENDED)},r.prototype._checkReceiverPlayerStatus=function(){var e=this,t=i("get-status");e._mediaSession&&e._mediaSession.getStatus(null,t.onSuccess,t.onError)},r.prototype._updateProgress=function(){var e=this;if(e._session&&e._mediaSession){var t,n=e._mediaSession.media;n&&null!==n.duration?(t=e._mediaSession.getEstimatedTime(),e._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,n.customData.uuid,t,n.duration)):(t=0,e._stopProgressTimer()),e._currentCastingYVPMediaItem&&(e._currentCastingYVPMediaItem.progress.position=t),e._model.castState.progress=t}},r.prototype._stopProgressTimer=function(){var e=this;e._progressTimer&&(clearInterval(e._progressTimer),e._progressTimer=null)},r.prototype._updatePlaylistItemsData=function(){var e=this;e._model.castState.items={};var t=e._mediaSession&&e._mediaSession.items;t&&t.forEach(function(t){var n=[];t.media.tracks&&t.media.tracks.forEach(function(e){e.type===s.cast.media.TrackType.TEXT&&n.push(e)}),e._model.castState.items[t.itemId]=t.customData,e._model.castState.items[t.itemId].captions=n})},r.prototype._enqueueMediaOnReceiver=function(e){var t=this,n=t._model.playlist,r=[],i=n.items.length-n.position-1,o=n.position+1;e&&(i=e.length,o=0);for(var a=o,s=o+i;s>a;a++){var l=e?e[a]:n.getMediaItemAt(a);l&&t._isMediaItemCastable(l)&&r.push(l)}r.length&&t._insertMediaItems(r)},r.prototype._insertMediaItems=function(e){var t=this,n=[];e.forEach(function(e){var r=t._generateMediaInfo(e),i=new s.cast.media.QueueItem(r);i.autoplay=!0,i.customData={media_uuid:r.customData.uuid,playlist_pos:"unknown"},i.preloadTime=10,i.startTime=0,n.push(i)});var r=new s.cast.media.QueueInsertItemsRequest(n),a=i("queue-items"),l=function(){o("queue-items successful"),t._updatePlaylistItemsData()};t._mediaSession.queueInsertItems(r,l,a.onError)},r.prototype._generateMediaInfo=function(e){var t=this,n=s.cast.media.StreamType,r=Math.floor(e.streams.length/2),i=e.streams[r].url,o=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider,a=new s.cast.media.MediaInfo(i);a.metadata=new s.cast.media.GenericMediaMetadata,a.metadata.metadataType=s.cast.media.MetadataType.GENERIC,a.metadata.title=e.title,a.metadata.images=[{url:o}],a.streamType=e.isLive()?n.LIVE:n.BUFFERED,a.duration=e.duration,a.customData={uuid:e.id,title:e.title,thumbnail:o,mediaURL:i,isCCM:e.isCCM};var l=e.getType();return a.contentType=f[l],a.textTrackStyle=new s.cast.media.TextTrackStyle,a.tracks=t._createMediaInfoTracks(e,a),a},r.prototype._createMediaInfoTracks=function(e){var t;if(e.closedCaptions.length){var n=1,r=[];e.closedCaptions.forEach(function(e){var t=new s.cast.media.Track(n,s.cast.media.TrackType.TEXT);t.trackContentId=e.url,t.trackContentType=e.content_type,t.language=e.lang,t.name=e.lang,t.customData=null,n++,r.push(t)}),t=r.sort(function(e,t){return e.language===t.language?-1*e.trackContentType.localeCompare(t.trackContentType):e.language.localeCompare(t.language)})}return t},r.prototype._isMediaItemCastable=function(e){return!0},r.prototype._publishCastError=function(e,t){var n=this;n._eventBus.publish(l.WARNING,c.createErr("P",n._model.playbackState,u.E_CAST,e,t))},r.prototype._setCaptionTracks=function(e,t,n){var r=this,i=new s.cast.media.EditTracksInfoRequest(e);r._mediaSession.editTracksInfo(i,t,n)},r.prototype._enableCaptions=function(e){var t=this;if(t._mediaSession&&!d.isNullOrUndefined(t._mediaSession.currentItemId)){e=(e||t._model.userPreferences.closedCaptions.lang).toLocaleLowerCase();var n=t._model.castState,r=n.items[t._mediaSession.currentItemId].captions;if(0!==r.length){for(var i,s=function(){o("enable-captions successful"),n.captionsOn=!0},l=function(){a("enable-captions error")},c=0;c<r.length;c++){var p=(r[c].language||"").toLocaleLowerCase();if(p===e){i=r[c];break}}i||(i=r[0]),t._setCaptionTracks([i.trackId],s,l)}}},r.prototype._disableCaptions=function(){var e=this;if(e._mediaSession&&!d.isNullOrUndefined(e._mediaSession.currentItemId)){var t=function(){o("disable-captions successful"),e._model.castState.captionsOn=!1},n=function(){a("disable-captions error")};e._setCaptionTracks([],t,n)}},r.prototype._executeMediaCommand=function(e,t){var n=this;if(!n._mediaSession)return void o("trying "+e+" without a casting media loaded");if(!n._mediaSession[e])return void o("Command "+e+" is not allowed to be executed");var r=null;if("seek"===e){if("number"!=typeof t||0>t)throw"numSeconds while requesting seek on cast device needs to be defined and positive";r=new s.cast.media.SeekRequest,r.currentTime=t||0,r.resumeState=s.cast.media.ResumeState.PLAYBACK_START}var a=i(e);n._mediaSession[e](r,a.onSuccess,a.onError)},r.prototype.isCastMediaLoaded=function(){var e=this;if(e._initialized){var t=s.cast.media.PlayerState;return!(!e._mediaSession||e._mediaSession.playerState===t.IDLE)}return!1},r.prototype.isCastConnected=function(){var e=this;return e._initialized?!(!e._session||e._session.status!==s.cast.SessionStatus.CONNECTED):!1},r.prototype.play=function(){var e=this;e.isCastMediaLoaded()?e._executeMediaCommand("play"):(o("no castingMediaLoaded. Requesting to load media and cancelling this play request"),e._requestMediaLoad())},r.prototype.pause=function(){var e=this;e._executeMediaCommand("pause")},r.prototype.stop=function(){var e=this;e._executeMediaCommand("stop")},r.prototype.seek=function(e){var t=this;t._executeMediaCommand("seek",e)},r.prototype.setMute=function(e){var t=this;t._session&&t._session.setReceiverMuted(e)},r.prototype.setVolume=function(e){var t=this;t._session&&t._session.setReceiverVolumeLevel(e)}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./constants":17,"./error":20,"./event":"YJm+dH","./util":"jJTEqU"}],zKzgQw:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._model=t,r._view=n,r._userPreferences=r._model.userPreferences.closedCaptions;var i=o.localStorage.get(m);r._syncCCLocalData(i),r._eventBus.subscribe(l.Video.PLAYING,r._onVideoPlaybackStarted,r),r._eventBus.subscribe(l.PLAYBACK_STARTED,r._onVideoPlaybackStarted,r),c.tv||(r._eventBus.subscribe(l.AD_PLAYBACK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(l.Ad.PLAYING,r._onAdPlaybackStarted,r),r._eventBus.subscribe(l.AD_BREAK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(l.AD_BREAK_ENDED,r._onVideoPlaybackStarted,r)),r._eventBus.subscribe(l.PLAYBACK_ENDED,r.disable,r),r._eventBus.subscribe(l.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(l.FULLSCREEN_CHANGE,r._adjustCCSizeToScreen,r),r._eventBus.subscribe(l.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(l.VTT_SEGMENT_LOADED,r._loadVttSegment,r),r._eventBus.subscribe(l.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,r._onMediaItemLoaded,r),r._eventBus.subscribe(l.CC.LANGUAGE_CHANGE,r._onLanguageChange,r),r._eventBus.subscribe(l.CC.UI_TOGGLE,r._toggle,r),r._eventBus.subscribe(l.CC.UPDATE_STYLE,r._updateCCStyle,r),r._eventBus.subscribe(l.CC.POSITION_CHANGE,r._updateCCPosition,r),r._eventBus.subscribe(l.CC.POSITION_FLOAT,r._floatCCPosition,r);var s=r._eventBus.subscribe(l.CC.FETCHED,function(){s()},r);r._eventBus.subscribe(l.CC.USER_STYLE_PREFERENCES_CHANGE,r._syncCCPreferences,r),r._isAvailable=!1,r._currentMediaCCPool=[],r._defaultLang=p,r._ccElement=document.createElement("div"),o.classList(r._ccElement).add("cc-element"),r._CCElementInnerSpan=document.createElement("span"),r._ccElement.appendChild(r._CCElementInnerSpan),r._updateCCStyle(),r._view.getMainElement()&&r._view.getMainElement().appendChild(r._ccElement),r._currentFontSize=r._userPreferences.fontSize,(c.tv||c.safariDesktop&&r._model.isHtmlEnforced())&&a.isFunction(d)&&(r._vttFetcher=new d(r._eventBus,r._model))}var i=e("xhr"),o=e("./util"),a=e("../../lib"),s=e("../../lib/logger"),l=e("./event"),c=e("../../lib/user-agent"),d=e("./vtt-fetcher");t.exports=r;var p="en-us",u=".vtt",_=".ttml",m="yvpCC",v={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},y=Math.floor((Math.pow(2,33)-1)/90);r.prototype._onPlaybackProgress=function(e,t,n){var r=this;r._isLive?r._renderLiveCC(t):r._renderVODCC(t,n)},r.prototype._renderVODCC=function(e,t){var n=this;if(!n._isAvailable||!n._currentCCParsedCaptions||!n._currentCCParsedCaptions.length)return void(n._CCElementInnerSpan.innerHTML="");for(var r=e/t,i=Math.floor(r*n._currentCCParsedCaptions.length);i>0&&e<n._currentCCParsedCaptions[i].begin;)i--;for(;i<n._currentCCParsedCaptions.length&&e>n._currentCCParsedCaptions[i].end;)i++;var o=i>=0&&i<n._currentCCParsedCaptions.length;if(o=o&&n._currentCCParsedCaptions[i].begin<=e&&e<=n._currentCCParsedCaptions[i].end&&!!n._currentCCParsedCaptions[i].text){n._decorateCCSpan(!0);var a=n._currentCCParsedCaptions[i].text||"";n._CCElementInnerSpan.innerHTML=c.tv?a:n._breakLinesAndPadSides(a)}else n._CCElementInnerSpan.innerHTML="",n._decorateCCSpan()},r.prototype._decorateCCSpan=function(e){var t=this;if(t._CCSpanHasBeenDecorated!==e){var n=null,r=null;e&&(n="1.38em",r="0.104em"),t._CCSpanHasBeenDecorated=e,t._CCElementInnerSpan.style.lineHeight=n,t._CCElementInnerSpan.style.padding=r}},r.prototype._breakLinesAndPadSides=function(e){var t,n=this;if(e){var r=e.split("<br/>");if(r.length>1){for(t=0;t<r.length;t++)r[t].trim()&&(r[t]="&nbsp;"+r[t]+"&nbsp;",t<r.length-1&&(r[t]+="<br/>"));return r.join("")}e=e.trim(),n._CCElementInnerSpan.innerHTML=e;var i,o=Math.floor(n._CCElementInnerSpan.offsetHeight/(n._currentFontSize+2)),a=[],s=0;for(t=0;o>t;t++){if(i=t===o-1)l=e.length;else{var l=Math.floor(e.length/o*(t+1));/\s/.test(e.charAt(l))||(l=e.indexOf(" ",e.lastIndexOf(" ",l)))}l>s&&a.push("&nbsp;"+e.substring(s,l)+"&nbsp;"+(i?"":"<br/>")),s=l+1}return a.join("")}return e},r.prototype._renderLiveCC=function(e){var t=this;if(t._currentCCParsedCaptions&&t._currentCCParsedCaptions.length){for(var n=0;n<t._currentCCParsedCaptions.length&&t._currentCCParsedCaptions[n].end<e;)n++;if(n>0){var r=setTimeout(function(){t._currentCCParsedCaptions.splice(0,n),r=null},100);if(n>=t._currentCCParsedCaptions.length)return}var i=!1;t._currentCCParsedCaptions[n]&&(i=e>=t._currentCCParsedCaptions[n].begin&&e<=t._currentCCParsedCaptions[n].end),i?(t._decorateCCSpan(!0),t._CCElementInnerSpan.innerHTML=t._breakLinesAndPadSides(t._currentCCParsedCaptions[n].text||"")):t._ccLiveClearTO||(t._ccLiveClearTO=setTimeout(function(){t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan(),clearTimeout(t._ccLiveClearTO),t._ccLiveClearTO=null},1e3))}else""!==t._CCElementInnerSpan.innerHTML&&(t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan())},r.prototype._syncCCLocalData=function(e){var t=this;if(e&&e.ccSettings)for(var n in e.ccSettings)if(e.ccSettings.hasOwnProperty(n)&&!a.isNullOrUndefined(e.ccSettings[n])){if("hasChanged"===n)continue;t._userPreferences[n]=e.ccSettings[n]}},r.prototype._syncCCPreferences=function(){var e=this;e._updateCCStyle()},r.prototype._adjustCCSizeToScreen=function(){var e=this,t=e._view.getMainElement()&&e._view.getMainElement().offsetWidth,n=Math.ceil(e._userPreferences.fontSize*(t/640));t>640?n=Math.ceil(.8*n):640>t?12>n&&(n=12):n=e._userPreferences.fontSize,e._currentFontSize=n,e._ccElement.style.fontSize=e._currentFontSize+"px"},r.prototype._onLanguageChange=function(e){var t=this;t._userPreferences.lang=e,t._userPreferences.hasChanged=!0,t.enable(e)},r.prototype._toggle=function(e){var t=this;t._userPreferences.show=e,e?t.enable():t.disable()},r.prototype._onVideoPlaybackStarted=function(){var e=this;e._previouslyPlayingAd&&(e._isAvailable&&(e._userPreferences.show&&e.enable(),e._eventBus.publish(l.CC.SHOW_CONTROLS,!0)),e._previouslyPlayingAd=null)},r.prototype._onAdPlaybackStarted=function(){var e=this;e._previouslyPlayingAd=!0,e._hideAndDisableCC()},r.prototype._hideAndDisableCC=function(e){var t=this;t._eventBus.publish(l.CC.SHOW_CONTROLS,!1),t._currentCC=null,t.disable(),e&&(t._isAvailable=!1,t._currentMediaCCPool=[],t._eventBus.publish(l.CC.REMOVED))},r.prototype._loadVttSegment=function(e,t){var n=this;if(n._isLive){n._isVTTFirstSegment=!1,n._currentCCParsedCaptions||(n._currentCCParsedCaptions=[],n._isAvailable=!0,n._eventBus.publish(l.CC.FETCHED,{langList:["en-US"],selectedLang:"en-US"}),n._eventBus.publish(l.CC.SHOW_CONTROLS,!0),n._userPreferences.show&&n.enable(),n._isVTTFirstSegment=!0);var r=e.adjustedTime?e.adjustedTime:0;n._currentCCParsedCaptions=n._currentCCParsedCaptions.concat(n._parseVTT(e.data,r,t||n._enableCCLiveFallback))}},r.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),e&&e.closedCaptions.length>0?(t._isAvailable=!0,t._currentCC=null,t._eventBus.publish(l.CC.SHOW_CONTROLS,!0),t._processAndPropagateCC(e.closedCaptions)):t._hideAndDisableCC(!0)},r.prototype._processAndPropagateCC=function(e){var t=this,n=function(e){t._currentMediaCCPool=e,t._currentMediaCCPool.length>0?(c.mobile?t._eventBus.publish(l.CC.FETCH_MOBILE,{langList:t._currentMediaCCPool,selectedLang:t._userPreferences.lang}):t._eventBus.publish(l.CC.FETCHED,{langList:t._currentMediaCCPool.map(function(e){return e.lang}),selectedLang:t._userPreferences.lang}),t._userPreferences.show?t.enable(t._userPreferences.lang):t.disable()):(t._hideAndDisableCC(!0),s.warn("CC could not load for current mediaItem"))};t._getCCByRenderer(n,e,c.desktop||c.tv)},r.prototype._transformTTMLToVTT=function(e,t){var n=this,r=!1,i=[],o=function(n){i.push(n),i.length===t.length&&e(i)};t.forEach(function(t){n._ccUrlToVttBlobUrl(t.url,function(n){n?(t.url=n,o(t)):(!r&&e(i),r=!0)})})},r.prototype._ccUrlToVttBlobUrl=function(e,t){var n=this,r={url:e};c.ie&&c.ie<10&&(r.cors=!0),i(r,function(r,i,o){if(r)return void t(null);try{var a=e.indexOf("ttml")>-1?n._ttmlToVtt(o):o,l=new Uint8Array(n._utf8ToBytes(a)),c=URL.createObjectURL(new Blob([l],{type:"text/vtt"}));t(c)}catch(r){s.log("Exception occurred in converting TTML to VTT",r),t(null)}})},r.prototype._getCCByRenderer=function(e,t,n){var r,i=this,o=function(e){return-1===e.url.indexOf(r)};if(n)r=u,e(t.filter(o));else{r=_;var a=t.filter(o);0===a.length?i._transformTTMLToVTT(e,t):e(a)}},r.prototype._utf8ToBytes=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(127>=r)t.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var o=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t},r.prototype._ttmlToVtt=function(e){var t="WEBVTT\n\n",n=new window.DOMParser,r=n.parseFromString(e,"application/xml"),i=r.documentElement.querySelectorAll("p");return Array.prototype.forEach.call(i,function(e){var n=e.getAttribute("id"),r=e.getAttribute("begin"),i=e.getAttribute("end"),o="";Array.prototype.forEach.call(e.childNodes,function(e){""!==e.textContent&&(o+=e.textContent+" ")}),o=o.replace(/<br.*?\/\>/," "),t+=n+"\n",t+=r+" --> "+i+"\n",t+=o+"\n\n"}),t},r.prototype._grabCCFromTTML=function(e){for(var t=this,n=[],r=new window.DOMParser,i=r.parseFromString(e,"application/xml"),o=i.documentElement.querySelectorAll("p"),a=0;a<o.length;a++){var s={};if(s.begin=t._parseToSeconds(o[a].getAttribute("begin")),s.end=t._parseToSeconds(o[a].getAttribute("end")),!s.end&&(s.end=t._parseToSeconds(o[a].getAttribute("dur"))&&t._parseToSeconds(o[a].getAttribute("begin"))+t._parseToSeconds(o[a].getAttribute("dur")),!s.end)){n=null,t._hideAndDisableCC(!0);break}""!==o[a].textContent&&(s.text=o[a].textContent),n.push(s)}return n},r.prototype._parseVTT=function(e,t,n){for(var r,i=this,o=/\r\n|\r|\n/,a=e.split(o),s=a.length,l=/(\d{2}.?\d{2}.?\d{2}\.?\d{3})\s+.+\s+(\d{2}.?\d{2}.?\d{2}\.?\d{3})/,d=[],p=0,u=0,_=0;s>_;_++)if(l.test(a[_])){if(u>0){for(r=u;_>r;r++)d[p].text+=a[r]+(_>r+2?"<br/>":"");p++}var m=a[_].match(l);!n||i._zeroTimeIndicator||c.tizen||(i._zeroTimeIndicator=1e3*i._parseToSeconds(m[1]));var v=1e3*i._parseToSeconds(m[1]),f=1e3*i._parseToSeconds(m[2]);if(n&&!c.tizen)v-=i._zeroTimeIndicator,f-=i._zeroTimeIndicator;else if(v=v%y+t,f=f%y+t,!c.tizen&&i._isVTTFirstSegment&&v>1e4)return i._enableCCLiveFallback=!0,i._isVTTFirstSegment=!1,i._parseVTT(e,t,!0);d[p]={begin:v/1e3,end:f/1e3,text:""},u=_+1}if(u>0&&s>u)for(r=u;s>r;r++)d[p].text+=a[r]+(s>r+2?"<br/>":"");return d},r.prototype._parseToSeconds=function(e){if(e){for(var t=0,n=e.split(":"),r=2;r>=0;r--)t+=n[n.length-1-r]*Math.pow(60,r);return t}},r.prototype._saveAndPropagateData=function(e,t){var n=this;n._userPreferences.lang=t||n._userPreferences.lang,n._userPreferences.hasChanged=!0,n._eventBus.publish(l.CC.TOGGLE,e),n._eventBus.publish(l.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:n._userPreferences})},r.prototype._prepareCCForRendering=function(e){var t=this,n={url:e.url};c.ie&&c.ie<10&&(n.cors=!0),e.parsedCC||i(n,function(n,r,i){return n?(s.warn("Could not fetch CC from endpoint: "+n),void t._hideAndDisableCC()):void(t._currentCCParsedCaptions=e.parsedCC=t._grabCCFromTTML(i))})},r.prototype.enable=function(e){var t=this;return t._isAvailable?t._isLive?(t._ccElement.style.display="block",t._ccElement.style.textAlign="left",t._ccElement.style.width="90%",t._ccElement.style.left="5%",t._saveAndPropagateData(!0,p),!0):(t._currentCC=t._getCCByLanguage(e),t._currentCC||(t._currentCC=t._getCCByLanguage(t._userPreferences.lang)||t._currentMediaCCPool[0]),c.desktop||c.tv?(t._prepareCCForRendering(t._currentCC),t._currentCCParsedCaptions=t._currentCC.parsedCC,t._ccElement.style.display="block",t._saveAndPropagateData(!0,t._currentCC.lang),!0):(!c.desktop&&o.warn("Renderer was unable to enable CC"),!c.desktop)):void t._saveAndPropagateData(!0)},r.prototype.disable=function(){var e=this;return this._saveAndPropagateData(!1),e._isLive||(e._currentCCParsedCaptions=null),e._ccElement.style.display="none",!0},r.prototype._getCCByLanguage=function(e){for(var t,n=this,r=0;r<n._currentMediaCCPool.length;r++){if(e&&n._currentMediaCCPool[r].lang.toLowerCase()===e.toLowerCase().replace("_","-"))return n._currentMediaCCPool[r];n._currentMediaCCPool[r].lang===p&&(t=n._currentMediaCCPool[r])}return t},r.prototype._updateCCStyle=function(){var e=this;if(e._ccElement){var t=o.cssHexToRgb(e._userPreferences.bgColor)||{r:0,g:0,b:0},n=0===e._userPreferences.bgOpacity?"transparent":"rgba("+t.r+","+t.g+","+t.b+","+e._userPreferences.bgOpacity+")",r=v[e._userPreferences.fontEffect];e._ccElement.style.fontFamily=e._userPreferences.fontName,e._adjustCCSizeToScreen(),e._ccElement.style.color=e._userPreferences.fontColor,e._CCElementInnerSpan.style.backgroundColor=n,e._ccElement.style.textShadow=r,c.tv&&(c.samsung&&e._applyExtraCCSettings(),e._ccElement.style.position="absolute",e._ccElement.style.width="100%",e._ccElement.style.textAlign="center",e._ccElement.style.bottom="14%",e._ccElement.style.zIndex="30")}},r.prototype._floatCCPosition=function(e){var t=this,n=t._ccElement;t._isAvailable&&"none"!==n.style.display&&(e?(o.classList(n).remove("float"),o.classList(n).add("bottom")):(o.classList(n).add("float"),o.classList(n).remove("bottom")))},r.prototype._updateCCPosition=function(e){var t=this,n=t._ccElement;e?(o.classList(n).remove("bottom"),o.classList(n).add("top")):(o.classList(n).add("bottom"),o.classList(n).remove("top"))},r.prototype.hasUserPreferencesChanged=function(){var e=this;return e._userPreferences.hasChanged},r.prototype.resetPreferenceChange=function(){var e=this;e._userPreferences.hasChanged=!1},r.prototype.destroy=function(){},r.prototype._applyExtraCCSettings=function(){var e=this,t=v[e._userPreferences.fontEffect],n=o.cssHexToRgb(e._userPreferences.windowBgColor)||{r:0,g:0,b:0},r=0===e._userPreferences.windowBgOpacity?"transparent":"rgba("+n.r+","+n.g+","+n.b+","+e._userPreferences.windowBgOpacity+")";e._ccElement.style.backgroundColor=r;var i=o.cssHexToRgb(e._userPreferences.fontColor)||{r:255,g:255,b:255},a=0===e._userPreferences.fontOpacity?"transparent":"rgba("+i.r+","+i.g+","+i.b+","+e._userPreferences.fontOpacity+")";e._CCElementInnerSpan.style.color=a;var s=o.cssHexToRgb(e._userPreferences.fontEdgeColor);switch(e._userPreferences.fontEffect){case"dropshadow":case"raised":case"depressed":t=t.replace("rgba(0, 0, 0","rgba("+s.r+", "+s.g+", "+s.b);break;case"uniform":t=t.replace(/#000/g,e._userPreferences.fontEdgeColor)}e._ccElement.style["text-shadow"]=t},r.prototype.getLanguageForCode=function(e){e=e.toLowerCase().split("-"),e.length>1&&(e.pop(),e=e.join("-"));var t={id:"Bahasa Indonesia",ms:"Bahasa Melayu",cs:"etina",da:"dansk",de:"Deutsch",et:"eesti",en:"English",es:"espaol",fil:"Filipino",fr:"franais",hr:"hrvatski",it:"italiano",lv:"latvieu",lt:"lietuvi",hu:"magyar",nl:"Nederlands",nb:"norsk bokml",pl:"polski",pt:"portugus",ro:"romn",sk:"slovenina",sl:"slovenina",fi:"suomi",sv:"svenska",vi:"Ting Vit",tr:"Trke",el:"",bg:"",ru:"","sr-cyrl":"",uk:"",he:"",ar:"",mr:"",hi:"",bn:"",gu:"",ta:"",te:"",kn:"",ml:"",th:"",ur:" ",ko:"","zh-hans":"","zh-hant":"",ja:""};return t[e]}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./util":"jJTEqU","./vtt-fetcher":96,xhr:188}],"./nextgen/src/cc.js":[function(e,t,n){t.exports=e("zKzgQw")},{}],17:[function(e,t,n){"use strict";n.VIDEO_TAG_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},n.CHROMECAST_RECEIVER_ID="EF65F6AF"},{}],18:[function(e,t,n){"use strict";function r(e,t){var n=this;n._profiler=new m(e),n._profiler.add(l.Metrics.INIT_TO_STARTSCREEN),n._profiler.add(l.Metrics.INIT_TO_SAPI),n._profiler.add(l.Metrics.RENDER_TO_SWF),n._profiler.add(l.Metrics.INIT_TO_APPS_INIT),n._profiler.add(l.Metrics.VP_CONSTRUCTOR),n._eventBus=new c("internal"),n._model=new _.Model(e,t),n._restAPI=new E(n._model,n._profiler),n.ifPlaybackProgressCalled=!1,n._firstPlaylistBatchLoaded=!1,e.enableRecoverer&&!y.mobile&&(n._recoverer=new T(n._eventBus,n._model)),window.performance&&window.performance.timing.navigationStart&&(n._model.metrics.pageLatency=(new Date).getTime()-window.performance.timing.navigationStart),y.mobile?n._model.playback.autoplay=!1:n._model.playback.adPlaybackOnly?n._model.playback.autoplay=!0:n._model.playback.autoplay&&f.localStorage.get("yvp-dont-autoplay")&&(n._model.playback.autoplay=!1),f.localStorage.get("yvp-dont-autoplay")&&!n._model.ui.showStartScreen&&(n._model.ui.showStartScreen=!0),n._model.playback.autoplay&&(n._profiler.add(l.Metrics.INIT_TO_START),n._profiler.add(l.Metrics.HLS_FIRST_TS_LOAD_START)),n._metrics=new u.Metrics(n._model,n._eventBus,n._profiler),n._eventBus.subscribe(l.ERROR,n._onError,n),n._eventBus.subscribe(l.INFO,n._onError,n),n._eventBus.subscribe(l.WARNING,n._onWarning,n),n._eventBus.subscribe(l.START_SCREEN_CLICK,n._onStartScreenClick,n),n._eventBus.subscribe(l.END_SCREEN_CLICK,n._onEndScreenClick,n),n._eventBus.subscribe(l.RELATED_ITEM_CLICK,n._onRelatedItemClick,n),n._eventBus.subscribe(l.FETCH_MORE_RELATED_ITEMS,n._onFetchMoreRelatedItems,n),n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,n._togglePlayPause,n),n._eventBus.subscribe(l.CONTROLS_SEEK_START,n._onControlsSeekStart,n),n._eventBus.subscribe(l.CONTROLS_SEEK_END,n._onControlsSeekEnd,n),n._eventBus.subscribe(l.CONTROLS_SEEKING,n._onControlsSeeking,n),n._eventBus.subscribe(l.Video.CLICK,n._onVideoClick,n),n._eventBus.subscribe(l.Video.PLAYING,n._onPlaybackPlaying,n),n._eventBus.subscribe(l.Video.TIMEUPDATE,n._onPlaybackProgress,n),n._eventBus.subscribe(l.Video.PAUSE,n._onPlaybackPaused,n),n._eventBus.subscribe(l.Video.SEEKING,n._onSeeking,n),n._eventBus.subscribe(l.Video.SEEKED,n._onSeeked,n),n._eventBus.subscribe(l.Video.ENDED,n._onPlaybackEnded,n),n._eventBus.subscribe(l.Video.ERROR,n._onPlaybackError,n),n._eventBus.subscribe(l.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(l.PLAYBACK_REQUEST,n._setPlaybackTimeout,n),n._playbackStartEvenUnsubscriber=n._eventBus.subscribe(l.PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._adPlaybackStartEvenUnsubscriber=n._eventBus.subscribe(l.AD_PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._eventBus.subscribe(l.SELECTED_STREAM_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(l.SELECTED_STREAM_URL_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(l.PLAYER_DIMENSION_CHANGE,n._onDimensionChange,n),n._eventBus.subscribe(l.MEDIA_RELOAD_BEGIN,n._onMediaReloadBegin,n),n._eventBus.subscribe(l.MEDIA_RELOAD_END,n._onMediaReloadEnd,n),n._eventBus.subscribe(l.QUALITY_CHANGE,n._onQualityChange,n),n._eventBus.subscribe(l.METADATA_AVAILABLE,n._onMetadata,n),n._eventBus.subscribe(l.REFRESH_METADATA_AVAILABLE,n._updateYVAPData,n),n._eventBus.subscribe(l.SAPI_REFRESH_REQUEST,n._refreshMetadata,n),n._eventBus.subscribe(l.USER_AUTHENTICATED,n._onUserAuthentication,n),n._eventBus.subscribe(l.CONTROLS_SET_VOLUME,n._onVolumeChange,n),n._eventBus.subscribe(l.CONTROLS_SET_MUTE,n._onMuteChange,n),n._eventBus.subscribe(l.CC.SAVE_TO_LOCAL_STORAGE,n.saveCCSettingsToLocalStorage,n),n._eventBus.subscribe(l.API.BITRATE_CHANGE,n._onBitrateChange,n),n._eventBus.subscribe(l.KEYDOWN,n._onKeyDown,n),n._eventBus.subscribe(l.QUALITY_SELECTED,n._onQualitySelected,n),n._eventBus.subscribe(l.BITRATE_LIST_CHANGED,n._onBitrateListChanged,n),n._eventBus.subscribe(l.PTS_DISCONTINUITY,n._onPTSDiscontinuity,n),n._eventBus.subscribe(l.RELOAD_FRAGMENT,n._onReloadFragment,n),n._eventBus.subscribe(l.RECOVERY_START,n._onRecoveryStart,n),n._eventBus.subscribe(l.RECOVERY_METADATA_READY,n._onRecoveryMetadata,n),n._eventBus.subscribe(l.ER_READY,n._onER,n),n._eventBus.subscribe(l.API.CUEPOINT_STARTED,n._onHLSCueStart,n),n._fetcher=new d(n._model,n._eventBus,n._profiler),n._eventBus.publish(l.VIDEO_REQUEST,n._model.playlist.getCurrentItem().isPrefetch),n._playbackStarted={},n._profiler.setEndTime(l.Metrics.VP_CONSTRUCTOR),n._profiler.add(l.Metrics.INIT_RENDER_GAP),y.chrome>=32&&!n._model.disableCasting&&y.desktop&&(n._castController=new o(n._model,n._eventBus),n._eventBus.subscribe(l.CAST.CONNECTION_STATUS_CHANGED,n._onCastConnectionChange,n),n._eventBus.subscribe(l.CAST.PLAYLIST_ENDED,n._onCastPlaylistEnded,n),n._eventBus.subscribe(l.CAST.TOGGLE_PLAYING,function(){n._view.syncViewState()},n),n._eventBus.subscribe(l.CAST.VIDEO_ENDED,function(){n._view.syncViewState()},n))}t.exports=r;var i=e("./ads-controller"),o=e("./cast-controller"),a=e("./age-gate-controller"),s=e("./error"),l=e("./event"),c=e("../../lib/event-bus"),d=e("./metadata-fetcher"),p=e("./media-store"),u=e("./metrics/metrics"),_=e("./model"),m=e("./profiler"),v=e("./states"),y=e("../../lib/user-agent"),f=e("./util"),g=e("../../lib"),b=e("../../lib/logger"),h=e("./view"),E=e("./restapi"),S=e("./cc"),A=e("./metrics/metrics-constants"),T=e("./recoverer"),L="yvpVolume",I="yvpCC",M=1e4,C=30,N="yvpResumeTimeItems";r.prototype._togglePlayPause=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.state===v.VIDEO&&(e._model.playbackState.paused?(e.play(),e._eventBus.publish(l.CTRL_PLAYPAUSE,"play")):(e.pause(),e._eventBus.publish(l.CTRL_PLAYPAUSE,"pause")))},r.prototype.render=function(e){var t=this;t._profiler.setEndTime(l.Metrics.INIT_RENDER_GAP),t._profiler.add(l.Metrics.CREATE_RENDERER);var n;n=g.isString(e)?document.querySelector(e):e._node||e,null===n&&t._eventBus.publish(l.Error,f.createErr("C",t._model.playbackState,s.E_PLAYER,s.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player.")),t._metrics.setRootElem(n),t._view=new h(n,t._model,t._eventBus,t._profiler),t._view.render(t._model),g.isFunction(S)&&(t._ccController=new S(t._eventBus,t._model,t._view));var r={play:function(){t.play()},pause:function(){t.pause()},setOverlayActive:function(e){t._view.setOverlayActive(e)}};if(t._initVolume(),g.isFunction(i)&&(t._adsController=new i(t._eventBus,r,t._model,t._view)),t._playerReadyEventFired=!1,t._enterInitState(),t._model.playback.autoplay)var o={type:A.AUTOPLAY,action:A.AUTOPLAY};return t._model.playlist.id?t._fetcher.fetchPlaylist(function(){t._model.playback.autoplay&&t.play(o)}):t._fetcher.updateMetadata(),t._view.setDefaultRendererType(),t._model.playback.autoplay&&t.play(o),t._eventBus.publish(l.API.PLAYER_RENDERED),t._metrics.setFlashRenderer(t._view._renderer),t._profiler.setEndTime(l.Metrics.CREATE_RENDERER),t},r.prototype._initVolume=function(){var e=this,t=1,n=!1,r=f.localStorage.get(L);r&&(t=r.volume,n=r.mute),null===e._model.playbackState.volume&&(e._model.playbackState.volume=t),null===e._model.playbackState.mute&&(e._model.playbackState.mute=n)},r.prototype._onVolumeChange=function(e){var t=this,n=t._model.playbackState.volume;t._model.playbackState.volume=e,e>0&&(t._model.playbackState.mute=!1),
t._view.isRendererSet()&&t._view.setVolume(e),f.localStorage.put(L,{volume:e,mute:t._model.playbackState.mute}),t._eventBus.publish(l.CTRL_VOLUME,n)},r.prototype._onMuteChange=function(e){var t=this;t._model.playbackState.mute=e,t._view.isRendererSet()&&t._view.setMute(e),f.localStorage.put(L,{volume:t._model.playbackState.volume,mute:e})},r.prototype._onKeyDown=function(e){var t=this,n=e.keyCode,r="key-"+n;(32===n||38===n||40===n)&&(e.preventDefault(),t._eventBus.publish(l.API.UI_INTERACT,{srcElement:r}))},r.prototype.getCustomControlsNode=function(){var e=this;return e._view.getCustomControlsNode()},r.prototype.getVideoElement=function(){var e=this;return e._view.getVideoElement()},r.prototype.saveCCSettingsToLocalStorage=function(e){var t=f.localStorage.get(I)||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);f.localStorage.put(I,t)},r.prototype.supportSendBeacon=function(){return!(y.ie||y.safari||y.ios)},r.prototype.saveResumeTime=function(e){var t=f.localStorage.get(N)||{};t[e.id]=e.progress,f.localStorage.put(N,t)},r.prototype._onMetadata=function(e){var t=this,n=t._model.playlist.getCurrentItem();t._updateYVAPData(e),n&&-1!==e.indexOf(n.id)&&n.recoveryStatus!==p.ItemRecoveryStatus.RECOVERING&&t._loadMediaItem(n)},r.prototype._updateYVAPData=function(e){var t=this,n=[];t._adsController&&(e.forEach(function(e){var r=t._model.mediaStore.get(e),i="dash"===r.rendererType?"html":r.rendererType;n.push({clipId:r.id,clipDuration:r.duration,licenseId:r.license.licenseId,spaceId:r.metrics.pageSpaceId,playlistId:t._model.playlist.id,yvap:r.yvap,isLive:r.isLive(),rendererType:i})}),t._adsController.updateYVAPData(n))},r.prototype._refreshMetadata=function(e){var t=this;t._fetcher.refreshMetadata(e)},r.prototype._setupRenderer=function(e,t){var n=this,r=e.rendererType;n._model.playbackState.rendererType=r,n._view.setRendererType(r),n._view.setVolume(n._model.playbackState.volume),n._view.setMute(n._model.playbackState.mute),n._view.waitForRenderer(t)},r.prototype._loadMediaItem=function(e){var t=this,n=e.status.code,r=e.progress&&e.progress.position||t._model.playback.startTime;if(e.state===p.ItemState.HAS_DATA)t._model.playbackState.attemptingPlayback()||t._findCriticalError()||t._enterInitState(),t._setupRenderer(e,function(n){return n?(t._clearPlaybackTimeout(),void b.warn("Renderer failed to initialize. Is flash blocked?")):(t._notifedVideoStarted=!1,t._setVideoSrc(e,r)?t._adsController&&t._adsController.prepare(e):t._eventBus.publish(l.ERROR,f.createErr("S",t._model.playbackState,s.E_SAPI_STREAM,s.SAPI_CODES.E_SAPI_NO_PLAYABLE_STREAMS)),t._model.playbackState.loadedItem=e,void t._eventBus.publish(l.MEDIA_ITEM_LOADED,e))});else{if(n&&n.length>0||(n=s.SAPI_CODES.E_SAPI_NOT_FOUND),!t._isSAPIRequestError(n)){var i=s.isInfoCode(n);t._eventBus.publish(i?l.INFO:l.ERROR,f.createErr("S",t._model.playbackState,i?s.E_INFO:s.E_SAPI_STREAM,n))}t._model.playbackState.loadedItem=e,t._eventBus.publish(l.MEDIA_ITEM_LOADED,e)}},r.prototype._isSAPIRequestError=function(e){return e===s.E_PLAYER_CMS_JSONP_REQUEST_FAILURE||e===s.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL||e===s.E_PLAYER_CMS_RESPONSE||e===s.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT||e===s.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL||e===s.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED||e===s.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED||e===s.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408||e===s.E_PLAYER_CMS_XHR_REQUEST_ERROR||e===s.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT},r.prototype._onMediaItemLoaded=function(e){var t=this;t._playerReadyEventFired||(t._playerReadyEventFired=!0,t._eventBus.publish(l.API.PLAYER_READY)),t._attachWatchHistoryHandler(e)},r.prototype._attachWatchHistoryHandler=function(e){var t=this,n=function(){t._watchHistoryHandlerUnsub&&t._watchHistoryHandlerUnsub(),t._watchHistoryHandlerUnsub=null},r=function(){n(),t._model.userPreferences.isAuthenticated&&t._restAPI.saveToWatchHistory(e.id,function(e,t){e?b.warn("watch history call failed",e):b.log("watch history saved",t)},t)};n(),e.duration<=C?t._watchHistoryHandlerUnsub=t._eventBus.subscribe(l.PLAYBACK_ENDED,r,t):t._watchHistoryHandlerUnsub=t._eventBus.subscribe(l.PLAYBACK_PROGRESS,function(e,t){t>=C&&r()},t)},r.prototype._onCastConnectionChange=function(e,t){var n=this;if(e)n._model.playbackState.isVideoPlaying()&&(b.log("[cast][connection-success] video is still playing locally when connected. pausing it"),n._pausePlayer());else if(t.playlist_pos===n._model.playlist.position){var r=n._model.playlist.getCurrentItem();n._model.playbackState.state!==v.VIDEO||r.isLive()||n.seek(r.progress.position),n.play()}else if(g.isNumber(t.playlist_pos)&&"unknown"!==t.playlist_pos)n.setPlaylistPosition(t.playlist_pos,!0);else if(t.media_uuid){var i=n._model.playlist.items.indexOf(t.media_uuid);n.setPlaylistPosition(i>-1?i:0,!0)}else b.log("[cast] upon cast disconnect, could not determine where to resume playback",t),n.play();n._view.syncViewState()},r.prototype._onCastPlaylistEnded=function(){var e=this;e._model.playlist.position=e._model.playlist.items.length-1,e._onPlaybackEnded()},r.prototype.play=function(e,t){b.log("Controller.play()");var n=this;if(n._model.castState&&n._model.castState.connected)return void n._castController.play();var r=g.isNullOrUndefined(t)?!0:t;if(n._model.playbackState.paused&&n._model.playbackState.isVpaidAdPlaying())return n._eventBus.publish(l.RESUME_VPAID),n._onPlaybackResumed(),void b.log("Controller.play(): paused, informing VPAID ad to resume");if(n._model.playbackState.attemptingPlayback())return void b.log("Controller.play(): Cannot play, already attempting playback");var i=n._model.playlist.getCurrentItem();if(!i)return void b.log("Controller.play(): No current item, cannot play");if(n._spinnerMonitorStartTime=null,n._model.playbackState.paused)return void n._view.play();if(e&&(n._model.playback.requestType=e.type,e.action&&(n._model.playback.requestAction=e.action)),i.ageGate&&n._model.ui.showAgeGate)return void n._initiateAgeGate();if(n._model.ui.showAgeGate&&n._view.destroyAgeGateScreen(),n._profiler.add(l.Metrics.PLAYBACK_START),n._resetStateFlags(),i===n._model.playbackState.loadedItem)n._model.playbackState.loading=!0,n.setSelectedStreams(),n._eventBus.publish(l.PLAYBACK_REQUEST,i.id),n._startPlaying(i,r);else if(y.mobile)n._eventBus.publish(l.INFO,f.createErr("C",n._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY,"Cannot play before metadata is available"));else{n._model.playbackState.state=v.WAITING,n._model.playbackState.loading=!0;var o=n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,function(e){if(e===i){if(o(),n.setSelectedStreams(),i.ageGate&&n._model.ui.showAgeGate)return n._model.playbackState.state=v.INIT,void n._initiateAgeGate();n._eventBus.publish(l.PLAYBACK_REQUEST,i.id),n._startPlaying(i,r)}})}n._view.syncViewState()},r.prototype.setSelectedStreams=function(){var e=this,t=e._model.playlist.getCurrentItem();t&&t.selectedStreams&&0===t.selectedStreams.length&&t.streams.length&&e._view.setSelectedStreams(t.streams)},r.prototype._startPlaying=function(e,t){var n=this,r="start";if(e===n._model.playlist.getCurrentItem()&&!n._findCriticalError()){e.restartIfNeeded();var i=function(){var t=e.progress.position;n.getAutoplay()||n._firstPlayCalled||(n._firstPlayCalled=!0,n._profiler.add(l.Metrics.CLICK_TO_START)),e.isLongForm()&&t>0?(n._model.playback.isResume=!0,n._view.play(t),n._eventBus.publish(l.PLAYBACK_STARTED,e.id,e.progress.position)):(n._view.play(n._model.playback.startTime),n._model.playback.startTime=NaN),n._model.playback.fullscreen&&n._view.setFullscreen(!0)},o=function(){n._model.playbackState.state=v.VIDEO,n._resetStateFlags(),n._model.playbackState.loading=!0,n._view.syncViewState()};n._adsController&&t?n._adsController.maybePlay(r,function(t){o(),t&&(n._profiler.add(l.Metrics.PLAYBACK_START),n._setVideoSrc(e)),i()}):(o(),i())}},r.prototype._setPlaybackTimeout=function(){var e=this,t=e._model.playlist.getCurrentItem();e._view.didRendererTimeOut()||e._playbackTimeout||"error"===t.state||(e._playbackTimeout=setTimeout(function(){e._eventBus.publish(l.API.PLAYBACK_TIMEOUT,f.createErr("P",e._model.playbackState,s.E_WARNING,s.WARNING_CODES.E_PLAYBACK_TIMEOUT,"No playback after 10 seconds of requesting to play on player"))},M))},r.prototype._clearPlaybackTimeout=function(){var e=this;e._playbackTimeout&&clearTimeout(e._playbackTimeout)},r.prototype._notifyVideoStarted=function(){var e=this;e._notifedVideoStarted||(e._eventBus.publish(l.API.VIDEO_STARTED),e._notifedVideoStarted=!0),e._clearPlaybackTimeout()},r.prototype.pause=function(){var e=this,t=e._model.castState;t&&t.connected?!t.paused&&e._castController.pause():e._pausePlayer()},r.prototype._pausePlayer=function(){var e=this;e._model.playbackState.isVpaidAdPlaying()?(e._eventBus.publish(l.PAUSE_VPAID),e._onPlaybackPaused()):e._model.playbackState.attemptingPlayback()&&(e._view.pause(),e._clearPlaybackTimeout())},r.prototype.seek=function(e){var t=this;t._model.castState&&t._model.castState.connected?t._castController.seek(e):t._model.playbackState.state===v.VIDEO&&t._view.seek(e)},r.prototype.recover=function(){var e=this;e._recoverer.recover()},r.prototype.disableControls=function(){var e=this;e._view.disableControls()},r.prototype.enableControls=function(){var e=this;e._view.enableControls()},r.prototype.setCC=function(e,t){var n=this;n._ccController&&(e?n._ccController.enable(t):n._ccController.disable())},r.prototype.isPlaying=function(){var e=this;return"video"===e._model.playbackState.state&&!e._model.playbackState.paused},r.prototype.isLoading=function(){var e=this;return e._model.playbackState.videoLoading()},r.prototype.endVideo=function(){var e=this;e._view.endVideo()},r.prototype.getOpenSimSim=function(){var e=this;return e._view.getOpenSimSim()},r.prototype.setFullscreen=function(e){var t=this;t._view.setFullscreen(e)},r.prototype.getFullscreen=function(){var e=this;return e._view.getFullscreen()},r.prototype.setVolume=function(e){var t=this;t._eventBus.publish(l.CONTROLS_SET_VOLUME,e)},r.prototype.getVolume=function(){var e=this;return e._model.playbackState.volume},r.prototype.setMute=function(e){var t=this;t._eventBus.publish(l.CONTROLS_SET_MUTE,e)},r.prototype.getMute=function(){var e=this;return e._model.playbackState.mute},r.prototype.setLoop=function(e){var t=this;t._model.playback.loop=e},r.prototype.getLoop=function(){var e=this;return e._model.playback.loop},r.prototype.setContinuousPlay=function(e){var t=this;t._model.playback.continuousPlay=e},r.prototype.getContinuousPlay=function(){var e=this;return e._model.playback.continuousPlay},r.prototype.resumeContinuousPlay=function(e){var t=this;if(t.setContinuousPlay(!0),t._model.playbackState.state===v.END){var n=t._model.playlist.getNextPosition(t._model.playback.continuousPlay,t._model.playback.loop);-1!==n&&t.setPlaylistPosition(n,!0,e)}},r.prototype.getAutoplay=function(){var e=this;return e._model.playback.autoplay},r.prototype.getMediaStore=function(){var e=this;return e._model.mediaStore},r.prototype.getPlaybackState=function(){var e=this;return e._model.playbackState.state},r.prototype.getCurrentMediaItem=function(){var e=this;return e._model.playlist.getCurrentItem()},r.prototype.getPlaylistItems=function(){var e=this;return e._model.playlist.items},r.prototype.getPlaylist=function(){var e=this;return e._model.playlist},r.prototype._onDimensionChange=function(e){var t=this;t._model.uiState.width=e.width,t._model.uiState.height=e.height},r.prototype._onSelectedStreamChange=function(e,t){var n,r=this,i=r._model.playlist.getCurrentItem();if(t){t.cdn=f.getMediaCDNName(i,e,t.selectedStreamUrl),t.url=t.selectedStreamUrl;var o=[t];n=o}else{for(var a=e.length,s=0;a>s;s++)e[s].cdn=f.getMediaCDNName(i,e,null);n=e}i.fillSelectedStreams(n,null)},r.prototype._findCriticalError=function(){for(var e=this,t=e._model.errors,n=0;n<t.length;n++)if(t[n].category||t[n].subcategory)return t[n];return null},r.prototype._onStartScreenClick=function(){var e=this;e._eventBus.publish(l.CTRL_PLAYREQUEST,"ctp"),e._profiler.add(l.Metrics.HLS_FIRST_TS_LOAD_START);var t={type:A.CLICK,action:A.CLICK};e.play(t)},r.prototype._onVideoClick=function(){var e=this;if(e._eventBus.publish(l.API.UI_INTERACT,{srcElement:"video-click"}),e._view.controls)if("flash"===e._model.playbackState.rendererType){var t=e._model.playbackState.paused?"play":"pause";e._eventBus.publish(l.CTRL_PLAYPAUSE,t),e._view.setKeyboardFocus()}else e._togglePlayPause()},r.prototype._onEndScreenClick=function(e,t){var n=this,r=n._model.playlist;0===t?(n._eventBus.publish(l.API.UI_INTERACT,{srcElement:"es-rpl"}),n._eventBus.publish(l.CTRL_REPLAY)):(n._eventBus.publish(l.API.UI_INTERACT,{srcElement:"es-vid-"+t}),n._eventBus.publish(l.CTRL_ENDSCREEN_VID,{vid:e,vindex:t}));var i={type:A.CONTINUOUS,action:A.CLICK};n.setPlaylistPosition(r.appendItem(e),!0,i)},r.prototype._onRelatedItemClick=function(e,t,n,r){var i,o=this,a=o._model.playlist,s=n?"next-vid-":"es-vid-",c={srcElement:s+t},d=-1===t?l.CTRL_REPLAY:l.CTRL_ENDSCREEN_VID;-1===t&&(c.srcElement="es-rpl"),t>-2&&o._eventBus.publish(l.API.UI_INTERACT,c),o._eventBus.publish(d,{vid:e,vindex:t});var p={type:A.CONTINUOUS,action:r?A.AUTOPLAY:A.CLICK};i=o._view.showPlaylist()?a.getItemPosition(e):a.appendItem(e),o.setPlaylistPosition(i,!0,p)},r.prototype._onFetchMoreRelatedItems=function(e,t,n){var r=this,i=function(t,i){var o=[];i&&i.length>0&&(o=i.map(function(e){return r._view.showPlaylist()&&r.getPlaylistItems().indexOf(e)<0&&r._model.playlist.appendItem(e),r._model.mediaStore.get(e)})),t&&b.warn("sAPI data errors encountered while getting related/channel videos!"),n?n(t,o):r._eventBus.publish(l.RELATED_ITEMS_LOADED,t,e,o)};t.playlistId||t.playlistAlias?r._fetcher.getChannelsVideos(e,t,i):r._fetcher.getRelatedVideosChannel(e,t,i)},r.prototype.setPlaylistPosition=function(e,t,n){var r=this;r._resetPlaybackStarted(),r._model.errors=[],r._model.playbackState.criticalError=null,r._model.playbackState.isAdPlaying()&&r._adsController.cancelAd();var i=r._model.playlist,o=i.getCurrentItem();r.endVideo(),i.position=e;var a=i.getCurrentItem();if(r._model.playbackState.looped=!1,a){var s=a.streams.length>0&&a.streams[0].path?p.getSapiVsId(a.streams[0].path):"";a.videoSession=s+"_"+a.generateVSid(),a.samplingId=a.generateSamplingId(),p.updateVsInStreams(a.streams,a.videoSession),r._view.resetState(),r._eventBus.publish(l.API.PLAYLIST_POSITION_CHANGE,i.position),r._enterInitState(),r._eventBus.publish(l.VIDEO_REQUEST,a.isPrefetch),a.fetchFinished()&&r._loadMediaItem(a)}else t=!1;a&&"error"!==a.state?t&&r.play(n):r._endPlayback(o)},r.prototype.setContentHeightForNFL=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t?t.provider:null;n&&"video.nflhighlights.com"===n.providerId&&e._view._setContentHeightForNFL()},r.prototype.sendPrefetchInfo=function(e){var t=this,n={url:e.url,source:e.source,latency:e.latency||"na",http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument||"na",perfInfo:e.perfInfo||"na",perfStack:e.perfStack||"na"};return n.source&&n.url?(t._eventBus.publish(l.API_CALLED,n),!0):!1},r.prototype._endPlayback=function(e){var t=this;t._view.setFullscreen(!1),t._model.playbackState.previousItem=e,t._model.playbackState.state=v.END,t._resetStateFlags(),t._view.syncViewState()},r.prototype._enterInitState=function(){var e=this;e._model.playbackState.state=v.INIT,e._resetStateFlags(),e._view.syncViewState()},r.prototype._resetStateFlags=function(){var e=this,t=e._model.playbackState;t.paused=!1,t.seeking=!1,t.loading=!1},r.prototype.removePlaylistItems=function(e,t){var n=this,r=n._model.playlist;r.items.splice(e,t),r.position>=e+t?r.position-=t:e<=r.position&&r.position<e+t&&n.setPlaylistPosition(-1)},r.prototype.prefetch=function(e){var t=this,n=!(t._model.playlist.getCurrentItem().id in e);t._fetcher.prefetch(e,n)},r.prototype._onPlaybackError=function(e){var t=this;t._eventBus.publish(l.PLAYBACK_ERROR,e)},r.prototype._onError=function(e){var t=this;if(!t._recoverer||t._recoverer.shouldRenderErrorScreen(e)){try{throw new Error("Stack Trace")}catch(n){b.error(n.stack)}t._model.errors.push(e);var r=t._findCriticalError();r&&(t._clearPlaybackTimeout(),t._applyErrorFilters(r),t._model.playbackState.criticalError=r,t._model.playbackState.state=v.END,t._resetStateFlags(),t._view.syncViewState())}},r.prototype._onWarning=function(e,t){var n=this;t&&n._onError(e)},r.prototype._onPTSDiscontinuity=function(e){var t=this;t._eventBus.publish(l.WARNING,f.createErr("P",t._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_PTS_DISCONTINUITY,null,"consecutive frame time diference is "+e))},r.prototype._onReloadFragment=function(e){var t=this;t._eventBus.publish(l.WARNING,f.createErr("P",t._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_RELOAD_FRAGMENT,null,e))},r.prototype._applyErrorFilters=function(e){var t=this,n=function(){!f.isFlashInstalled()&&y.desktop&&(e.category=s.E_PLAYER,e.subcategory=s.PLAYER_CODES.E_PLAYER_NOT_ENABLED)};switch(e.category){case s.E_SAPI_ABSTRACT:case s.E_SAPI_STREAM:case s.E_SAPI_PLAYLIST:case s.E_SAPI_RELATED:case s.E_SAPI_POPULAR:switch(e.subcategory){case s.SAPI_CODES.E_SAPI_EXTERNAL_NO_STREAMS:var r=t._model.playlist.getCurrentItem();r&&r.shareUrl&&f.redirect(r.shareUrl,!0);break;case s.SAPI_CODES.E_SAPI_UNSUPPORTED_FORMAT:n();break;case s.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML:y.android?(e.category=s.E_INFO,e.subcategory=s.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED):n();break;case s.SAPI_CODES.E_SAPI_DRM_RESTRICTED:y.desktop&&n()}break;case s.E_PLAYER:switch(e.subcategory){case s.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:n()}}},r.prototype._initiateAgeGate=function(){var e=this;e._ageGateController||(e._ageGateController=new a(e._eventBus,e._model,e._view,e,e._fetcher)),e._ageGateController.run()},r.prototype._onUserAuthentication=function(){var e=this;e._ageGateController&&e._ageGateController.isWaitingAuthentication()&&e._initiateAgeGate()},r.prototype._onPlaybackStarted=function(e){var t=this;t.ifPlaybackProgressCalled=!1,t._eventBus.publish(l.PLAYBACK_STARTED,e.id),t._playbackStarted[e.id]=!0},r.prototype._onPlaybackPlaying=function(){var e=this,t=e._model.playlist.getCurrentItem();e._model.playbackState.videoLoading()?y.android||e._toggleSpinner(!1):e._model.playbackState.paused&&(e._eventBus.publish(l.PLAYBACK_RESUMED,t.id),e._onPlaybackResumed()),e._playbackStarted[t.id]||e._onPlaybackStarted(t)},r.prototype._resetPlaybackStarted=function(){var e=this;e._playbackStarted={}},r.prototype._onPlaybackProgress=function(e,t,n){var r=this;y.android&&!r.ifPlaybackProgressCalled&&(r._toggleSpinner(!1),r.ifPlaybackProgressCalled=!0);var i=r._model.playlist.getCurrentItem();if(i){i.progress.position=Math.floor(e);var o=1.5,a=r._view.getClientVideoDimension();r._model.playerDimension.width=a.width,r._model.playerDimension.height=a.height,r._eventBus.publish(l.PLAYBACK_PROGRESS,i.id,e,t,n),!g.isNumber(e)||!g.isNumber(t)||e>t+1||(i.isCCM||null!==i.duration||i.isLive()||(i.duration=t),r._model.playbackState.loading&&(!y.safari||y.safari<6)&&(r._spinnerMonitorStartTime?e-r._spinnerMonitorStartTime>=o&&(b.warn("overrode loader"),r._spinnerMonitorStartTime=null,r._toggleSpinner(!1)):r._spinnerMonitorStartTime=e),i.isLive()||(r._model.castState&&r._model.castState.connected||r._tryPlayAdBreak(i),!i.isLongForm()||i.progress.position%10!==0||r._model.playbackState.seeking||r._model.playbackState.ad||r.saveResumeTime(i)))}},r.prototype._onHLSCueStart=function(e){var t=this;b.log("Controller: _onHLSCueStart"),e=parseInt(e,10);var n=t._model.playlist.getCurrentItem(),r=isNaN(e)?null:e/1e3;t._tryPlayAdBreak(n,r)},r.prototype._tryPlayAdBreak=function(e,t){var n=this,r=e.progress.position,i={currentTime:r,isLive:e.isLive(),adDuration:t};n._adsController&&n._adsController.maybeAdBreak(i,function(t,i){t&&(n._model.playbackState.state=v.VIDEO,n._resetStateFlags(),n._model.playbackState.loading=!0,n._view.syncViewState(),n._setVideoSrc(n._model.playlist.getCurrentItem(),r),n._view.play(r),e.progress.adbreaks[i]=(new Date).getTime())})},r.prototype._onControlsSeekStart=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking||(e._model.playbackState.seeking=!0,e._view.syncViewState())},r.prototype._onControlsSeekEnd=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking&&(e._model.playbackState.paused||e._view.play(),e._model.playbackState.seeking=!1,e._view.syncViewState())},r.prototype._onControlsSeeking=function(e){var t=this;t._model.castState&&t._model.castState.connected||t._view.seek(e)},r.prototype._onPlaybackPaused=function(){var e=this;e._model.playbackState.state!==v.INIT&&e._model.playbackState.state!==v.END&&(e._model.playbackState.paused=!0,e._view.syncViewState())},r.prototype._onPlaybackResumed=function(){var e=this;e._model.playbackState.paused=!1,e._view.syncViewState()},r.prototype._onPlaybackEnded=function(){var e=this;e._resetPlaybackStarted();var t=e._model.playlist,n=t.getCurrentItem();if(n){var r=e._model.playback.continuousPlay,i=e._model.playback.loop,o={},a=t.getNextPosition(r,i,o);e._eventBus.publish(l.PLAYBACK_ENDED,n.id,o.ended);var s=function(){if(n.progress.position=0,!n.isLongForm()||e._model.playbackState.seeking||e._model.playbackState.ad||e.saveResumeTime(n),-1!==a){if(r||i)var t={type:A.CONTINUOUS,action:A.AUTOPLAY};e.setPlaylistPosition(a,r||i,t),e._model.playbackState.looped=o.looped}else e._endPlayback(n),e._eventBus.publish(l.API.PLAYLIST_COMPLETE)};e._adsController?e._adsController.maybePlay("end",s):s()}},r.prototype._onSeeking=function(){var e=this;e._toggleSpinner(!0)},r.prototype._onSeeked=function(){var e=this;e._toggleSpinner(!1),e._eventBus.publish(l.API.PLAYBACK_SEEK_COMPLETE),e._spinnerMonitorStartTime=null},r.prototype._onBitrateChange=function(e){var t=this;t._model.playback.bitrate=e},r.prototype._setVideoSrc=function(e,t){var n=this,r={streams:e.streams,streamProfiles:e.streamProfiles,abr:n._model.playback.abr,uuid:e.id,isCCM:e.isCCM,startTime:t,ignoreEndlist:e.isLive()&&n._model.playback.ignoreEndlist};return n._view.setStreams(r)},r.prototype.error=function(e){var t=this;e&&t._eventBus.publish(l.ERROR,f.createErr("C",t._model.playbackState,e.type,e.code,e.msg))},r.prototype._onMediaReloadBegin=function(){var e=this;e._toggleSpinner(!0)},r.prototype._onMediaReloadEnd=function(){var e=this;e._toggleSpinner(!1)},r.prototype._onQualityChange=function(){return!1},r.prototype._toggleSpinner=function(e){var t=this;t._model.playbackState.loading=e,t._view.syncViewState()},r.prototype._onQualitySelected=function(e){var t=this;t._view.setQuality(e)},r.prototype._onBitrateListChanged=function(e,t){var n=this;n._model.playback.bitrates=e,n._model.playback.heights=t},r.prototype._onRecoveryStart=function(e){var t=this;t._model.playbackState.loading||(t._model.playbackState.loading=!0,t._view.syncViewState()),t._model.playlist.id?t._fetcher.fetchPlaylist(e):t._fetcher.updateMetadata(e)},r.prototype._onRecoveryMetadata=function(){var e=this,t=e._model.playbackState.state;e.pause(),e._view.stopMedia(),e._loadMediaItem(e._model.playlist.getCurrentItem()),b.log("Controller._onRecoveryMetadata(): Reloaded"),e._model.playbackState.loading=!1,e._view.syncViewState(),e._model.playbackState.state=v.INIT,e._model.playlist.getCurrentItem().recoveryStatus=p.ItemRecoveryStatus.RECOVERED,t===v.VIDEO&&e.play(null,!1)},r.prototype._onER=function(e){var t=this;t._fetcher.fillFromER(e),t._onRecoveryMetadata()},r.prototype._onWaiting=function(e){var t=this;if(!y.tv){var n=e&&e.value;if(t._toggleSpinner(n),n&&!e.ignoreBuffering)t._profiler.add(l.Metrics.PLAYBACK_STALLED);else if(!e.ignoreBuffering){t._profiler.setEndTime(l.Metrics.PLAYBACK_STALLED);var r=t._profiler.getItem(l.Metrics.PLAYBACK_STALLED);r&&t._eventBus.publish(l.PLAYBACK_STALLED,r.timeDiff?r.timeDiff/1e3:"")}}},r.prototype.destroy=function(){var e=this;e._model.destroy(),e._view.destroy(),e._recoverer&&e._recoverer.destroy(),e._fetcher.destroy(),e._eventBus.destroy(),e._ccController.destroy()}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./ads-controller":11,"./age-gate-controller":12,"./cast-controller":14,"./cc":"zKzgQw","./error":20,"./event":"YJm+dH","./media-store":26,"./metadata-fetcher":"QCpdmG","./metrics/metrics":33,"./metrics/metrics-constants":32,"./model":39,"./profiler":40,"./recoverer":41,"./restapi":47,"./states":49,"./util":"jJTEqU","./view":59}],19:[function(e,t,n){"use strict";function r(e){var t=this;t._cb=e,t._touches=[],t._bindTouchEvents(),t._bindKeys()}t.exports=r;var i={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",TAP:"tap"},o=[i.UP,i.DOWN,i.LEFT,i.RIGHT,i.TAP,i.TAP],a=0;r.prototype._bindKeys=function(){var e=this,t=[79,80,69,78,83,73,77,83,73,77],n=[79,80,83,83],r=[37,37,39,39,13];e._keyPressed=[],e._onKeyDown=function(i){e._keyPressed.push(i.keyCode),e._keyPressed.length>t.length&&e._keyPressed.shift(),i.altKey?a++:a=0;var o=e._keyPressed.slice(Math.max(e._keyPressed.length-4,0)),s=e._keyPressed.slice(Math.max(e._keyPressed.length-5,0));(e._keyPressed.toString()===t.toString()||o.toString()===n.toString()||s.toString()===r.toString()&&a>r.length)&&e._cb()},document.addEventListener("keydown",e._onKeyDown,!1)},r.prototype._bindTouchEvents=function(){var e=this;e._touchstart=function(t){e._startX=t.changedTouches[0].pageX,e._startY=t.changedTouches[0].pageY,e._stopX=0,e._stopY=0},document.addEventListener("touchstart",e._touchstart,!1),e._touchmove=function(t){if(1===t.touches.length){var n=t.touches[0];e._stopX=n.pageX,e._stopY=n.pageY}},document.addEventListener("touchmove",e._touchmove,!1),e._touchend=function(){var t;if(e._stopX||e._stopY){var n=Math.abs(e._startX-e._stopX),r=Math.abs(e._startY-e._stopY);t=n>r?e._startX-e._stopX<0?i.RIGHT:i.LEFT:e._startY-e._stopY<0?i.DOWN:i.UP}else t=i.TAP;e._touches.push(t),e._touches.length>o.length&&e._touches.shift(),e._touches.length===o.length&&e._touches.every(function(e,t){return e===o[t]})&&e._cb()},document.addEventListener("touchend",e._touchend,!1)},r.prototype.destroy=function(){var e=this;document.removeEventListener("keydown",e._onKeyDown,!1),document.removeEventListener("touchstart",e._touchstart,!1),document.removeEventListener("touchmove",e._touchmove,!1),document.removeEventListener("touchend",e._touchend,!1)}},{}],20:[function(e,t,n){"use strict";function r(e){return e.group+e.phase+"-"+e.category+"-"+e.subcategory}function i(e,t,n,r,i){var o=this;if(!e||!t||!n)throw"Error must be created with a group, category, and subcategory!";o.errorInfo=r,o.userAgent=i,o.group=e,o.phase=o._getPhaseFromState(r),o.category=t,o.subcategory=n,o._msg=r?r.msg:null,o.debugMessage=r?r.debugMsg:null,o.prefetch=r&&void 0!==r.prefetch?r.prefetch:!1}var o=e("./strings"),a=e("./states"),s=["305","306","307"];n.E_INFO="100",n.E_WARNING="200",n.E_YVAP="300";var l=n.E_PLAYER="400",c=n.E_PLAYER_FAILOVER="407",d=n.E_PLAYER_DRM="410",p=n.E_PLAYER_DASH="420",u=n.E_PLAYER_JS_HLS="430",_=n.E_SAPI_ABSTRACT="500";n.E_SAPI_STREAM="501",n.E_SAPI_PLAYLIST="502",n.E_SAPI_RELATED="503",n.E_SAPI_POPULAR="504";var m=n.E_SAPI_CLOSEDCAPTION="505";n.E_CAST="800";var v=n.INFO_CODES={E_SAPI_LICENSE_ERROR:"200",E_SAPI_UNAVAILABLE_TEMP:"201",E_SAPI_GEO:"202",E_SAPI_DEVICE:"203",E_SAPI_EMBED:"204",E_SAPI_UNSUPPORTED_LIVE_ON_HTML:"305",E_PLAYER_ANDROID_CHROME_REQUIRED:"500",E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE:"610",E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE:"611",E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE:"612",E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING:"613",E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN:"614",E_PLAYER_NO_COMPATIBLE_FORMAT:"700"},y=n.WARNING_CODES={E_PLAYBACK_TIMEOUT:"1",E_LIVE_PLAYBACK_COMPLETE:"800",E_FLASH_CRASHED:"801",E_PLAYBACK_FROZEN_DETECTED:"900",E_ER_TRY:"901"},f=n.PLAYER_CODES={E_PLAYER_PLAYBACK_ERROR:"100",E_PLAYER_NOT_ENABLED:"200",E_PLAYER_NOT_UPTO_DATE:"201",E_PLAYER_PTS_DISCONTINUITY:"250",E_PLAYER_RELOAD_FRAGMENT:"251",E_PLAYER_HTML5_PLAYBACK_ERROR:"303",E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED:"304",E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK:"305",E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE:"306",E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED:"307",E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:"308",E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY:"309",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:"310",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND:"311",E_PLAYER_CMS_JSONP_REQUEST_FAILURE:"101",E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:"102",E_PLAYER_CMS_RESPONSE:"405",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:"408",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:"409",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED:"700",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT:"701",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED:"710",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT:"711",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED:"720",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT:"721",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408:"722",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE:"730",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT:"731",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408:"732",E_PLAYER_CMS_XHR_REQUEST_ERROR:"740",E_PLAYER_CMS_XHR_REQUEST_TIMEOUT:"750",E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR:"760",E_INTERNAL_VIOLATION:"600",E_INVALID_CONFIGURATION:"601"},g=n.FLASH_CODES={E_PLAYER_SECURITY_CROSS_DOMAIN_XML_ERROR:2,E_PLAYER_MEDIA_LOAD_FAILURE:7,E_PLAYER_INVALID_F4M:23,E_PLAYER_FLASH_CONNECTION_REJECTED:11,E_PLAYER_FLASH_CONNECTION_APP_INVALID:12,E_PLAYER_FLASH_CONNECTION_FAILED:13,E_PLAYER_FLASH_CONNECTION_TIMEOUT:14,E_PLAYER_FLASH_STREAM_FAILED:15,E_PLAYER_FLASH_STREAM_NOT_FOUND:16,E_FLASH_HLS_FRAGMENT_PARSING_ERROR:55,E_FLASH_HLS_FRAGMENT_HTTP_GET_ERROR:56,E_FLASH_HLS_FRAGMENT_TIMEOUT_ERROR:57,E_FLASH_HLS_FRAGMENT_NW_ERROR:58,E_PLAYER_FLASH_ACCESSOR_ERROR:301,E_PLAYER_FLASH_URL_ACCESSOR_ERROR:302},b=n.PLAYER_DRM_CODES={E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR:52,E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR:53,E_FLASH_DRM_SYSTEM_UPDATE_ERROR:54,E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR:601,E_FLASH_DRM_LOWER_BOUND_ERROR:3301,E_FLASH_DRM_UPPER_BOUND_ERROR:3766,E_FLASH_DRM_INCOGNITO_MODE_ERROR:3365,E_FLASH_DRM_VOUCHER_INVALID:3300,E_FLASH_DRM_INTERNAL_ACCESS_FAILURE:3307,E_FLASH_DRM_FILE_SYSTEM_WRITE:3313,E_FLASH_DRM_DEVICE_BINDING:3322,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_1:3323,E_FLASH_DRM_RESET_LICENSE_FILES:3324,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2:3325,E_FLASH_DRM_VOUCHER_EXPIRED:3332,E_FLASH_DRM_INTERNAL_ERROR:3343,E_FLASH_DRM_FAILED_MIGRATING_DATA:3346,E_FLASH_DRM_CHROME_SETTING_ERROR:3370},h=n.PLAYER_DASH_CODES={E_DASH_REQUEST_FAILURE:"1",E_DASH_REQUEST_LENGTH:"2",E_DASH_REQUEST_TIMEOUT:"3",E_DASH_METADATA_LENGTH:"4",E_DASH_METADATA_FORMAT:"5",E_DASH_NO_FRAGMENTS:"6",E_DASH_ALIGNMENT:"7",E_DASH_BAD_MIME_TYPE:"8",E_DASH_DESTROYED:"9",E_DASH_OPERATION_ABORTED:"10",E_DASH_BUFFFER_APPEND:"11",E_DASH_MANIFEST_LOAD:"12",E_DASH_MANIFEST_PARSE:"13"},E=n.PLAYER_JS_HLS_CODES={ERR_XHR_LOAD:"1",ERR_PLAYLIST_LOAD:"2",ERR_SUBS_LOAD:"3",ERR_SEGMENT_LOAD:"4",ERR_MASTER_PLAYLIST_PARSE:"5",ERR_MEDIA_PLAYLIST_PARSE:"6"},S=n.SAPI_CODES={E_SAPI_INCOMPATIBLE_FORMAT:"100",E_SAPI_NO_STREAMS_RETURNED:"103",E_SAPI_USER_NOT_AUTHORIZED:"205",E_SAPI_RESTRICTED_TO_INTERNAL:"206",E_SAPI_DRM_RESTRICTED:"207",E_SAPI_UNSUPPORTED_FORMAT:"300",E_SAPI_EXTERNAL_NO_STREAMS:"301",E_SAPI_NO_PLAYABLE_STREAMS:"302",E_SAPI_NOT_FOUND:"400",E_SAPI_TEMP_ERR_JAPI_TIMEOUT:"500",E_SAPI_TEMP_ERR_JAPI_UNKNOWN:"502",E_SAPI_TEMP_ERR_JAPI_CARMOT:"503",E_SAPI_TEMP_ERR_JAPI_UNMAPPED:"550",
E_SAPI_EMPTY_ATLAS_ACCOUNT_NAME:"401",E_SAPI_EMPTY_SECURE_KEY:"402",E_SAPI_EMPTY_LIST:"403",E_SAPI_INVALID_DATA:"404",E_SAPI_INVALID_VIDEO:"405",E_SAPI_EMPTY_STREAM_URL:"406",E_SAPI_MISSING_PROVIDER:"501",E_SAPI_SYSTEM_ERROR:"504"},A=(n.CAST_CODES={E_CAST_CONNECTION_REQUEST_FAILED:"1"},function(e,t,n){t.forEach(function(t){e[t]=n})}),T=function(e){var t=[];if(e)for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},L={};A(L,[v.E_SAPI_LICENSE_ERROR,v.E_SAPI_UNAVAILABLE_TEMP,v.E_SAPI_GEO],o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE),T(v).forEach(function(e){L[e]||(L[e]=o.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO)});var I={};I[v.E_SAPI_UNAVAILABLE_TEMP]=o.i18n.ERR_UNAVAILABLE,I[v.E_SAPI_LICENSE_ERROR]=o.i18n.ERR_UNAVAILABLE,I[v.E_SAPI_GEO]=o.i18n.ERR_GEO,I[v.E_SAPI_DEVICE]=o.i18n.ERR_DEVICE,I[v.E_SAPI_EMBED]=o.i18n.ERR_EMBED,I[v.E_PLAYER_ANDROID_CHROME_REQUIRED]=o.i18n.ERR_ANDROID_LIVE_CHROME_REQUIRED,I[v.E_PLAYER_NO_COMPATIBLE_FORMAT]=o.i18n.ERR_BROWSER_UNSUPPORTED,A(I,[v.E_SAPI_UNSUPPORTED_LIVE_ON_HTML,v.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE,v.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE,v.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE,v.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING,v.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN],o.i18n.ERR_FLASH_IS_BLOCKED);var M={};M[f.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,A(M,[f.E_PLAYER_NOT_ENABLED,f.E_PLAYER_NOT_UPTO_DATE,f.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED],o.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO),T(f).forEach(function(e){M[e]||(M[e]=o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)});var C={};C[f.E_PLAYER_NOT_ENABLED]=o.i18n.ERR_FLASH_LATEST_DOWNLOAD,C[f.E_PLAYER_NOT_UPTO_DATE]=o.i18n.ERR_FLASH_LATEST_DOWNLOAD,C[f.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK]=o.i18n.ERR_NETWORK_ISSUE,T(f).forEach(function(e){C[e]||(C[e]=o.i18n.ERR_GENERAL_ERROR)}),M[g.E_FLASH_HLS_FRAGMENT_NW_ERROR]=o.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO,M[g.E_PLAYER_FLASH_STREAM_NOT_FOUND]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,T(g).forEach(function(e){M[e]||(M[e]=o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)}),C[g.E_FLASH_HLS_FRAGMENT_NW_ERROR]=o.i18n.ERR_NETWORK_ISSUE,T(g).forEach(function(e){e!==g.E_FLASH_HLS_FRAGMENT_NW_ERROR&&(C[e]=o.i18n.ERR_GENERAL_ERROR)});var N={};N[b.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,A(N,[b.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR,h.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR,h.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,h.E_FLASH_DRM_LOWER_BOUND_ERROR,h.E_FLASH_DRM_UPPER_BOUND_ERROR,h.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2],o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG),T(b).forEach(function(e){N[e]||(N[e]=o.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO)});var D={};D[b.E_FLASH_DRM_CHROME_SETTING_ERROR]=o.i18n.ERR_DRM_CHROME_SETTING,D[b.E_FLASH_DRM_INCOGNITO_MODE_ERROR]=o.i18n.ERR_DRM_INCOGNITO_MODE,D[b.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=o.i18n.ERR_MISSING_OR_DAMAGED,A(D,[b.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR,b.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR,b.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,b.E_FLASH_DRM_LOWER_BOUND_ERROR,b.E_FLASH_DRM_UPPER_BOUND_ERROR,b.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2],o.i18n.ERR_GENERAL_ERROR),T(b).forEach(function(e){D[e]||(D[e]=o.i18n.ERR_DRM_BAD_LICENSE_FILE)});var R={};T(E).forEach(function(e){R[e]=o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG});var P={};T(E).forEach(function(e){P[e]=o.i18n.ERR_GENERAL_ERROR});var O={};O[h.E_DASH_BAD_MIME_TYPE]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,T(h).forEach(function(e){e!==h.E_DASH_BAD_MIME_TYPE&&(O[e]=o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)});var w={};w[h.E_DASH_BAD_MIME_TYPE]=o.i18n.ERR_MISSING_OR_DAMAGED,T(h).forEach(function(e){e!==h.E_DASH_BAD_MIME_TYPE&&(w[e]=o.i18n.ERR_GENERAL_ERROR)});var k={};A(k,[S.E_SAPI_INCOMPATIBLE_FORMAT,S.E_SAPI_NO_STREAMS_RETURNED,S.E_SAPI_TEMP_ERR_JAPI_TIMEOUT,S.E_SAPI_TEMP_ERR_JAPI_UNKNOWN,S.E_SAPI_TEMP_ERR_JAPI_CARMOT,S.E_SAPI_TEMP_ERR_JAPI_UNMAPPED],o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG),A(k,[S.E_SAPI_USER_NOT_AUTHORIZED,S.E_SAPI_DRM_RESTRICTED],o.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO),T(S).forEach(function(e){k[e]||(k[e]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE)});var x={};x[S.E_SAPI_USER_NOT_AUTHORIZED]=o.i18n.ERR_UNAUTHORIZED,x[S.E_SAPI_RESTRICTED_TO_INTERNAL]=o.i18n.ERR_UNAVAILABLE,x[S.E_SAPI_DRM_RESTRICTED]=o.i18n.ERR_DRM_RESTRICTED,A(x,[S.E_SAPI_INCOMPATIBLE_FORMAT,S.E_SAPI_NO_STREAMS_RETURNED,S.E_SAPI_TEMP_ERR_JAPI_TIMEOUT,S.E_SAPI_TEMP_ERR_JAPI_UNKNOWN,S.E_SAPI_TEMP_ERR_JAPI_CARMOT,S.E_SAPI_TEMP_ERR_JAPI_UNMAPPED],o.i18n.ERR_GENERAL_ERROR),T(S).forEach(function(e){x[e]||(x[e]=o.i18n.ERR_MISSING_OR_DAMAGED)});var j={};T(y).forEach(function(e){e!==y.E_LIVE_PLAYBACK_COMPLETE&&(j[e]=o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)}),j[y.E_LIVE_PLAYBACK_COMPLETE]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE;var B={};B[y.E_LIVE_PLAYBACK_COMPLETE]=o.i18n.ERR_LIVE_PLAYBACK_COMPLETE,T(y).forEach(function(e){e!==y.E_LIVE_PLAYBACK_COMPLETE&&(B[e]=o.i18n.ERR_GENERAL_ERROR)}),n.Error=i,Object.defineProperty(i.prototype,"rep",{get:function(){return r(this)}}),i.prototype._getPhaseFromState=function(e){var t="S";return e&&e.playbackState&&(e.playbackState.state===a.VIDEO||e.playbackState.state===a.END)&&(t="P"),t},i.prototype.isSAPIError=function(){var e=this;return e.category>=_&&e.category<=m},Object.defineProperty(i.prototype,"title",{get:function(){var e=this,t=null,r=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=k;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&r&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG;e.category===l||e.category===c?t=M:e.category===n.E_WARNING?t=j:e.category===n.E_INFO?t=L:e.category===d?t=N:e.category===p?t=O:e.category===u&&(t=R)}return t&&t[e.subcategory]||o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG}}),Object.defineProperty(i.prototype,"message",{get:function(){var e=this,t=null,r=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=x;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&r&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return o.i18n.ERR_LIVE_IOS_PLAYBACK;e.category===l||e.category===c?t=C:e.category===n.E_WARNING?t=B:e.category===n.E_INFO?t=I:e.category===d?t=D:e.category===p?t=w:e.category===u&&(t=P)}return this._msg||t&&t[e.subcategory]||o.i18n.ERR_TECH_DIFFICULTIES}}),n.isInfoCode=function(e){for(var t in v)if(v.hasOwnProperty(t)&&v[t]===e)return!0;return!1}},{"./states":49,"./strings":"XwKsC9"}],"YJm+dH":[function(e,t,n){"use strict";n.API={PLAYER_RENDERED:"render",PLAYER_READY:"playerReady",PLAYER_ERROR:"playerError",PLAYER_FULLSCREEN_CHANGE:"fullscreenChange",PLAYER_VOLUME_CHANGE:"volumeChange",PLAYER_MUTE_CHANGE:"muteChange",PLAYBACK_ERROR:"playbackError",PLAYBACK_READY:"playbackReady",PLAYBACK_START:"playbackStart",DURATION_CHANGE:"durationChange",BITRATE_CHANGE:"bitrateChange",PLAYBACK_PAUSE:"playbackPause",PLAYBACK_RESUMED:"playbackResumed",PLAYBACK_TIME_UPDATE:"playbackTimeUpdate",PLAYBACK_SEEK_COMPLETE:"playbackSeek",PLAYBACK_COMPLETE:"playbackComplete",AD_PLAYBACK_START:"adStart",AD_PLAYBACK_PAUSE:"adPause",AD_PLAYBACK_RESUME:"adResume",AD_PLAYBACK_PROGRESS:"adProgress",AD_PLAYBACK_STOP:"adComplete",AD_NONE:"adNone",AD_ERROR:"adError",PLAYLIST_COMPLETE:"playlistComplete",PLAYLIST_POSITION_CHANGE:"playlistPositionChange",UI_INTERACT:"uiInteract",BEACON_SEND:"beaconSend",LOADING_BEGIN:"loading-begin",LOADING_END:"loading-end",PLAYBACK_TIMEOUT:"playback-timeout",VIDEO_STARTED:"video-started",METADATA_READY:"metadata-ready",CC_AVAILABLE:"media-item-cc-available",CAST_AVAILABILITY_CHANGE:"cast-availability-change",CAST_CONNECTED_STATE_CHANGE:"cast-connected-state-change",CUEPOINT_STARTED:"cuepointStarted",CUEPOINT_STOPPED:"cuepointStopped",CUEPOINT_DETECTED:"cuepointDetected"},n.ERROR="player-error",n.WARNING="player-warning",n.INFO="player-info",n.KEYDOWN="keydown",n.START_SCREEN_RENDERED="start-screen-rendered",n.START_SCREEN_CLICK="start-screen-click",n.END_SCREEN_RENDERED="end-screen-rendered",n.END_SCREEN_CLICK="end-screen-click",n.CTRL_ENDSCREEN_VID="selected-endscreen-video",n.RELATED_ITEM_CLICK="related-item-click",n.FETCH_MORE_RELATED_ITEMS="fetch-more-related-items",n.UP_NEXT_PG_CLICK="upnext-pg-click",n.SEEK_BAR_MOUSEOVER="seek-bar-mouseover",n.SEEK_BAR_MOUSEOUT="seek-bar-mouseout",n.TOGGLE_PLAY_PAUSE="toggle-play-pause",n.CONTROLS_SEEK_START="controls-seek-start",n.CONTROLS_SEEK_END="controls-seek-end",n.CONTROLS_SEEKING="controls-seeking",n.CONTROLS_SET_VOLUME="controls-set-volume",n.CONTROLS_SET_MUTE="controls-set-mute",n.FULLSCREEN_CHANGE="fullscreen-change",n.PLAYER_DIMENSION_CHANGE="player-dimension-change",n.CONTROLS_BAR_CHANGE="controls-bar-change",n.METADATA_AVAILABLE="metadata-available",n.REFRESH_METADATA_AVAILABLE="refresh-metadata-available",n.RELATED_ITEMS_LOADED="related-items-loaded",n.RENDER_PLAYLIST_FIRST_BATCH="render-playlist-first-batch",n.MEDIA_ITEM_LOADED="media-item-loaded",n.CAST={TOGGLE_PLAYING:"cast-toggle-playing",BUFFERING:"cast-buffering",MEDIA_CHANGED:"cast-media-changed",PLAYBACK_PROGRESS:"cast-playback-progress",VIDEO_ENDED:"cast-video-ended",PLAYLIST_ENDED:"cast-playlist-ended",CONNECTION_STATUS_CHANGED:"cast-connection-changed",VOLUME_CHANGED:"cast-receiver-volume-changed",MUTE_CHANGED:"cast-receiver-mute-changed",CAPTION_AVAILABILITY_CHANGED:"cast-captions-availability-changed"},n.SWF_READY="swf-ready",n.SWF_READY_TIMEOUT="swf-ready-timeout",n.PAUSE_VPAID="pause-vpaid",n.RESUME_VPAID="resume-vpaid",n.PLAYER_RESIZE="player-resize",n.SELECTED_STREAM_CHANGE="selectedStreamChange",n.SELECTED_STREAM_URL_CHANGE="selectedStreamUrlChange",n.RENDERER_PLUGIN_LOADED="rendererPluginLoaded",n.RENDERER_PLUGIN_LOAD_FAILED="rendererPluginLoadFailed",n.RENDERER_PLUGIN_LOAD_TIMED_OUT="rendererPluginLoadTimedOut",n.VTT_SEGMENT_LOADED="vttSegmentLoaded",n.MEDIA_RELOAD_BEGIN="mediaReloadBegin",n.MEDIA_RELOAD_END="mediaReloadEnd",n.MEDIA_PLAYLIST_LOADED="mediaPlaylistLoaded",n.MEDIA_PLAYLIST_UPDATED="mediaPlaylistUpdated",n.QUALITY_CHANGE="qualityChange",n.QUALITY_SELECTED="qualitySelected",n.BITRATE_LIST_CHANGED="bitrateListChanged",n.ABR_DATA_UPDATE="abrDataUpdate",n.FRAG_LOAD_RETRY_FAILURE="fragLoadRetryFailure",n.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE="liveMediaPlaylistLoadRetryFailure",n.LIVE_LOADING_LATE="liveLoadingLate",n.RECOVERY_START="recoveryStart",n.RECOVERY_METADATA_READY="recoveryMetadataReady",n.ER_READY="erReady",n.PLAYBACK_INFO="playback-info",n.USER_AUTHENTICATED="user-authenticated",n.VIDEO_APPS_LOADED="video-apps-loaded",n.OPEN_FEEDBACK="open-feedback",n.CC_HOVER="cc-hover",n.VOLUME_HOVER="volume-hover",n.FLASH_NATIVE_PLAYING_EVENT_FIRED="flash-native-playing-event-fired",n.PTS_DISCONTINUITY="PTSDiscontinuity",n.RELOAD_FRAGMENT="ReloadFragment",n.nativeVideoEvents=["ended","error","loadedmetadata","loadeddata","pause","stalled","loadstart","play","playing","seeking","seeked","timeupdate","volumechange","waiting"],n.html5HlsEvents=["infoUpdate","vttSegmentLoaded"],n.Video={CLICK:"video-click",SWITCHING:"switching",SWITCHED:"switched",WARNING:"warning"},n.Ad={CLICK:"ad-click",NO_AD:"ad-no-ad",NO_PLAYABLE_STREAM:"ad-no-playable-stream",CANCELED:"ad-canceled"},n.nativeVideoEvents.forEach(function(e){n.Video[e.toUpperCase()]="video-"+e,n.Ad[e.toUpperCase()]="ad-"+e}),n.VIDEO_REQUEST="video-request",n.PLAYBACK_REQUEST="playback-request",n.PLAYBACK_STARTED="playback-started",n.PLAYBACK_RESUMED="playback-resumed",n.PLAYBACK_PROGRESS="playback-progress",n.PLAYBACK_STALLED="playback-stalled",n.PLAYBACK_ENDED="playback-ended",n.PLAYBACK_ERROR="playback-error",n.API_CALLED="api-called",n.FEEDBACK_INFO="feedback-info",n.HLS_FIRST_TS_LOAD_START="hls-first-ts-load-start",n.HLS_FIRST_TS_FIRST_BYTE_ARRIVE="hls-first-ts-first-byte-arrive",n.CTRL_PLAYPAUSE="ctrl-play-pause",n.CTRL_SEEK="ctrl-seek",n.CTRL_VOLUME="ctrl-volume",n.CTRL_FULLSCREEN="ctrl-fullscreen",n.CTRL_SETTINGS="ctrl-settings",n.CTRL_AGEGATE_BDAY="ctrl-agegate-bday",n.CTRL_SHARE="ctrl-share",n.CTRL_REPLAY="ctrl-replay",n.CTRL_TIMER="ctrl-timer",n.CTRL_PLAYREQUEST="ctrl-playrequest",n.UI_LOGIN="ui-login",n.AD_PLAYBACK_REQUEST="ad-playback-request",n.AD_PLAYBACK_STARTED="ad-playback-started",n.AD_PLAYBACK_PAUSED="ad-playback-paused",n.AD_PLAYBACK_RESUMED="ad-playback-resumed",n.AD_PLAYBACK_PROGRESS="ad-playback-progress",n.AD_PLAYBACK_ENDED="ad-playback-ended",n.AD_BREAK_STARTED="ad-break-started",n.AD_BREAK_INFO="ad-break-info",n.AD_BREAK_ENDED="ad-break-ended",n.AD_PLAYBACK_ERROR="ad-playback-error",n.AD_CLICK="ad-exposed-click",n.UPDATE_AD_COUNT="update-ad-count",n.UPDATE_AD_BREAKS="update-ad-breaks",n.ADS_OBJS_UPDATE="ads-object-update",n.ADS_READY="ads-ready",n.AD_BREAK_TIMELINE="ad-break-timeline",n.YVAP_INFO_UPDATE="yvap-info-update",n.YVAP_MIDROLL_CACHE_UPDATE="yvap-midroll-cache-update",n.YVAP_SWF_PROXIED_EVENT="yvap-swf-proxied-event",n.AD_METRICS="ad-metrics",n.SAPI_REFRESH_REQUEST="sapi-refresh-request",n.RENDERER_TYPE_CHANGE="renderer-type-change",n.CC={SETTINGS:"cc-settings",TOGGLE:"cc-toggle",UI_TOGGLE:"cc-ui-toggle",FETCHED:"cc-fetched",FETCH_MOBILE:"cc-fetche-mobile",REQUEST_UI_DATA_FOR_MEDIA_ITEM:"cc-request-ui-data-for-media-item",REMOVED:"cc-destroy",SHOW_CONTROLS:"cc-show-controls",LANGUAGE_CHANGE:"cc-language-change",CC_OPTIONS_LANGUAGE_CHANGE:"cc-options-language-change",FONT_SIZE_CHANGE:"cc-font-size-change",FONT_FACE_CHANGE:"cc-font-face-change",BG_OPACITY_CHANGE:"cc-bg-opacity-change",USER_STYLE_PREFERENCES_CHANGE:"cc-user-style-preferences-change",SAVE_TO_LOCAL_STORAGE:"cc-save-to-local-storage",UPDATE_STYLE:"cc-update-style",POSITION_CHANGE:"cc-position-change",POSITION_FLOAT:"cc-position-float"},n.CTV={GET_BITRATE_FOR_OPSS:"ctv-get-bitrate-for-opss"},n.BEFORE_PROGRESS_BEACON="before-progress-beacon",n.Metrics={INIT_TO_STARTSCREEN:{type:"titssc",desc:"VideoPlayer init to StartScreen Rendered"},HLS_FIRST_TS_LOAD_START:{type:"hftls",desc:"First ts loading starts in HLS"},HLS_FIRST_TS_FIRST_BYTE_ARRIVE:{type:"hftfba",desc:"First byte arrives for the first ts loading in HLS"},CLICK_TO_START:{type:"ttsapf",desc:"Player click to playback start"},INIT_TO_START:{type:"ttsapt",desc:"Init to playback start (autoplay)"},PLAYBACK_START:{type:"tpb",desc:"Playback request to playback start"},PLAYBACK_STALLED:{type:"tps",desc:"Playback buffering start to buffering end"},LOAD_TO_LOADED_DATA:{type:"tltld",desc:"Time from load() to loaded data"},SAPI_REQUEST:{type:"tsapic",desc:"SAPI request to SAPI response"},SWF_READY:{type:"tswfr",desc:"Player SWF is ready"},INIT_RENDER_GAP:{type:"tirg",desc:"Time gap between end of construction and beginning of render"},INIT_TO_SAPI:{type:"titsc",desc:"Time from beginning of construction to first updateMetaData"},RENDER_TO_SWF:{type:"trtswf",desc:"Time from init to object tag creation"},DRM_METADATA_IS_SET:{type:"tdmds",desc:"Time interval from play to drm meta data is set"},DRM_AUTH_COMPLETE:{type:"ttauth",desc:"Time to complete DRM authentication after drm metadata is set"},INIT_TO_APPS_INIT:{type:"ttapp",desc:"Player init to Video Apps Init"},SET_WATCH_HISTORY:{type:"tsetwh",desc:"YQL+ call to save watch history"},VP_CONSTRUCTOR:{type:"tcons",desc:"VideoPlayer Constructor"},GET_USER_PREFS:{type:"tgetcc",desc:"YQL+ call to get captions preferences"},PLAYLIST_LOADED:{type:"tploaded",desc:"Playlist loaded"},SAPI_LOADCLIPS:{type:"tsapiclips",desc:"SAPI request for clips"},CREATE_RENDERER:{type:"trcreate",desc:"Creating the renderer (swf/html)"},YVAP_READY:{type:"tyvapr",desc:"VideoAdPlugin is ready"},YVAP_NOAD:{type:"tyvapadn",desc:"Ad None"},YVAP_ADSTARTED:{type:"tyvapads",desc:"Ad Started"},STREAM_REQUEST_TO_RENDER:{type:"treqtr",desc:"Stream Latency (From request to render)"},STREAM_PLAY_TO_RENDER:{type:"tsltps",desc:"Media playback start to video render"},SAPI_LOADRELATED:{type:"tsapilr",desc:"SAPI Get for related videos"}}},{}],"./nextgen/src/event.js":[function(e,t,n){t.exports=e("YJm+dH")},{}],23:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e,t._segments={},t._events=[],t._cueOut={},t._cueIn={},t._masterPlaylist="",t._mediaPlaylist="",t._processingTime=0,t._segmentDuration=8,t._refreshPlaylist=null,t._progressListener=null}t.exports=r;var i=e("./util"),o=e("./event");e("../../lib");r.prototype.initCueTracking=function(e,t){var n=this;n._getMediaPlaylist(e,t,function(e,t){n._extractCuePoints(t),n._progressListener||(n._progressListener=n._eventBus.subscribe(o.Video.TIMEUPDATE,n._checkCues.bind(n))),n._setupPlaylistRefresh()})},r.prototype._checkCues=function(e){var t,n=this;(0!==n._cueOut.length||0!==n._cueIn.length)&&(n._events.forEach(function(n){!n.done&&e>=n.time&&(t=n.type,n.done=!0)}),t&&n._eventBus.publish(t))},r.prototype._setupPlaylistRefresh=function(){var e=this;e._refreshPlaylist&&clearInterval(e._refreshPlaylist),e._refreshPlaylist=setInterval(function(){e.initCueTracking(e._masterPlaylist,e._mediaPlaylist)},e._segmentDuration)},r.prototype._getMediaPlaylist=function(e,t,n){var r=this;return r._masterPlaylist=e,t?(r._mediaPlaylist=t,r._fetchPlaylist(r._mediaPlaylist,n)):void i.ajax(r._masterPlaylist,{method:"GET",context:r,successHandler:function(e){return r._mediaPlaylist=r._getPlaylistUrl(e),""!==r._mediaPlaylist?r._fetchPlaylist(r._mediaPlaylist,n):n("bad mpl url")},failureHandler:function(e){return n(e)}})},r.prototype._fetchPlaylist=function(e,t){var n=this;if(!e.match(/^https?:/)){var r=n._masterPlaylist.match(/^(https?:.*\/).*?\.m3u8?/)[1];r&&(e=r+e)}i.ajax(e,{method:"GET",context:n,successHandler:function(e){return t(null,e)},failureHandler:function(e){return t(e)}})},r.prototype._getPlaylistUrl=function(e){for(var t=e.split("\n");t.length;){var n=t.shift();if(n.match(/^[^#].*\.m3u8.*?$/))return n}return""},r.prototype._extractCuePoints=function(e){for(var t=this,n=e.split("\n"),r=!0;n.length;){var i=n.shift(),a=i.match(/^#(EXTINF|EXT-X-CUE-OUT(-CONT)?|EXT-X-CUE-IN|EXT-X-ENDLIST):?([0-9\.]+)?(\/0)?,?$/);if(a){if(r&&t._processingTime>0&&"EXTINF"!==a[1]){var s=e.match(new RegExp("^.*?\n(.*?\\.ts.*?)\n","m")),l=s[1];l&&t._segments[l]&&(t._processingTime=t._segments[l].end-t._segments[l].dur)}switch(a[1]){case"EXT-X-CUE-OUT":t._cueOut[t._processingTime]||(t._events.push({type:o.API.CUEPOINT_STARTED,time:t._processingTime,done:!1}),t._cueOut[t._processingTime]=!0);break;case"EXT-X-CUE-OUT-CONT":0===t._events.length&&(t._events.push({type:o.API.CUEPOINT_STARTED,time:t._processingTime,done:!1}),t._cueOut[t._processingTime]=!0);break;case"EXTINF":var c=n[0];if(t._segments[c]){t._processingTime=t._segments[c].end;break}0===t._processingTime&&(t._segmentDuration=1e3*Math.floor(parseFloat(a[3]))),t._processingTime+=parseFloat(a[3]),t._segments[c]={dur:a[3],end:t._processingTime};break;case"EXT-X-CUE-IN":var d,p;t._cueIn[t._processingTime]||(p=n[0].match(/^#EXTINF:([0-9.]+)/),p&&(d=p[1]?parseFloat(p[1]):0,t._events.push({type:o.API.CUEPOINT_STOPPED,time:t._processingTime+d,done:!1}),t._cueIn[t._processingTime]=!0));break;case"EXT-X-ENDLIST":clearInterval(t._refreshPlaylist)}r=!1}}},r.prototype.destroy=function(){var e=this;e._progressListener&&e._progressListener.unsubscribe&&e._progressListener.unsubscribe(),clearInterval(e._refreshPlaylist)}},{"../../lib":"bRhrlU","./event":"YJm+dH","./util":"jJTEqU"}],24:[function(e,t,n){"use strict";function r(e,t,n){var r=this,o=i.getWindow(),a=o.location.protocol;r._iframeControlsGetMethods={isPlaying:null,getDuration:null,getCurrentTime:null,getTimeRemaining:null,getFullscreen:null,getVolume:null,getMute:null},r._iframeVID="VID-"+Math.floor(1e3*Math.random()),r._configData=JSON.parse(JSON.stringify(e)),r._player=n,r._iframe=null,r._startTime=Date.now(),r._iframeLoaded=!1,r._receiveMessageHandlerOnPage=null,r._receiveMessageHandlerOnIframe=null,r._iframeHost="https:"===a?"https://s.yimg.com":"http://l.yimg.com",e.insideIframeConfig||(r._receiveMessageHandlerOnPage=r.receiveMessage.bind(r),window.addEventListener("message",r._receiveMessageHandlerOnPage,!1))}t.exports=r;var i=e("./util"),o=e("../../lib"),a=e("./error"),s=e("./event");r.prototype.destroy=function(){var e=this;e._receiveMessageHandlerOnPage&&window.removeEventListener("message",e._receiveMessageHandlerOnPage,!1),e._receiveMessageHandlerOnIframe&&window.removeEventListener("message",e._receiveMessageHandlerOnIframe,!1)},r.prototype.constructIframe=function(e){var t,n=this,r=i.getWindow();if(t=o.isString(e)?document.querySelector(e):e._node||e,null===t)return void n._eventBus.publish(s.Error,i.createErr("C",null,a.E_PLAYER,a.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player."));n._configData.insideIframeConfig={startTime:n._startTime,iframeVID:n._iframeVID,parentURL:r.location.protocol+"//"+r.location.host};var l=document.createElement("iframe"),c=encodeURIComponent(JSON.stringify(n._configData)),d=n._iframeHost+"/rx/builds/6.155.0.1453355318/iframe-controller-page.html?config="+c;l.setAttribute("src",d),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("frameBorder","0"),l.setAttribute("id",n._iframeVID),l.setAttribute("allowFullScreen",""),t.appendChild(l),n._iframe=l,n._iframe.onload=function(){n._iframeLoaded=!0}},r.prototype.sendToSafeFrame=function(){var e=this;if(e._iframe&&e._iframeLoaded){var t=Array.prototype.slice.call(arguments),n=JSON.stringify(t);e._iframe.contentWindow.postMessage(n,e._iframeHost)}},r.prototype.receiveMessage=function(e){var t=this,n=null,r=null,i=null;if(e.origin===t._iframeHost){try{n=JSON.parse(e.data)}catch(a){return}if(n&&o.isArray(n)&&n.length>=2){if(i=n.pop(),!o.isString(i)||0!==i.indexOf("VID-"))return;r=n.pop()}t._iframeVID===i&&(t._player._iframeController._iframeControlsGetMethods=r?r:t._iframeControlsGetMethods,t._player.publish.apply(t._player,n))}},r.prototype.routeControlsApiToIframe=function(){var e=this,t="controls",n="playlist",r=["addItems","addItem","setPositionById","setPosition","removeItem","removeItems","removeItemById","removeItemsById"],i=function(n){return function(){var r=Array.prototype.slice.call(arguments);e.sendToSafeFrame(t,n,r)}},o=function(t){return function(){return e._iframeControlsGetMethods[t]}},a=function(t){return-1!==r.indexOf(t)?function(){var r=Array.prototype.slice.call(arguments);e.sendToSafeFrame(n,t,r)}:function(){throw new Error("playlist API "+t+" is not supported when safe frame is enabled")}},s=function(e){return function(){throw new Error("player API "+e+" is not supported when safe frame is enabled")}};for(var l in e._player[t])if("function"==typeof e._player[t][l]){if(void 0!==e._iframeControlsGetMethods[l]){e._player[t][l]=o(l);continue}e._player[t][l]=i(l)}for(var c in e._player[n])"function"==typeof e._player[n][c]&&(e._player[n][c]=a(c));e._player.getCustomControlsNode=s("getCustomControlsNode"),e._player.fetchMetaData=s("fetchMetaData"),e._player.getMediaStore=s("getMediaStore")},r.prototype.routeAPIeventToPage=function(e){var t=this,n=window.YAHOO.VideoPlatform.API_Events[e];t._player.on(n,function(){var e=Array.prototype.slice.call(arguments);e.unshift(n),e.push(t.refreshControlsAPIData()),e.push(t._configData.insideIframeConfig.iframeVID),t.sendToPage(JSON.stringify(e))})},r.prototype.sendToPage=function(e){var t=this,n=null;t._configData.insideIframeConfig&&(n=t._configData.insideIframeConfig.parentURL),window.parent.postMessage(e,n)},r.prototype.receiveMessageFromPage=function(e){var t=this,n=null,r=null,i=null,o=null;if(e.data){try{o=JSON.parse(e.data)}catch(a){return}Array.isArray(o)&&(n=o.length>0?o[0]:null,r=o.length>1?o[1]:null,i=o.length>2?o[2]:null),n&&r&&t._player&&t._player[n]&&t._player[n][r]&&t._player[n][r].apply(t._player[n],i)}},r.prototype.refreshControlsAPIData=function(){var e=this,t={isPlaying:e._player.controls.isPlaying(),getDuration:e._player.controls.getDuration(),getCurrentTime:e._player.controls.getCurrentTime(),getTimeRemaining:e._player.controls.getTimeRemaining(),getFullscreen:e._player.controls.getFullscreen(),getVolume:e._player.controls.getVolume(),getMute:e._player.controls.getMute()};return t},r.prototype.setupIframeToPageCommunication=function(){var e=this;e._receiveMessageHandlerOnIframe=e.receiveMessageFromPage.bind(e),window.addEventListener("message",e._receiveMessageHandlerOnIframe,!1);for(var t in window.YAHOO.VideoPlatform.API_Events)window.YAHOO.VideoPlatform.API_Events.hasOwnProperty(t)&&e.routeAPIeventToPage(t)}},{"../../lib":"bRhrlU","./error":20,"./event":"YJm+dH","./util":"jJTEqU"}],25:[function(e,t,n){"use strict";var r=e("./event"),i=e("./util"),o=e("./video-player");i.setSingleton("VideoPlayer",o),i.setSingleton("API_Events",r.API)},{"./event":"YJm+dH","./util":"jJTEqU","./video-player":58}],26:[function(e,t,n){"use strict";function r(e){return f.isString(e)&&""!==e}function i(e,t){var n=this;s(T,e,n,t),f.isString(n.url)&&0!==n.url.length||(n.url=n.host+n.path),n.format||(n.format=y.getFormat(n.url)),!n.host&&n.url.length>0&&(n.host=y.getHostname(n.url))}function o(){var e=this;e.streams=[],e.selectedStreams=[],e.relatedVideoIds=[],e.state=_.NO_DATA,e.recoveryStatus=m.NOT_RECOVERING,e.isCCM=!0,e.tryCount=1,e.failoverCount=0}function a(){var e=this;e._items={},e._finishedListeners=[]}function s(e,t,n,r){l(e,t,n,null,r),t.CMS&&Object.keys(t.CMS).forEach(function(e){n.CMS[e]=t.CMS[e]})}function l(e,t,n,r,i){var o=n,a=t,s=!0,d=!1;if("configName"in e&&(r=e.configName),r&&(f.isObject(t)&&r in t?(a=t[r],d=!0):s=!1),s&&"transform"in e&&(a=e.transform(a)),"defaultVal"in e){var p=e.defaultVal;if(void 0===n&&(o=f.isFunction(p)?p():p),d){var u=!0;if("overwrite"in e){var _=e.overwrite;f.isFunction(e.overwrite)?u=_(o,a):_||(u=o===p)}u&&("validator"in e?e.validator(a)?o=a:c("Bad configuration data for '"+r+"'",i):o=a)}else e.required&&c("Missing required configuration parameter '"+r+"'",i)}else{o=n||{},s&&!f.isObject(a)&&(r?c("Expecting object in configuration for '"+r+"'",i):c("Expecting object for configuration",i),s=!1),s||(a={});for(var m in e)if(e.hasOwnProperty(m)&&-1===M.indexOf(m)){var v=e[m];o[m]=l(v,a,o[m],m,i)}}return o}function c(e,t){g.warn(e);var n=new Error(e);if(!t)throw n;t.push(n)}function d(e){if(!e)return"";for(var t=e.split("&"),n=0;n<t.length;n++)if(0===t[n].indexOf("ps=")&&t[n].length>3){var r=t[n].substring(3),i=r.split("_");return i[0]}return""}function p(e,t){for(var n=e.split("&"),r=0;r<n.length;r++)if(0===n[r].indexOf("ps=")&&n[r].length>3){n[r]=n[r].replace(n[r].substring(3),t);break}return n.join("&")}function u(e,t){e&&e.length>0&&e.forEach(function(e){e.path&&(e.path=p(e.path,t)),e.url&&(e.url=p(e.url,t)),e.hlsInfo&&e.hlsInfo.ts_url&&(e.hlsInfo.ts_url=p(e.hlsInfo.ts_url,t))})}var _={NO_DATA:"no-data",FETCHING:"fetching",HAS_DATA:"has-data",ERROR:"error"},m={NOT_RECOVERING:"not-recovering",RECOVERING:"recovering",RECOVERED:"recovered"};t.exports={MediaStore:a,Stream:i,MediaItem:o,ItemState:_,ItemRecoveryStatus:m,fillFromConfig:s,addError:c,getSapiVsId:d,updateVsInStreams:u};var v=e("./event"),y=e("./util"),f=e("../../lib"),g=e("../../lib/logger"),b=e("./stream"),h=e("./error"),E="yvpResumeTimeItems",S=10,A={Community:{providerId:"video.community.sony.com"},"Sin City Saints":{providerId:""},"Other Space":{providerId:""}},T={mimeType:{configName:"mime_type",defaultVal:"",validator:r},format:{defaultVal:"",transform:function(e){if(!f.isString(e))return null;var t=e.toLowerCase().split("/");return t[t.length-1]},validator:r},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},bitrate:{defaultVal:0,validator:f.isNumber},duration:{defaultVal:0,validator:f.isNumber},host:{defaultVal:"",validator:f.isString},path:{defaultVal:"",validator:f.isString},url:{defaultVal:"",validator:r},live:{defaultVal:!1,validator:f.isBoolean},isPrimary:{configName:"is_primary",defaultVal:!1,validator:f.isBoolean},cdn:{configName:"cdn",defaultVal:"",validator:f.isString},hlsInfo:{configName:"hls_info",defaultVal:null},dashInfo:{configName:"dash_info",defaultVal:null},drmType:{configName:"drm_type",defaultVal:null},deliveryType:{defaultVal:""},manifestContent:{configName:"mediaPlaylist",defaultVal:null},type:{defaultVal:"",validator:f.isString}};i.prototype.isRTMP=function(){var e=this,t=/^rtmp(?:e|t|te|s)?:\/\//;return t.test(e.host)||t.test(e.url)},i.prototype.isRTX=function(){var e=this;return e.url.indexOf("/rtx/")>-1},i.prototype.isAtlas=function(){var e=this,t=e.host;return e.hlsInfo&&(t=e.hlsInfo.ts_url),/atlas\.cdn\.yimg\.com/.test(t)},i.prototype.isDrmProtected=function(){var e=this;return"adobe"===e.drmType||"apple"===e.drmType},i.prototype.isStreamCompatibleForDrm=function(e){var t=this;return t.isDrmProtected()?"flash"===e&&"f4m"===t.format?1:-1:0},i.prototype._getProtocol=function(){var e=this,t="http",n=e.url.split(":");return n.length>1&&(t=n[0]),t},i.prototype.getType=function(){var e=this,t="unknown",n=e.url,r=e._getProtocol();return n&&(r&&(r.indexOf("rtmp")>-1||r.indexOf("rtsp")>-1)?t=r:/\/*\.f4m/i.test(n)?t=e.isRTX()?"rtx-hds":"hds":/\/*\.m3u8/i.test(n)||n.length>0&&n.indexOf("content=hls")>-1?t=e.isRTX()?"rtx-hls":"hls":/\/*\.mp4/i.test(n)?t="mp4":/\/*\.webm/i.test(n)&&(t="webm")),t};var L={id:{configName:"id",defaultVal:null,validator:f.isString},license:{configName:"license",licensorName:{configName:"account_name",defaultVal:"",validator:f.isString},licensorId:{configName:"account_id",defaultVal:"",validator:f.isString},licenseName:{configName:"title",defaultVal:"",validator:f.isString},licenseId:{configName:"salesforce_id",defaultVal:"",validator:f.isString},originatingProperty:{configName:"originating_property",defaultVal:"",validator:f.isString}},metrics:{ywa:{defaultVal:[],validator:function(e){return f.isArray(e)&&e.every(f.isString)}},comscoreC5:{configName:"comscore_cm5",defaultVal:"",validator:f.isString},comscoreC6:{configName:"comscore6",defaultVal:"",validator:f.isString},pageSpaceId:{configName:"pspid",defaultVal:"",validator:f.isString},beacons:{defaultVal:{},transform:function(e){if(!f.isArray(e))return null;for(var t={},n=0;n<e.length;n++){var r=e[n],i=r.events,o=r.target||"",a=r.data||"",s=r.urlTemplate;if(!f.isArray(i))return null;f.isString(s)||(s=null);for(var l=0;l<i.length;l++){var c=i[l],d=c.param||"";if(!f.isObject(c)||!f.isString(c.name))return null;c.name in t||(t[c.name]=[]);var p={url:s};a&&d&&(p.target=o,p.addParam="&"+a+d),t[c.name].push(p)}}return t},validator:f.isObject},mmActivityId:{configName:"mmActivityId",defaultVal:"",validator:f.isString},mediametrie:{configName:"mediametrie",defaultVal:null,validator:f.isString}},status:{code:{defaultVal:"",validator:f.isString},msg:{defaultVal:"",validator:f.isString}},yvap:{defaultVal:{}},closedCaptions:{configName:"closedcaptions",defaultVal:[],url:{validator:f.isString},lang:{validator:f.isString}},visualSeek:{configName:"visualseek",defaultVal:{},frequency:{defaultVal:0,validator:f.isNumber},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},images:{defaultVal:[],validator:f.isArray}},progress:{position:{defaultVal:null,validator:f.isNumber},adbreaks:{defaultVal:[],validator:f.isArray}},seriesInfo:{defaultVal:{},series_id:{configName:"series_id",defaultVal:null,validator:f.isNumber},videoType:{configName:"type",defaultVal:"",validator:f.isString},seasonNumber:{configName:"season_number",defaultVal:0,validator:f.isNumber},episodeNumber:{configName:"episode_number",defaultVal:0,validator:f.isNumber}},annotations:{configName:"annotations",defaultVal:{},content:{defaultVal:[],validator:f.isArray},theme:{defaultVal:"dark",validator:f.isString},transition:{defaultVal:{},"class":{defaultVal:"dissolve",validator:f.isString}},version:{defaultVal:"1",validator:f.isString}},algo:{defaultVal:null,transform:function(e){return e.algo_name},validator:f.isString},instrument:{defaultVal:null,transform:function(e){return e&&e.algo||""},validator:f.isString}},I={description:{defaultVal:"",validator:f.isString,transform:function(e){return y.sanitizeAndUnescape(e)}},title:{defaultVal:"",validator:f.isString,transform:function(e){return y.sanitizeAndUnescape(e)}},snapshots:{
count:{defaultVal:null,validator:f.isNumber},height:{defaultVal:null,validator:f.isNumber},width:{defaultVal:null,validator:f.isNumber},url:{defaultVal:null,validator:f.isString}},provider:{name:{defaultVal:"",validator:f.isString},providerId:{configName:"provider_id",defaultVal:null,validator:f.isString},providerVideoId:{configName:"provider_video_id",defaultVal:null,validator:f.isString},publisherId:{configName:"publisher_id",defaultVal:null,validator:f.isString},providerLogoUrl:{configName:"logourl",defaultVal:null,validator:f.isString}},provisioningSource:{configName:"provisioning_source",defaultVal:"",validator:f.isString},genres:{configName:"genre",defaultVal:[],transform:function(e){return f.isString(e)?e.split(","):null},validator:f.isArray},duration:{defaultVal:null,validator:f.isNumber},credits:{mainArtists:{configName:"main_artists",defaultVal:[],transform:function(e){return f.isString(e)?e.split(/[,;]/):null},validator:f.isArray},label:{defaultVal:null,validator:f.isString}},images:{large:{defaultVal:null,validator:f.isString},medium:{defaultVal:null,validator:f.isString},small:{defaultVal:null,validator:f.isString},provider:{defaultVal:null,validator:f.isString},thumbnail:{defaultVal:null,validator:f.isString}},_thumbnail:{configName:"thumbnail",defaultVal:null,validator:f.isString},showName:{configName:"show_name",defaultVal:"",validator:f.isString},shareUrl:{configName:"url",defaultVal:"",overwrite:!1,validator:f.isString},embedCode:{configName:"embedCode",defaultVal:"",overwrite:!1,validator:f.isString},embedRights:{configName:"embed_rights",defaultVal:!1,validator:f.isBoolean},eventBeginTime:{configName:"event_start",defaultVal:null,validator:f.isNumber},eventEndTime:{configName:"event_stop",defaultVal:null,validator:f.isNumber},liveState:{configName:"live_state",defaultVal:null,validator:f.isString},ageGate:{configName:"age_gate",defaultVal:"",validator:f.isString},castable:{configName:"castable",defaultVal:!0,validator:f.isBoolean},seriesInfo:{configName:"seriesInfo",defaultVal:{},type:{defaultVal:"",validator:f.isString}}};o.prototype.getRecoveryStatusForBeacon=function(){var e=this,t=e.recoveryStatus===m.RECOVERED;return t&&(e.recoveryStatus=m.NOT_RECOVERING),t},o.prototype.fetchFinished=function(){var e=this;return e.state===_.HAS_DATA||e.state===_.ERROR},o.prototype.isLongForm=function(){var e=this;return e.duration>600},o.prototype.fillFromRaw=function(e,t,n,r){var o=this;e.shareUrl&&(e.url=e.shareUrl),s(L,e,o,r);var a=e.meta||e;if(s(I,a,o,r),null===o.id&&(o.isCCM=!1,o.id=y.generateGuid()),null!==o.duration&&o.isLongForm()){if(null===o.progress.position){var l=y.localStorage.get(E);l&&l[o.id]?o.progress=l[o.id]:o.progress.position=0}o.restartIfNeeded()}o.images.thumbnail=o.images.thumbnail||o._thumbnail,o.images.defaultThumbnail=o.images.large||o.images.thumbnail||o.images.medium||o.images.small||o.images.provider,o.fillStreamsFromRaw(e.streams,t,n,r),e.streamProfiles&&(o.streamProfiles=e.streamProfiles.map(function(e){return new i(e,r)})),o.isCCM?o.hasStreams()&&o.hasThumbnail()?o.state=_.HAS_DATA:o.hasStreams()&&o.state===_.FETCHING&&(o.state=_.HAS_DATA):o.hasStreams()?o.state=_.HAS_DATA:o.state=_.ERROR},o.prototype.restartIfNeeded=function(){var e=this;e.progress.position+S>e.duration&&(e.progress.position=0)},o.prototype.hasStreams=function(){var e=this;return 0!==e.streams.length},o.prototype.getCDN=function(){var e=this;return e.selectedStreams.length>0?e.selectedStreams[0].cdn:null},o.prototype.isLive=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].live)return!0;return null!==e.liveState&&"vod"!==e.liveState?!0:!1},o.prototype.hasThumbnail=function(){var e=this;return!!e.images.defaultThumbnail},o.prototype.fillStreamsFromRaw=function(e,t,n,r){var o=this;if(e&&0===o.streams.length){var a=e.map(function(e){return new i(e,r)});if(a.length){for(var s=0;s<t.length;s++){var l=t[s],c=n[l],d=b.findAcceptedStreams(a,c);if(0!==d.length){o.rendererType=l,o.streams=d;break}}if(0===o.streams.length){var p=new Error("None of the streams is accepted. Possiblemismatch in accepted format or/and protocol.");g.error(p.message),r.push(p),o.status.code=h.SAPI_CODES.E_SAPI_INCOMPATIBLE_FORMAT,o.status.msg=p.message,"m3u8"===a[0].format&&a[0].live&&-1===t.indexOf("flash")&&(o.status.code=h.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML)}else o.streams.sort(function(e,t){return e.bitrate-t.bitrate})}else{var u=new Error("No streams returned");g.error(u.message),r.push(u),o.status.code=h.SAPI_CODES.E_SAPI_NO_STREAMS_RETURNED,o.status.msg=u.message}}},o.prototype.generateVSid=function(){for(var e=[],t="abcdefghijklmnopqrstuvwxyz123456789",n=0;8>n;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));var r=e.join("");return r},o.prototype.generateSamplingId=function(){return Math.floor(10*Math.random())},o.prototype.fillSelectedStreams=function(e,t){var n=this,r=e.map(function(e){return new i(e,t)});r.length&&(n.selectedStreams=r),n.selectedStreams&&n.selectedStreams.length>1&&n.selectedStreams.sort(function(e,t){return e.bitrate-t.bitrate})},o.prototype.hasDrmStreams=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].isDrmProtected())return!0;return!1},o.prototype.getType=function(){var e=this;return e.hasStreams()?e.selectedStreams.length>0?e.selectedStreams[0].getType():e.streams[0].getType():"none"},o.prototype.getShowName=function(){var e=this;return e.showName},o.prototype.isOriginalShow=function(e){var t=this;return e||(e=t.getShowName()),e&&A[e]?!0:!1},o.prototype.isSeriesEpisode=function(){var e=this;return e.seriesInfo&&"episode"===e.seriesInfo.videoType?!0:!1},o.prototype.updateVideoSession=function(e){var t=this;t.isPrefetch=!1,e.streams&&e.streams.length>0?(t.videoSession=d(e.streams[0].path)+"_"+t.generateVSid(),t.isPrefetch=!0):e.algo||(t.videoSession=t.generateVSid()),t.samplingId=t.generateSamplingId(),u(e.streams,t.videoSession)},a.prototype.get=function(e){var t=this;return e?t._items[e]||null:null},a.prototype.getAll=function(){var e=this;return e._items},a.prototype.updateItemFromRaw=function(e,t,n,r){var i=this,a=i.get(e.id);return a||(a=new o,a.updateVideoSession(e)),a.fillFromRaw(e,t,n,r),i._items[a.id]=a,a},a.prototype.fillFromSapi=function(e,t,n,r){var i=this;if(f.isArray(e))return e.map(function(e){return i.updateItemFromRaw(e,t,n,r).id});var o=new Error("No SAPI data available");return g.warn(o.message),r.push(o),[]},a.prototype.notifyFetchFinished=function(e,t){var n=this;e.forEach(function(e){var r=n.get(e);r.state!==_.HAS_DATA&&(r.state=_.ERROR,t&&(r.status.code=t))}),n._finishedListeners.forEach(function(t){t(e)})},a.prototype.registerFinished=function(e){var t=this,n=function(t){e.publish(v.METADATA_AVAILABLE,t)};return t._finishedListeners.push(n),function(){var e=t._finishedListeners.indexOf(n);-1!==e&&t._finishedListeners.splice(e,1)}};var M=["configName","defaultVal","validator","transform","overwrite"]},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./stream":"Af6MnA","./util":"jJTEqU"}],QCpdmG:[function(e,t,n){function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._profiler=n,r._sapi=new s(r._model,t,n),r._prefetchEmitted=!1,r._unsubNotifyFinished=r._model.mediaStore.registerFinished(r._eventBus)}var i=e("./error"),o=e("./event"),a=e("./media-store"),s=e("./sapi"),l=e("./util"),c=e("../../lib"),d=e("../../lib/logger");t.exports=r,r.prototype._emitPrefetchAvailable=function(){var e=this,t=[],n=e._model.mediaStore.getAll();for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i.state===a.ItemState.HAS_DATA&&t.push(r)}t.length&&e._eventBus.publish(o.METADATA_AVAILABLE,t)},r.prototype.updateMetadata=function(e,t,n){var r=this;r._prefetchEmitted||(r._emitPrefetchAvailable(),r._prefetchEmitted=!0,r._profiler.setEndTime(o.Metrics.INIT_TO_SAPI));var i=[],s=r._model.mediaStore.getAll();for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];(c.state===a.ItemState.NO_DATA||c.recoveryStatus===a.ItemRecoveryStatus.RECOVERING)&&(i.push(l),c.state=a.ItemState.FETCHING)}r._updateUUIDsFromSAPI(i,e,!1,t,n)},r.prototype._getMetaConfig=function(){var e=this;return{width:e._model.ui.thumbnailDimensions.width||e._model.uiState.width,height:e._model.ui.thumbnailDimensions.height||e._model.uiState.height,site:e._model.baseConfig.site,expb:e._model.baseConfig.experienceBucket,expn:e._model.baseConfig.experienceName,lang:e._model.baseConfig.lang,region:e._model.baseConfig.region,synd:e._model.baseConfig.syndication,pspid:e._model.CMS.suppressAdContext?"":e._model.baseConfig.pageSpaceId,acctid:e._model.YVAP.accountId,topic:e._model.YVAP.cTopic,plidl:e._model.CMS.suppressAdContext?"":e._model.YVAP.playContext,rt:e._model.rendererTypes}},r.prototype.fetchPlaylist=function(e){var t=this;e=e||function(){};var n=t._getMetaConfig();n.uuid=t._model.playlist.id,t._profiler.add(o.Metrics.PLAYLIST_LOADED),t._sapi.loadPlaylist(n,t._model.capabilities,function(n,r){if(n)return void e(n);try{var a=r.query.results.mediaObj;t._profiler.setEndTime(o.Metrics.PLAYLIST_LOADED)}catch(n){var s=l.createErr("S",t._model.playbackState,i.E_PLAYER,i.PLAYER_CODES.E_PLAYER_CMS_RESPONSE);return t._eventBus.publish(o.ERROR,s),void e(s)}a&&(t._model.playlist.appendFromRaw(a,t._model.rendererTypes,t._model.capabilities,[]),t.updateMetadata(e,null,null))})},r.prototype._updateUUIDsFromSAPI=function(e,t,n,r,i){var a=this;t=t||function(){};var s=a._getMetaConfig();if(s.uuids=e,e.length>0){if(a._model.playlist){var l=a._model.playlist.getCurrentItem();l&&l.id===e[0]&&(s.ps=l.videoSession)}a._profiler.add(o.Metrics.SAPI_LOADCLIPS),a._sapi.loadClips(s,a._model.capabilities,function(o,s,l){t(a._onSAPI(o,s,e,n,l,r,i))},i)}else t(null)},r.prototype.refreshMetadata=function(e){var t=this;t._updateUUIDsFromSAPI(e,void 0,!0)},r.prototype._onSAPI=function(e,t,n,r,a,s,p){var u=this;s=c.isNullOrUndefined(s)?!1:s,p=c.isNullOrUndefined(p)?!1:p;var _=null;if(e){_=e;var m,v=s?o.WARNING:o.ERROR,y=s?i.E_WARNING:i.E_PLAYER;m=e.message===l.JSONP_ERROR?s?i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE:e.message===l.JSONP_TIMED_OUT?s?i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:e.subcategory,_=l.createErr("S",u._model.playbackState,y,m,null,a+"; "+_.debugMessage,p),u._eventBus.publish(v,_)}else{var f;try{f=t.query.results.mediaObj,u._profiler.setEndTime(o.Metrics.SAPI_LOADCLIPS)}catch(e){_=l.createErr("S",u._model.playbackState,i.E_PLAYER,i.PLAYER_CODES.E_PLAYER_CMS_RESPONSE),u._eventBus.publish(o.ERROR,_)}if(!_){var g=[];u._model.mediaStore.fillFromSapi(f,u._model.rendererTypes,u._model.capabilities,g),g.length&&d.warn("SAPI data errors encountered!")}u._model.CMS.colo=t.query?t.query.results.colo:"none",r?u._eventBus.publish(o.REFRESH_METADATA_AVAILABLE,n):u._model.mediaStore.notifyFetchFinished(n,_?_.subcategory:null)}return _},r.prototype.fillFromER=function(e){var t=this,n=e.query.results.mediaObj,r=[];t._model.mediaStore.fillFromSapi(n,t._model.rendererTypes,t._model.capabilities,r),r.length&&d.warn("ER data errors encountered!"),t._model.CMS.colo=e.query?e.query.results.colo:"none"},r.prototype.prefetch=function(e,t){for(var n=this,r=!0,i=0,a=e.length;a>i;i++){var s=n._model.mediaStore.get(e[i]);if(!s||"has-data"!==s.state){r=!1;break}}return r?void n._eventBus.publish(o.API.METADATA_READY,e):(e.forEach(function(e){n._model.mediaStore.updateItemFromRaw({id:e})}),void n.updateMetadata(function(){},t,!0))},r.prototype.getRelatedVideos=function(e,t,n){var r=this,i=0,a=15;return n=n||function(){},0===e.relatedVideoIds.length||t?(i=e.relatedVideoIds.length,r._profiler.add(o.Metrics.SAPI_LOADRELATED),void r._sapi.loadRelated({start:i,count:a,uuid:e.id,width:r._model.ui.thumbnailDimensions.width||r._model.uiState.width,height:r._model.ui.thumbnailDimensions.height||r._model.uiState.height,region:r._model.baseConfig.region,site:r._model.baseConfig.site,lang:r._model.baseConfig.lang},function(t,i){if(t)return void n(t);var a;try{a=i.query.results.result[0].mediaObj}catch(t){return void n(t)}var s=[],l=r._model.mediaStore.fillFromSapi(a,r._model.rendererTypes,r._model.capabilities,s);return r._profiler.setEndTime(o.Metrics.SAPI_LOADRELATED),s.length?void n(s[0]):void r.updateMetadata(function(t){t?n(t):(e.relatedVideoIds&&e.relatedVideoIds.length>0?e.relatedVideoIds=e.relatedVideoIds.concat(l):e.relatedVideoIds=l,n(null,l))})})):void n(null,e.relatedVideoIds)},r.prototype.updateUserPreferences=function(e){var t=this;t._sapi.updateUserPreferences(function(){},e)},r.prototype.getUserPreferences=function(){var e=this;if(e._model.userPreferences.isAuthenticated){if(e._model.userPreferences.closedCaptions.isAvailable&&!c.isNullOrUndefined(e._model.userPreferences.isAdult))return;var t=l.getSingleton("userPrefs");if(!c.isNullOrUndefined(t))return void e._updateUserPreferencesData(t);e._profiler.add(o.Metrics.GET_USER_PREFS),e._sapi.getUserPreferences(function(t,n){return t?void d.error("User preferences failed on SAPI call.",t):void(n.userprefs&&(e._profiler.setEndTime(o.Metrics.GET_USER_PREFS),e._updateUserPreferencesData(n.userprefs,!0)))})}},r.prototype._updateUserPreferencesData=function(e){var t=this,n=e[0]?e[0].closedcaptionprefs:null;if(t._model.userPreferences.isAdult=e[1]?e[1].isAdult:null,!n&&"Invalid_GUID"===e[0].err)return t._model.userPreferences.isAuthenticated=!1,void t._eventBus.publish(o.USER_AUTHENTICATED);if(t._model.userPreferences.isAuthenticated=!0,t._eventBus.publish(o.USER_AUTHENTICATED),n&&!n.err){var r;e[0].closedcaptionprefs.show=t._model.userPreferences.closedCaptions.show,a.fillFromConfig(t._model.getModelSchema().userPreferences.closedCaptions,e[0],t._model.userPreferences.closedCaptions,r),r||(t._model.userPreferences.closedCaptions.isAvailable=!0,t._eventBus.publish(o.CC.USER_STYLE_PREFERENCES_CHANGE),l.setSingleton("userPrefs",e))}},r.prototype.getRelatedVideosChannel=function(e,t,n){var r=this;n=n||function(){},r._sapi.loadRelatedVideosChannel({count:t.count||12,start:t.start||0,region:r._model.baseConfig.region,site:r._model.baseConfig.site,lang:r._model.baseConfig.lang,videoUuid:t.videoUuid},function(t,i){if(t)return void n(t);var o;try{if(o=i.channel.result[0].videos,c.isNullOrUndefined(o))return void n(null);o.forEach(function(e){e.credits&&!e.credits.mainArtists&&delete e.credits})}catch(t){return void n(t)}var a=[],s=r._model.mediaStore.fillFromSapi(o,r._model.rendererTypes,r._model.capabilities,a);r.updateMetadata(function(t){t?n(t):(s.length>0&&(e.relatedVideoIds=e.relatedVideoIds.concat(s),e.relatedVideoIds=l.uniquifyArray(e.relatedVideoIds)),n(null,s))})})},r.prototype.getChannelsVideos=function(e,t,n){var r=this;n=n||function(){},r._sapi.loadChannelsVideos({count:t.count||12,start:t.start||0,region:r._model.baseConfig.region,site:r._model.baseConfig.site,lang:r._model.baseConfig.lang,playlistId:t.playlistId,playlistAlias:t.playlistAlias},function(t,i){if(t)return void n(t);var o;try{if(o=i.channel.result[0].videos,c.isNullOrUndefined(o))return void n(null);o.forEach(function(e){e.credits&&!e.credits.mainArtists&&delete e.credits})}catch(t){return void n(t)}var a=[],s=r._model.mediaStore.fillFromSapi(o,r._model.rendererTypes,r._model.capabilities,a);r.updateMetadata(function(t){t?n(t):(s.length>0&&(e.relatedVideoIds=e.relatedVideoIds.concat(s),e.relatedVideoIds=l.uniquifyArray(e.relatedVideoIds)),n(null,s))})})},r.prototype.destroy=function(){var e=this;e._unsubNotifyFinished(),e._sapi.cancelAll()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./media-store":26,"./sapi":48,"./util":"jJTEqU"}],"./nextgen/src/metadata-fetcher.js":[function(e,t,n){t.exports=e("QCpdmG")},{}],29:[function(e,t,n){"use strict";function r(e){var t=this,n=("https:"===document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/p",r={rn:e.randomVal,C4:e.comscoreC4,C5:e.comscoreC5,C6:e.comscoreC6,C1:function(){return"1"},C2:function(){return"7241469"},cv:function(){return"2.0"}};t.sendOpts={baseUrl:n,target:"cs",paramGetters:r,beginningKeys:["C1","C2","C4","C5","C6","cv","rn"]},t.beaconMappings={PLAYBACK_START:{keys:[],data:{}},AD_START:{keys:[],data:{C5:"09"}}}}t.exports=r},{}],30:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._commonFields=n;var o=e.metrics.skipComscore;if(r._streamSenseTag=o?function(){}:null,r._comscoreBeaconQueue=[],r._comscorePersistentLabels={},r._eventBus.subscribe(s.MEDIA_ITEM_LOADED,r._onMediaItemChanged,r),r._eventBus.subscribe(s.PLAYBACK_ENDED,r._onPlaybackComplete,r),r._eventBus.subscribe(s.Video.SEEKING,r._onPlaybackSeeking,r),r._eventBus.subscribe(s.Video.SEEKED,r._onPlaybackSeeked,r),r._eventBus.subscribe(s.Video.PAUSE,r._onPlaybackPaused,r),r._eventBus.subscribe(s.PLAYBACK_RESUMED,r._onPlaybackResumed,r),r._eventBus.subscribe(s.Video.WAITING,r._onWaiting,r),r._eventBus.subscribe(s.PLAYBACK_STARTED,r.setVideoClipLabels,r),r._eventBus.subscribe(s.Video.PLAYING,r._onPlaying,r),r._eventBus.subscribe(s.CONTROLS_SET_VOLUME,r._onVolumeChanged,r),r._eventBus.subscribe(s.AD_PLAYBACK_ENDED,r._onAdPlaybackComplete,r),r._eventBus.subscribe(s.AD_PLAYBACK_STARTED,r.setAdClipLabels,r),r._eventBus.subscribe(s.AD_PLAYBACK_PAUSED,r._onAdPaused,r),r._eventBus.subscribe(s.AD_PLAYBACK_RESUMED,r._onAdResumed,r),!o&&!u.tv){var c=i.getAssetUrl(e.isLocal(),e.version,l);window.ns_&&window.ns_.StreamSense?r._createStreamingTag():i.lazyLoad(c,d,function(e){return e?void a.warn("Failed to load comscore streamsense js:-"+e):void r._createStreamingTag()},o)}}t.exports=r;var i=e("../util"),o=e("../../../lib"),a=e("../../../lib/logger"),s=e("../event"),l="streamsense.min.js",c="scorecardresearch.com/p?c1=2&c2=7241469",d=1e4,p=e("./metrics-constants"),u=e("../../../lib/user-agent");r.prototype._createStreamingTag=function(){var e=this,t=("https:"===document.location.protocol?"https://sb.":"http://b.")+c;e._streamSenseTag=new window.ns_.StreamSense({},t),e._eventMap={play:window.ns_.StreamSense.PlayerEvents.PLAY,pause:window.ns_.StreamSense.PlayerEvents.PAUSE,buffer:window.ns_.StreamSense.PlayerEvents.BUFFER,end:window.ns_.StreamSense.PlayerEvents.END}},r.prototype._onMediaItemChanged=function(){var e=this,t=e._commonFields;e._currentIndex=0,e._contentIndex=null,e._partNumber=0;var n;switch(t.location()){case"3":n="Emb onNet";break;case"4":n="Emb offNet";break;default:n="onProp"}e.setComscorePersistentLabels(e._commonFields),e.addToComscoreQueue(function(){e.setPlaylist({y_lms:t.licenseId(),c6:t.comscoreC6(),y_sp:t.streamProtocol(),y_stype:t.streamType(),ns_st_pl:t.videoTitle(),ns_st_cs:t.dimensions(),y_st:t.site(),y_rg:t.region(),y_lc:n,y_pb:p.STRING_DEFAULT})})},r.prototype._onPlaybackSeeking=function(e){var t=this,n=e>0?e:t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("pause",{ns_st_ui:"seeking"},(1e3*n).toString())})},r.prototype._onPlaybackSeeked=function(e){var t=this;t.addToComscoreQueue(function(){t.notifyState("play",{ns_st_ui:"seeking"},(1e3*e).toString())})},r.prototype._onWaiting=function(e){var t=this;if(!e||!e.ignoreBuffering&&e.value){var n=t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("buffer",{},(1e3*n).toString())}),t._bufferingStart=!0}},r.prototype._onPlaying=function(){var e=this,t=e._commonFields.playbackPosition();e._bufferingStart&&(e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())}),e._bufferingStart=!1)},r.prototype._onPlaybackComplete=function(e,t){var n=this,r=n._commonFields.playbackPosition(),i=n._model.playback.bitrate,o={ns_st_br:i.toString()};t&&(o.ns_st_pe="1"),n.addToComscoreQueue(function(){n.notifyState("end",o,(1e3*r).toString())})},r.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},r.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},r.prototype._onAdPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},r.prototype._onVolumeChanged=function(e){var t=this;t.addToComscoreQueue(function(){t.updateClipAttrs({ns_st_vo:Math.round(100*e)})})},r.prototype._onAdResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},r.prototype._onAdOrContentStarted=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){var n=e._model.playback.bitrate,r={};0!==n&&(n=n.toString(),r.ns_st_br=n),e.notifyState("play",r,(1e3*t).toString())})},r.prototype._onAdPlaybackComplete=function(){var e=this,t=e._commonFields.adPlaybackPosition();e.addToComscoreQueue(function(){e.notifyState("end",{},(1e3*t).toString())})},r.prototype.setComscorePersistentLabels=function(){var e=this,t=e._commonFields,n=e._comscorePersistentLabels;n.ns_site="yahoo-video","dash"===t.rendererType()?n.ns_st_mp="dash":"html"===t.rendererType()?n.ns_st_mp="h":n.ns_st_mp="f",n.ns_st_mv=t.playerVersion(),n.c3="*null",n.c4=t.comscoreC4(),n.c7=t.pageUrl(),n.c9=t.pageReferrer(),e.addToComscoreQueue(function(){e.setPersistentLabels(n)})},r.prototype.setVideoClipLabels=function(){var e=this,t=e._commonFields,n="true"===t.autoplay()?"1":"0";o.isNullOrUndefined(e._contentIndex)&&(e._currentIndex++,e._contentIndex=e._currentIndex);var r={ns_st_pr:t.videoTitle(),ns_st_ep:t.videoShowName(),ns_st_ge:t.genre(),ns_st_cu:t.pageUrl(),ns_st_vo:Math.round(t.volumeLevel()),ns_st_ty:t.contentType(),ns_st_cn:e._contentIndex,ns_st_ci:t.videoId(),y_pid:t.providerId(),y_lbl:t.label(),ns_st_pn:++e._partNumber,y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_c:t.cdn(),y_ap:n},i=t.videoLength(),a="vc11";if("na"!==i&&i>600&&(a="vc12"),t.isLive()){var s=t.eventBegin(),l=t.eventEnd();i=""!==s&&""!==l?l-s:null,r.ns_st_li="1",a="vc23"}r.ns_st_ct=a,r.ns_st_cl=i&&"na"!==i?(1e3*i).toString():p.INT_DEFAULT;var c=e._model.playbackState.looped;e.addToComscoreQueue(function(){c?e.setClip(r,!0):e.setClip(r)}),e._onAdOrContentStarted()},r.prototype.setAdClipLabels=function(){var e=this,t=e._commonFields,n="true"===t.autoplay()?"1":"0",r="va11",i=t.adId()||p.INT_DEFAULT,o=t.adPosition(),a=t.adDuration();t.isLive()?r="va21":"postroll"===o?r="va13":"midroll"===o&&(r="va12");var s={ns_st_ty:t.contentType(),ns_st_ct:r,ns_st_ad:"1",ns_st_pr:"ad",ns_st_ep:"ad",ns_st_cu:p.STRING_DEFAULT,ns_st_vo:Math.round(t.volumeLevel()),ns_st_cn:++e._currentIndex,ns_st_ci:i,ns_st_cl:a?(1e3*a).toString():p.STRING_DEFAULT,ns_st_pn:"1",y_pid:t.providerId(),y_lbl:t.label(),y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_ap:n};e.addToComscoreQueue(function(){e.setClip(s)}),e._onAdOrContentStarted()},r.prototype.setPersistentLabels=function(e){var t=this;t._streamSenseTag.setLabels(e)},r.prototype.setPlaylist=function(e){var t=this;t._streamSenseTag.setPlaylist(e)},r.prototype.setClip=function(e){var t=this;t._streamSenseTag.setClip(e)},r.prototype.notifyState=function(e,t,n){var r=this;r._streamSenseTag.notify(r._eventMap[e],t,n)},r.prototype.updateClipAttrs=function(e){var t=this,n=t._streamSenseTag.getClip();n&&n.setLabels(e)},r.prototype._fireComscoreBeacons=function(){var e=this,t=e._comscoreBeaconQueue;t.forEach(function(e){e()}),e._comscoreBeaconQueue=[]},r.prototype.addToComscoreQueue=function(e){var t=this,n=t._comscoreBeaconQueue;n.push(e),t._streamSenseTag&&t._fireComscoreBeacons()}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../util":"jJTEqU","./metrics-constants":32}],31:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._commonFields=n;var c=e.metrics.skipComscore;r._streamTag=c?function(){}:null;var d=i.getAssetUrl(e.isLocal(),e.version,s);r._mediaMetrieQueue=[],r._position=0,r._eventBus.subscribe(a.PLAYBACK_STARTED,r._setVideoLabels,r),r._eventBus.subscribe(a.Video.TIMEUPDATE,r._onPlaybackProgress,r),r._eventBus.subscribe(a.API.PLAYLIST_COMPLETE,r._onPlaybackComplete,r),r._eventBus.subscribe(a.API.PLAYLIST_POSITION_CHANGE,r._onPlaybackComplete,r),r._eventBus.subscribe(a.Video.PAUSE,r._onPlaybackPaused,r),r._eventBus.subscribe(a.PLAYBACK_RESUMED,r._onPlaybackResumed,r),r._eventBus.subscribe(a.Video.SEEKING,r._onPlaybackSeeking,r),r._eventBus.subscribe(a.Video.SEEKED,r._onPlaybackSeeked,r),r._eventBus.subscribe(a.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),c||(window.eStatTag?r._mediaMetrieJSLoaded=!0:i.lazyLoad(d,l,function(e){return e?void o.warn("Failed to load mediaMetrie js:-"+e):void(r._mediaMetrieJSLoaded=!0)},c))}t.exports=r;var i=e("../util"),o=e("../../../lib/logger"),a=e("../event"),s="mu-yahoo-integration-5.0.js",l=1e4,c=e("./metrics-constants"),d=220020212974;r.prototype._onMediaItemLoaded=function(){var e=this;e._mediaMetrieJSLoaded&&e._createTags()},r.prototype._createTags=function(){var e=this;e._streamTag&&(e._streamTag=null,e.confStreamingAnalyticsMediametrie=null),e.confStreamingAnalyticsMediametrie={serial:e._getSerial(),measure:"streaming",levels:{level_1:"",level_2:"",level_3:"",level_4:"",level_5:""},streaming:{diffusion:"replay",callbackPosition:function(){return e._position},playerObj:e._model.guid,streamDuration:"",playerName:"yahoo video player",playerVersion:e._model.version,streamName:"",streamURL:"",streamGenre:""}},e._mediaMetrieJSLoaded&&(e._streamTag=new window.eStatTag(e.confStreamingAnalyticsMediametrie))},r.prototype._getSerial=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t&&t.metrics.mediametrie;return n?n:d},r.prototype._setVideoLabels=function(){var e=this,t=e._commonFields;e.addToMediaMetrieQueue(function(){var n=e.confStreamingAnalyticsMediametrie;if(n){n.serial=e._getSerial(),n.levels.level_1=t.site(),n.levels.level_2=t.providerId(),n.levels.level_3=t.licenseId(),n.levels.level_4=t.mediaMetaTags(),t.isLive()&&(n.levels.diffusion="live");var r=t.videoLength();n.streaming.streamDuration=r&&"na"!==r?r.toString():c.INT_DEFAULT,n.streaming.streamName=t.videoTitle(),n.streaming.streamGenre=t.genre(),n.streaming.streamURL=t.pageUrl(),e.setLabels(n)}});var n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",n.toString())})},r.prototype._onPlaybackProgress=function(e){var t=this,n=t._commonFields;t._position=parseInt(e),t.addToMediaMetrieQueue(function(){var e=t.confStreamingAnalyticsMediametrie;e&&n.isLive()&&(e.levels.diffusion="timeshifting",t.setLabels(e))})},r.prototype._onPlaybackComplete=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("stop",n.toString())})},r.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("pause",n.toString())})},r.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",n.toString())})},r.prototype._onPlaybackSeeking=function(e){var t=this,n=t._commonFields,r=n.playbackPosition();t.addToMediaMetrieQueue(function(){t.notifyState("pause",r.toString())})},r.prototype._onPlaybackSeeked=function(e){var t=this;t._model.playbackState.paused||t.addToMediaMetrieQueue(function(){t.notifyState("play",e.toString())})},r.prototype.setLabels=function(e){var t=this;t._streamTag.set(e)},r.prototype.notifyState=function(e,t){var n=this;n._position=parseInt(t),n._streamTag.notifyPlayer(e,n._position)},r.prototype._fireMediaMetrieBeacons=function(){var e=this;e._mediaMetrieQueue.forEach(function(e){e()}),e._mediaMetrieQueue=[]},r.prototype.addToMediaMetrieQueue=function(e){var t=this,n=t._mediaMetrieQueue;n.push(e),t._streamTag&&t._fireMediaMetrieBeacons()}},{"../../../lib/logger":"IS9j5T","../event":"YJm+dH","../util":"jJTEqU","./metrics-constants":32}],32:[function(e,t,n){"use strict";t.exports={PROGRESS_INTERVAL:10,TRUE_STREAMS_INTERVAL:3,QUARTILE_PROGRESS_INTERVAL:25,BEACON_HIDE_VALUE:{},BEACON_HIDE_KEY_VALUE:{},STRING_DEFAULT:"none",INT_DEFAULT:"",CLICK:"click",AUTOPLAY:"autoplay",API:"api",CONTINUOUS:"continuous",HOVER:"hover",SCROLL:"scroll",PLAYBACK_PROGRESS_MODE_CLASSIC:{fixed:[3],recurring:10,playerUnload:!1,playPause:!1,firingCriteria:"FREQ_MODE_CLASSIC"},PLAYBACK_PROGRESS_MODE_STANDARD:{fixed:[3,10],recurring:30,playerUnload:!0,playPause:!0,firingCriteria:"FREQ_MODE_STANDARD"},BEACON_DISASTER_MODE:{global:0,PLAYBACK_START:1,PLAYER_ERROR:.05},SEG_INFO_LENGTH:6}},{}],33:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._profiler=n,r._eventBus.subscribe(u.VIDEO_REQUEST,r._onVideoRequest,r),r._eventBus.subscribe(u.START_SCREEN_RENDERED,r._onStartScreenRendered,r),r._eventBus.subscribe(u.HLS_FIRST_TS_LOAD_START,r._onContentFirstTSLoadStart,r),r._eventBus.subscribe(u.HLS_FIRST_TS_FIRST_BYTE_ARRIVE,r._onContentFirstTSFirstByteArrive,r),r._eventBus.subscribe(u.PLAYBACK_STARTED,r._onContentStarted,r),r._eventBus.subscribe(u.PLAYBACK_REQUEST,r._onPlaybackRequested,r),r._eventBus.subscribe(u.PLAYBACK_RESUMED,r._onPlaybackResumed,r),r._eventBus.subscribe(u.PLAYBACK_STALLED,r._onPlaybackStalled,r),r._eventBus.subscribe(u.API.UI_INTERACT,r._onUIInteraction,r),r._eventBus.subscribe(u.VIDEO_APPS_LOADED,r._onVideoAppsLoaded,r),r._eventBus.subscribe(u.API.BITRATE_CHANGE,r._onBitrateChange,r),r._eventBus.subscribe(u.API_CALLED,r._onApiCalled,r),r._eventBus.subscribe(u.FEEDBACK_INFO,r._onFeedbackCalled,r),r._eventBus.subscribe(u.RECOVERY_METADATA_READY,r._onRecoveryMetadata,r),r._eventBus.subscribe(u.ABR_DATA_UPDATE,r._onABRDataUpdate,r),r._eventBus.subscribe(u.CTRL_PLAYPAUSE,r._onCtrlPlayPause,r),r._eventBus.subscribe(u.CTRL_SEEK,r._onSeek,r),r._eventBus.subscribe(u.CTRL_VOLUME,r._onVolume,r),r._eventBus.subscribe(u.CTRL_FULLSCREEN,r._onFullscreen,r),r._eventBus.subscribe(u.CTRL_SETTINGS,r._onSettings,r),r._eventBus.subscribe(u.CTRL_PLAYREQUEST,r._onCtrlPlayRequest,r),r._eventBus.subscribe(u.CC.UI_TOGGLE,r._onCCTog,r),r._eventBus.subscribe(u.CC.LANGUAGE_CHANGE,r._onCCLang,r),r._eventBus.subscribe(u.CC.UPDATE_STYLE,r._onCCStyle,r),r._eventBus.subscribe(u.CC.SETTINGS,r._onCCSettings,r),r._eventBus.subscribe(u.CTRL_AGEGATE_BDAY,r._onAgeBday,r),r._eventBus.subscribe(u.CTRL_SHARE,r._onShare,r),r._eventBus.subscribe(u.CTRL_REPLAY,r._onReplay,r),r._eventBus.subscribe(u.QUALITY_SELECTED,r._onQualitySelected,r),r._eventBus.subscribe(u.WL_CHANGE_REQUEST,r._onWatchLaterUpdate,r),r._eventBus.subscribe(u.CTRL_TIMER,r._onTimerUpdate,r),r._eventBus.subscribe(u.UI_LOGIN,r._onUILogin,r),r._eventBus.subscribe(u.CTRL_ENDSCREEN_VID,r._onSelectedEndscreenVideo,r),r._eventBus.subscribe(u.Video.LOADEDDATA,r._onVideoLoadedData,r),r._eventBus.subscribe(u.Video.TIMEUPDATE,r._onPlaybackProgress,r),r._eventBus.subscribe(u.PLAYBACK_ENDED,r._onPlaybackComplete,r),r._eventBus.subscribe(u.Video.PAUSE,r._onPlaybackPaused,r),r._eventBus.subscribe(u.Video.SEEKING,r._onPlaybackSeeking,r),r._eventBus.subscribe(u.Video.SEEKED,r._onPlaybackSeeked,r),r._eventBus.subscribe(u.Video.WAITING,r._onWaiting,r),r._eventBus.subscribe(u.AD_METRICS,r._onAdMetrics,r),r._eventBus.subscribe(u.AD_PLAYBACK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(u.AD_PLAYBACK_PROGRESS,r._onAdPlaybackProgress,r),r._eventBus.subscribe(u.AD_PLAYBACK_ENDED,r._onAdPlaybackComplete,r),r._eventBus.subscribe(u.AD_PLAYBACK_ERROR,r._onAdError,r),r._eventBus.subscribe(u.AD_BREAK_INFO,r._onAdBreakInfo,r),r._eventBus.subscribe(u.AD_BREAK_ENDED,r._onAdBreakEnd,r),r._eventBus.subscribe(u.RENDERER_PLUGIN_LOADED,r._onRendererPluginLoaded,r),r._eventBus.subscribe(u.RENDERER_PLUGIN_LOAD_FAILED,r._onRendererPluginLoadFailed,r),r._eventBus.subscribe(u.RENDERER_PLUGIN_LOAD_TIMED_OUT,r._onRendererPluginLoadTimedOut,r),m.getWindow().addEventListener("unload",r._onWindowUnload.bind(r)),r._rendererPluginLoadStatus=0,r._rootElem=null,r._renderer=null,r._eventBus.subscribe(u.ERROR,r._onError,r),
r._eventBus.subscribe(u.WARNING,r._onWarning,r),r._eventBus.subscribe(u.INFO,r._onInfo,r),r._eventBus.subscribe(u.API.PLAYBACK_TIMEOUT,r._onWarning,r),r._eventBus.subscribe(u.FLASH_NATIVE_PLAYING_EVENT_FIRED,r._onFlashNativePlayingEventFired,r),r._playEventFired=!1,r._commonFields=r._getCommonFieldsTable(),r._continuousPlayCount=0,r._guid=r._model.guid,r._trueStreamsProgressFired=!1,r._trueStreamsAdProgressFired=!1,r._totalWatchedPlaybackTime=0,r._totalBufferingTime=0,r._segInfo=[],r._buffTimeTrueStream=0,r._buffTimeDiff=0,r._segmentwiseBuffTime=0,r._progressBeaconDistance=0,r._recoveredPlayback=!1,r._jsDownloadTime,r._systems=[],r._beaconDisasterMode=r._model.failOver&&r._model.failOver.beaconDisasterMode||!1,r._progressBeaconMode=L.PLAYBACK_PROGRESS_MODE_STANDARD,r._model.metrics.progressBeaconStrategy&&(r._progressBeaconMode=r._model.metrics.progressBeaconStrategy,r._progressBeaconMode.firingCriteria="FREQ_MODE_CONFIG"),r._criticalErrorFiredMap={},r._guidMap={},r._videoQuartile=0,r._adQuartile=0,Math.random()<=r._model.metrics.ywaSamplingRate&&r._systems.push(new f(r._commonFields)),Math.random()<=r._model.metrics.ultSamplingRate&&r._systems.push(new g(e,r._commonFields)),Math.random()<=r._model.metrics.qosSamplingRate&&r._systems.push(new b(r._commonFields)),"vidible"===r._model.baseConfig.syndication&&r._systems.push(new h(r._commonFields)),r._systems.push(new S(r._commonFields)),r._systems.push(new E(r._commonFields)),r._templateMetrics=new i(e,r._commonFields),r._comscoreMetrics=new A(e,r._eventBus,r._commonFields),"FR"===r._model.baseConfig.region.toUpperCase()&&(r._mediaMetrie=new T(e,r._eventBus,r._commonFields)),r._sendPageView(),r._sendPlayerLoaded()}function i(e,t){var n=this;n._model=e,n._paramGetters={RANDOM_VALUE:t.randomVal,PLAYLIST_INDEX:t.playlistPosition,VOLUME_LEVEL:t.volumeLevel,DEVICE_NAME:t.deviceName,MAKE:t.deviceMake,MODEL:t.deviceModel,OS:t.deviceOS,AD_ID:t.adId,AD_LOADED:function(){return t.adLoaded()?"yes":"no"},AD_TYPE:t.adType,EVT_NAME:function(e){switch(e){case"PLAYBACK_START":case"AD_START":return"play";case"PLAYBACK_PAUSE":return"pause";case"PLAYBACK_COMPLETE":case"AD_COMPLETE":return"end";default:return"unknown"}}}}function o(e,t){return m.strSubstitute(e,function(e){var n=t(e);return null!==n?n:(y.error("Metrics: unknown substitution key: "+e),"")})}function a(e,t,n,r,i){var o=n.beginningKeys||[],a=n.endKeys||[],l=n.paramGetters,c=[].concat(o,e,a),d=c.filter(function(e,t){return c.indexOf(e)===t}),p=[];d.forEach(function(e){var n;if(n=e in t?t[e]:e in l?l[e]():null,v.isNullOrUndefined(n)&&(y.warn("Metrics: missing data for beacon key: "+e),n=L.BEACON_HIDE_KEY_VALUE),n===L.BEACON_HIDE_VALUE&&(n=null),n!==L.BEACON_HIDE_KEY_VALUE){var r={};r[e]=n,p.push(r)}});var _=n.baseUrl+"?"+m.querystring(p,"&","=",s);return r&&(_+=r),n.iFrameBeacon?m.sendIframeBeacon(_):n.unloadBeacon?m.sendUnloadBeacon(_):(m.sendImageBeacon(_),void i.publish(u.API.BEACON_SEND,{url:_,date:new Date}))}function s(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}function l(e){return v.isBoolean(e)&&(e=e?"1":"0"),v.isArray(e)&&(e=e.toString()),e&&""!==e?e:L.STRING_DEFAULT}function c(){try{return window.top.document}catch(e){return null}}function d(e){return e=p(e),e?e.split("?")[0]:""}function p(e){return e?e.replace(/(_ylt(.)+(\?)|_ylt(.)+)/,"?"):e}t.exports={Metrics:r};var u=e("../event"),_=e("../../../lib/user-agent"),m=e("../util"),v=e("../../../lib"),y=e("../../../lib/logger"),f=e("./ywa-metrics"),g=e("./ult-metrics"),b=e("./qos-metrics"),h=e("./vidible-metrics"),E=e("./sizmek-metrics"),S=e("./comscore-metrics"),A=e("./comscore"),T=e("./media-metrie"),L=e("./metrics-constants"),I=e("../error"),M=e("../media-store"),C=4;r.prototype._onFlashNativePlayingEventFired=function(){var e=this;e._playEventFired=!0},r.prototype._createClipGuid=function(e){var t=this,n=Math.floor(4294967295*Math.random());return e&&!t._guidMap[e.id]&&(t._guidMap[e.id]=n),n},r.prototype._getCommonFieldsTable=function(){var e=this,t=e._model,n=function(){return t.playlist.getCurrentItem()},r=function(t){var n=e._profiler.getItem(t);return n&&!v.isNullOrUndefined(n.timeDiff)?n.timeDiff:L.INT_DEFAULT},i={yvapID:function(){return e._model.YVAP&&e._model.YVAP.accountId?e._model.YVAP.accountId:""},currVolume:function(){return e._model.playbackState.volume},tsapic:function(){var t=e._profiler.getItem(u.Metrics.SAPI_REQUEST);return t&&t.timeDiff&&0!==t.timeDiff?t.timeDiff:""},sapiColo:function(){return e._model.CMS.colo||""},cachedVs:function(){return e._model.CMS.cachedVs||""},flashVersion:function(){var t="na";return e._renderer&&"flash"===e._model.playbackState.rendererType&&(t=e._renderer.getFlashVersion(),t&&t.join(".")),t},site:function(){var e=t.baseConfig.siteAnalytics.toLowerCase();return l(e?e.toLowerCase():t.baseConfig.site.toLowerCase())},region:function(){return l(t.baseConfig.region.toLowerCase())},autoplay:function(){return t.playback.autoplay?"true":"false"},dimensions:function(){return t.uiState.width+"x"+t.uiState.height},videoSeqNum:function(){return e._seqNum},isLive:function(){var e=n();return e&&e.isLive()?1:0},isResume:function(){return t.playback.isResume?1:0},liveState:function(){var e=n();return e&&e.liveState?e.liveState:""},bitrate:function(){return t.playback.bitrate},quality:function(){return t.playback.quality},continuousPlay:function(){return t.playback.continuousPlay?1:0},continuousPlayCount:function(){return e._continuousPlayCount},location:function(){return m.isOffNetwork()?4:m.isIFrame()?3:1},offNetwork:function(){return m.isOffNetwork()?1:L.BEACON_HIDE_KEY_VALUE},lang:function(){return t.baseConfig.lang.toLowerCase()},licensorName:function(){var e=n();return l(e?e.license.licensorName:null)},licenseId:function(){var e=n();return e?e.license.licenseId:L.INT_DEFAULT},videoId:function(){var e=n();return e?e.id:L.INT_DEFAULT},videoTitle:function(){var e=n();return l(e?e.title:null)},videoShowName:function(){var e=n();return l(e?e.showName||e.license.licenseName:null)},videoQuartile:function(t){return t===!0?e._adQuartile:e._videoQuartile},playbackPosition:function(){return Math.round(e._playbackPosition)},adPlaybackPosition:function(){return Math.round(e._adPlaybackPosition)},seqStart:function(){return Math.round(e._seqStart)},playerInt32Guid:function(){return e._guid},clipGuid:function(){return e._clipGuid||""},masterPlayerInt32Guid:function(){return e._masterPlayerGuid},videoLength:function(){var e=n();return l(e?e.duration:null)},pageTitle:function(){var e=c();return e?e.title:L.STRING_DEFAULT},pageUrl:function(){return p(m.getHostUrl())},eventBegin:function(){var e=n();return e&&e.eventBeginTime?e.eventBeginTime:""},eventEnd:function(){var e=n();return e&&e.eventEndTime?e.eventEndTime:""},pageReferrer:function(){if(t.baseConfig.referrer)return t.baseConfig.referrer;var e=c();return e?d(e.referrer):L.STRING_DEFAULT},streamProtocol:function(){var e=n(),t=e?e.streams[0]:null;return l(t?t.url.split(":")[0]:null)},streamType:function(){var e=n();return e?e.getType():"none"},errorCode:function(){for(var e=t.errors,n=0;n<e.length;n++)if(e[n].code)return e[n].code;return 100},syndication:function(){return t.baseConfig.syndication},playerVersion:function(){return t.version},experienceName:function(){return t.baseConfig.experienceName.toLowerCase()},experienceType:function(){return t.baseConfig.experienceType.toLowerCase()},experienceBucket:function(){return t.baseConfig.experienceBucket},playListId:function(){return l(t.playlist.id)},jurisdiction:function(){return t.baseConfig.jurisdiction},randomVal:function(){return Math.random()},pageSpaceId:function(){return t.baseConfig.pageSpaceId||L.INT_DEFAULT},videoSpaceId:function(){var e=n();return e?e.metrics.pageSpaceId:L.INT_DEFAULT},percentWatched:function(e,t){return t>0?Math.floor(100*e/t):0},ccode:function(){return t.metrics.ccode},sec:function(){return t.metrics.sec},cpos:function(){return t.metrics.cpos},comscoreC4:function(){return t.metrics.comscoreC4},comscoreC5:function(){var e=n();return e?e.metrics.comscoreC5:L.INT_DEFAULT},comscoreC6:function(){var e=n();return e?e.metrics.comscoreC6:L.INT_DEFAULT},rendererType:function(){return t.playbackState.rendererType||L.STRING_DEFAULT},playerType:function(){return"nextgen-desktop"},jsDownloadTime:function(){return l(t.pageLatency.pagePlayerJsDownloadTime)},providerId:function(){var e=n();return e&&e.provider.providerId?e.provider.providerId:L.INT_DEFAULT},providerVideoId:function(){var e=n();return e&&e.provider.providerVideoId?e.provider.providerVideoId:L.INT_DEFAULT},publisherId:function(){var e=n();return l(e?e.provider.publisherId:null)},genre:function(){var e=n();return l(e&&e.genres.length?e.genres[0]:null)},syndicationId:function(){return t.baseConfig.syndication.split("-")[0]},mainArtist:function(){var e=n();return l(e&&e.credits.mainArtists.length?e.credits.mainArtists[0]:null)},label:function(){var e=n();return l(e&&e.credits?e.credits.label:null)},tripleplay:function(){var e=n();return e&&"tripleplay"===e.provisioningSource?1:L.INT_DEFAULT},playlistPosition:function(){return t.playlist.position},volumeLevel:function(){return t.playbackState.mute?0:100*t.playbackState.volume},deviceName:function(){return N.name},deviceMake:function(){return N.make},deviceModel:function(){return N.model},deviceOS:function(){return N.os},adId:function(){var e=t.playbackState.ad;return l(e?e.adId:null)},adDuration:function(){var e=t.playbackState.ad;return l(e?e.duration:null)},adPosition:function(){var e=t.playbackState.ad;return l(e?e.position:null)},adLoaded:function(){return!!t.playbackState.ad},adType:function(){var e=t.playbackState.ad;return l(e?e.position:null)},mediaMetaTags:function(){var e=n();return l(e?e.metrics.ywa:null)},isDrm:function(){var e=n();return l(e?e.hasDrmStreams():null)},videoSession:function(){var e=n();return e&&e.videoSession?e.videoSession:L.STRING_DEFAULT},samplingId:function(){var e=n();return e&&!isNaN(e.samplingId)?e.samplingId:L.STRING_DEFAULT},isMature:function(){var e=n();return e&&"none"!==e.ageGate?1:0},isMute:function(){return t.playbackState.mute?"m":"um"},cdn:function(){var e=n(),t=e?e.getCDN():null;return t?t:"uncalculated"},contentType:function(){return e._getContentType()},playerLocation:function(){var e=m.isOffNetwork()?4:m.isIFrame()?3:1;switch(e){case"3":return"Emb onNet";case"4":return"Emb offNet";default:return"onProp"}},ucLatency:function(){var t=e._profiler.getItem(u.Metrics.CLICK_TO_START),n=t?t.timeDiff:null;return n?n:""},apLatency:function(){var t=e._profiler.getItem(u.Metrics.INIT_TO_START),n=t?t.timeDiff:null;return n?n:""},viewability:function(){return e.viewability+"%"},playbackWatchedTime:function(){return Math.round(e._totalWatchedPlaybackTime)},bufferingTime:function(){return Math.round(e._totalBufferingTime)},rendererPluginLoadStatus:function(){return e._rendererPluginLoadStatus},loadFirstFragmentTime:function(){var t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_LOAD_START),n=t?t.timeDiff:null;return n?n:L.INT_DEFAULT},firstByteFirstFragmentTime:function(){var t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE),n=t?t.timeDiff:null;return n?n:L.INT_DEFAULT},mmActivityId:function(){var e=n();return e.metrics.mmActivityId},wrapInFn:function(e){return function(){return e}},hostingEnv:function(){var e=m.getSingleton("PlayerHosting");return e&&e.env?e.env:t.isLocal()?"l":"p"},hostingBucket:function(){var e=m.getSingleton("PlayerHosting");return e&&e.bucket?e.bucket:L.STRING_DEFAULT},hostingColo:function(){var e=m.getSingleton("PlayerHosting");return e&&e.colo?e.colo:L.STRING_DEFAULT},algo:function(){var e=n();if(e){if(e.relatedVideoIds.length){var r=t.mediaStore.get(e.relatedVideoIds[0]);return r.algo?r.algo:r.instrument?r.instrument:""}return e.algo?e.algo:e.instrument?e.instrument:""}return null},displayMode:function(){return e.fullScreenMode?"full":"window"},constructLatency:function(){return r(u.Metrics.VP_CONSTRUCTOR)},renderCreateLatency:function(){return r(u.Metrics.CREATE_RENDERER)},sapiLatency:function(){return r(u.Metrics.SAPI_REQUEST)},swfLatency:function(){return r(u.Metrics.SWF_READY)},initToSapiLatency:function(){return r(u.Metrics.INIT_TO_SAPI)},renderToSwfLatency:function(){return r(u.Metrics.RENDER_TO_SWF)},initRenderGapLatency:function(){return r(u.Metrics.INIT_RENDER_GAP)},ccPrefLatency:function(){return r(u.Metrics.GET_USER_PREFS)},hlsPlaylistLatency:function(){return r(u.Metrics.LOAD_TO_LOADED_DATA)},streamLatency:function(){return r(u.Metrics.STREAM_REQUEST_TO_RENDER)},playToRenderLatency:function(){return r(u.Metrics.STREAM_PLAY_TO_RENDER)},segInfo:function(){return JSON.stringify({seg:e._segInfo.slice(0,Math.min(L.SEG_INFO_LENGTH,e._segInfo.length))})},buffTimeDiff:function(){return e._buffTimeDiff},segmentBuffTime:function(){return e._segmentwiseBuffTime},progressBeaconDistance:function(){var t=Math.round(e._totalWatchedPlaybackTime)-Math.round(e._progressBeaconDistance);return t>=0?t:0},getRecoveryStatus:function(){var e=n();return e.getRecoveryStatusForBeacon()},recoveryStatus:function(){var t=n();return e._recoveredPlayback?M.ItemRecoveryStatus.RECOVERED:t.recoveryStatus===M.ItemRecoveryStatus.RECOVERING?M.ItemRecoveryStatus.RECOVERING:L.BEACON_HIDE_KEY_VALUE},watchPercent:function(){var t=n(),r=t&&t.duration>0?Math.round(100*e._totalWatchedPlaybackTime/t.duration):"";return r>100?100:r},pageLatency:function(){return t.metrics.pageLatency?t.metrics.pageLatency:"na"},playerJsDownloadTime:function(){if(!e._jsDownloadTime&&window.performance&&window.performance.getEntriesByType){var t,n=window.performance.getEntriesByType("resource");for(t in n)if(n[t].name.match("videoplayer-nextgen-(?!apps)")){e._jsDownloadTime=n[t].duration;break}}return e._jsDownloadTime?e._jsDownloadTime:"na"},requestType:function(){return e._model.playback.requestType||L.STRING_DEFAULT},requestAction:function(){return e._model.playback.requestAction||L.STRING_DEFAULT},playlistUI:function(){return e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0?"true":"false"},clientWidth:function(){return e._model.playerDimension.width},clientHeight:function(){return e._model.playerDimension.height},getProgressBeaconMode:function(){return e._progressBeaconMode},manufacturer:function(){return t.CTV.man},deviceClass:function(){return t.CTV["class"]},closedCaptionsUserPreference:function(){var t=e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show;return t?"1":"0"}};return i},r.prototype.setRootElem=function(e){var t=this;t._rootElem=e},r.prototype.setFlashRenderer=function(e){var t=this;t._renderer=e},r.prototype._sendBeacon=function(e){var t=this,n=Array.prototype.slice.call(arguments,1),r=[],i=null,o={INCOMPLETE_EXIT:!0};t._beaconDisasterMode&&t._checkRateLimit(e)||(n.length>0&&(r=[n[0].data],i=n[0].fireCriteria),t._systems.forEach(function(n){var s=n.beaconMappings[e];if(s){var l=t._model.playlist,c=l?l.getCurrentItem():null;if(!n.shouldFire||n.shouldFire(c)!==!1){var d=s.keys;v.isFunction(d)&&(d=d.apply(n,r));var p=s.data;v.isFunction(p)&&(p=p.apply(n,r));var u=m.extend({},n.sendOpts);if(s.overrideBaseKeys&&(u.beginningKeys=u.endKeys=[]),s.baseUrl&&(u.baseUrl=s.baseUrl),o[e]&&(u.unloadBeacon=!0),c){var _,y=c.metrics.beacons;if(e in y)for(var f=c.metrics.beacons[e]||[],g=0;g<f.length;g++){var b=f[g];if(b.target===u.target&&b.addParam){_=t._generateStackedBeaconParams(b.addParam);break}}}if((!i||s.firingCriteria.indexOf(i)>=0)&&a(d,p,u,_,t._eventBus),s.extras)for(var h=0;h<s.extras.length;h++){u.baseUrl=s.extras[h].baseUrl;var E=s.extras[h].data;v.isFunction(E)&&(E=E.apply(n,r)),a(s.extras[h].keys,E,u,null,t._eventBus)}}}}),t._templateMetrics.sendBeacon(e,r))},r.prototype._checkRateLimit=function(e){var t=L.BEACON_DISASTER_MODE,n=!1;return t.global<1&&(n=Math.random()>t.global),t[e]&&(n=1===t[e]?!1:Math.random()>t[e]),n},r.prototype._generateStackedBeaconParams=function(e){var t=this,n=t._commonFields;return v.isString(e)?e.replace("{COMSCORE_C4}",n.comscoreC4()).replace("{COMSCORE_C5}",n.comscoreC5()).replace("{COMSCORE_C6}",n.comscoreC6()):null},r.prototype._sendPageView=function(){var e=this,t=m.getSingleton("Metrics");t||(t={},m.setSingleton("Metrics",t)),t.PageView?e._masterPlayerGuid=t.MasterPlayer:(e._masterPlayerGuid=e._guid,t.MasterPlayer=e._masterPlayerGuid,t.PageView=!0,e._sendBeacon("PAGE_VIEW"))},r.prototype._onVideoRequest=function(e){var t=this;t._sendBeacon("VIDEO_REQUEST",{data:e})},r.prototype._onCtrlPlayRequest=function(e){var t=this;t._sendBeacon("CTRL_PLAYREQUEST",{data:e?e:""})},r.prototype._sendPlayerLoaded=function(){var e=this;e._sendBeacon("PLAYER_LOADED")},r.prototype._onStartScreenRendered=function(){var e=this;e._profiler.setEndTime(u.Metrics.INIT_TO_STARTSCREEN);var t=e._profiler.getItem(u.Metrics.INIT_TO_STARTSCREEN);t&&e._sendBeacon("INIT_TO_STARTSCREEN",{data:t.timeDiff})},r.prototype._onVideoLoadedData=function(){var e=this;e._videoLoadedFired||(e._sendBeacon("VIDEO_LOADEDDATA"),e._videoLoadedFired=!0)},r.prototype._onPlaybackRequested=function(){var e=this;e._seeking=!1,e._playbackPosition=0,e._initProgressBeaconState(),e._lastProgressBeaconPosition=e._playbackPosition,e._totalWatchedPlaybackTime=0,e._buffTimeTrueStream=0,e._progressBeaconDistance=0,e._seqNum=1,e._seqStart=e._playbackPosition,e._continuousPlayCount++,e._totalBufferingTime=0,e._recoveredPlayback=e._commonFields.getRecoveryStatus(),e._recoveredPlayback?(e._bufferingStart=!0,e._bufferingStartTime=Date.now()):(e._segInfo=[],e._segmentwiseBuffTime=0,e._trueStreamsProgressFired=!1)},r.prototype._onUIInteraction=function(e){var t=this;t._sendBeacon("UI_INTERACT",{data:e.srcElement})},r.prototype._onSeek=function(e){var t=this;t._sendBeacon("CTRL_SEEK",{data:e?e:""})},r.prototype._onVolume=function(e){var t=this,n=t._model.playbackState.volume;n!==e&&t._sendBeacon("CTRL_VOLUME",{data:e})},r.prototype._onCCTog=function(e){var t=this;t._sendBeacon("CC_TOGGLE",{data:e?"1":"0"})},r.prototype._onCCLang=function(e){var t=this;t._sendBeacon("CC_LANG",{data:e?e:"na"})},r.prototype._onCCStyle=function(e){var t=this;t._sendBeacon("CC_STYLE",{data:e?e:"na"})},r.prototype._onCCSettings=function(){var e=this;e._sendBeacon("CC_SETTINGS")},r.prototype._onAgeBday=function(){var e=this;e._sendBeacon("CTRL_AGEGATE_BDAY")},r.prototype._onFullscreen=function(e){var t=this;t.fullScreenMode="ON"===e,t._sendBeacon("FULLSCREEN",{data:e})},r.prototype._onSettings=function(){var e=this;e._sendBeacon("CTRL_SETTINGS")},r.prototype._onShare=function(e){var t=this;t._sendBeacon("CTRL_SHARE",{data:e})},r.prototype._onQualitySelected=function(e){var t=this;t._sendBeacon("QUALITY_SELECTED",{data:e.preference})},r.prototype._onReplay=function(){var e=this;e._sendBeacon("CTRL_REPLAY")},r.prototype._onWatchLaterUpdate=function(e){var t=this,n="";"add"===e.operation?n="1":"delete"===e.operation&&(n="0"),t._sendBeacon("WL_CHANGE_REQUEST",{data:n})},r.prototype._onTimerUpdate=function(e){var t=this;t._sendBeacon("CTRL_TIMER",{data:e})},r.prototype._onUILogin=function(e){var t=this;t._sendBeacon("UI_LOGIN",{data:e})},r.prototype._onSelectedEndscreenVideo=function(e){var t=this;t._sendBeacon("CTRL_ENDSCREEN_VID",{data:e})},r.prototype._updatePlayerViewability=function(){var e=this,t=e._rootElem,n=t.getElementsByClassName("yvp-main");e.viewability=m.getElementViewability(n[0])},r.prototype._onContentFirstTSLoadStart=function(){var e=this,t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_LOAD_START);t&&null===t.endTime&&(e._profiler.setEndTime(u.Metrics.HLS_FIRST_TS_LOAD_START),e._profiler.add(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE))},r.prototype._onContentFirstTSFirstByteArrive=function(){var e=this,t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);t&&null===t.endTime&&e._profiler.setEndTime(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE)},r.prototype._onContentStarted=function(e,t){var n=this;t&&(n._playbackPosition=t);var r=n._profiler.getItem(u.Metrics.PLAYBACK_START);r&&null===r.endTime&&(n._profiler.setEndTime(u.Metrics.PLAYBACK_START),n._onAdOrContentStarted(),n._clipGuid=n._createClipGuid(n._model.playlist.getCurrentItem()),n._updatePlayerViewability(),n._sendBeacon("PLAYBACK_START",{data:r.timeDiff}),n._model.playback.requestType=null,n._model.playback.requestAction=null)},r.prototype._getContentType=function(){var e,t=this,n=t._commonFields,r=n.isLive()?"live":n.adLoaded()?"ad":"",i=n.adPosition();switch(r){case"ad":e="ad pre-roll","postroll"===i?e="ad post-roll":"midroll"===i&&(e="ad mid-roll");break;case"live":e=n.liveState()||"live";break;default:e="vod short";var o=t._model.playlist.getCurrentItem();if(!o)break;var a=n.videoLength();o.isCCM?"na"!==a&&a>600&&(e="vod long"):e="streamurl"}return e},r.prototype._onAdOrContentStarted=function(){var e=this,t={},n=e._profiler.getItem(u.Metrics.LOAD_TO_LOADED_DATA);n&&(t[u.Metrics.LOAD_TO_LOADED_DATA.type]=n.timeDiff);var r=e._profiler.getItem(u.Metrics.DRM_METADATA_IS_SET);r&&(t[u.Metrics.DRM_METADATA_IS_SET.type]=r.timeDiff);var i=e._profiler.getItem(u.Metrics.DRM_AUTH_COMPLETE);i&&(t[u.Metrics.DRM_AUTH_COMPLETE.type]=i.timeDiff);var o=e._profiler.getItem(u.Metrics.STREAM_REQUEST_TO_RENDER);o&&(t[u.Metrics.STREAM_REQUEST_TO_RENDER.type]=o.timeDiff),e._trueStreamsProgressFired=!1,e._trueStreamsAdProgressFired=!1;var a=e._profiler.getItem(u.Metrics.CLICK_TO_START);if(a&&null===a.endTime){e._profiler.setEndTime(u.Metrics.CLICK_TO_START),t[u.Metrics.CLICK_TO_START.type]=a.timeDiff;var s=a.timeDiff;e._sendBeacon("CLICK_TO_START",{data:t}),e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_ucl:s?s.toString():L.INT_DEFAULT})})}var l=e._profiler.getItem(u.Metrics.INIT_TO_START);if(l&&null===l.endTime){e._profiler.setEndTime(u.Metrics.INIT_TO_START),t[u.Metrics.INIT_TO_START.type]=l.timeDiff,e._sendBeacon("INIT_TO_START",{data:t});var c=l.timeDiff;e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_apl:c?c.toString():L.INT_DEFAULT})})}},r.prototype._getVideoQuartile=function(e,t){var n=this,r=n._commonFields,i=r.percentWatched(e,t);return Math.floor(i/L.QUARTILE_PROGRESS_INTERVAL)},r.prototype._onPlaybackProgress=function(e){var t=this;if(!t._seeking){var n=e-t._playbackPosition;n&&(t._totalWatchedPlaybackTime+=n),t._playbackPosition=e,t._updateWaitTime(),t._recoveredPlayback&&(t._fireProgressBeacon(null,null,!0),t._recoveredPlayback=t._commonFields.getRecoveryStatus());var r=t._model.playlist.getCurrentItem(),i=r?r.duration:0,o=t._checkProgressFrequency(e,i);o.quartileBeacon&&t._fireProgressBeacon(o.quartileBeacon,!1),o.progressBeacon&&(t._updatePlayerViewability(),o.progressBeacon===L.TRUE_STREAMS_INTERVAL&&(t._sendBeacon("PLAYBACK_STREAM_START",{fireCriteria:L.TRUE_STREAMS_INTERVAL}),t._sendBeacon("VIDEO_STREAMS"),t._buffTimeTrueStream=t._totalBufferingTime),t._fireProgressBeacon(o.progressBeacon))}},r.prototype._updateBufferingStats=function(e){var t=this;e=e||!1,t._eventBus.publish(u.BEFORE_PROGRESS_BEACON,t._segInfo),t._computeBuffTimeDiff(),(t._segInfo.useDefaultBufferDuration||e)&&(t._segInfo=[{buf_dur:t._totalBufferingTime}],t._segmentwiseBuffTime=t._totalBufferingTime,t._buffTimeDiff=0)},r.prototype._updateWaitTime=function(){var e=this;e._bufferingStart&&(e._bufferingStart=!1,e._totalBufferingTime+=Date.now()-e._bufferingStartTime)},r.prototype._checkProgressFrequency=function(e,t){var n=this,r={},i=n._progressBeaconMode.firingCriteria;n._fixedIntervalProgressBeacons&&n._totalWatchedPlaybackTime>=n._fixedIntervalProgressBeacons[0]?(n._fixedIntervalProgressBeacons[0]!==L.TRUE_STREAMS_INTERVAL||n._trueStreamsProgressFired||(i=L.TRUE_STREAMS_INTERVAL,n._trueStreamsProgressFired=!0),r.progressBeacon=i,n._fixedIntervalProgressBeacons.shift()):n._totalWatchedPlaybackTime>=n._lastProgressBeaconPosition+n._progressBeaconMode.recurring&&(r.progressBeacon=n._progressBeaconMode.firingCriteria,n._lastProgressBeaconPosition+=n._progressBeaconMode.recurring);var o=n._getVideoQuartile(e,t);return o&&o!==n._videoQuartile&&(n._videoQuartile=o,r.quartileBeacon=L.QUARTILE_PROGRESS_INTERVAL),r},r.prototype._initProgressBeaconState=function(){var e=this,t=e._model.playlist.getCurrentItem();t?t.duration:0;e._fixedIntervalProgressBeacons=[],e._quartileIntervalProgressBeacons=[],e._fixedIntervalProgressBeacons=e._progressBeaconMode.fixed.slice()},r.prototype._fireProgressBeacon=function(e,t,n){var r=this;e=e||r._progressBeaconMode.firingCriteria,t=t||!0,n=n||!1,r._updateWaitTime(),t&&r._updateBufferingStats(n),r._sendBeacon("PLAYBACK_PROGRESS",{fireCriteria:e,data:{playEventFired:r._playEventFired}}),e!==L.QUARTILE_PROGRESS_INTERVAL&&(r._progressBeaconDistance=r._totalWatchedPlaybackTime),t&&(r._totalBufferingTime=0,r._segInfo.splice(0,Math.min(L.SEG_INFO_LENGTH,r._segInfo.length)))},r.prototype._onWindowUnload=function(){var e=this;e._progressBeaconMode.playerUnload&&e._model.playbackState.isVideoPlaying()&&(e._updateBufferingStats(),e._sendBeacon("INCOMPLETE_EXIT"))},r.prototype._onAdPlaybackProgress=function(e,t){var n=this;n._commonFields;n._adPlaybackPosition=t,!n._trueStreamsAdProgressFired&&t>=L.TRUE_STREAMS_INTERVAL?(n._trueStreamsAdProgressFired=!0,n._updatePlayerViewability(),n._sendBeacon("AD_PROGRESS",{fireCriteria:L.TRUE_STREAMS_INTERVAL}),n._sendBeacon("AD_STREAMS")):t>=n._lastAdProgressBeaconPosition+L.PROGRESS_INTERVAL&&(n._lastAdProgressBeaconPosition+=L.PROGRESS_INTERVAL,n._updatePlayerViewability(),n._sendBeacon("AD_PROGRESS",{fireCriteria:L.PROGRESS_INTERVAL}))},r.prototype._onPlaybackComplete=function(){var e=this;e._updatePlayerViewability(),e._updateBufferingStats(),e._sendBeacon("PLAYBACK_COMPLETE"),e._totalBufferingTime=0,e._buffTimeTrueStream=0},r.prototype._onPlaybackPaused=function(){var e=this;e._sendBeacon("PLAYBACK_PAUSE")},r.prototype._onPlaybackStalled=function(e){var t=this;t._sendBeacon("PLAYBACK_STALLED",{data:e?e:""})},r.prototype._onPlaybackResumed=function(){var e=this;e._sendBeacon("PLAYBACK_RESUMED")},r.prototype._onCtrlPlayPause=function(e){var t=this;t._sendBeacon("CTRL_PLAYPAUSE",{data:e?e:""}),t._progressBeaconMode.playPause===!0&&"pause"===e&&t._fireProgressBeacon()},r.prototype._onRecoveryMetadata=function(){var e=this;(e._commonFields.progressBeaconDistance()>0||e._totalBufferingTime>0)&&e._fireProgressBeacon(null,null,!0)},r.prototype._onABRDataUpdate=function(e){var t=this;t._sendBeacon("ABR_DATA_UPDATE",{data:e})},r.prototype._onApiCalled=function(e){var t=this;t._sendBeacon("API_CALLED",{data:e})},r.prototype._onFeedbackCalled=function(e){var t=this;t._sendBeacon("FEEDBACK_INFO",{data:e})},r.prototype._onVideoAppsLoaded=function(){var e=this;e._profiler.setEndTime(u.Metrics.INIT_TO_APPS_INIT);var t=e._profiler.getItem(u.Metrics.INIT_TO_APPS_INIT);t&&e._sendBeacon("INIT_TO_APPS_INIT",{data:t.timeDiff})},r.prototype._onBitrateChange=function(e,t){var n=this;n._sendBeacon("BITRATE_CHANGE",{data:{bitrate:e,reason:t.reason,newFrameRate:t.newFrameRate,oldFrameRate:t.oldFrameRate}})},r.prototype._onPlaybackSeeking=function(e){var t=this;t._seeking||(t._seqStart=e,t._seeking=!0)},r.prototype._onPlaybackSeeked=function(e){var t=this;t._seeking=!1,t._seqNum++,t._playbackPosition=e,t._sendBeacon("PLAYBACK_SEEK"),t._seqStart=e},r.prototype._onWaiting=function(e){var t=this;if(e){if(e.ignoreBuffering===!0)return;if(e.value===!1)return t._bufferingStart=!1,void(t._totalBufferingTime+=Date.now()-t._bufferingStartTime)}t._bufferingStart=!0,t._bufferingStartTime=Date.now()},r.prototype._isCriticalError=function(e){return e.category!==I.E_INFO&&e.category!==I.E_WARNING&&e.category!==I.E_YVAP},r.prototype._onError=function(e){var t=this,n=t._commonFields.videoId(),r=t._isCriticalError(e),i=t._criticalErrorFiredMap[n];e.group=i?"E":e.group,r&&(i?t._criticalErrorFiredMap[n]++:t._criticalErrorFiredMap[n]=1),(!t._criticalErrorFiredMap[n]||t._criticalErrorFiredMap[n]<C)&&(e.category===I.E_PLAYER&&e.subcategory===I.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED?setTimeout(function(){t._sendBeacon("PLAYER_ERROR",{data:e})},1e3):t._sendBeacon("PLAYER_ERROR",{data:e}))},r.prototype._onWarning=function(e){var t=this;t._sendBeacon("PLAYER_WARNING",{data:e})},r.prototype._onInfo=function(e){var t=this;t._sendBeacon("PLAYER_INFO",{data:e})},r.prototype._onAdMetrics=function(e){var t=this;e.ywa.aplc="",Object.keys(e.ywa).forEach(function(t){v.isNullOrUndefined(e.ywa[t])&&(e.ywa[t]="")}),t._sendBeacon("AD_METRICS",{data:e})},r.prototype._onAdPlaybackStarted=function(){var e=this;e._adPlaybackPosition=0,e._lastAdProgressBeaconPosition=e._adPlaybackPosition,e._onAdOrContentStarted(),e._clipGuid=e._createClipGuid(),e._updatePlayerViewability(),e._sendBeacon("AD_START")},r.prototype._onAdPlaybackComplete=function(){var e=this;e._updatePlayerViewability();var t=e._guidMap[e._model.playlist.getCurrentItem().id];t&&(e._clipGuid=t),e._sendBeacon("AD_COMPLETE")},r.prototype._onAdError=function(){var e=this;e._sendBeacon("AD_ERROR")},r.prototype._onAdBreakInfo=function(e){var t=this;t._sendBeacon("AD_BREAK_INFO",{data:e})},r.prototype._onAdBreakEnd=function(e){var t=this;t._sendBeacon("AD_BREAK_ENDED",{data:e})},r.prototype._onRendererPluginLoaded=function(){var e=this;e._rendererPluginLoadStatus=1},r.prototype._onRendererPluginLoadFailed=function(){var e=this;e._rendererPluginLoadStatus=2},r.prototype._onRendererPluginLoadTimedOut=function(){var e=this;e._rendererPluginLoadStatus=3},r.prototype._computeBuffTimeDiff=function(){var e=this,t=e._totalBufferingTime;e._buffTimeTrueStream&&(t+=e._buffTimeTrueStream,e._buffTimeTrueStream=0);var n=e._segInfo.slice(0,Math.min(L.SEG_INFO_LENGTH,e._segInfo.length));e._segmentwiseBuffTime=0;for(var r=0;r<n.length;r++)e._segmentwiseBuffTime+=n[r].buf_dur;e._buffTimeDiff=e._segmentwiseBuffTime-t},i.prototype.sendBeacon=function(e,t){var n=this,r=n._model.playlist.getCurrentItem();if(r){var i=function(r){var i=n._paramGetters[r];return i?i.apply(null,[e].concat(t)):null},a=r.metrics.beacons[e]||[];a.forEach(function(e){var t=e.url;t&&(t=o(t,i),m.sendImageBeacon(t))})}};var N=function(){return _.android?{name:"android",make:"unknown",model:"android",os:"android"}:_.ipad?{name:"iPad",make:"apple",model:"ipad",os:"ios"}:_.iphone?{name:"iPhone",make:"apple",model:"iphone",os:"ios"}:_.chrome?{name:"web",make:"chrome",model:_.chrome,os:_.os}:_.firefox?{name:"web",make:"firefox",model:_.firefox,os:_.os}:_.ie?{name:"web",make:"ie",model:_.ie,os:_.os}:_.safari?{name:"web",make:"safari",model:_.safari,os:_.os}:{name:"web",make:"na",model:"na",os:_.os}}()},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error":20,"../event":"YJm+dH","../media-store":26,"../util":"jJTEqU","./comscore":30,"./comscore-metrics":29,"./media-metrie":31,"./metrics-constants":32,"./qos-metrics":34,"./sizmek-metrics":35,"./ult-metrics":36,"./vidible-metrics":37,"./ywa-metrics":38}],34:[function(e,t,n){"use strict";function r(e){var t=this,n=["env","colo","pver","pltype","vp","b","r","vid","vn","reg","site","vtyp","sn","lid","loc","apl","psid","expn","expt","expb","jsdl","drm","vs","sp","st","cdn","brr","os","cached_vs"],r={rn:e.randomVal,pver:e.playerVersion,vp:e.playerInt32Guid,b:e.hostingBucket,r:e.rendererType,vid:e.videoId,vn:e.videoTitle,reg:e.region,site:e.site,sn:e.videoShowName,lid:e.licenseId,loc:e.location,apl:e.autoplay,psid:e.pageSpaceId,expn:e.experienceName,expt:e.experienceType,expb:e.experienceBucket,vpurl:e.pageUrl,vtyp:e.contentType,dur:e.videoLength,pltype:e.playerType,jsdl:e.jsDownloadTime,br:e.bitrate,sbr:e.quality,drm:e.isDrm,vs:e.videoSession,sp:e.streamProtocol,st:e.streamType,buff:e.bufferingTime,buff_info:e.segInfo,client_width:e.clientWidth,client_height:e.clientHeight,prog:e.playbackWatchedTime,colo:e.hostingColo,env:e.hostingEnv,cdn:e.cdn,tswf_ready:e.swfLatency,tirg:e.initRenderGapLatency,titsc:e.initToSapiLatency,trtswf:e.renderToSwfLatency,trcreate:e.renderCreateLatency,tsltps:e.playToRenderLatency,cached_vs:e.cachedVs,upn:e.upNext,brr:function(){return e.deviceName()+","+e.deviceMake()},os:e.deviceOS,rsm:e.isResume
};t.sendOpts={baseUrl:"//qos.video.yimg.com/yep/3/qos",target:"qos",paramGetters:r,beginningKeys:n,endKeys:["rn","vpurl"]},t.beaconMappings={AD_METRICS:{baseUrl:"//qos.video.yimg.com/yvap/4/qos",keys:function(e){return Object.keys(e.qos)},data:function(e){return e.qos}},AD_ERROR:{keys:["bId"],data:{bId:"a3"}}}}t.exports=r;e("./metrics-constants")},{"./metrics-constants":32}],35:[function(e,t,n){"use strict";function r(e){var t=this,n="https://bs.serving-sys.com/Serving/ActivityServer.bs",r=["cn","ActivityId","rnd"],i={cn:e.wrapInFn("as"),ActivityId:e.mmActivityId,rnd:e.randomVal},o={baseUrl:n,keys:[],data:{}};t.sendOpts={baseUrl:n,target:"sizmek",paramGetters:i,beginningKeys:r,iFrameBeacon:!0},t.beaconMappings={PLAYBACK_START:o}}t.exports=r,r.prototype.shouldFire=function(e){return""!==e.metrics.mmActivityId}},{}],36:[function(e,t,n){"use strict";function r(e,t){var n=this,r=["t","_V","s","V_sec","evt","ccode","sec","cpos","type","_ex","_NOL"],s=["vid","pstaid","prt","lms_id","vs","psz","cdn","st","sp","bit","pls","vlng","site","lang","intl","lbl","synd","pver","expn","expt","expb","loc","auto","cont","bckt","snd","test","_w","vsid","_R","pltype","cached_vs","man","class","smpl"],l=["ctv_db","ctv_dc","_di","ctv_di","ctv_ddv","ctv_dfv","_dv","_lo","_dm","_dl","_dc","_osv","ctv_yb","_sr","ctv_yr","ctv_ybv","ctv_yv","_an","_av","_at"],c=function(t){return function(){return e.CTV.ctvMetricsParams[t]}},d={ctv_db:c("ctv_db"),ctv_dc:c("ctv_dc"),_di:c("_di"),ctv_di:c("ctv_di"),ctv_ddv:c("ctv_ddv"),ctv_dfv:c("ctv_dfv"),_dv:c("_dv"),_lo:c("_lo"),_dm:c("_dm"),_dl:c("_dl"),_dc:c("_dc"),_osv:c("_osv"),ctv_yb:c("ctv_yb"),_sr:c("_sr"),ctv_yr:c("ctv_yr"),ctv_ybv:c("ctv_ybv"),ctv_yv:c("ctv_yv"),_an:c("_an"),_av:c("_av"),_at:c("_at")},p={t:t.randomVal,s:t.pageSpaceId,vsid:t.videoSpaceId,vid:t.videoId,adid:t.adId,pstaid:t.videoId,lms_id:t.licenseId,pls:t.playerInt32Guid,psz:t.dimensions,site:t.site,lang:t.lang,intl:t.region,prt:t.rendererType,pltype:t.playerType,lbl:t.label,synd:t.syndicationId,_w:t.pageUrl,ccode:t.ccode,sec:t.sec,cpos:t.cpos,pver:t.playerVersion,expn:t.experienceName,expt:t.experienceType,expb:t.experienceBucket,loc:t.playerLocation,_R:t.pageReferrer,dur:t.playbackWatchedTime,dur_d:t.progressBeaconDistance,vlng:t.videoLength,adlng:t.adDuration,_ex:t.offNetwork,_NOL:t.offNetwork,auto:t.autoplay,cont:t.continuousPlayCount,cdn:t.cdn,ucl:t.ucLatency,apl:t.apLatency,bit:t.bitrate,view:t.viewability,sp:t.streamProtocol,st:t.streamType,bckt:t.hostingBucket,snd:t.isMute,type:t.contentType,rsm:t.isResume,test:t.experienceBucket,algo:t.algo,disp:t.displayMode,consl:t.constructLatency,trcreate:t.renderCreateLatency,tsltps:t.playToRenderLatency,tmeta_call:t.sapiLatency,tswf_ready:t.swfLatency,tcc_pref:t.ccPrefLatency,tltld:t.hlsPlaylistLatency,strml:t.streamLatency,buff_info:t.segInfo,client_width:t.clientWidth,client_height:t.clientHeight,vs:t.videoSession,cached_vs:t.cachedVs,jsdt:t.jsDownloadTime,pgltcy:t.pageLatency,buf_dur:t.segmentBuffTime,man:t.manufacturer,smpl:t.samplingId,ccap:t.closedCaptionsUserPreference,"class":t.deviceClass,_V:function(){return"V"}};s=o.tv?s.concat(l):s,p=o.tv?a.extend(p,d):p,n.sendOpts={baseUrl:"//bats.video.yahoo.com/p",target:"ult",paramGetters:p,beginningKeys:r,endKeys:s},n.beaconMappings={AD_BREAK_INFO:{keys:["poddur","mttl","mvalid","latency"],data:function(e){return{poddur:e.adBreakDuration,mttl:e.numMidrollsTotal,mvalid:e.numMidrollsValid,latency:e.latency}}},AD_BREAK_ENDED:{keys:["mnum","mdur"],data:function(e){return{mnum:e.adsPlayCount,mdur:e.adsPlayDuration}}},AD_METRICS:{keys:function(e){return Object.keys(e.ult)},data:function(e){return e.ult}},ABR_DATA_UPDATE:{keys:["sc","ib","bft","ci","dw","dh","pr","eb","bl","swc","dfr","fbl","ted","ni"],data:function(e){return{V_sec:"pb",evt:"v_abr",sc:e.sc,ib:e.ib,bft:e.bft,ci:e.ci,dw:e.dw,dh:e.dh,pr:e.pr,eb:e.eb,bl:e.bl,swc:e.swc,dfr:e.dfr,fbl:e.fbl.toString(),ted:e.ted.map(function(e){return JSON.stringify(e)}).toString(),ni:e.ni,rs:e.rs}}},VIDEO_REQUEST:{keys:["prefetch"],data:function(e){return{V_sec:"pb",evt:"v_request",prefetch:e}}},PLAYBACK_START:{keys:["ucl","apl","dur","view","rsm","disp","consl","trcreate","tmeta_call","tswf_ready","tcc_pref","tltld","strml","tsltps","tpb","pgltcy","jsdt","req_type","req_action","ccap"],data:function(e){return{V_sec:"pb",evt:"v_start",rsm:t.isResume(),tmeta_call:t.tsapic(),tpb:e,pgltcy:t.pageLatency(),jsdt:t.playerJsDownloadTime(),req_type:t.requestType(),req_action:t.requestAction()}}},PLAYBACK_PROGRESS:{keys:["dur","dur_d","view","buff_info","buf_dur","p_width","p_height","rcvr_status"],firingCriteria:[t.getProgressBeaconMode().firingCriteria],data:function(){return{V_sec:"pb",evt:"v_prog",rcvr_status:t.recoveryStatus(),p_width:t.clientWidth(),p_height:t.clientHeight()}}},PLAYBACK_STREAM_START:{keys:["view"],firingCriteria:[i.TRUE_STREAMS_INTERVAL],data:function(){return{V_sec:"pb",evt:"v_strm_view"}}},PLAYBACK_COMPLETE:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur"],data:function(){return{V_sec:"pb",evt:"v_comp",dur:t.playbackPosition(),watchpct:t.watchPercent(),stall_t:t.bufferingTime()}}},INCOMPLETE_EXIT:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur","rcvr_status"],data:function(){return{V_sec:"pb",evt:"v_ncomp",rcvr_status:t.recoveryStatus(),watchpct:t.watchPercent(),stall_t:t.bufferingTime()}}},PLAYBACK_RESUMED:{keys:[],data:function(){return{V_sec:"pb",evt:"p_resm"}}},PLAYBACK_STALLED:{keys:["value","play_pos","dur"],data:function(e){return{V_sec:"pb",evt:"v_stall",value:e,play_pos:t.playbackPosition()}}},BITRATE_CHANGE:{keys:["play_pos","value","value_e","dur","reason","fr","fr_old"],data:function(e){return{V_sec:"pb",evt:"v_btrt",play_pos:t.playbackPosition(),value:e.bitrate,value_e:t.bitrate(),reason:e.reason,fr:e.newFrameRate,fr_old:e.oldFrameRate}}},AD_START:{keys:["adid","adlng","ucl","apl","dur","view"],data:function(){return{V_sec:"pb",evt:"ad_start",dur:t.adPlaybackPosition()}}},AD_PROGRESS:{keys:["dur","adlng","adid","view"],firingCriteria:[i.TRUE_STREAMS_INTERVAL,i.PROGRESS_INTERVAL],data:function(){return{V_sec:"pb",evt:"ad_prog",dur:t.adPlaybackPosition()}}},AD_COMPLETE:{keys:["dur","adlng","adid","view"],data:function(){return{V_sec:"pb",evt:"ad_comp",dur:t.adPlaybackPosition()}}},UI_INTERACT:{keys:["V_slk","dur","algo"],data:function(e){return{V_sec:"ctrl",evt:"none",V_slk:e}}},CTRL_PLAYPAUSE:{keys:["value","dur","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_pp",value:e,play_pos:t.playbackPosition()}}},CTRL_SEEK:{keys:["value","value_e","dur"],data:function(e){return{V_sec:"ctrl",evt:"ui_seek",value:t.playbackPosition(),value_e:e}}},CTRL_VOLUME:{keys:["value","value_e","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_cv",value:e,value_e:t.currVolume(),play_pos:t.playbackPosition()}}},CTRL_SHARE:{keys:["value"],data:function(e){return{evt:"ui_shbtn",V_sec:"ctrl",value:e}}},CTRL_REPLAY:{keys:[],data:function(){return{evt:"ui_esrpl",V_sec:"ctrl"}}},CTRL_PLAYREQUEST:{keys:["req_type"],data:function(e){return{V_sec:"ctrl",evt:"ui_pb_req",req_type:e}}},QUALITY_SELECTED:{keys:["play_pos","value","dur"],data:function(e){return{evt:"ui_qual",V_sec:"ctrl",value:e,play_pos:t.playbackPosition()}}},CC_TOGGLE:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_cctog",value:e,play_pos:t.playbackPosition()}}},CC_LANG:{keys:["play_pos","value"],data:function(e){return{V_sec:"ctrl",evt:"ui_cclng",play_pos:t.playbackPosition(),value:e}}},CC_STYLE:{keys:["play_pos","value"],data:function(e){return{V_sec:"ctrl",evt:"ui_ccstl",play_pos:t.playbackPosition(),value:e}}},CC_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_ccstg",play_pos:t.playbackPosition()}}},CTRL_AGEGATE_BDAY:{keys:[],data:function(){return{V_sec:"ctrl",evt:"ui_agesm"}}},FULLSCREEN:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_fs",value:e,play_pos:t.playbackPosition()}}},CTRL_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_stgs",play_pos:t.playbackPosition()}}},WL_CHANGE_REQUEST:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_wltr",play_pos:t.playbackPosition(),value:e}}},CTRL_TIMER:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_timer",play_pos:t.playbackPosition(),value:e}}},UI_LOGIN:{keys:["value"],data:function(e){return{V_sec:"ctrl",evt:"ui_login",value:e}}},CTRL_ENDSCREEN_VID:{keys:["value","value_e"],data:function(e){return{V_sec:"ctrl",evt:"ui_esvid",value:e.vindex,value_e:e.vid}}},PLAYER_ERROR:{keys:["ecode","estring","dur","play_pos"],data:function(e){return{V_sec:"pb",evt:"error",ecode:e.rep,estring:e.debugMessage||e.message,play_pos:t.playbackPosition()}}},PLAYER_WARNING:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"warn",ecode:e.rep,estring:e.debugMessage||e.message}}},PLAYER_INFO:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"info",ecode:e.rep,estring:e.debugMessage||e.message}}},API_CALLED:{keys:["source","url","latency","http_code","resp_len","instrument","perf_info","perf_stack"],data:function(e){return{V_sec:"pb",evt:"v_api",source:e.source||"na",url:e.url,latency:e.latency||t.tsapic(),http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument,perf_info:e.perfInfo,perf_stack:e.perfStack}}},FEEDBACK_INFO:{keys:["group","evtlog","fb_text","src"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g1",evtlog:e.eventLog,fb_text:e.feedbackText,src:e.source}},extras:[{baseUrl:n.sendOpts.baseUrl,keys:["group","history"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g2",history:JSON.stringify(e.opssInfo.history)}}},{baseUrl:n.sendOpts.baseUrl,keys:["group","profile"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g3",profile:JSON.stringify(e.opssInfo.profile)}}},{baseUrl:n.sendOpts.baseUrl,keys:["group","playbackInfo"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g4",playbackInfo:JSON.stringify(e.opssInfo.playbackInfo)}}},{baseUrl:n.sendOpts.baseUrl,keys:["group","model"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g5",model:JSON.stringify(e.model)}}}]}}}t.exports=r;var i=e("./metrics-constants"),o=e("../../../lib/user-agent"),a=e("../util")},{"../../../lib/user-agent":"ty5FFo","../util":"jJTEqU","./metrics-constants":32}],37:[function(e,t,n){"use strict";function r(e){var t=this,n=["pid","vid","vpt","r","cb"],r={pid:function(){return a},vid:e.videoId,vpt:e.autoplay,w:function(){var t=e.dimensions().split("x");return t[0]},h:function(){var t=e.dimensions().split("x");return t[1]},q:e.videoQuartile,r:e.pageUrl,cb:e.randomVal,nv:function(){return"1"},at:function(){return"preroll"},aen:function(){return"Yahoo"},asn:function(){return"1"},ar:function(){return"yes"},v:function(){return"54d54a0be4b0417331ae4e01"},acid:function(){return"54d54cc3e4b0417331ae4e26"},aert:function(){return"50"},asid:function(){return"54d54cf8e4b0417331ae4e29"}},a=i(e,n,r);t.sendOpts={baseUrl:"//trk.vidible.tv/trk/",target:"vidible",paramGetters:r,beginningKeys:n},t.beaconMappings={PLAYBACK_START:{baseUrl:t.sendOpts.baseUrl+"video-play.gif",keys:["h","w"],data:{}},PLAYBACK_PROGRESS:{baseUrl:t.sendOpts.baseUrl+"video-quartile.gif",firingCriteria:[o.QUARTILE_PROGRESS_INTERVAL],keys:["q"],data:{}},AD_START:{baseUrl:t.sendOpts.baseUrl+"ad-request.gif",keys:["at","asn"],data:{},extras:[{keys:["at","aen","asid","acid","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-request.gif"},{keys:["aen","at","ar","asid","acid","aert","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-response.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"loaded"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"win"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","asid","acid","stg","v"],data:{stg:"started"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"}]},AD_COMPLETE:{baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif",keys:["at","aen","asid","acid","stg","v"],data:{stg:"finished"}}}}function i(e,t,n){var r=decodeURIComponent(e.experienceType().replace(/&(amp;)+/g,"%26")),i=r.split("&"),o=i.shift();return i.forEach(function(e){var r=e.split("="),i=r[0],o=r[1];n[i]=function(){return o},-1===t.indexOf(i)&&t.push(i)}),o}t.exports=r;var o=e("./metrics-constants")},{"./metrics-constants":32}],38:[function(e,t,n){"use strict";function r(e){var t=this,n="115488662",r="ywadp"+n,o=i.getCookie(r);o||(o=""+Math.floor(4294967295*Math.random()),i.setCookie(r,o,{expires:new Date(Date.now()+94608e6)}));var a={rn:e.randomVal,vpos:e.playbackPosition,vstpos:e.seqStart,vq:e.videoSeqNum,vt:e.isLive,cf63:e.autoplay,vpl:e.location,cf15:e.continuousPlay,cf53:e.continuousPlayCount,cf62:e.dimensions,cf64:e.label,cf201:e.site,cf202:e.region,cf203:e.lang,cf204:e.contentType,cf205:e.licensorName,cf206:e.mediaMetaTags,cf208:e.licenseId,vid:e.videoId,vn:e.videoTitle,vsn:e.videoShowName,vp:e.playerInt32Guid,vpm:e.masterPlayerInt32Guid,vlng:e.videoLength,vb:e.pageTitle,vf:e.pageUrl,vss:e.eventBegin,vse:e.eventEnd,ve:e.pageReferrer,sp:e.streamProtocol,cf97:e.syndicationId,cf99:e.isMature,cf98:e.tripleplay,cf08:e.hostingEnv,cf01:e.hostingBucket,cf102:e.playerVersion,cf103:e.playerType,cf104:e.experienceType,cf105:e.experienceName,cf106:e.experienceBucket,cf09:e.experienceType,cf10:e.experienceName,".ys":e.pageSpaceId,cf52:e.videoSpaceId,cf13:e.playerType,cf71:e.experienceBucket,b:e.pageTitle,f:e.pageUrl,e:e.pageReferrer,cf87:e.providerId,cf91:e.providerVideoId,cf88:e.publisherId,cf58:e.mainArtist,cf59:e.genre,cf180:e.isResume,a:function(){return"1000"+n},dpid:function(){return o}};t.sendOpts={baseUrl:"//z.analytics.yahoo.com/fpc.pl",target:"ywa",paramGetters:a,beginningKeys:["a","dpid","vp","vpm","vid","vn","cf97","vt","cf204"],endKeys:["rn"]},t.beaconMappings={PAGE_VIEW:{keys:["a","dpid","vp","vpm","cf08","cf01",".ys","b","rn","f","e"],data:{},overrideBaseKeys:!0},AD_STREAMS:{keys:["vx","cf51","cf63","vpl","cf201","cf202","cf203","cf64","cf205","cf206","cf208","cf15","cf53","vsn","vss","vse","cf87","cf91","cf88","cf58","cf59","cf98","cf52"],data:{vx:4,cf51:e.errorCode()}},AD_METRICS:{keys:function(e){return Object.keys(e.ywa).concat(["cf201","cf202","cf206","cf208","cf63","cf64",".ys","cf09","cf10","cf87","cf91","cf88","cf58","cf59","cf98","cf13","cf71","cf52"])},data:function(e){return e.ywa}}}}t.exports=r;var i=e("../util");e("./metrics-constants")},{"../util":"jJTEqU","./metrics-constants":32}],39:[function(e,t,n){"use strict";function r(e){return!!e}function i(e,t){var n={defaultVal:e||!1,transform:r};return t&&(n.configName=t),n}function o(e,t){var n={defaultVal:e||"",validator:A.isString};return t&&(n.configName=t),n}function a(){return S.isFlashInstalled()&&A.isFunction(g)}function s(){if(!A.isFunction(y))return!1;var e=window.MediaSource;return e&&e.isTypeSupported('video/mp4; codecs="avc1.640028"')&&e.isTypeSupported('audio/mp4; codecs="mp4a.40.2"')?!0:!1}function l(){return E.mobile?!1:E.chrome&&E.chrome>=37?!0:E.ie?!0:!1}function c(){if(!A.isFunction(f))return!1;var e=window.MediaSource;return e?!0:!1}function d(){return E.mobile?!1:E.chrome&&E.chrome>=46&&window.location.href.indexOf("news.yahoo.com/video/monkeys-space")>-1&&S.isInternalUser()?!0:!1}function p(e){var t=this;t.items=[],t.position=-1,t._mediaStore=e}function u(){var e=this;e.ad=null,e.state=h.INIT,e.paused=!1,e.seeking=!1,e.loading=!0,e.criticalError=null,e.previousItem=null,e.looped=!1,e.loadedItem=null,e.rendererType=null}function _(e,t){var n=this;if(n.guid=S.generateGuid(),n.mediaStore=t||new b.MediaStore,n.errors=[],e){n._config=e,n.playbackState=new u,b.fillFromConfig(M,e,n,n.errors),(e.userprefs||{}).closedcaptionprefs?n.userPreferences.closedCaptions.isAvailable=!0:n.userPreferences.closedCaptions.isAvailable=!1,n.disableCasting="boolean"==typeof e.disableCasting?e.disableCasting:!1,n.ui.chromeless&&(n.ui.showStartScreen=!1,n.ui.showControls=!1,n.ui.showEndScreen=!1,n.ui.showAgeGate=!1),n.rendererTypes=[],("hls"===n.baseConfig._html5||d())&&c()&&n.rendererTypes.push("html5-hls"),("dash"===n.baseConfig._html5||l())&&s()&&n.rendererTypes.push("dash"),n.baseConfig._html5===!1&&a()&&!A.isFunction(I)&&n.rendererTypes.push("flash"),n.rendererTypes.push("html"),n.capabilities={},n.rendererTypes.forEach(function(e){n.capabilities[e]=v(e),n.playback.skipFormats.length>0&&(n.capabilities[e].preferredFormats=n.capabilities[e].preferredFormats.filter(function(e){return-1===n.playback.skipFormats.indexOf(e)}))}),n.errors.length&&T.warn("Errors encountered while parsing configuration!");var r=(((e.prefetch||{}).query||{}).results||{}).mediaObj;r&&n.mediaStore.fillFromSapi(r,n.rendererTypes,n.capabilities,n.errors);var i=e.prefetchIds;if(i&&A.isArray(i)){var o=i.map(function(e){return{id:e}});n.mediaStore.fillFromSapi(o,n.rendererTypes,n.capabilities,n.errors)}n.playlist=new p(n.mediaStore),e.playlist&&(n.playlist.initializeFromRaw(e.playlist,n.rendererTypes,n.capabilities,n.errors),n.errors.length&&T.warn("Errors encountered while parsing playlist!")),e.ignoreEndlist&&(n.playback.ignoreEndlist=!0)}}t.exports={Model:_,Playlist:p,_PlaybackState:u};var m=e("./yvap/ads-json"),v=e("../../lib/capability"),y=e("./renderers/html5-dash"),f=e("./renderers/html5-hls"),g=e("./renderers/flash"),b=e("./media-store"),h=e("./states"),E=e("../../lib/user-agent"),S=e("./util"),A=e("../../lib"),T=e("../../lib/logger"),L=e("./metrics/metrics-constants"),I=e("./views/tumblr-controls"),M={version:{defaultVal:"6.155.0.1453355318",validator:A.isString},playlist:{id:{defaultVal:null,validator:A.isString}},CMS:{colo:{defaultVal:null,validator:A.isString},suppressAdContext:i(),enableCache:i(E.tv?!1:!0),cachedVs:{defaultVal:null,validator:A.isString}},pageLatency:{pagePlayerJsDownloadTime:{defaultVal:null,validator:A.isNumber}},ui:{configName:null,contentTypeLabel:{defaultVal:null,validator:A.isString},chromeless:i(!1,"chromeless"),startScreenConfig:{configName:"startscreen",transform:function(e){return A.isObject(e)?e:{}},showProvider:i(!0),showDescription:i(!0,"showDesc"),showButton:i(!0),showTitle:i(!0)},showStartScreen:{configName:"startscreen",defaultVal:!0,transform:function(e){return A.isObject(e)?!0:r(e)}},showControls:i(!0),showEndScreen:i(!0,"endscreen"),showFullscreen:i(!0,"fullscreenBtn"),showReplayOnlyEndScreen:i(!1,"replayonlyendscreen"),showAgeGate:{defaultVal:i(!0),validator:A.isBoolean},thumbnailDimensions:{height:{defaultVal:null,validator:A.isNumber},width:{defaultVal:null,validator:A.isNumber}},vttIndex:{defaultVal:null,validator:A.isNumber},playlistUI:{show:{defaultVal:i(!1),validator:A.isBoolean},playlistId:{defaultVal:null,validator:A.isString},playlistAlias:{defaultVal:null,validator:A.isString},position:{defaultVal:null,validator:A.isString},theme:{defaultVal:"light",validator:A.isString}}},YVAP:{accountId:{defaultVal:null,validator:A.isString},playContext:{defaultVal:null,validator:A.isString},timeout:{defaultVal:3,transform:function(e){return parseInt(e)}},cTopic:{defaultVal:null,validator:A.isString},standaloneAd:{xml:{defaultVal:null,validator:A.isString},beacons:{defaultVal:null},showAdSlug:i(!1)},vpaidTimeout:{defaultVal:null,validator:A.isNumber},adsReady:i(),customSPID:{defaultVal:null,validator:A.isString},customDomain:{defaultVal:"",validator:A.isString},preInitVpaid:i(!1)},metrics:{configName:null,comscoreC4:{defaultVal:"",validator:function(e){return A.isString(e)&&""!==e}},ccode:{defaultVal:"",validator:A.isString},sec:{defaultVal:"",validator:A.isString},skipComscore:{defaultVal:!1,validator:A.isBoolean},skipABRBeacon:i(!0),ywaSamplingRate:{defaultVal:1,validator:A.isNumber},ultSamplingRate:{defaultVal:1,validator:A.isNumber},qosSamplingRate:{defaultVal:1,validator:A.isNumber},cpos:{defaultVal:"",validator:A.isString},progressBeaconStrategy:{configName:"progressBeaconStrategy",defaultVal:null,fixed:{configName:"fixed",defaultVal:[],validator:function(e){return A.isArray(e)&&e.every(function(e){return A.isNumber(e)})}},recurring:{configName:"recurring",defaultVal:null,validator:A.isNumber},playerUnload:i(!1),playPause:i(!1)}},playback:{configName:null,continuousPlay:i(),autoplay:i(),bitrate:{configName:null,defaultVal:0,validator:A.isNumber},targetBitrate:{defaultVal:NaN,validator:A.isNumber},disableGPU:i(!1),quality:{defaultVal:"auto",validator:A.isString},bitrates:{defaultVal:[],validator:function(e){return A.isArray(e)&&e.every(function(e){return A.isNumber(e)})}},heights:{defaultVal:[],validator:function(e){return A.isArray(e)&&e.every(function(e){return A.isNumber(e)})}},desiredBitrate:{defaultVal:900,validator:A.isNumber},loop:i(),startTime:{defaultVal:NaN,validator:A.isNumber},stopBufferingOnPause:i(!1),conviva:i(!0),preload:i(!1,"preload"),preconnect:i(!0),fullscreen:i(),abr:i(),adPlaybackOnly:i(),protocol:{configName:null,defaultVal:"",validator:A.isString},skipFormats:{defaultVal:[],validator:function(e){return A.isArray(e)&&e.every(function(e){return A.isString(e)})}},playInlineVideo:i(!0,"playinlinevideos"),isResume:i(!1),ignoreEndlist:i(!1),requestType:{configName:null,defaultVal:null,validator:function(e){return[null,L.CLICK,L.AUTOPLAY,L.API,L.CONTINUOUS].indexOf(e)>-1}},requestAction:{defaultVal:null,validator:function(e){return[null,L.CLICK,L.AUTOPLAY,L.HOVER,L.SCROLL].indexOf(e)>-1}}},playbackState:{configName:null,mute:{defaultVal:null,transform:r},volume:{defaultVal:null,validator:function(e){return A.isNumber(e)&&e>=0&&1>=e}}},uiState:{configName:null,width:{configName:null,defaultVal:null},height:{configName:null,defaultVal:null},startScreenRendered:{configName:null,defaultVal:!1}},userPreferences:{configName:"userprefs",validator:A.isObject,closedCaptions:{configName:"closedcaptionprefs",show:i(!1),lang:{defaultVal:"en-US",validator:A.isString},fontSize:{defaultVal:24,validator:A.isNumber},fontName:{defaultVal:"Arial, Helvetica, sans-serif",validator:A.isString},fontColor:{defaultVal:"#ffffff",validator:A.isString},fontOpacity:{defaultVal:1,validator:A.isNumber},fontEffect:{defaultVal:"none",validator:A.isString},bgColor:{defaultVal:"#000000",validator:A.isString},bgOpacity:{defaultVal:.75,validator:A.isNumber},ccPos:{defaultVal:"bottom",validator:A.isString},isAvailable:i(!1),hasChanged:i(!1)},isAdult:{defaultVal:null,validator:A.isBoolean},isAuthenticated:{defaultVal:i(!0),validator:A.isBoolean}},baseConfig:{configName:null,site:{defaultVal:"",validator:A.isString},siteAnalytics:{configName:"site_analytics",defaultVal:"",validator:A.isString},region:{defaultVal:"",transform:function(e){return A.isString(e)?e.toUpperCase():void 0},validator:A.isString},lang:{defaultVal:"",validator:A.isString},referrer:{defaultVal:"",validator:A.isString},jurisdiction:{defaultVal:"",validator:A.isString},_html5:{configName:"html5",defaultVal:!1,validator:function(e){return"dash"===e||"hls"===e||A.isBoolean(e)}},experienceType:{configName:"expType",defaultVal:"",validator:A.isString},experienceName:{configName:"expName",defaultVal:"",validator:A.isString},experienceBucket:{configName:"expBucket",defaultVal:"",validator:A.isString},pageSpaceId:{defaultVal:"",validator:A.isString},syndication:{configName:"synd",defaultVal:"",validator:A.isString}},playerDimension:{configName:null,width:{configName:null,defaultVal:0},height:{configName:null,defaultVal:0}},CTV:{man:{defaultVal:"",validator:A.isString},"class":{defaultVal:"",validator:A.isString},ctvMetricsParams:{ctv_db:o(),ctv_dc:o(),_di:o(),ctv_di:o(),ctv_ddv:o(),ctv_dfv:o(),_dv:o(),_lo:o(),_dm:o(),_dl:o(),_dc:o(),_osv:o(),ctv_yb:o(),_sr:o(),ctv_yr:o(),ctv_ybv:o(),ctv_yv:o(),_an:o(),_av:o(),_at:o()}},failOver:{configName:"failover",beaconDisasterMode:{defaultVal:!1,configName:"beaconDisasterMode",validator:A.isBoolean},sapiUrl:{defaultVal:null,validator:A.isString},convivaSamplingRate:{configName:"convivaSamplingRate",vod:{defaultVal:0,validator:function(e){return A.isNumber(e)&&e>=0&&1>=e}},live:{defaultVal:.5,validator:function(e){return A.isNumber(e)&&e>=0&&1>=e}}}}};p.prototype.initializeFromRaw=function(e,t,n,r){var i=this;e&&(A.isObject(e)?e.id?i.id=e.id:i.appendFromRaw(e.mediaItems,t,n,r):b.addError("Playlist must be an object",r))},p.prototype.appendFromRaw=function(e,t,n,r){var i=this;if(e){if(!A.isArray(e))return void b.addError("mediaItems must be an array",r);for(var o=e.length,a=0;o>a;a++){var s=e[a],l=i._mediaStore.updateItemFromRaw(s,t,n,r);i.items.push(l.id)}o&&-1===i.position&&(i.position=0)}},p.prototype.getMediaItemAt=function(e){var t=this;return 0>e||e>=t.items.length?null:t._mediaStore.get(t.items[e])},p.prototype.getMediaItemById=function(e){var t=this;return e?t._mediaStore.get(e):null},p.prototype.getCurrentItem=function(){var e=this;return e.getMediaItemAt(e.position)},p.prototype.appendItem=function(e){var t=this,n=t.items.length;return t.items.push(e),n},p.prototype.getItemPosition=function(e){var t=this,n=t.items.indexOf(e);return n},p.prototype.getNextPosition=function(e,t,n){var r=this;if(n=n||{},n.looped=!1,n.ended=!1,-1===r.position)return-1;if(!r.items.length)return-1;if(e){var i=r.position+1;if(i<r.items.length)return i;if(t&&i===r.items.length)return n.looped=!0,0;r.playbackStopped=!0}return!e&&t?(n.looped=!0,r.position):(n.ended=!0,-1)},p.prototype.getCurrentVideoShowName=function(){var e=this,t=e.getCurrentItem();return t&&t.getShowName()},p.prototype.isCurrentVideoOriginalShow=function(){var e=this,t=e.getCurrentItem();return t&&t.isOriginalShow()===!0?!0:!1},p.prototype.isCurrentVideoSeriesEpisode=function(){var e=this,t=e.getCurrentItem();return t&&t.isSeriesEpisode()===!0?!0:!1},u.prototype.attemptingPlayback=function(){var e=this;return e.videoSet()&&!e.paused||e.state===h.WAITING},u.prototype.isVideoPlaying=function(){var e=this;return e.videoSet()&&!e.paused},u.prototype.videoSet=function(){var e=this;return e.state===h.VIDEO},u.prototype.isOnCriticalError=function(){var e=this;return e.state===h.END&&e.criticalError},u.prototype.videoLoading=function(){var e=this;return e.videoSet()&&e.loading},u.prototype.isAdPlaying=function(){var e=this;return e.videoSet()&&e.ad},u.prototype.isVpaidAdPlaying=function(){var e=this;return e.isAdPlaying()&&e.ad.type===m.ADTYPES.VPAID},_.prototype.getConfig=function(){var e=this;return e._config},_.prototype.isLocal=function(){var e=this;return e.version.indexOf("local")>-1},_.prototype.isHtmlEnforced=function(){var e=this;return e.baseConfig._html5===!0||"dash"===e.baseConfig._html5||"hls"===e.baseConfig._html5},_.prototype.destroy=function(){var e=this;e.playlist.position=-1},_.prototype.getModelSchema=function(){return M}},{"../../lib":"bRhrlU","../../lib/capability":"TL7Kjz","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./media-store":26,"./metrics/metrics-constants":32,"./renderers/flash":42,"./renderers/html5-dash":146,"./renderers/html5-hls":44,"./states":49,"./util":"jJTEqU","./views/tumblr-controls":146,"./yvap/ads-json":97}],40:[function(e,t,n){"use strict";function r(e){var t=this;t._config=e,t.startTime=e&&e.insideIframeConfig&&e.insideIframeConfig.startTime?e.insideIframeConfig.startTime:Date.now(),t.startTime=Date.now(),t._profileItems=[]}t.exports=r;var i=e("../../lib/user-agent"),o=e("./util"),a=e("./views/profiler.html");r.prototype.add=function(e){var t=this,n=t._findItem(e);n>-1&&t._profileItems.splice(n,1),t._profileItems.push({type:e.type,desc:e.desc,startTime:Date.now()-t.startTime,endTime:null})},r.prototype._findItem=function(e){for(var t=this,n=0;n<t._profileItems.length;n++){var r=t._profileItems[n];if(e.type===r.type)return n}return-1},r.prototype.getItem=function(e){var t=this,n=t._findItem(e);return n>-1?t._profileItems[n]:null},r.prototype.setEndTime=function(e,t){var n=this,r=n.getItem(e);r&&(r.endTime=t||Date.now()-n.startTime,r.timeDiff=r.endTime-r.startTime)},r.prototype.render=function(e){var t=this,n=t._profileItems.slice(0);n.forEach(function(e){e.startWidth=e.startTime/4,e.barWidth=e.timeDiff/4});var r=o.render(a,{config:JSON.stringify(t._config,null,2),profileItems:n});if(e){var s=document.createElement("div");s.appendChild(r),s.appendChild(e),r=s}if(i.mobile)document.write(r.innerHTML);else{var l=window.open();l&&l.document.write(r.innerHTML)}}},{"../../lib/user-agent":"ty5FFo","./util":"jJTEqU","./views/profiler.html":85}],41:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n._reset(),n._ER=null,n._cdnDownTimeout=null,n._eventBus.subscribe(o.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(o.ERROR,n._onError,n)}t.exports=r;var i=e("./error"),o=e("./event"),a=e("./media-store"),s=e("./util"),l=(e("../../lib"),e("./states"),e("../../lib/logger")),c=["400","501"],d=["7","57"],p=["700","701","710","711","720","721","722","730","731","732","740","750","760"],u=["103","500","502","503","550","403","404","504"],_={INIT_OR_PLAYING:0,BUFFERING:1,ERROR:2,API:3},m=1e4,v=1e4,y=2e3,f=1e4,g=1e4,b=2e4;r.prototype._reset=function(){var e=this;e._recoveryTimeoutVal=Math.random()*v+m,e._recoveryTimeoutIncr=y,e._stopTimer(),e._recoveryState=_.INIT_OR_PLAYING,e._ERTried=!1},r.prototype._onWaiting=function(e){var t=this,n=e&&e.value;n?t._startTimer(t._recoveryTimeoutVal):t._reset()},r.prototype._onError=function(e){var t=this;if(e&&t._shouldRecover(e)){if("400"===e.category.toString()&&"7"===e.subcategory.toString())return t._cdnDownTimeout&&(clearTimeout(t._cdnDownTimeout),t._cdnDownTimeout=null),void(t._cdnDownTimeout=setTimeout(function(){t.recover(_.ERROR)},Math.random()*f));t.recover(_.ERROR)}},r.prototype.recover=function(e){var t=this;t._recoveryState===_.INIT_OR_PLAYING&&(t._stopTimer(),t._isERConfigured()&&(t._fetchERTimeout=setTimeout(function(){t._getER()},g)),t._recoveryState=e?e:_.API,t._model.playlist.getCurrentItem().failoverCount++,t._model.playlist.getCurrentItem().recoveryStatus=a.ItemRecoveryStatus.RECOVERING,l.log("Recoverer.recover(): recoveryState is ",t._recoveryState),t._eventBus.publish(o.RECOVERY_START,t._onSapiErr.bind(t)))},r.prototype.shouldRenderErrorScreen=function(e){return e?c.indexOf(e.category.toString())<0||d.indexOf(e.subcategory.toString())<0&&p.indexOf(e.subcategory.toString())<0&&u.indexOf(e.subcategory.toString())<0:!1},r.prototype._shouldRecover=function(e){var t=this;return e?(p.indexOf(e.subcategory.toString())>=0||e.category===i.E_SAPI_STREAM)&&t._model.playlist.getCurrentItem().failoverCount>0?!1:!t.shouldRenderErrorScreen(e):!1},r.prototype._isERConfigured=function(){var e=this;return e._model.failOver&&e._model.failOver.sapiUrl},r.prototype._onSapiErr=function(e){var t=this;return t._recoveryState?(t._eventBus.publish(o.WARNING,s.createErr("P",t._model.playbackState,i.E_WARNING,i.WARNING_CODES.E_PLAYBACK_FROZEN_DETECTED,null,t._recoveryState)),void(e?t._isERConfigured()?t._getER():t._restartTimer():(t._eventBus.publish(o.RECOVERY_METADATA_READY),t._reset()))):void t._model.playlist.getCurrentItem().failoverCount--},r.prototype._getER=function(){var e=this;if(e._ER)return e._eventBus.publish(o.ER_READY,e._ER),void e._reset();if(e._ERTried)return void e._restartTimer();var t={context:e,timeout:b,responseTypeJson:!0,jsonpHandler:function(){},successHandler:function(t){e._publishERCallInfo("success "+n),e._ER=t,e._eventBus.publish(o.ER_READY,e._ER),e._reset()},failureHandler:function(t){e._publishERCallInfo("failure "+n),e._restartTimer(),l.log("Recoverer._getER(): Emergency record not available.")}},n=e._model.failOver.sapiUrl.replace(new RegExp("{uuid}"),e._model.playlist.getCurrentItem().id);s.ajax(n,t),e._ERTried=!0},r.prototype._startTimer=function(e){var t=this;t._stopTimer(),t._frozenDetectionTimeout=setTimeout(function(){t.recover(t._recoveryState?t._recoveryState:_.BUFFERING)},e),l.log("Recoverer._startTimer(): timer started with ",e)},r.prototype._stopTimer=function(){var e=this;e._fetchERTimeout&&(clearTimeout(e._fetchERTimeout),e._fetchERTimeout=null),e._frozenDetectionTimeout&&(clearTimeout(e._frozenDetectionTimeout),e._frozenDetectionTimeout=null)},r.prototype._restartTimer=function(){var e=this;e._recoveryTimeoutVal+=e._recoveryTimeoutIncr,e._recoveryTimeoutIncr*=2,
e._startTimer(e._recoveryTimeoutVal),e._ERTried=!1},r.prototype._publishERCallInfo=function(e){var t=this;t._eventBus.publish(o.WARNING,s.createErr("P",t._model.playbackState,i.E_WARNING,i.WARNING_CODES.E_ER_TRY,null,e))},r.prototype.destroy=function(){var e=this;e._reset(),e._ER=null,e._cdnDownTimeout=null}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./media-store":26,"./states":49,"./util":"jJTEqU"}],42:[function(e,t,n){"use strict";function r(e){var t='<object id="'+e.id+'" class="yvp-flash-video yvp-swf-not-ready" type="application/x-shockwave-flash" data="'+e.swfUrl+'" width="100%" height="100%">';e.params.forEach(function(e){t+='<param name="'+e.name+'" value="'+e.value+'">'}),t+="</object>";var n=document.createElement("div");return n.innerHTML=t,n.children[0]}function i(e,t,n){var r=this;r._error=o,r._eventBus=e,r._model=t,r._profiler=n,r.seeking=!1,r.ended=!1,r._isSeeking=!1,r.mode=s.VIDEO,r._commandQueue=[],r._swfReady=!1,r.timedOut=!1,r._drmState=_.NO_DRM}t.exports=i;var o=e("../error.js"),a=e("../event"),s=e("./modes"),l=e("../../../lib/user-agent"),c=e("../util"),d=e("../../../lib/logger"),p=e("../states"),u="player.swf",_={NO_DRM:"no-drm",DRM_INITIAL:"drm-initial",DRM_METADATA_IS_SET:"drm-metadata-set",DRM_AUTH_COMPLETE:"drm-auth-complete"},m={validateScenarioOne:function(e){var t=e.querySelector("object");return t&&"none"===t.style.display?(d.log("flash block scenario #1 : ad/flash blocker applied style tone on flash"),l.safari?c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE):c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE)):null},validateScenarioTwo:function(e){return e.querySelector("div[bginactive]")?(d.log("flash block scenario #2 : ad/flash blocker replaced flash object with bginactive"),c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE)):null},validateScenarioThree:function(e){return l.safari&&e.querySelector('div[aria-label~="Safari Power Saver"]')?(d.log("flash block scenario #3 : Safari pauses Flash component to power save"),c.createErr("R","S ",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING)):null},validateScenarioFour:function(e){return e.querySelector('div[style~="chrome-extension"]')?(d.log("flash block scenario #4 : browser blocks flash view with blocker's screen"),c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN)):null}};i.prototype.create=function(){var e=this,t=c.generateGuid(),n=c.getAssetUrl(e._model.isLocal(),e._model.version,u);return e._eventHandlerName="__YVPFlashHandler_"+e._model.guid,e._bindEvents(),e.node=r({id:t,swfUrl:n,params:[{name:"allowscriptaccess",value:"always"},{name:"allowFullScreen",value:"true"},{name:"wmode",value:e._determineWindowMode()},{name:"flashVars",value:"YUIBridgeCallback="+e._eventHandlerName+"&allowedDomain="+document.location.hostname}]}),e.node.pause=function(){e._swfReady?e._pause():e._commandQueue.push(["_pause"])},e._removeSWFNotReadyTimeout=setTimeout(function(){c.classList(e.node).remove("yvp-swf-not-ready")},1e3),e._swfReadyTimeout=setTimeout(function(){e.timedOut=!0,e._eventBus.publish(a.SWF_READY_TIMEOUT,e.node)},7e3),e._profiler&&(e._profiler.setEndTime(a.Metrics.RENDER_TO_SWF),e._profiler.add(a.Metrics.SWF_READY)),e.node},i.prototype.waitForReady=function(e){var t=this;if(t._swfReady)return void e();if(t.timedOut)return void e(new Error("swf timeout"));var n=!1;t._eventBus.subscribe(a.SWF_READY_TIMEOUT,function(){n||(n=!0,e(new Error("swf timeout")))}),t._eventBus.subscribe(a.SWF_READY,function(){n||(n=!0,e())})},i.prototype.isReady=function(){var e=this;return e._swfReady},i.prototype._determineWindowMode=function(){return"macintosh"===l.os&&(l.chrome||l.safari||l.firefox)?"direct":"opaque"},i.prototype._flushCommandQueue=function(){var e=this,t=e._commandQueue;e._commandQueue=[],t.forEach(function(t){var n=t[0],r=t[1];e[n].apply(e,r)})},i.prototype._removeFromCommandQueue=function(e){for(var t=this,n=0;n<t._commandQueue.length;n++){var r=t._commandQueue[0];if(r[0]===e){t._commandQueue.splice(n,1);break}}},i.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(a.SELECTED_STREAM_CHANGE,e)},i.prototype._bindEvents=function(){var e=this;window[e._eventHandlerName]=function(t){try{a.Video[t.type.toUpperCase()]?e._onVideoEvent(t):e._onFlashEvent(t)}catch(n){d.error("Error in flash event handler:",n.message||n,n.stack)}},e._eventBus.subscribe(a.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e),e._onVideoEvent=function(t){var n,r=t.type;if(e.mode===s.VIDEO)n=a.Video[r.toUpperCase()];else{if(e.mode!==s.AD)return;n=a.Ad[r.toUpperCase()]}switch("playing"===r&&e._profiler&&(e._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER),e._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER),e._eventBus.publish(a.FLASH_NATIVE_PLAYING_EVENT_FIRED)),r){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===r&&e._isSeeking)break;if("seeked"===r&&(e._isSeeking=!1),e._model.playbackState.isOnCriticalError()||e._model.playbackState.state===p.END)break;var i=t.buffered,o={length:1,start:function(){return i?i.start:0},end:function(){return i?i.end:0}};e._eventBus.publish(n,t.currentTime,t.duration,o);break;case"error":if(e.mode===s.VIDEO){d.log("Flash Error: critical? ",t.critical," ",t.msg,".",t.detail);var l,u=e._error;t.code===u.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR?l=c.createErr("C",e._model.playbackState,u.E_PLAYER_DRM,u.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR):t.code===u.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR?l=c.createErr("S",e._model.playbackState,u.E_PLAYER_DRM,u.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR):t.code===u.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR?l=c.createErr("R",e._model.playbackState,u.E_PLAYER,u.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,null,t.msg+"; "+t.detail):t.code===u.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR?l=c.createErr("R",e._model.playbackState,u.E_PLAYER_DRM,u.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR):t.code>=u.FLASH_CODES.E_FLASH_DRM_LOWER_BOUND_ERROR&&t.code<=u.FLASH_CODES.E_FLASH_DRM_UPPER_BOUND_ERROR?l=c.createErr("C",e._model.playbackState,u.E_PLAYER_DRM,t.code,null,t.msg+t.detail):(0===t.code&&(t.code=u.PLAYER_CODES.E_PLAYER_PLAYBACK_ERROR),l=c.createErr("P",e._model.playbackState,u.E_PLAYER,t.code,null,t.msg+"; "+t.detail)),t.critical&&e._callFlashMethod("stopMedia"),e._eventBus.publish(a.ERROR,l)}else e._eventBus.publish(a.Ad.ERROR,e._callFlashMethod("get","error"));break;case"ended":e.ended=!0,e._eventBus.publish(n);break;case"pause":if(e.ended)break;if(e.seeking)break;e._eventBus.publish(n);break;case"loadeddata":e._profiler&&e._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),e._eventBus.publish(n);break;case"warning":/Remove Last Fragment Buffer/.test(t.msg)&&e._eventBus.publish(a.RELOAD_FRAGMENT,t.msg);break;default:e._eventBus.publish(n,t)}}},i.prototype._onFlashEvent=function(e){var t=this,n=e.type;switch(n){case"infoupdate":var r=e.mediaInfo;t._model.playback.bitrate=r.currentStreamBitrate,t._model.playback.protocol=r.deliveryProtocol,t._eventBus.publish(a.PLAYBACK_INFO,r);break;case"swfReady":d.log(n),t._swfReady=!0,t._profiler.setEndTime(a.Metrics.SWF_READY),clearTimeout(t._swfReadyTimeout),c.classList(t.node).remove("yvp-swf-not-ready"),t._setPlayerInfo(),t._flushCommandQueue(),t._eventBus.publish(a.SWF_READY,t.node);break;case"playerPluginResize":t._eventBus.publish(a.PLAYER_RESIZE,e.width,e.height);break;case"selectedStreamChange":t._eventBus.publish(a.SELECTED_STREAM_CHANGE,e.selectedStreams);break;case"selectedStreamUrlChange":t._eventBus.publish(a.SELECTED_STREAM_URL_CHANGE,null,e);break;case"jsLog":d.log("[flash log]",e.message);break;case"yvap_flash":t._eventBus.publish(a.YVAP_SWF_PROXIED_EVENT,e);break;case"drmMetadataSet":t._profiler&&(t._profiler.setEndTime(a.Metrics.DRM_METADATA_IS_SET),t._profiler.add(a.Metrics.DRM_AUTH_COMPLETE),t._drmState=_.DRM_METADATA_IS_SET);break;case"drmAuthComplete":t._profiler&&(t._profiler.setEndTime(a.Metrics.DRM_AUTH_COMPLETE),t._drmState=_.DRM_AUTH_COMPLETE);break;case"uiInteract":t.mode===s.VIDEO?t._eventBus.publish(a.Video.CLICK):t.mode===s.AD&&(d.log(t._callFlashMethod("get","currentTime")),t._eventBus.publish(a.Ad.CLICK,t._callFlashMethod("get","currentTime")));break;case"bitratechange":var i=e.bitrate,l=e.info;t._eventBus.publish(a.API.BITRATE_CHANGE,i,l),d.log("Bit rate changed to",i,"due to "+l.reason),d.log("New frame rate:",l.newFrameRate,"Old frame rate:",l.oldFrameRate);break;case"durationchange":d.log("Duration changed to ",e.duration);break;case"pluginLoadComplete":t._eventBus.publish(a.RENDERER_PLUGIN_LOADED);break;case"pluginLoadError":t._eventBus.publish(a.RENDERER_PLUGIN_LOAD_FAILED);break;case"pluginLoadTimedOut":t._eventBus.publish(a.RENDERER_PLUGIN_LOAD_TIMED_OUT);break;case"loadFirstFragment":t._eventBus.publish(a.HLS_FIRST_TS_LOAD_START);break;case"firstFragmentFirstByteFReceived":t._eventBus.publish(a.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);break;case"reloadBegin":t._eventBus.publish(a.MEDIA_RELOAD_BEGIN);break;case"reloadEnd":t._eventBus.publish(a.MEDIA_RELOAD_END);break;case"mediaPlaylistLoaded":t._eventBus.publish(a.MEDIA_PLAYLIST_LOADED);break;case"mediaPlaylistUpdated":t._eventBus.publish(a.MEDIA_PLAYLIST_UPDATED,e.interval);break;case"qualityChanged":t._eventBus.publish(a.QUALITY_CHANGE);break;case"streamLoadBegin":t._profiler&&t._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER);break;case"vttSegmentLoaded":t._eventBus.publish(a.VTT_SEGMENT_LOADED,e.vttSegmentInfo);break;case"bitrateListChanged":t._eventBus.publish(a.BITRATE_LIST_CHANGED,e.bitrates,e.heights);break;case"playbackComplete":t._model.playlist.getCurrentItem().isLive()&&t._eventBus.publish(a.WARNING,c.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_LIVE_PLAYBACK_COMPLETE),!0);break;case"fragLoadRetryFailure":t._eventBus.publish(a.FRAG_LOAD_RETRY_FAILURE);break;case"liveMediaPlaylistLoadRetryFailure":t._eventBus.publish(a.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE);break;case"liveLoadingLate":t._eventBus.publish(a.LIVE_LOADING_LATE);break;case"PTSDiscontinuity":t._eventBus.publish(a.PTS_DISCONTINUITY,e.timedifference);break;case"cuepointStarted":t._eventBus.publish(a.API.CUEPOINT_STARTED,e.cuepointDuration,e.cuepointPlayedTime),d.log("cue point started");break;case"cuepointStopped":t._eventBus.publish(a.API.CUEPOINT_STOPPED),d.log("cue point stopped");break;case"cuepointDetected":t._eventBus.publish(a.API.CUEPOINT_DETECTED,e.cuepointDuration,e.timeGapBeforeCUEOUT),d.log("cue point detected");break;case"abrDataUpdated":t._model.metrics.skipABRBeacon||t._eventBus.publish(a.ABR_DATA_UPDATE,e);break;default:d.log("Unhandled event from .swf",e)}},i.prototype._setPlayerInfo=function(){var e=this,t=e._model,n={name:"Fireball",site:t.baseConfig.site,version:t.version,region:t.baseConfig.region,autoplay:t.playback.autoplay,spaceid:t.baseConfig.pageSpaceId,hostEnv:t.isLocal()?"l":"p",lang:t.baseConfig.lang,conviva:t.playback.conviva,bucket:c.bucketize(),browserName:e._getBrowserName(),os:l.os,expType:t.baseConfig.experienceType,expName:t.baseConfig.experienceName,convivaSamplingRate:t.failOver?t.failOver.convivaSamplingRate:null,disableGPU:t.playback.disableGPU};e._callFlashMethod("set","playerInfo",n)},i.prototype._getBrowserName=function(){var e="";return l.chrome?e="chrome":l.firefox?e="firefox":l.safari?e="safari":l.ie?e="ie":l.opera&&(e="opera"),e},i.prototype.setStreams=function(e){var t=this;return e.mode=t.mode,t._swfReady?t._setStreamsImpl(e):t._commandQueue.push(["_setStreamsImpl",[e]]),!0},i.prototype._setStreamsImpl=function(e){var t=this,n=(t._error,e.streams),r=e.mode;t.ended=!1,t._isSeeking=!1,!n||n.length<=0||(r===s.AD?t._setAdSrc(e):e.isCCM?t._setVideoSrc(e):t._setStreamUrlSrc(e))},i.prototype._setSrc=function(e){var t=this;t._model.playback.preconnect?t._setSrcImpl(e):(t._removeFromCommandQueue("_setSrcImpl"),t._commandQueue.push(["_setSrcImpl",[e]]))},i.prototype._setSrcImpl=function(e){var t=this;t._callFlashMethod("set","src",e)},i.prototype._setAdSrc=function(e){var t=this,n=e.streams;try{t._callFlashMethod("set","src",{live:!1,rtx:!1,url:n[0].url})}catch(r){t._eventBus.publish(a.Ad.ERROR)}},i.prototype._setStreamUrlSrc=function(e){var t=this,n={live:!1,rtx:!1};if(e.streams&&e.streams.length){var r=e.streams[0];"m3u8"===r.format?(e.streams.forEach(function(e){e.url&&""!==e.url&&(e.host=e.url)}),n.streams=e.streams):n.url=r.url,n.live=r.live,r.isDrmProtected()&&(t._drmState=_.DRM_INITIAL)}t._error;t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA),t._callFlashMethod("set","src",n)},i.prototype._setVideoSrc=function(e){var t=this,n=t._error,r=e.streamProfiles&&e.streamProfiles.length>0?e.streamProfiles:e.streams;e.mode;t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA);var i=[],o=[],s=!1;if(r.forEach(function(e){if("subtitle"===e.type)return void i.push(e);e=c.extend({},e),e.format.indexOf("m3u8")>-1&&(e.format="m3u8"),e.path&&e.path.indexOf("content=hls")>-1&&(e.format="m3u8"),e.isAtlas()&&t._fixPathForFlash(e);var n=e.isStreamCompatibleForDrm("flash");return-1===n?void(s=!0):(1===n&&(t._drmState=_.DRM_INITIAL),void o.push(e))}),o.length<=0){if(s){var l=c.createErr("C",t._model.playbackState,n.E_PLAYER_DRM,n.PLAYER_DRM_CODES.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR);t._eventBus.publish(a.ERROR,l)}}else{var d=o.filter(function(e){return!t._isProgressiveDownload(e)}),p=t._model.playlist.getCurrentItem(),u={uuid:e.uuid,showName:p?p.showName:"",title:p?p.title:"",duration:p?p.duration:0};e.startTime&&(u.startTime=e.startTime),i.length>0&&(u.subtitles=i),d.length>0?(u.streamType=d[0].getType(),u.streams=d,u.live=d[0].live,u.rtx=d[0].isRTX()):(o=o.sort(function(e,t){return t.bitrate-e.bitrate}),u.streamType=o[0].getType(),u.url=o[0].url,u.rtx=o[0].isRTX(),u.bitrate=o[0].bitrate),t._callFlashMethod("set","stopBufferingOnPause",t._model.playback.stopBufferingOnPause),t._callFlashMethod("set","preload",t._model.playback.preload),t._callFlashMethod("set","ignoreEndlist",e.ignoreEndlist),t._setSrc(u),t._model.playback.targetBitrate&&t._setQuality({preference:"config",bitrate:t._model.playback.targetBitrate})}},i.prototype._fixPathForFlash=function(e){if(e.format){var t="mp4"===e.format.toLowerCase(),n=e.path.replace(/^\/?mp4:/,"");(t||"flv"===e.format.toLowerCase())&&(n=n.replace(/^\//,"")),t&&e.isRTMP()&&(n="mp4:"+n),e.path=n}},i.prototype._isProgressiveDownload=function(e){return!e.host||/^http[s]?:\/\//.test(e.host)&&"m3u8"!==e.format&&"f4m"!==e.format},i.prototype.play=function(e){var t=this,n=t._error;if(!t.seeking||t._model.playbackState.paused)if(t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t._swfReady){t.seeking=!1,t.ended=!1,t._isSeeking=!1;var r=0;if(t._model.playback.preconnect||(t.mode===s.VIDEO?t._flushCommandQueue():t.mode===s.AD&&(r=1)),t._commandQueue.length>r&&t._eventBus.publish(a.ERROR,c.createErr("P",t._model.playbackState,n.E_PLAYER,n.PLAYER_CODES.E_INTERNAL_VIOLATION)),t._callFlashMethod("playMedia",e),t._profiler&&t._drmState===_.DRM_INITIAL){var i=t._profiler.getItem(a.Metrics.DRM_METADATA_IS_SET);i||t._profiler.add(a.Metrics.DRM_METADATA_IS_SET)}}else t._commandQueue.push(["play",[e]])},i.prototype._pause=function(){var e=this;e._callFlashMethod("pauseMedia")},i.prototype.seek=function(e){var t=this;if(t._swfReady)if(t._isSeeking=!0,t._callFlashMethod("get","seekable"))t._callFlashMethod("set","currentTime",e);else var n=t._eventBus.subscribe(a.Video.PLAYING,function(){t._callFlashMethod("set","currentTime",e),n.detach()});else t._commandQueue.push(["seek",[e]])},i.prototype.getCurrentTime=function(){var e=this;return e._callFlashMethod("get","currentTime")},i.prototype.getFlashVersion=function(){var e=this;return e._swfReady?e._callFlashMethod("get","flashVersion"):null},i.prototype.setVolume=function(e){var t=this;t._swfReady?t._callFlashMethod("set","volume",e):t._commandQueue.push(["setVolume",[e]])},i.prototype.setQuality=function(e){var t=this;t._setQuality({preference:e.preference,bitrate:e.stream.bitrate})},i.prototype._setQuality=function(e){var t=this;t._swfReady?t._callFlashMethod("set","quality",e):t._commandQueue.push(["_setQuality",[e]])},i.prototype._isFlashBlocked=function(e){var t=this;if(e)for(var n in m)if(m.hasOwnProperty(n)){var r=m[n].call(t,e);if(r)return t._eventBus.publish(a.INFO,r),t._DOMChangeObserver&&t._DOMChangeObserver.disconnect(),!0}return!1},i.prototype._beforeProgressBeaconSend=function(e){var t,n=this,r=document.getElementsByClassName("yvp-main"),i=!c.isPlayerInBackground()&&0!==c.getElementViewability(r[0]);if(n._swfReady&&e)for(t=n._callFlashMethod("get","segmentMetrics");t&&t.length;){var o=t.shift();o.vis||(o.vis=i),e.push(o)}},i.prototype.detectFlashBlockers=function(e){var t=this;if(!t._isFlashBlocked(e)){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(l.ie&&l.ie<11||"undefined"==typeof n)return;t._DOMChangeObserver=new n(function(n){var r={};try{n.forEach(function(n){if(d.log("DOM change has been detected."),t._isFlashBlocked(e))throw r})}catch(i){if(i!==r)throw i;t._DOMChangeObserver.disconnect()}});var r={attributes:!0,childList:!0,characterData:!0};t._DOMChangeObserver.observe(e,r)}},i.prototype._unbindEvents=function(){},i.prototype._callFlashMethod=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);try{if(t._swfReady)return t.node[e].apply(t.node,n)}catch(r){t._eventBus.publish(a.WARNING,c.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_FLASH_CRASHED),!0)}},i.prototype.stopMedia=function(){var e=this;e._callFlashMethod("stopMedia")},i.prototype.destroy=function(){var e=this;e._callFlashMethod("stopMedia"),delete window[e._eventHandlerName],e._unbindEvents(),clearTimeout(e._removeSWFNotReadyTimeout),clearTimeout(e._swfReadyTimeout),e.node=null}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error.js":20,"../event":"YJm+dH","../states":49,"../util":"jJTEqU","./modes":46}],43:[function(e,t,n){"use strict";function r(){var e=document.createElement("div");return d.tv?e.innerHTML='<video class="yvp-html5-video" preload="meta" crossorigin="anonymous"><source/></video>':e.innerHTML='<video class="yvp-html5-video" preload></video>',e.children[0]}function i(){}t.exports=i;var o=e("../cc"),a=e("../error"),s=e("../event"),l=e("./modes"),c=e("../tap"),d=e("../../../lib/user-agent");i.prototype.create=function(e){var t=this;return t.node=e||r(),t._bindEvents(),t.node},i.prototype.detachNode=function(){var e=this;e._unbindEvents(),e.node.pause()},i.prototype.reattachNode=function(){var e=this;e._bindEvents()},i.prototype._bindEvents=function(){var e=this;e._onVideoEvent=function(t){if(!e.ended){var n,r=t.type;if(e.mode===l.VIDEO)n=s.Video[r.toUpperCase()];else{if(e.mode!==l.AD)return;n=s.Ad[r.toUpperCase()]}e._handleVideoEvent(r,n)}},s.nativeVideoEvents.forEach(function(t){e.node.addEventListener(t,e._onVideoEvent)}),d.iphone||(e._videoTap=new c(e.node),e._onVideoTap=function(){e.mode===l.VIDEO?e._eventBus.publish(s.Video.CLICK):e.mode===l.AD&&(e._eventBus.publish(s.Ad.CLICK,e.node.currentTime),e.node.pause())},e.node.addEventListener("tap",e._onVideoTap)),e._eventBus.subscribe(s.CC.FETCH_MOBILE,e._enableMobilCC,e),e._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(t){e._eventBus.publish(s.PLAYER_RESIZE,e.node.clientWidth,e.node.clientHeight)},e),e._eventBus.subscribe(s.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e)},i.prototype._beforeProgressBeaconSend=function(e){e.useDefaultBufferDuration=!0},i.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(s.SELECTED_STREAM_CHANGE,e)},i.prototype.seek=function(e){var t=this;try{t.node.currentTime=e}catch(n){if("InvalidStateError"===n.name)var r=t._eventBus.subscribe(s.Video.LOADEDMETADATA,function(){t.node.currentTime=e,r.detach()})}},i.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},i.prototype.setVolume=function(e){var t=this;t.node&&(t.node.volume=e)},i.prototype._enableMobilCC=function(e){var t=this,n=document.createDocumentFragment();t._deleteTracks(),e.langList.forEach(function(t){var r=document.createElement("track");r.setAttribute("label",o.prototype.getLanguageForCode.call(null,t.lang)),r.setAttribute("srclang",t.lang),r.setAttribute("kind","subtitles"),r.setAttribute("type","text/vtt"),t.lang===e.selectedLang&&r.setAttribute("default",!0),r.src=t.url,r.mode="hidden",n.appendChild(r)}),t.node.appendChild(n)},i.prototype._deleteTracks=function(){for(var e=this,t=e.node.querySelectorAll("track"),n=0;n<t.length;n++)e.node.removeChild(t[n])},i.prototype._unbindEvents=function(){var e=this;s.nativeVideoEvents.forEach(function(t){e.node.removeEventListener(t,e._onVideoEvent)}),e._videoTap&&(e._videoTap.destroy(),e.node.removeEventListener("tap",e._onVideoTap))},i.prototype._getCodeForNodeError=function(e){if(!e instanceof window.MediaError)return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR;switch(e.code){case window.MediaError.MEDIA_ERR_ABORTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED;case window.MediaError.MEDIA_ERR_NETWORK:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK;case window.MediaError.MEDIA_ERR_DECODE:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE;case window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED;case window.MediaError.MEDIA_ERR_ENCRYPTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED;default:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR}},i.prototype.destroy=function(){var e=this;e._unbindEvents(),e.node.pause(),e.node.src="",e.node.load(),e._CCStyleTag&&(e._CCStyleTag.parentNode.removeChild(e._CCStyleTag),e._CCStyleTag=null),e.hlsCues&&e.hlsCues.destroy(),e.node.parentNode.removeChild(e.node),e.node=null}},{"../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":20,"../event":"YJm+dH","../tap":"dsc79Q","./modes":46}],44:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n.mode=l.VIDEO,n.seeking=!1,n.ended=!1,n._numVideoStreams=0}t.exports=r;var i=e("../error"),o=e("../event"),a=e("./html5-base.js"),s=e("../../../node_modules/js-hls/src/hls-player.js"),l=e("./modes"),c=e("../util"),d=e("../../../lib"),p=e("../../../lib/logger"),u=250;c.inherits(r,a),r.prototype.create=function(){var e=this;return a.prototype.create.apply(e),e._jsPlayer=new s(e.node,{debug:c.keepConsoleLogs}),o.html5HlsEvents.forEach(function(t){e.node.addEventListener(t,function(t){e._handleVideoEvent(t.type,t)})}),e.node},r.prototype.waitForReady=function(e){e(null)},r.prototype._handleVideoEvent=function(e,t){var n=this;switch(e){case"seeking":case"seeked":"seeked"===e&&(n._seeked=!0),n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered);break;case"error":var r=n.node.error;if(n.mode===l.VIDEO){var a,s,u=n._jsPlayer.error||{};d.isNumber(u.code)?(a=u.code.toString(),s=c.createErr("P",n._model.playbackState,i.E_PLAYER_JS_HLS,a,null,u.message)):(a=n._getCodeForNodeError(r),s=c.createErr("P",n._model.playbackState,i.E_PLAYER,a)),n._eventBus.publish(o.Video.ERROR,r),n._eventBus.publish(o.ERROR,s)}else n._eventBus.publish(o.Ad.ERROR,r);break;case"ended":n.ended=!0,n._hasPlayed=!1,n._waitingEventTimer&&clearInterval(n._waitingEventTimer),n._playbackStuck&&n._publishWaitingEvent(!1,!1),n._eventBus.publish(t);break;case"pause":if(n.ended)break;if(n.seeking)break;n._eventBus.publish(t);break;case"timeupdate":n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered);break;case"loadeddata":break;case"infoUpdate":var _=t.detail.mediaInfo;n._model.playback.bitrate=_.currentStreamBitrate,n._model.playback.protocol=_.deliveryProtocol,n._eventBus.publish(o.PLAYBACK_INFO,_);break;case"streamSwitched":var m=t.bitrate,v=t.info;n._eventBus.publish(o.API.BITRATE_CHANGE,m,v),p.log("Bit rate changed to",m,"due to "+v.reason),p.log("New frame rate:",v.newFrameRate,"Old frame rate:",v.oldFrameRate);break;case"waiting":break;case"vttSegmentLoaded":n._eventBus.publish(o.VTT_SEGMENT_LOADED,t.detail);break;default:n._eventBus.publish(t)}},r.prototype.setStreams=function(e){var t=this;t.ended=!1,t._numVideoStreams=0;t._hasPlayed=!1,t._handleWaitingEvent();var n=e.streams;if(!n)return!1;var r=[];return n.forEach(function(e){e.format.indexOf("m3u8")>=0&&(e.hls_info=e.hlsInfo,r.push(e))}),r.length>0?(t._jsPlayer.setSrc({streams:r}),!0):!1},r.prototype.setQuality=function(){return!1},r.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},r.prototype.stopMedia=function(){},r.prototype.play=function(e){var t=this;d.isNumber(e)&&e>0&&e<t.node.duration&&(t.node.currentTime=e),t.ended=!1,t.seeking=!1,t.node.play()},r.prototype._handleWaitingEvent=function(){var e=this;e._waitingEventTimer&&(clearInterval(e._waitingEventTimer),e._waitingEventTimer=null),e._waitingEventTimer=setInterval(function(){if(!e||!e.node)return void clearInterval(e._waitingEventTimer);var t=e.node.currentTime;if(e.node.seeking)t!==e._lastTime&&e._publishWaitingEvent(!0,!0);else if(t!==e._lastTime||e.node.paused||0===t){if(t>e._lastTime&&(e._playbackStuck||e.seeked)){var n=e.seeked||!e._playbackStuck;e._publishWaitingEvent(!1,n),e._seeked=!1}}else e._playbackStuck?e._publishWaitingEvent(!0,!0):e._publishWaitingEvent(!0,!1);e._lastTime=t},u)},r.prototype._publishWaitingEvent=function(e,t){var n=this;n._eventBus.publish(o.Video.WAITING,{type:"waiting",value:e,ignoreBuffering:t}),n._playbackStuck=e},r.prototype._beforeProgressBeaconSend=function(e){var t,n=this;if(e)for(t=n._jsPlayer.getSegInfo();t&&t.length;)e.push(t.shift())}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../node_modules/js-hls/src/hls-player.js":171,"../error":20,"../event":"YJm+dH","../util":"jJTEqU","./html5-base.js":43,"./modes":46}],45:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i._eventBus=e,i._model=r,i._capabilities=t,i._profiler=n,i.mode=l.VIDEO,i.seeking=!1,i.ended=!1,i._isSwitching=!1,i._currentSrcFormat="",i._currentStream=null,i._lastUpdatedTime=0,i._retryCount=0,i._retryStreams=[],i._retryState=null,i._waitingEventTimer=null,i._lastTime=0,i._playbackStuck=!1,i._seeked=!1,i._hasPlayed=!1,i._fsEvt=!1}t.exports=r;var i=e("../bitrate-selector"),o=e("../error"),a=e("../event"),s=e("./html5-base.js"),l=e("./modes"),c=e("../stream"),d=e("../../../lib/user-agent"),p=e("../util"),u=e("../../../lib"),_=e("../../../lib/logger"),m=e("../states"),v=e("../hls-cue-tracker"),y=e("../constants"),f=10,g=2,b=[1,5],h=250;p.inherits(r,s),r.prototype.waitForReady=function(e){e(null)},r.prototype._handleVideoEvent=function(e,t){var n=this;switch("playing"===e&&n._profiler&&(n._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER),n._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER)),e){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===e){var r=n.node.currentTime;d.android&&(!n._hasPlayed&&d.chrome<33&&r>1&&2>r&&(n._model.playlist.getCurrentItem().isLive()?(n.node.pause(),n.node.play()):n.seek(0),n._hasPlayed=!0),!n._fsEvt&&d.androidVersion<=4.4&&n.node.addEventListener("webkitfullscreenchange",function(){var e=n.node.currentTime;n._fsEvt=!0,n.node.load();var t=n._eventBus.subscribe(a.Video.LOADEDMETADATA,function(){n.node.play(),n._model.playlist.getCurrentItem().isLive()||(n.node.currentTime=parseInt(e,10)),t.detach()})},!1))}"seeked"===e&&(n._seeked=!0),n._isSwitching?"seeked"===e&&n._playNewStream():n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered),n._lastUpdatedTime=n.node.currentTime;break;case"error":var i=n.node.error;if(n.mode===l.VIDEO){var s=n._getCodeForNodeError(i),c=o.E_WARNING,u=a.WARNING,m=1===n._retryStreams.length&&n._retryCount===g;m&&(c=o.E_PLAYER,u=a.ERROR);var v=p.createErr("P",n._model.playbackState,c,s,null,n.node.src);if(_.log("Video node errored out because: ",i),parseInt(v.subcategory)>=303&&parseInt(v.subcategory)<=308){n._retryCount++,m||n._eventBus.publish(u,v);var y=null;return y=n._model.playlist.getCurrentItem().isLive()?n.retryStreams(0):n.retryStreams(n._lastUpdatedTime),y?void p.getUrlStatus(y.url,function(e){401===e?v.subcategory=o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:404===e&&(v.subcategory=o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND),v.errorType=o.E_PLAYER,n._eventBus.publish(a.ERROR,v)}):void 0}n._eventBus.publish(a.Video.ERROR,i),v.errorType=o.E_PLAYER,n._eventBus.publish(u,v)}else n._eventBus.publish(a.Ad.ERROR,i);break;case"ended":n.ended=!0,n._hasPlayed=!1,n._waitingEventTimer&&clearInterval(n._waitingEventTimer),n._playbackStuck&&n._publishWaitingEvent(!1,!1),n._eventBus.publish(t);break;case"loadeddata":if(n._isSwitching){n._seekToCurrentTime();break}n._profiler&&n._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),n._eventBus.publish(t);break;case"pause":if(n.ended||n.node.ended)break;if(n.seeking)break;if(!n.node.paused)break;n._eventBus.publish(t);break;case"play":case"playing":if(n._isSwitching){"playing"===e&&n._finishSwitching();break}n._eventBus.publish(t);break;case"waiting":break;default:n._eventBus.publish(t)}},r.prototype._checkFormat=function(e,t){return e.indexOf(t)>-1},r.prototype._areFormatsCrashy=function(e,t){var n=this;return n._checkFormat(e,"mp4")&&n._checkFormat(t,"m3u8")||n._checkFormat(e,"m3u8")&&n._checkFormat(t,"mp4")},r.prototype.setStreams=function(e){var t=this,n=e.streams,r=!1,o=null;if(t._streams=n,t._retryStreams=n,t._handleWaitingEvent(),d.safari>=6&&n.forEach(function(e){e.format.indexOf("m3u8")>-1&&(e.isPrimary||e.is_primary||!o)&&(o=e,r=!0)}),!r){var s=[];n.forEach(function(e){s.push(parseInt(e.bitrate))}),s=s.sort(),t._bitrateSelector=new i(t.node,s);var l=t._model.playback.targetBitrate?t._model.playback.targetBitrate:t._bitrateSelector.getTargetBitrate();o=t._getBestStream(l)}return o?(t._setSrc(o,e.startTime),r||(t._updateStreamBitrateInfo(o),e.abr&&s.length>1&&(t._eventBus.subscribe(a.Video.TIMEUPDATE,t._onPlaybackProgress,t),t._lastABRCheckTime=0)),!0):!1},r.prototype.setQuality=function(e){var t=this;t._switchSrc(e.stream.url),t._updateStreamBitrateInfo(e.stream)},r.prototype.retryStreams=function(e){var t=this,n=t._currentStream;if(t._retryCount<=g)setTimeout(function(){t._retryStream(n,e)},1e3*b[t._retryCount-1]);else{t._retryCount=0;var r=t._retryStreams.indexOf(n);if(t._retryStreams.splice(r,1),0===t._retryStreams.length)return n;var i=c.findStreamByProperty(t._retryStreams,c.BITRATE,t._bitrateSelector.getTargetBitrate(),t._capabilities);t._retryStream(i,e)}return null},r.prototype._getFirstPrimaryStream=function(){var e=this,t=null;if(e._streams)for(var n=0;n<e._streams.length;n++)if(e._streams[n].isPrimary){t=e._streams[n];break}return t},r.prototype._getBestStream=function(e){var t=this,n=t._getFirstPrimaryStream();return n||(n=c.findStreamByProperty(t._streams,"bitrate",e,t._capabilities)),!n&&t._streams&&t._streams.length>0&&(n=t._streams[0]),n},r.prototype._onPlaybackProgress=function(e){var t=this;if(e-t._lastABRCheckTime>f){t._lastABRCheckTime=e;var n=t._getBestStream(t._bitrateSelector.getRecommendedBitrate());n&&(t._switchSrc(n.url),t._updateStreamBitrateInfo(n))}},r.prototype._updateStreamBitrateInfo=function(e){var t=this;t._bitrateSelector.currentBitrate=e.bitrate,t._eventBus.publish(a.PLAYBACK_INFO,{currentStreamBitrate:e.bitrate,qualityLevels:t._streams.length}),_.log("Set stream with bitrate: ",e.bitrate)},r.prototype._setSrc=function(e,t,n){var r=this;if(r.ended=!1,r._hasPlayed=!1,r.node.src!==e.url||n){if(d.iphone&&r.node.hasOwnProperty("webkitDisplayingFullscreen")&&!r.node.webkitDisplayingFullscreen&&r._areFormatsCrashy(e.format,r._currentSrcFormat)){var i=r.node.parentNode;r.destroy(),i.appendChild(r.create())}if(d.android&&e.live&&(d.chrome&&d.chrome<30||!p.isAndroidVersionAbove4())){var s=p.createErr("R",r._model.playbackState,o.E_INFO,o.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED);return void r._eventBus.publish(a.INFO,s)}if(r._deleteTracks(),
d.mobile&&e.drmType&&("adobe"===e.drmType||"apple"===e.drmType)&&(e.url=e.url+"&dv=0"),c.isHlsLive(e)&&(r.hlsCues=new v(r._eventBus),r.hlsCues.initCueTracking(e.url)),r._profiler&&r._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER),r.node.src=e.url,t)var u=r._eventBus.subscribe(a.Video.LOADEDMETADATA,function(){r.node.currentTime=t,u.detach()});r._firstPlay=!0,r._currentSrcFormat=e.format,r._currentStream=e,r._profiler&&r.mode===l.VIDEO&&r._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA),d.mobile||(r.node.load(),r._model.playbackState.state===m.VIDEO&&r.play())}},r.prototype._calculateCanvasPosition=function(){var e=this,t=e.node.videoWidth,n=e.node.videoHeight,r=t/n,i=e.node.clientWidth,o=e.node.clientHeight,a=i/o,s=0,l=0;a>r?(l=o.toFixed(2),s=(r*o).toFixed(2)):(s=i.toFixed(2),l=(i/r).toFixed(2));var c=Math.max((i-s)/2,0),d=Math.max((o-l)/2,0);return{width:s,height:l,left:c,top:d}},r.prototype._seekToCurrentTime=function(){var e=this;e.seek(e._currentTime)},r.prototype._playNewStream=function(){var e=this;e.node.play(),e._canvas.parentNode.removeChild(e._canvas)},r.prototype._finishSwitching=function(){var e=this;e._eventBus.publish(a.Video.SWITCHED),e._isSwitching=!1},r.prototype._switchSrc=function(e){var t=this,n=t.node.clientWidth,r=t.node.clientHeight;if(t.node.src===e)return t._eventBus.publish(a.Video.SWITCHING),void t._eventBus.publish(a.Video.SWITCHED);t._isSwitching=!0,t.node.pause(),t._currentTime=t.node.currentTime;var i=document.createElement("canvas");t._canvas=i,i.className="yvp-switching-canvas",i.width=n,i.height=r;var o=t._calculateCanvasPosition();i.style.cssText="width:"+o.width+"px;height:"+o.height+"px;left:"+o.left+"px;top:"+o.top+"px",t.node.parentNode.appendChild(i),i.getContext("2d").drawImage(t.node,0,0,n,r),t._eventBus.publish(a.Video.SWITCHING),t.node.src=e},r.prototype._retryStream=function(e,t){var n=this;n._setSrc(e,t,!0),n._updateStreamBitrateInfo(e)},r.prototype.play=function(e){var t=this;if(t.ended=!1,t._firstPlay){if(d.ios){var n=t.node.src;t.node.src="",t.node.load(),t.node.src=n}d.mobile&&t.node.load()}else{var r=isNaN(t.node.duration)?t._model.playlist.getCurrentItem().duration:t.node.duration;u.isNumber(e)&&e>0&&r>e&&(t.node.currentTime=e)}t._firstPlay=!1,t.seeking=!1,t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t.node.play()},r.prototype._handleWaitingEvent=function(){var e=this;e._waitingEventTimer&&(clearInterval(e._waitingEventTimer),e._waitingEventTimer=null),e._waitingEventTimer=setInterval(function(){if(!e||!e.node)return void clearInterval(e._waitingEventTimer);var t=e.node.currentTime,n=!1;if(d.safari>=6){var r=0;e.node.buffered&&e.node.buffered.length>0&&(r=e.node.buffered.end(e.node.buffered.length-1)),n=e.node.readyState!==y.VIDEO_TAG_READY_STATES.HAVE_ENOUGH_DATA||r>0&&t>r}if(e.node.seeking)t!==e._lastTime&&e._publishWaitingEvent(!0,!0);else if(t!==e._lastTime&&!n||e.node.paused||0===t){if(t>e._lastTime&&!n){var i=e.seeked||!e._playbackStuck;e._publishWaitingEvent(!1,i),e._seeked=!1}}else e._playbackStuck?e._publishWaitingEvent(!0,!0):e._publishWaitingEvent(!0,!1);e._lastTime=t},h)},r.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},r.prototype.stopMedia=function(){},r.prototype._publishWaitingEvent=function(e,t){var n=this;n._eventBus.publish(a.Video.WAITING,{type:"waiting",value:e,ignoreBuffering:t}),n._playbackStuck=e}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../bitrate-selector":13,"../constants":17,"../error":20,"../event":"YJm+dH","../hls-cue-tracker":23,"../states":49,"../stream":"Af6MnA","../util":"jJTEqU","./html5-base.js":43,"./modes":46}],46:[function(e,t,n){t.exports={VIDEO:"video",AD:"ad",VPAID:"vpaid"}},{}],47:[function(e,t,n){"use strict";function r(e,t){var n=this;n._model=e,n._profiler=t}t.exports=r;var i=e("./util"),o=e("./event"),a="//video.media.yql.yahoo.com/v1/video/user/watchhistory/set?wh=";r.prototype._jsonp=function(e,t,n,r){var o=this;n=n||null,r&&o._profiler.add(r);var a={jsonpHandler:function(i,a){i=i||a.error,r&&o._profiler.setEndTime(r),i?t.call(n,i,null,e):t.call(n,null,a)}};i.jsonp(e,a)},r.prototype.saveToWatchHistory=function(e,t,n){var r=this,i={uuid:e},s=a+encodeURIComponent(JSON.stringify(i));r._jsonp(s,t,n,o.Metrics.SET_WATCH_HISTORY)}},{"./event":"YJm+dH","./util":"jJTEqU"}],48:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r.guid=e?e.guid:"",r._outstandingRequests=[],r._eventBus=t,r._profiler=n,r._xhrErrorCodes={0:{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED},1:{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED},2:{408:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408,timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED},3:{408:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408,timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE},"default":{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT,cors:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_ERROR}},o.preconnect("preConnector","//"+o.getHostname(d))}t.exports=r;var i=e("../../lib/user-agent"),o=e("./util"),a=e("./error"),s=e("./event"),l=e("../../lib"),c=(e("../../lib/logger"),e("./media-store")),d="//video-api.yql.yahoo.com/v1/video/sapi",p="//video.media.yql.yahoo.com/v1/video/user/prefs/get",u="//video.media.yql.yahoo.com/v1/video/user/ccprefs/set",_="//video.media.yql.yahoo.com/v1/video/alias/channels",m="//video.media.yql.yahoo.com/v1/video/channels",v=2,y=6e4;r.prototype._buildClipParams=function(e,t){var n=this,r=[],a=[];e.rt.forEach(function(e){var n=t[e];r=r.concat(n.acceptedProtocols),a=a.concat(n.preferredFormats)}),r=o.uniquifyArray(r),a=o.uniquifyArray(a);var s=e.rt.indexOf("flash")>=0?"flash":"html",l={protocol:r.join(","),format:a.join(","),srid:Math.floor(4294967295*Math.random()),rt:s,devtype:i.tv?"tv-widget":i.mobile?"smartphone":"desktop",offnetwork:o.isOffNetwork(),region:e.region,site:e.site,expb:e.expb,expn:e.expn,lang:e.lang,width:e.width,height:e.height,resize:!0,ps:e.ps,acctid:e.acctid,synd:e.synd,pspid:e.pspid,plidl:e.plidl,topic:e.topic,pver:n._model.version,"try":n._model.playlist.getCurrentItem().tryCount,failover_count:n._model.playlist.getCurrentItem().failoverCount};i.tv&&(l.dv=0,l.devtype="tv-widget",l.man=n._model.CTV.man,l["class"]=n._model.CTV["class"]),("flash"===s||e.rt.indexOf("html5-hls")>=0)&&(l.hlspre="true");var c=n._model.getModelSchema();for(var d in n._model.CMS)d in c.CMS||(l[d]=n._model.CMS[d]);return l},r.prototype.loadClips=function(e,t,n,r){var i=this,l=i._buildClipParams(e,t);if(""===l.format)i._eventBus.publish(s.INFO,o.createErr("P",i._model.playbackState,a.E_INFO,a.INFO_CODES.E_PLAYER_NO_COMPATIBLE_FORMAT));else{var d=i._model.playlist.getCurrentItem().recoveryStatus===c.ItemRecoveryStatus.RECOVERING||i._model.failOver&&i._model.failOver.sapiUrl?0:null;i._makeSapiYqlpRequest(e.uuids,"/streams",l,n,d,r)}},r.prototype.loadRelated=function(e,t){var n=this,r={start:e.start||"0",count:e.count||"15",devtype:i.mobile||i.tv?"smartphone":"desktop",offnetwork:o.isOffNetwork(),algo:"ssbe",site:e.site,region:e.region,lang:e.lang,width:e.width,height:e.height,resize:!0};n._makeSapiYqlpRequest(e.uuid,"/related",r,t)},r.prototype.loadRelatedVideosChannel=function(e,t){var n=this,r="wf-channel=related-videos",a=_+"/"+r,s={video_uuid:e.videoUuid,count:e.count,start:e.start,dev_type:i.mobile?"smartphone":"desktop",offnetwork:o.isOffNetwork(),site:e.site,region:e.region,lang:e.lang,vp:0,image_sizes:"208x117",algo:"ssbe",ssl:!0};a+="?"+o.querystring(s),n._makeSAPIRequest(a,t)},r.prototype.loadChannelsVideos=function(e,t){var n=this,r=null,a=null;e.playlistAlias?(a="wf-channel="+e.playlistAlias,r=_+"/"+a):r=m+"/"+e.playlistId;var s={count:e.count,start:e.start,dev_type:i.mobile?"smartphone":"desktop",offnetwork:o.isOffNetwork(),site:e.site,region:e.region,lang:e.lang,vp:0,image_sizes:"208x117",ssl:!0};r+="?"+o.querystring(s),n._makeSAPIRequest(r,t)},r.prototype.loadPlaylist=function(e,t,n){var r=this,i=r._buildClipParams(e,t);r._makeSapiYqlpRequest(e.uuid,"/playlist",i,n)},r.prototype.cancelAll=function(){var e=this;e._outstandingRequests.forEach(function(e){e()}),e._outstandingRequests=[]},r.prototype._makeSapiYqlpRequest=function(e,t,n,r,i,a){var s=this,l=d;l+=t,l+="/"===l[l.length-1]?"":"/",n.env&&"prod"!==n.env&&(l="beta"===n.env?l.replace(/video-api/i,"video.beta.media"):l.replace(/video-api\.yql/i,"video-yql.rc-staging.media")),l+=e+"?"+o.querystring(n),s._makeSAPIRequest(l,r,i,a)},r.prototype._generateConfig=function(e,t,n){var r=this;return{context:r,timeout:2e4,responseTypeJson:!0,withCookie:!0,jsonpHandler:e,successHandler:t,failureHandler:n}},r.prototype._makeSAPIRequest=function(e,t,n,r){var i=this,_=i.getSapiRequestCacheKeyFromUrl(e);l.isNullOrUndefined(n)&&(n=v);var m=e+"&try="+(v-n+1),f=e.indexOf(d+"/streams")>-1;l.isNullOrUndefined(r)&&(r=!1);var g=function(e){var t=o.createErr("S",i._model.playbackState,a.E_WARNING,e.code,e.msg,e.debugMsg,e.prefetch);i._eventBus.publish(s.WARNING,t)},b=function(e){if(i._profiler&&f){var t=i._profiler.getItem(s.Metrics.SAPI_REQUEST);if(t&&!t.endTime){var n=e?t.startTime:null;i._profiler.setEndTime(s.Metrics.SAPI_REQUEST,n)}}},h=function(s,l,c){if(s=s||l.error,i._outstandingRequests.splice(i._outstandingRequests.indexOf(I),1),i._publishApiCallInfo(e,l,c),s)if(i._model.playlist.getCurrentItem().tryCount++,o.replaceStrParam(e,"try",i._model.playlist.getCurrentItem().tryCount),0===n)b(!0),t(s,null,e);else{var d=a.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE;s.message===o.JSONP_TIMED_OUT&&(d=a.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT),g({code:d,msg:null,debugMsg:e+" timeout: "+Date.now(),prefetch:r}),i._makeSAPIRequest(e,t,n-1,r)}else b(!1),t(null,l)},E=function(n,r,a){if(i._outstandingRequests.splice(i._outstandingRequests.indexOf(I),1),b(!1),t(null,n),r!==!0&&(i._publishApiCallInfo(m,n,a),_&&i._model.playlist.getCurrentItem()&&i._model.playlist.getCurrentItem().isLive())){var s={val:JSON.stringify(n),expiration:(new Date).getTime()+y,cachedVs:c.getSapiVsId(e)};0===i._model.playlist.getCurrentItem().failoverCount&&o.localStorage.put(_,s)}},S=function(a,s,c,d,p){var u=s,_=c;i._outstandingRequests.splice(i._outstandingRequests.indexOf(I),1),i._model.playlist.getCurrentItem()&&i._model.playlist.getCurrentItem().tryCount++,s=l.isNullOrUndefined(s)||l.isNullOrUndefined(i._xhrErrorCodes[s])?"default":s,a.message===o.XHR_TIMEOUT?c="timeout":l.isNullOrUndefined(i._xhrErrorCodes[s][c])&&(c="default");var v=i._xhrErrorCodes[s][c];if(i._publishApiCallInfo(m,null,p),0===n){b(!0);var y=o.createErr("S",i._model.playbackState,a,v,null,"state: "+u+"; status: "+_+"; timeDiff: "+d);t(y,null,e)}else g({code:v,msg:null,debugMsg:e+"; state: "+u+"; status: "+_,prefetch:r}),o.replaceStrParam(e,"try",i._model.playlist.getCurrentItem()&&i._model.playlist.getCurrentItem().tryCount),i._makeSAPIRequest(e,t,n-1,r)};if(_){o.localStorage.getAllKeys().forEach(function(e){/sapi\/streams/.test(e)&&o.localStorage.get(e).expiration<(new Date).getTime()&&o.localStorage.remove(e)});var A=o.localStorage.get(_);if(A){var T=JSON.parse(A.val);return i._model.CMS.cachedVs=A.cachedVs,void E(T,!0)}}f&&!r&&i._profiler&&!i._profiler.getItem(s.Metrics.SAPI_REQUEST)&&i._profiler.add(s.Metrics.SAPI_REQUEST);var L=i._generateConfig(h,E,S);f&&(L.collectPerfData=!0);var I,M=e.indexOf(p)>-1||e.indexOf(u)>-1;I=M?o.jsonp(e,L):o.ajax(e,L),i._outstandingRequests.push(I)},r.prototype._publishApiCallInfo=function(e,t,n){var r=this;if(n){if(n.url=e,n.instrument=t&&t.query&&t.query.results&&t.query.results.instrument?JSON.stringify(t.query.results.instrument):"none",n.perfInfo="na",n.perfStack="na",n.source="player",n.resourceTiming){var i={};if(["connectEnd","connectStart","domainLookupEnd","domainLookupStart","duration","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","startTime"].forEach(function(e){i[e]=n.resourceTiming[e].toFixed(2)}),n.perfInfo=JSON.stringify(i),n.perfStack=[],n.resourceTimingEntries&&n.resourceTiming.requestStart-n.resourceTiming.connectStart>500)for(var o=0;o<n.resourceTimingEntries.length;o++)n.resourceTimingEntries[o].startTime<n.resourceTiming.startTime&&n.perfStack.push({url:n.resourceTimingEntries[o].name,st:n.resourceTimingEntries[o].startTime.toFixed(2),du:(n.resourceTimingEntries[o].responseEnd-n.resourceTimingEntries[o].startTime).toFixed(2)});n.perfStack=0===n.perfStack.length?"na":JSON.stringify(n.perfStack)}r._eventBus.publish(s.API_CALLED,n)}},r.prototype.updateUserPreferences=function(e,t){var n=this;n._makeSAPIRequest(u+"?userccp="+encodeURIComponent(JSON.stringify(t)),e)},r.prototype.getUserPreferences=function(e){var t=this;t._makeSAPIRequest(p,e)},r.prototype.getSapiRequestCacheKeyFromUrl=function(e){var t=this,n=e.split(/\/sapi\/streams\//),r=null;return t._model.CMS.enableCache&&n.length>1&&(r=n[1].replace(/&ps=(.*?)&/g,"&"),r=r.replace(/&try=(.*?)&/g,"&"),r="sapi/streams/"+r.replace(/&srid=(.*?)&/g,"&")),r}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./error":20,"./event":"YJm+dH","./media-store":26,"./util":"jJTEqU"}],49:[function(e,t,n){t.exports={INIT:"init",WAITING:"waiting",VIDEO:"video",END:"end"}},{}],Af6MnA:[function(e,t,n){"use strict";function r(e,t){return t.some(function(t){return e===t})}function i(e,t){var n=!1;return t.forEach(function(t){e.indexOf(t)>-1&&(n=!0)}),n}var o=function(e,t,n){var r=null;return e&&e.forEach(function(e){r?e[n]<=t&&(r=e):r=e}),r};n.findAcceptedStreams=function(e,t){return e.filter(function(e){return r(e.format,t.acceptedFormats)&&i(e._getProtocol(),t.acceptedProtocols)})},n.findStreamByProperty=function(e,t,r,i){return e=n.findAcceptedStreams(e,i).sort(function(e,n){return e[t]-n[t]}),"resolution"===t&&(t="height"),o(e,r,t)},n.isHlsLive=function(e){return e.url.match(/\.m3u8/)&&e.live||!1},n.BITRATE="bitrate",n.RESOLUTION="resolution"},{}],"./nextgen/src/stream.js":[function(e,t,n){t.exports=e("Af6MnA")},{}],"./nextgen/src/strings.js":[function(e,t,n){t.exports=e("XwKsC9")},{}],XwKsC9:[function(e,t,n){"use strict";n.i18n={ON:"On",OFF:"Off",MENU:"Menu",ELAPSED_TIME:"elapsed time",REMAINING_TIME:"remaining time",NUM_SECONDS:"{num-seconds} seconds",NUM_SECOND:"{num-seconds} second",OPTIONS:"Options",LINK:"Link",EMBED:"Embed",SHARE:"Share",SHARING:"Sharing",SHARING_UNAVAILABLE_MESSAGE:"Sharing is not available for this video.",TIMESTAMP:"Starts at",NOW_WATCHING:"Now Watching",ADVERTISEMENT:"Advertisement",LIVE:"Live",FEEDBACK:"Feedback",PLAY_VIDEO:"Play Video",REPLAY:"Replay",BACK:"Back",FEEDBACK_BUTTON:"Report issue",FEEDBACK_SUBMIT_BUTTON:"Submit",FEEDBACK_TITLE:"Report Yahoo Videoplayer Issue",FEEDBACK_SUBTITLE_RESPONSE_MESSAGE:"Thank you for your report.",FEEDBACK_SUBTITLE_RESPONSE_ID:"Report id: ",FEEDBACK_DISCLAIMER:"* By submitting this report, you agree to allow Yahoo! to collect video playback data from your current session to help us deliver a great experience to all users. Thanks for your help!",CONTENT_RESTRICTED:"Content Restricted",AGE_GATE_DESC:"This content is intended for mature audiences. Viewer discretion advised.",SIGN_IN_TO_VIEW_ACTION:"Sign-in to view",CONTINUE_ACTION:"Continue",AGE_GATE_BDAY_DESC:"This content is intended for mature audiences. Please enter your date of birth below to continue.",SUBMIT_ACTION:"Submit",AGE_GATE_NOT_ALLOWED_DESC:"Sorry. This content is intended for mature audiences.",MATURE:"Mature",SETTINGS:"Settings",PREFERENCES:"Preferences",VIDEO_QUALITY:"Video Quality",QUALITY:"QUALITY",AUTO:"Auto",LOW:"Low",MEDIUM:"Medium",HIGH:"High (HD)",QUALITY_INDICATOR:"Quality Indicator",AUTOPLAY:"Autoplay",AUTOPLAY_DESCRIPTION:"When applicable, the video will automatically start playing as soon as it can do so without stopping.",HTML5_PREFERENCE:"HTML5 Preference",PREFERENCE_DESCRIPTION:"Where possible, the HTML5 player is used by default instead of Flash player.",SIGN_IN:"Sign In",LOGIN_MESSAGE:"Please sign in to use this feature.",EMBED_NOT_ALLOWED:"This video cannot be embedded due to provider license restrictions.",TOP:"Top",BOTTOM:"Bottom",CC_PREVIEW:"Bottom",CC_PREVIEW_MESSAGE:"Captions will look like this",FONT:"font",BACKGROUND:"background",EFFECTS:"effects",NONE:"none",DROPSHADOW:"dropshadow",RAISED:"raised",DEPRESSED:"depressed",UNIFORM:"uniform",NO_ITEM_AVAILABLE:"No item available",SEE_MORE:"See More",EXAMPLE:"Example",CC:"Closed Captions",CAPTION:"Caption",EXPIRED_VIDEO:"[Expired Video]",LANGUAGE:"Language",SIZE:"Size",STYLE:"Style",REMOVE:"Remove",POSITION:"Position",WATCH_LATER:"Watch Later",LOGIN_BUTTON_LABEL:"Sign in to Yahoo",LOADING:"Loading your saved videos ...",NO_WATCH_LATER:"There are no videos in your Watch Later list. You can add one by clicking the clock in lower right corner of the video.",WATCH_LATER_ADDED:"Added to Watch Later",WATCH_LATER_REMOVED:"Removed from Watch Later",WATCH_LATER_JUST_ADDED:"Just Added",WATCH_LATER_ERROR_MESSAGE:"Sorry! We are unable to fetch your watch later videos. Please reload the page to try again.",ICON:"Icon",SOCIAL:"Social",MY_STUFF:"My Stuff",SNAP_IT:"Snap It",ERROR_CODE:"Error Code",SHORTCUTS:"Shortcuts",ESC:"Esc",CLOSE_SETTINGS:"Close Settings",SPACE:"Space",PLAY_PAUSE:"Play/Pause",FULLSCREEN:"Fullscreen",UP_ARROW:"Up Arrow",DOWN_ARROW:"Down Arrow",INCREASE_VOLUME:"Increase Volume",DECREASE_VOLUME:"Decrease Volume",ERR_ANDROID_LIVE_CHROME_REQUIRED:'This video requires Android 4.0 or above and the latest version of the Google Chrome browser.<br>You can get the latest version of Chrome from the <a href="https://play.google.com/store/apps/details?id=com.android.chrome">Google Play store</a>.',ERR_LIVE_PLAYBACK_COMPLETE:"This live event has ended.",ERR_NETWORK_ISSUE:"Videos cannot play due to a network issue. Please check your Internet connection and try again.",ERR_DEVICE:"Due to license restrictions, this video cannot be viewed on this device.",ERR_DRM_BAD_LICENSE_FILE:"The video license file must be reset to watch this video. See the <a href='http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager08.html'> Flash Settings Manager support</a> page for details.",ERR_DRM_INCOGNITO_MODE:"This video cannot be played in incognito or private browsing mode. Play it in a regular browser tab instead.",ERR_DRM_RESTRICTED:"Please download the Yahoo! <a href='https://yho.com/5xx'>Screen App</a> to watch this video.",ERR_EMBED:"Due to license restrictions, this video can only be viewed on Yahoo.",ERR_FLASH_IS_BLOCKED:"This video requires Flash. Verify Flash is not disabled or blocked, then <a href='javascript:window.location.reload();'>reload</a> the page.",ERR_FLASH_LATEST_DOWNLOAD:"The latest version of Adobe Flash is required to play this video. <a class='yvp-error-flash-download-wrapper' href='http://get.adobe.com/flashplayer/'>Download the free Flash player here.</a>",ERR_GEO:"Unfortunately, this video is not available in your region.",ERR_TECH_DIFFICULTIES:"If this error is occurring repeatedly, we may be experiencing technical difficulties. We apologize for the inconvenience. <a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh Browser</a>",ERR_UNAUTHORIZED:"You must be a paid subscriber to view this video.",ERR_UNAVAILABLE:"Unfortunately, this video is no longer available.",ERR_MISSING_OR_DAMAGED:"Unfortunately, this video is missing or damaged and cannot be played.",ERR_DRM_CHROME_SETTING:"You must adjust your Chrome browser settings to watch this secure video. Open chrome://settings/content in Chrome browser, then check 'Allow identifiers for protected content' checkbox.",ERR_BROWSER_UNSUPPORTED:"This browser is unsupported. To view this video, try another browser.",ERR_GENERAL_ERROR:"Unfortunately, an error occurred. To try again, <a href='javascript:window.location.reload();'>refresh the browser</a>.",ERR_LIVE_IOS_PLAYBACK:"Unfortunately, an error occurred. To try again, either <a href='javascript:window.location.reload();'>refresh</a> the browser or download the <a class='yvp-browser-refresh' href='https://mobile.yahoo.com/sports'>Yahoo Sports app</a>",ERR_TITLE_CANNOT_PLAY_VIDEO:"Cannot Play Video",ERR_TITLE_SOMETHING_WENT_WRONG:"Something Went Wrong",ERR_TITLE_VIDEO_NOT_AVAILABLE:"Video Not Available",CHROMECAST:"Chromecast",DISCONNECT:"Disconnect",CAST_PLAYING_RECEIVER:"Playing on {device-name}",PAUSE_VIDEO:"Pause Video",GO_TO_FULLSCREEN:"Go to full screen",GO_TO_NORMAL_SCREEN:"Go to normal screen",UNMUTE:"Unmute",MUTE:"Mute",CLOSE:"Close",REMOVE_FROM_WATCH_LATER:"Remove from watch later",SEEK_SLIDER:"Seek slider",UP_NEXT:"Up next",FULLSCREEN_SPACE:"Full Screen",PRESETS:"Presets",CC_SETTINGS:"Closed Caption Settings",CC_TYPE_SIZE:"Type Size",COLOR:"Color",TRANSPARENCY:"Transparency",SUBMIT_FEEDBACK:"Submit Feedback",BACK_TO_SETTINGS:"Back to Settings",BACK_TO_OPTIONS:"Back to Options",ADV_SHORT:"Ad:",TEXT:"Text",STYLE_OPTIONS:"Style Options",PLAIN:"Plain",SHADOW:"Shadow",LOWERED:"Lowered",OUTLINE:"Outline",CAPTIONS_ON:"Captions On",CAPTIONS_OFF:"Captions Off",CAPTIONS_AVAILABLE:"Captions Available",CAPTIONS_NOT_AVAILABLE:"Captions Not Available",EXIT_FULLSCREEN:"Exit Full Screen"}},{}],"./nextgen/src/tap.js":[function(e,t,n){t.exports=e("dsc79Q")},{}],dsc79Q:[function(e,t,n){"use strict";function r(e,t){var n=this;e=i.isString(e)?document.getElementById(e):e,n.element=e,n.shouldPropagate=i.isBoolean(t)?t:!1,n.moved=!1,n.mouseDown=!1,o.forEach(function(t){e.addEventListener(t,n,!1)})}t.exports=r;var i=e("../../lib"),o=["touchstart","touchmove","touchend","touchcancel","mousedown","mouseup"];r.isTouchDevice=!1,r.prototype._start=function(e){var t=this,n="touchstart"===e.type;if(n){r.isTouchDevice=!0;var i=e.touches[0]}t.mouseDown=!0,t.startX=n?i.clientX:e.clientX,t.startY=n?i.clientY:e.clientY,t.lastPageX=n?i.pageX:e.pageX,t.lastPageY=n?i.pageY:e.pageY,t.moved=!1},r.prototype._move=function(e){var t=this,n=e.touches[0];t.lastPageX=n.pageX,t.lastPageY=n.pageY,(Math.abs(n.clientX-t.startX)>10||Math.abs(n.clientY-t.startY)>10)&&(t.moved=!0)},r.prototype._end=function(e){var t,n=this;!n.moved&&n.mouseDown&&(n.mouseDown=!1,void 0!==document.CustomEvent?t=new document.CustomEvent("tap",{bubbles:!0,cancelable:!0}):(t=document.createEvent("Event"),t.initEvent("tap",!0,!0)),t.pageX=e.pageX||n.lastPageX,t.pageY=e.pageY||n.lastPageY,t.eventSource=e.srcElement,t.eventTarget=e.target,(!e.handled||n.shouldPropagate)&&n.element.dispatchEvent(t),e.handled=!0)},r.prototype._cancel=function(){var e=this;e.moved=!1},r.prototype.destroy=function(){var e=this,t=e.element;t&&(o.forEach(function(n){t.removeEventListener(n,e,!1)}),e.element=null)},r.prototype.handleEvent=function(e){var t=this;switch(e.type){case"mousedown":if(r.isTouchDevice)return;case"touchstart":t._start(e);break;case"touchmove":t._move(e);break;case"mouseup":if(r.isTouchDevice)return;case"touchend":t._end(e);break;case"touchcancel":t._cancel(e)}}},{"../../lib":"bRhrlU"}],"./nextgen/src/util.js":[function(e,t,n){t.exports=e("jJTEqU")},{}],jJTEqU:[function(e,t,n){"use strict";function r(e){return a.isString(e)?e:a.isBoolean(e)?e.toString():a.isNumber(e)&&isFinite(e)?e.toString():""}function i(e){var t,r={"www.yahoo.com":!0,"news.yahoo.com":!0,"sports.yahoo.com":!0,"finance.yahoo.com":!0,"beta.finance.yahoo.com":!0,"au.yahoo.com":!0,"be.yahoo.com":!0,"fr-be.yahoo.com":!0,"br.yahoo.com":!0,"ca.yahoo.com":!0,"de.yahoo.com":!0,"espanol.yahoo.com":!0,"es.yahoo.com":!0,"fr.yahoo.com":!0,"gr.yahoo.com":!0,"hk.yahoo.com":!0,"id.yahoo.com":!0,"ie.yahoo.com":!0,"in.yahoo.com":!0,"it.yahoo.com":!0,"my.yahoo.com":!0,"nz.yahoo.com":!0,"ro.yahoo.com":!0,"se.yahoo.com":!0,"sg.yahoo.com":!0,"tw.yahoo.com":!0,"uk.yahoo.com":!0,"us.yahoo.com":!0,"ve.yahoo.com":!0,"vn.yahoo.com":!0,"maktoob.yahoo.com":!0,"en-maktoob.yahoo.com":!0,"za.yahoo.com":!0,"qc.yahoo.com":!0,"att.yahoo.com":!0,"espanol.att.yahoo.com":!0,"frontier.yahoo.com":!0,"verizon.yahoo.com":!0,"ca.rogers.yahoo.com":!0,"fr-ca.rogers.yahoo.com":!0,"tatadocomo.yahoo.com":!0,"tikona.yahoo.com":!0,"ideanetsetter.yahoo.com":!0,"mtsindia.yahoo.com":!0,"smartfren.yahoo.com":!0},i=/.*\-mg\d+\.mail\.yahoo\.com$/,a=n.getWindow(),s=a.location.protocol,l=a.location.hostname,c="player.swf",d="https:"===s?n.assetDomainHttps:n.assetDomainHttp,p=d+"/rx/builds/"+e+"/assets/"+c;return o.chrome&&(a.parent!==a&&(t=n.parseDomain(a.document.referrer),t&&(l=t)),r[l]?p=s+"//"+l+"/sy/rx/builds/"+e+"/assets/"+c:i.test(l)&&(p=s+"//"+l+"/lyimg/videoinmail/"+e+"/assets/"+c)),p}var o=e("../../lib/user-agent"),a=e("../../lib"),s=e("../../lib/logger"),l=e("xhr"),c=e("./error"),d=!1;n.assetDomainHttp="http://l.yimg.com",n.assetDomainHttps="https://s.yimg.com",n.setSingleton=function(e,t){window.YAHOO=window.YAHOO||{},window.YAHOO.VideoPlatform=window.YAHOO.VideoPlatform||{},window.YAHOO.VideoPlatform[e]=t,window.YUI&&!d&&(d=!0,window.YUI.add("videoplayer",function(e){Object.keys(window.YAHOO.VideoPlatform).forEach(function(t){var n=window.YAHOO.VideoPlatform[t];e.namespace("VideoPlatform")[t]=n})}))},n.getSingleton=function(e){return window.YAHOO&&window.YAHOO.VideoPlatform&&window.YAHOO.VideoPlatform[e]?window.YAHOO.VideoPlatform[e]:null},n.createErr=function(e,t,n,r,i,a,s){return new c.Error(e,n,r,{playbackState:t,msg:i,debugMsg:a,prefetch:s},o)},n.extend=function(e){a.isObject(e)||(e={});var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},n.once=function(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments),t.value)};return t.called=!1,t},n.querystring=function(e,t,n,i){return t=t||"&",n=n||"=",i=i||encodeURIComponent,a.isObject(e)&&(e=[e]),e.map(function(e){return Object.keys(e).map(function(o){var s=i(r(o));return null===e[o]?s:(s+=n,a.isArray(e[o])?e[o].map(function(e){return s+i(r(e))}).join(t):s+i(r(e[o])))}).join(t)}).join(t)},n.getCookie=function(e,t){t=t||{},e+="=";for(var n=document.cookie.split(/;\s*/),r=n.length-1;r>=0;r--)if(!n[r].indexOf(e)){var i=n[r].replace(e,"");return t.raw?i:decodeURIComponent(i)}},n.setCookie=function(e,t,n){n=n||{},n.raw||(t=encodeURIComponent(t));var r=e+"="+t,i=n.expires?n.expires.toGMTString():"Thu, 01-Jan-1970 00:00:01 GMT";n.session||(r+="; expires="+i);var o=n.path;o&&(r+="; path="+o);var a=n.domain;a&&(r+="; domain="+a),document.cookie=r},n.generateGuid=function(){return Math.floor(4294967295*Math.random()).toString()},n.sanitizeAndUnescape=function(e){if(a.isNullOrUndefined(e))return"";var t=e.toString().replace(/<\/?[^>]+>/g,""),n=document.createElement("div");return n.innerHTML=t,n.textContent},n.getHostUrl=function(){var e=document.referrer;try{window.top.location.href&&(e=window.top.location.href)}catch(t){}return e},n.generateLoginUrl=function(e,t,r){var i="https://login.yahoo.com",o={".src":"vp",".intl":e,".lang":t,".done":r||n.getHostUrl()};return n.fillUrl(i,o)},n.fillUrl=function(e,t){return e+"?"+n.querystring(t)},n.isOffNetwork=function(e){e=e||n.getHostUrl();var t=n.parseDomain(e),r=["yahoo.com","yahoo.co.jp","yahoo.net","yahoo.fr","yimg.com","rivals.com","tumblr.com","txmblr.com","flickr.com","maktoob.com","grindtv.com","thepostgame.com","nfl.com","nfljapan.com","movie.yahoo-leisure.hk","mmovie.yahoo-leisure.hk","localhost"];return e?o.samsung?!1:!t||!r.some(function(e){return-1!==t.indexOf(e,t.length-e.length)}):!1},n.isIFrame=function(){try{return window.top!==window.self}catch(e){return!0}},n.render=function(e,t,n){var r=document.createElement("div");return r.innerHTML=e.render(t,n),r.children[0]},n.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},n.getTextFromNode=function(e){return e?e.textContent.trim():null},n.parseDomain=function(e){var t=/^https?:\/\/([A-Za-z0-9\.\-]*)(?:$|\/|:)/.exec(e);return t?t[1]:null},n.parseRootHost=function(e){var t=n.parseDomain(e),r=null;if(t){var i=t.split(".");r=i.length>=2?i[i.length-2]:t}return r},n.localStorage={get:function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(n){t=null}return t},put:function(e,t){if(!e||!t)return!1;try{return t=JSON.stringify(t),localStorage.setItem(e,t),!0}catch(n){return!1}},remove:function(e){try{localStorage.removeItem(e)}catch(t){return}},getAllKeys:function(){try{for(var e=[],t=0,n=localStorage.length;n>t;++t)e.push(localStorage.key(t));return e}catch(r){return e}}},n.sendImageBeacon=function(e){function t(){r.onload=r.onabort=r.onerror=null,r=null}e=n.fixProtocol(e);var r=new Image;r.onload=r.onabort=r.onerror=t,r.src=e},n.sendIframeBeacon=function(e){var t=this;e=n.fixProtocol(e);var r,i=document.querySelector("#vp-beacons");i||(i=t.createBeaconsIframe()),r=i.contentDocument.createElement("script"),r.async=!0,r.src=e,"complete"===i.contentDocument.readyState?i.contentDocument.body.appendChild(r):i.contentDocument.body.onload=function(){i.contentDocument.body.appendChild(r)}},n.sendUnloadBeacon=function(e){navigator&&navigator.sendBeacon?navigator.sendBeacon(e,null):n.sendImageBeacon(e)},n.createBeaconsIframe=function(){var e=document.createElement("iframe");return e.frameBorder=0,e.width=0,e.height=0,e.marginwidth=0,e.marginheight=0,e.hspace=0,e.vspace=0,e.frameborder=0,e.scrolling="no",e.id="vp-beacons",e.style.display="none",e.title="",document.body.appendChild(e),e},n.getWindow=function(){return window},n.getAssetUrl=function(e,t,r){var o,a=n.getWindow(),s=a.location.protocol,l="https:"===s?n.assetDomainHttps:n.assetDomainHttp;return o=e?"/assets/"+r:"player.swf"===r?i(t):l+"/rx/builds/"+t+"/assets/"+r},n.getScriptUrl=function(e,t,r){var i,o=window.location.href.match(/videoplayer.*\-debug.js/)||window.location.href.match(/minimal\.html/)?"-debug.js":"-min.js";if(e)i="/"+r+"-debug.js";else{var a="https:"===document.location.protocol?n.assetDomainHttps:n.assetDomainHttp;i=a+"/rx/builds/"+t+"/"+r+o}return i},n.classList=function(e){function t(t){return function(n){var r=e&&a.isString(e.className)?e.className.split(/\s+/):[],i=r.indexOf(n),o=t(r,i,n);return e&&a.isString(e.className)&&(e.className=r.join(" ")),o}}if(e.classList)return e.classList;var n={add:t(function(e,t,n){~t||e.push(n)}),remove:t(function(e,t){~t&&e.splice(t,1)}),toggle:t(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:t(function(e,t){return!!~t})};return n},n.forceDOMRedrawOnElement=function(e){e&&e.offsetHeight},n.uniquifyArray=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},n.isInternalUser=function(){var e=n.getSingleton("PlayerHosting");return e&&"s"===e.env},n.strSubstitute=function(e,t){return e.replace(/\{([^\{\}]*)\}/g,function(e,n){var r="function"==typeof t?t(n):t[n];return a.isNullOrUndefined(r)?e:r})},n.showUserAuthPage=function(e){var t="https://login.yahoo.com/?.src=vp&.intl={region}&.lang={language}&.done={referrer}",r=n.strSubstitute(t,{region:e.baseConfig.region,language:e.baseConfig.lang,referrer:encodeURI(n.getHostUrl())});n.redirect(r)},n.lazyLoad=function(e,t,n,r){function i(t){o.loadedScripts[e]&&o.loadedScripts[e].forEach(function(e){e(t)}),o.loadComplete[e]=t,clearTimeout(l)}var o=this,s=document.createElement("script");if(a.isNullOrUndefined(o.loadedScripts)&&(o.loadedScripts={},o.loadComplete={}),a.isNullOrUndefined(o.loadedScripts[e])&&(o.loadedScripts[e]=[],o.loadComplete[e]=!1),o.loadedScripts&&o.loadedScripts.hasOwnProperty(e)){if(o.loadComplete[e]!==!1)return n(o.loadComplete[e]);if(o.loadedScripts[e].push(n),o.loadedScripts[e].length>1)return}s.async=!0,s.src=e;var l=window.setTimeout(function(){o.loadedScripts[e]&&o.loadedScripts[e].forEach(function(e){e("Script load timeout")}),o.loadComplete[e]="Script load timeout"},t);return s.onload=function(){
i(null)},s.onerror=function(){i("Failed to load script")},r&&i("Cancelling script execution"),document.body.appendChild(s),function(){i("Cancelling script execution")}},n.XHR_ERROR="XHR error",n.XHR_TIMEOUT="XHR request timed out",n.ajax=function(e,t){e=n.fixProtocol(e);var r=2,i=t.context,c=t.responseTypeJson,d=t.withCookie,p=t.timeout,u=n.once(t.successHandler),_=n.once(t.failureHandler),m=(a.isNullOrUndefined(t.earlyRetries)?r:t.earlyRetries,!1),v=null,y={url:e,cors:o.ie&&o.ie<10||d,withCredentials:d,timeout:p||3e3};if(i&&u&&_){var f=(new Date).getTime(),g=new l(y,function(r,o,s){if(!m)if(t.collectPerfData&&(v={},a.isFunction(g.getResponseHeader)&&(v.resp_len=g.getResponseHeader("Content-Length")||"na"),window.performance&&window.performance.getEntriesByName&&(v.resourceTiming=window.performance.getEntriesByName(location.protocol+e).pop(),v.resourceTimingEntries=window.performance.getEntries()),v.http_code=o.status),r){o.timeDiff=(new Date).getTime()-f;var l=null;a.isFunction(g.getResponseHeader)&&(l=o.getResponseHeader("Access-Control-Allow-Origin"));var d=window.location.protocol+"//"+window.location.host;if(l&&l!==d)_.call(i,new Error(n.XHR_ERROR),"default","cors");else{var y=o.timeDiff>=p?n.XHR_TIMEOUT:n.XHR_ERROR;_.call(i,new Error(y),o.previousState,o.status,o.timeDiff,v)}}else u.call(i,c?JSON.parse(s):s,!1,v)});g.previousState=g.readyState;var b=g.onreadystatechange;g.onreadystatechange=function(){4===g.readyState?b.call(g):g.previousState=g.readyState}}return function(){s.log("XMLHttpRequest: cancelled"),m=!0}},n.JSONP_ERROR="jsonp error",n.JSONP_TIMED_OUT="jsonp request timed out",n.jsonp=function(e,t){function r(e){s.log("JSONP "+a+": "+e)}function i(e){l.removeChild(p),e?delete window[a]:window[a]=function(){},clearTimeout(u)}function o(){r("cancelled"),window[a]&&i(!1)}e=n.fixProtocol(e);var a,l=document.getElementsByTagName("head")[0],c=n.once(t.jsonpHandler);do a="_callback"+Math.round(1e7*Math.random());while(void 0!==window[a]);var d=e+(e.indexOf("?")+1?"&":"?");d+="callback="+a;var p=document.createElement("script");p.type="text/javascript",p.src=d;var u=window.setTimeout(function(){r("timeout"),i(!1),c(new Error(n.JSONP_TIMED_OUT),null,n.fetchJsonpPerfData(e,a,t.collectPerfData))},2e4);return p.onerror=function(){i(!0),c(new Error(n.JSONP_ERROR),null,n.fetchJsonpPerfData(e,a,t.collectPerfData))},window[a]=function(r){i(!0),c(null,r,n.fetchJsonpPerfData(e,a,t.collectPerfData,r))},l.appendChild(p),o},n.fetchJsonpPerfData=function(e,t,n,r){var i={};if(n){if(i.resp_len="na",window.performance&&window.performance.getEntriesByName,r){var o=location.protocol+e+"&callback="+t;i.resourceTiming=window.performance.getEntriesByName(o).pop(),i.resourceTimingEntries=window.performance.getEntries()}r&&(i.http_code=r.status||"na",i.resp_len=r.length||"na")}return i},n.isFlashInstalled=function(){if(void 0!==n.isFlashInstalledMem)return n.isFlashInstalledMem;var e=null;if(o.ie)try{var t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");e=t.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(",")}catch(r){}else{var i=navigator.mimeTypes["application/x-shockwave-flash"];if(i){var a=i.enabledPlugin;a&&(e=a.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."))}}return e?n.isFlashInstalledMem="0"!==e[0]:n.isFlashInstalledMem=!1,n.isFlashInstalledMem},n.getMediaCDNName=function(e,t,r){var i,o="unknown";if(t&&t.length>0){if(t[0].cdn&&t[0].cdn.length>0)return t[0].cdn;var a=t[0].host,s=t[0].path;i=a+s,!e.isLive()&&t[0].hlsInfo&&(i=t[0].hlsInfo.ts_url)}else r&&r.length>0&&(i=r);return i&&i.length>0&&(o=i.indexOf("akamai")>-1||0===i.indexOf("rtmp")&&e.isLive()?"akamai":i.indexOf("yahoo.com")>-1||i.indexOf("yimg.com")>-1?"atlas":i.indexOf("llnwd.net")>-1?"limelight":i.indexOf("fastly.com")>-1?"fastly":n.parseRootHost(i)),o},n.redirect=function(e,t){try{t?window.top.location.replace(e):window.top.location.assign(e)}catch(n){typeof n===window.DOMException&&s.log("Unable to redirect: "+n)}},n.showHide=function(e,t){e.style.display=t?"block":"none"},n.formatTime=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n),i="";return 10>r&&(r="0"+r),t>0?(10>n&&(n="0"+n),t+":"+n+":"+r):a.isNumber(n)?n+":"+r:i},n.getOffsetTopFromEl=function(e,t){for(var r=0;e;)isNaN(e.offsetTop)||(r+=e.offsetTop),e=e.offsetParent,t&&n.classList(e).contains(t)&&(e=null);return r},n.getOffsetTopFromDocument=function(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,o=r.clientTop||n.clientTop||0;return Math.round(t.top+i-o)},n.setupMouseWheelListener=function(e){var t=function(t){var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),r=n>0,i=e.scrollHeight>e.offsetHeight,o=r&&e.scrollTop<1,a=!r&&e.scrollTop>=e.scrollHeight-e.offsetHeight;i&&(o||a)&&t.preventDefault()};return e&&(e.addEventListener("mousewheel",t),e.addEventListener("DOMMouseScroll",t)),t},n.destroyMouseWheelListener=function(e,t){e&&a.isFunction(t)&&(e.removeEventListener("mousewheel",t),e.removeEventListener("DOMMouseScroll",t))},n.bucketize=function(){return Math.floor(100*Math.random())},n.cssHexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},n.getElementViewability=function(e){var t,n=e.getBoundingClientRect();return t=n.top>=0?n.bottom>window.innerHeight?window.innerHeight-n.top>0?window.innerHeight-n.top:0:n.height:n.bottom>window.innerHeight?window.innerHeight:n.bottom<0?0:n.bottom,Math.round(t/n.height*100)},n.noPropagation=function(e){a.isFunction(e.stopPropagation)&&e.stopPropagation()},n.getHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},n.getFormat=function(e){var t=["mp4","m3u8","webm","flv","f4m","mp4b","m3u8_playlist","m3u8_master"],n=null;return t.forEach(function(t){-1!==e.indexOf(t)&&(n=t)}),n},n.mapStreamsToQualities=function(e){var t=1,n=2,r=1500,i=2500,o=null,a=null,s=null;if(e.bitrates){for(var l=[],c=0;c<e.bitrates[c];c++)l.push({bitrate:e.bitrates[c],height:e.heights[c]});e=l}for(c=0;c<e.length;c++){var d,p=e[c],u=t*p.bitrate+n*p.height;r>=u?o?(d=o.bitrate+2*o.height,u>d&&(o=p)):o=p:i>=u?a?(d=a.bitrate+2*a.height,u>d&&(a=p)):a=p:s?(d=s.bitrate+2*s.height,u>d&&(s=p)):s=p}return{low:o,medium:a,high:s}},n.getUrlStatus=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.status)},n.send()},n.isPlayerInBackground=function(){return this.hidden||("undefined"!=typeof document.hidden?this.hidden="hidden":"undefined"!=typeof document.mozHidden?this.hidden="mozHidden":"undefined"!=typeof document.msHidden?this.hidden="msHidden":"undefined"!=typeof document.webkitHidden?this.hidden="webkitHidden":this.hidden="unsupported"),"unsupported"===this.hidden?!document.hasFocus():document[this.hidden]},n.shouldEnableQualitySelector=function(e){var t=["html","flash"],n=e.playbackState.rendererType,r=e.playlist.getCurrentItem();if(t.indexOf(n)>-1&&r){if("flash"!==n)return r.streams.length>1;if("hls"===r.streams[0].getType())return r.isLive()?!0:r.streams.length>1}return!1},n.replaceStrParam=function(e,t,n){return e.replace(new RegExp(t+"=\\w*"),t+"="+n)},n.isAndroidVersionAbove4=function(){if(o.androidVersion){var e=parseInt(o.androidVersion);return e>=4}return!1},n.preconnect=function(e,t){if(document&&!document.head.querySelector("#"+e)){var n=document.createElement("link");n.setAttribute("rel","preconnect"),n.setAttribute("id",e),n.setAttribute("href",t);var r=document.getElementsByTagName("head")[0];r&&r.appendChild(n)}},n.fixProtocol=function(e){return o.samsung&&0===e.indexOf("//")?"https:"+e:e}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./error":20,xhr:188}],58:[function(e,t,n){"use strict";function r(e,t){function n(e){var t=p[e];r._eventBus.subscribe(t,function(){var t=Array.prototype.slice.call(arguments,0);setTimeout(function(){r.publish.apply(r,[u[e]].concat(t))})})}var r=this;if(r.config=e,r.mediaStore=t,l.call(r,"API"),r.isIframeEnabled(r.config)&&(r._iframeController=new c(e,t,r),!r.config.insideIframeConfig))return r.controls=new i(null,this),void(r.playlist=new o(null,this));var d=null;t&&(d=t._privateMediaStore||null),r._controller=new a(e,d),r.controls=new i(r._controller),r.playlist=new o(r._controller),r._eventBus=r._controller._eventBus;var p=[s.PLAYBACK_STARTED,s.Video.PAUSE,s.PLAYBACK_RESUMED,s.PLAYBACK_PROGRESS,s.PLAYBACK_ENDED,s.AD_PLAYBACK_STARTED,s.Ad.PAUSE,s.AD_PLAYBACK_RESUMED,s.AD_PLAYBACK_PROGRESS,s.AD_PLAYBACK_ENDED,s.AD_PLAYBACK_ERROR,s.Ad.NO_AD,s.ERROR,s.METADATA_AVAILABLE,s.CC.FETCHED],u=[s.API.PLAYBACK_START,s.API.PLAYBACK_PAUSE,s.API.PLAYBACK_RESUMED,s.API.PLAYBACK_TIME_UPDATE,s.API.PLAYBACK_COMPLETE,s.API.AD_PLAYBACK_START,s.API.AD_PLAYBACK_PAUSE,s.API.AD_PLAYBACK_RESUME,s.API.AD_PLAYBACK_PROGRESS,s.API.AD_PLAYBACK_STOP,s.API.AD_ERROR,s.API.AD_NONE,s.API.PLAYER_ERROR,s.API.METADATA_READY,s.API.CC_AVAILABLE];for(var _ in s.API)if(-1===u.indexOf(_)){var m=s.API[_];p.push(m),u.push(m)}for(var v=0;v<p.length;v++)n(v);r._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(e){r.publish(s.API.PLAYER_FULLSCREEN_CHANGE,e),r._controller.setContentHeightForNFL()})}function i(e,t){var n=this;n._controller=e}function o(e){var t=this;t._controller=e}t.exports=r;var a=e("./controller"),s=e("./event"),l=e("../../lib/event-bus"),c=e("./iframe-controller"),d=e("./util"),p=e("../../lib"),u=e("./states"),_=e("./metrics/metrics-constants");e("../../lib/user-agent");d.inherits(r,l),r.prototype.apiVersion=r.apiVersion=2,r.prototype.render=function(e){var t=this;if(t.isIframeEnabled(t.config)){if(!t.config.insideIframeConfig)return t._iframeController.constructIframe(e),t._iframeController.routeControlsApiToIframe(),t;t._iframeController.setupIframeToPageCommunication()}return t._controller.render(e),t},r.prototype.isIframeEnabled=function(e){return e&&e.iframeRender},r.prototype.getCustomControlsNode=function(){var e=this;return e._controller.getCustomControlsNode()},r.prototype.getVideoElement=function(){var e=this;return e._controller.getVideoElement()},r.prototype.getEventBus=function(){var e=this;return e._eventBus},r.prototype.getOpenSimSim=function(){var e=this;return e._controller.getOpenSimSim()},r.prototype.destroy=function(){var e=this;return e._controller&&e._controller.destroy(),e._iframeController&&e._iframeController.destroy(),l.prototype.destroy.call(e),e},r.prototype.fetchMetaData=function(e){var t=this;if(!p.isArray(e)||!e.every(p.isString))throw new Error("fetchMetaData called with invalid list of ids");return t._controller.prefetch(e),t},r.prototype.getMediaStore=function(){var e=this;return{_privateMediaStore:e._controller.getMediaStore()}},r.prototype.on=r.prototype.subscribe,r.prototype.before=r.prototype.subscribe,r.prototype.after=r.prototype.subscribe,r.prototype.fire=r.prototype.publish,i.prototype.play=function(e){var t=this;t._controller.getPlaybackState()===u.INIT&&p.isNumber(e)&&e>0&&e<t.getDuration()&&(t._controller.getCurrentMediaItem().progress.position=e);var n={type:_.API};t._controller.play(n)},i.prototype.pause=function(){var e=this;e._controller.pause()},i.prototype.seek=function(e){var t=this;t._controller.seek(e)},i.prototype.disableControls=function(){var e=this;e._controller.disableControls()},i.prototype.enableControls=function(){var e=this;e._controller.enableControls()},i.prototype.enableCC=function(e){var t=this;t._controller.setCC(!0,e)},i.prototype.disableCC=function(){var e=this;e._controller.setCC(!1)},i.prototype.isPlaying=function(){var e=this;return e._controller.isPlaying()},i.prototype.isLoading=function(){var e=this;return e._controller.isLoading()},i.prototype.getDuration=function(){var e=this;return e._controller.getCurrentMediaItem().duration},i.prototype.getCurrentTime=function(){var e=this;return e._controller._view&&e._controller._view.currentTime||0},i.prototype.getTimeRemaining=function(){var e=this;return e.getDuration()-e.getCurrentTime()},i.prototype.setFullscreen=function(e){var t=this;t._controller.setFullscreen(e)},i.prototype.getFullscreen=function(){var e=this;return e._controller.getFullscreen()},i.prototype.setVolume=function(e){var t=this;e=0>e?0:e,e=e>1?1:e,t._controller.setVolume(e)},i.prototype.getVolume=function(){var e=this;return e._controller.getVolume()},i.prototype.setMute=function(e){var t=this;t._controller.setMute(e)},i.prototype.getMute=function(){var e=this;return e._controller.getMute()},i.prototype.setLoop=function(e){var t=this;return t._controller.setLoop(e)},i.prototype.setContinuousPlay=function(e){var t=this;return t._controller.setContinuousPlay(e)},i.prototype.resumeContinuousPlay=function(){var e=this,t={type:_.API};e._controller.resumeContinuousPlay(t)},i.prototype.getBitrate=function(){throw new Error("getBitrate is unimplemented!")},i.prototype.setResolution=function(){throw new Error("setResolution is unimplemented!")},i.prototype.displayClosedCaptions=function(){throw new Error("displayClosedCaptions is unimplemented!")},i.prototype.endVideo=function(){var e=this;e._controller.endVideo()},o.prototype.getSize=function(){var e=this;return e._controller.getPlaylistItems().length},o.prototype.getPosition=function(){var e=this;return e._controller.getPlaylist().position},o.prototype.sendPrefetchInfo=function(e){var t=this;return t._controller.sendPrefetchInfo(e)},o.prototype.setPosition=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("setPosition called with invalid position");var n=t._controller.getAutoplay();if(n)var r={type:_.API,action:_.AUTOPLAY};t._controller.setPlaylistPosition(e,n,r)},o.prototype.setPositionById=function(e){var t=this,n=t._controller.getPlaylistItems().indexOf(e);if(-1===n)throw new Error("setPositionById called with id not in playlist");var r=t._controller.getAutoplay();if(r)var i={type:_.API,action:_.AUTOPLAY};t._controller.setPlaylistPosition(n,r,i)},o.prototype.addItem=function(e){var t=this;t.addItems([e])},o.prototype.addItems=function(e){var t=this,n=e.filter(function(e){return null===t._controller.getMediaStore().get(e)});n.length>0&&t._controller.prefetch(n),e.forEach(function(e){t._controller.getPlaylistItems().push(e)})},o.prototype.getItems=function(){var e=this;return e._controller.getPlaylistItems().slice(0)},o.prototype.getItemId=function(e){var t=this,n=t._controller.getPlaylistItems();if(!(e in n))throw new Error("getItemId called with invalid position");return n[e]},o.prototype.getCurrentItemId=function(){var e=this,t=e._controller.getPlaylist();return-1!==t.position?t.items[t.position]:null},o.prototype.getCurrentItem=function(){var e=this,t=e._controller.getCurrentMediaItem();return t?e.getItemById(t.id):null},o.prototype.getItem=function(e){var t=this,n=t._controller.getPlaylistItems();if(!(e in n))throw new Error("getItem called with invalid position");return t.getItemById(n[e])},o.prototype.getItemById=function(e){var t=this,n=t._controller.getMediaStore().get(e);return n?{id:n.id,title:n.title,description:n.description,duration:n.duration,provider:n.provider,credits:n.credits,shareUrl:n.shareUrl,setShareUrl:function(e){this.shareUrl=e,n.shareUrl=e},thumbnail:n.images.defaultThumbnail,visualSeek:n.visualSeek,isLive:n.isLive(),closedCaptions:n.closedCaptions,streams:n.streams}:null},o.prototype.getIndexForId=function(e){var t=this;return t._controller.getPlaylistItems().indexOf(e)},o.prototype.removeItem=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("removeItem called with invalid position");t._controller.removePlaylistItems(e,1)},o.prototype.removeItems=function(e,t){var n=this,r=n._controller.getPlaylistItems();if(!(e in r&&e+t-1 in r))throw new Error("removeItems called with invalid position/count");n._controller.removePlaylistItems(e,t)},o.prototype.removeItemById=function(e){var t=this,n=t._controller.getPlaylistItems().indexOf(e);if(-1===n)throw new Error("removeItemById called with id not in playlist");t._controller.removePlaylistItems(n,1)},o.prototype.removeItemsById=function(e){var t=this;e.forEach(function(e){t.removeItemById(e)})},o.prototype.clear=function(){var e=this;e._controller.removePlaylistItems(0,e._controller.getPlaylistItems().length)}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/user-agent":"ty5FFo","./controller":18,"./event":"YJm+dH","./iframe-controller":24,"./metrics/metrics-constants":32,"./states":49,"./util":"jJTEqU"}],59:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i.rootElem=e,i._model=t,i._eventBus=n,i._profiler=r,i._nflBarDimensions=Z,i._nflBranding=null,i._nflBrandingNode=null,i._viewSize=x.NORMAL,i._renderers={},i._renderer=null,i._rendererType="",i._isFullScreen=!1,i._controlsHideTimeout=F,i._showPlaylist=null,i._playlistPosition=null;var o=i.rootElem.clientWidth,a=i.rootElem.clientHeight;o<=j.VERY_SMALL_WIDTH||a<=j.VERY_SMALL_HEIGHT?i._viewSize=x.VERY_SMALL:(o<=j.SMALL_WIDTH&&o>j.VERY_SMALL_WIDTH||a<=j.SMALL_HEIGHT&&a>j.VERY_SMALL_HEIGHT)&&(i._viewSize=x.SMALL),i._eventBus.subscribe(p.MEDIA_ITEM_LOADED,function(e){i.toggleSettings(null,!1,!0),e.isLive()?C.classList(i._contentElem).add("yvp-live"):C.classList(i._contentElem).remove("yvp-live"),i.isStreamMode()&&C.classList(i._contentElem).add("yvp-stream"),i.isMiniStreamMode()&&C.classList(i._contentElem).add("yvp-ministream")},i),i._eventBus.subscribe(p.Video.SWITCHING,function(){i._setFlag(k.SWITCHING,!0)}),i._eventBus.subscribe(p.Video.SWITCHED,function(){i._setFlag(k.SWITCHING,!1)}),i.showPlaylist()&&i.getPlaylistUIPosition()===W&&(o-=G),i._eventBus.publish(p.PLAYER_DIMENSION_CHANGE,{width:o||1,height:i.rootElem.clientHeight||1}),i._eventBus.subscribe(p.RENDERER_TYPE_CHANGE,i._onRendererTypeChange,i),i._eventBus.subscribe(p.API.PLAYER_MUTE_CHANGE,i._onMuteChange,i),i._eventBus.subscribe(p.UP_NEXT_PG_CLICK,i._onUpnextPgClick,i),i._eventBus.subscribe(p.PLAYBACK_PROGRESS,i._onPlaybackProgress,i),i._eventBus.subscribe(p.FULLSCREEN_CHANGE,function(){i._onFullScreenChange(i.getFullscreen())},i)}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("./views/controls"),a=e("./views/nfl-branding"),s=e("./easter-egg"),l=e("./views/playlist"),c=e("./views/error-screen"),d=e("./views/age-gate-screen"),p=e("./event"),u=e("./renderers/flash"),_=e("./renderers/html5-dash"),m=e("./renderers/html5-raw"),v=e("./renderers/html5-tv"),y=e("./renderers/html5-hls"),f=e("./renderers/orsay"),g=e("./renderers/tizen"),b=e("./views/open-sim-sim"),h=e("./views/feedback-screen"),E=e("./renderers/modes"),S=e("./views/start-screen"),A=e("./views/loading-screen"),T=e("./states"),L=e("./views/tumblr-controls"),I=e("./views/tumblr-loading-screen"),M=e("../../lib/user-agent"),C=e("./util"),N=e("../../lib"),D=e("../../lib/logger"),R=e("./views/ads-overlay"),P="flash_download_logo.svg",O=e("./views/base.html"),w={END_SCREEN:"end-screen",ERROR:"error",VIDEO:"video",START_SCREEN:"start-screen",BLOCKED:"blocked"},k={LOADING:"loading",SWITCHING:"switching",PLAYING:"playing",PAUSED:"paused",CASTING:"casting"},x={NORMAL:"normal",SMALL:"smallscreen",VERY_SMALL:"verysmallscreen"},j={SMALL_WIDTH:350,SMALL_HEIGHT:210,VERY_SMALL_WIDTH:175,VERY_SMALL_HEIGHT:175},B=["webkitfullscreenchange","mozfullscreenchange","msfullscreenchange","MSFullscreenChange","fullscreenchange"],U="yvp-state-",V="yvp-flag-",z="yvp-mode-",Y="yvp-browser-",F=5e3,H=83,G=300,Q="bottom",W="right",q="hidden",Z={DESKTOP:{HEIGHT:36},MOBILE:{HEIGHT:52}};i('.yvp-content{position:relative;width:100%;height:100%;overflow:visible;font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif;font-size:16px;text-align:initial;cursor:default;background-color:#000;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.yvp-content [tabindex]{outline:none}.yvp-content h3,.yvp-content h4,.yvp-content p,.yvp-content label,.yvp-content input,.yvp-content div,.yvp-content button,.yvp-content img,.yvp-content li,.yvp-content ul{margin:0;padding:0;border:0}.yvp-main{position:relative;width:100%;height:100%}.yvp-state-error .yvp-error-screen{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;display:block}.yvp-state-error .yvp-start-screen,.yvp-state-error .yvp-end-screen,.yvp-state-error .yvp-html5-video,.yvp-state-error .yvp-end-screen-fuji{display:none}.yvp-state-end-screen .yvp-end-screen,.yvp-state-end-screen .yvp-end-screen-fuji{display:block}.yvp-state-end-screen .yvp-error-screen,.yvp-state-end-screen .yvp-html5-video{display:none}.yvp-state-video .yvp-html5-video,.yvp-state-blocked .yvp-html5-video,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-html5-video{display:block}.yvp-state-video .yvp-start-screen,.yvp-state-blocked .yvp-start-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-start-screen,.yvp-state-video .yvp-end-screen,.yvp-state-blocked .yvp-end-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-video .yvp-error-screen,.yvp-state-blocked .yvp-error-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-video .yvp-end-screen-fuji,.yvp-state-blocked .yvp-end-screen-fuji,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-flag-casting .yvp-start-screen,.yvp-flag-casting .yvp-end-screen,.yvp-flag-casting .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-start-screen,.yvp-state-video.yvp-browser-iphone .yvp-start-screen{display:block}.yvp-state-start-screen .yvp-end-screen,.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-start-screen .yvp-error-screen,.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-start-screen .yvp-html5-video,.yvp-state-video.yvp-browser-iphone .yvp-html5-video,.yvp-state-start-screen .yvp-end-screen-fuji,.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-html5-video,.yvp-state-video.yvp-browser-iphone .yvp-html5-video{top:-2000px}object.yvp-swf-not-ready.yvp-flash-video{opacity:0}.yvp-state-video{z-index:5}.yvp-content{z-index:0}.yvp-html5-video{z-index:5}.yvp-switching-canvas{z-index:15}.yvp-loading-screen .yvp-spinner-outer,.yvp-loading-screen .yvp-spinner-inner{z-index:20}.yvp-flash-video{position:absolute;left:0;visibility:hidden}.yvp-flash .yvp-flash-video{visibility:visible}.yvp-html5-video{position:absolute;width:100%;height:100%;top:0;cursor:pointer;visibility:hidden}.yvp-html .yvp-html5-video{visibility:visible}.yvp-switching-canvas{position:absolute}.yvp-start-screen,.yvp-end-screen{position:absolute;height:100%;width:100%;background-color:#000;cursor:pointer}.yvp-nfl-branding-container{width:100%;height:36px;position:relative;z-index:22;background:#011832;background:-moz-linear-gradient(left,#011832 0%,#103155 40%,#011832 100%);background-image:-webkit-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:-o-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);*background:#011832;white-space:nowrap}.yvp-browser-mobile .yvp-nfl-branding-container{height:52px}.yvp-nfl-branding{position:relative;margin:10px auto;vertical-align:middle;display:inline-block;zoom:1;width:30%}.yvp-browser-mobile .yvp-nfl-branding{margin:15px auto}.yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTkuOTgzIDE5LjM4cy40MTctLjcyLjgyNC0xLjExMmMuNTc0LS41NSAxLjM5LS44OTcgMi40OS0xLjA1NiAxLjM4Mi0uMiAyLjM4NS0uNjcgMi45NzYtMS4zODIuNDc4LS41OC41NS0xLjE2Mi41NS0xLjQ1NlYyLjcyN2gtLjQ1NGMtLjU5LjQyLTEuNzE1Ljk5Ni0zLjE2LjY0QzEwLjcgMi43NSA5Ljk4Mi41ODggOS45ODIuNTg4UzkuMjY4IDIuNzUgNi43NiAzLjM2NWMtMS40NS4zNTctMi41NzQtLjIyLTMuMTYyLS42NGgtLjQ1MnYxMS42NDhjMCAuMjkzLjA3Mi44NzUuNTUgMS40NTYuNTkuNzEzIDEuNTkgMS4xOCAyLjk3NCAxLjM4MiAxLjEwMy4xNTggMS45MTcuNTA1IDIuNDkyIDEuMDU4LjQyMi40MDYuODIgMS4xMS44MiAxLjExIi8+PHBhdGggZmlsbD0iIzAxMzc2OSIgZD0iTTE2LjQxMyAzLjE4MnMtMS4zNzMgMS4wNjYtMy4zMDMuNTgzYy0yLjI1Mi0uNTYyLTMuMTI3LTIuMjUtMy4xMjctMi4yNXMtLjg3NCAxLjY4OC0zLjEyNSAyLjI1Yy0xLjkzLjQ4My0zLjMwMi0uNTgzLTMuMzAyLS41ODN2MTEuMTkyYzAgLjM4LjE2IDEuOTk1IDMuMTcyIDIuNDMyIDEuMTkuMTcyIDIuMDguNTU1IDIuNzIgMS4xNy4yMjguMjE4LjQwMy40NC41MzYuNjUuMTMzLS4yMS4zMDgtLjQzMi41NC0uNjUuNjM2LS42MTUgMS41MjUtLjk5OCAyLjcxNC0xLjE3IDMuMDE1LS40MzYgMy4xNzQtMi4wNSAzLjE3NC0yLjQzMlYzLjE4MnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNOS45ODMgMTcuNDg2cy44NzUtMS4wOCAzLjE0Ni0xLjQzMmMyLjYwMy0uNCAyLjUyNi0xLjYyMiAyLjUyNi0xLjY4M1Y4LjUxTDQuMzEgOC41MXY1Ljg2YzAgLjA2My0uMDc1IDEuMjg1IDIuNTI3IDEuNjg1IDIuMjcyLjM1IDMuMTQ2IDEuNDMgMy4xNDYgMS40MyIvPjxwYXRoIGZpbGw9IiNENTBBMEEiIGQ9Ik03LjMzOCAxMi43OTN2LTIuNzg2bC0uMzUtLjE5N3YtLjcyNWgxLjU5NHYuNzI1bC0uMzMzLjE5N3Y1LjY4NmwtLjg1My0uMjU1LTEuMjMtMy42MzN2Mi4zOTNsLjM5LjN2Ljc0bC0xLjcxLS40MzZ2LS42MjdsLjM5LS4xNTZ2LTQuMDFsLS40LS4ydi0uNzI1aDEuMjk1TTEwLjI3MyAxNS4zNDRsLjM0LjQwN3YuNzI1bC0xLjY5My0uNjMzdi0uNjEzbC4zNzUtLjE1NnYtNS4wNjdsLS4zNzItLjE5di0uNzMyaDIuOTR2MS40NzNoLS42NDdsLS4xOTUtLjYwNGgtLjc0N3YxLjdoLjU2bC4yMi0uMzJoLjQ1MnYxLjUxaC0uNDVsLS4yMTQtLjMwNmgtLjU2N00xMi4xNDMgMTUuNTk4di0uNzIzbC40Mi0uMzQ1di00LjUyM2wtLjM2LS4xOXYtLjczMmgxLjY5M3YuNzMzbC0uMzMuMTl2NC4yNDJsLjcyOC0uMTk2LjEzNy0xLjExMmguN3YxLjg2Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQuNjA1IDcuMzA4bC0uNTEyLS4zODVoLjYyOGwuMjA3LS41OTMuMjA4LjU5M2guNjI2bC0uNTEuMzg1LjE4Ny42MDUtLjUxLS4zNTgtLjUxLjM1OE02LjgzMyA3LjMwOGwtLjUxNS0uMzg1aC42MjhsLjIwNy0uNTkzLjIwOC41OTNoLjYyN2wtLjUxMy4zODUuMTkuNjA1LS41MS0uMzU4LS41MS4zNThNNC42MDUgNS4zbC0uNTEyLS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI2bC0uNTEuMzg1LjE4Ny42MDQtLjUxLS4zNi0uNTEuMzZNNi44MzMgNS4zbC0uNTE1LS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI3bC0uNTEzLjM4NS4xOS42MDQtLjUxLS4zNi0uNTEuMzZNMTUuNTUgNy45MTNsLS41MS0uMzU4LS41MS4zNTguMTktLjYwNS0uNTEyLS4zODVoLjYyNmwuMjA2LS41OTMuMjEuNTkzaC42MjZsLS41MTUuMzg1TTEzLjMyNiA3LjkxM2wtLjUxLS4zNTgtLjUxLjM1OC4xODctLjYwNS0uNTE0LS4zODVoLjYyNmwuMjEtLjU5My4yMDYuNTkzaC42MjdsLS41MTUuMzg1TTE1LjU1IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xOS0uNjAzLS41MTItLjM4NGguNjI2bC4yMDYtLjU5NC4yMS41OTRoLjYyNmwtLjUxNS4zODVNMTMuMzI2IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xODctLjYwMy0uNTE0LS4zODRoLjYyNmwuMjEtLjU5NC4yMDYuNTk0aC42MjdsLS41MTUuMzg1TTEwLjQ3MiA0Ljg2M2MtLjIyOC0uMTg3LS40ODUtLjMxLS43NTctLjM2OC4wNjUtLjA2My4xMzQtLjExNS4xOTItLjE2NC4zNC4wOC41Ny4yMzQuNzI1LjM2NS0uMDU1LjA1NS0uMTEuMTEyLS4xNi4xNjhtLS4zMy40Yy0uMjE3LS4xODctLjQ4LS4zMi0uNzgzLS4zOC4wNDUtLjA2LjEtLjEyNC4xNS0uMTguMjMuMDQuNTIyLjE2Ljc4LjM3LS4wNTMuMDY0LS4xMDIuMTI2LS4xNDguMTltLS4yOTYuNDE1Yy0uMjM1LS4xOTctLjUwOC0uMzE3LS43NzgtLjM3IDAgMCAuMDgyLS4xMzMuMTI4LS4yMDIuMzMuMDY1LjU5Ny4yMTguNzgyLjM3Ny0uMDQ3LjA2Ny0uMDkyLjEzMi0uMTMyLjE5NW0xLjU1Mi0xLjk5cy0uMjY3LjE0LS42MzcuNTAyYy4wODQuMDUuMTc4LjExNS4yMzIuMTYtLjA1Ny4wNS0uMTEzLjEwNC0uMTY3LjE1NC0uMjQtLjE5OC0uNDkyLS4zLS42ODUtLjM0OC4wNjQtLjA0NS4xMzMtLjA5Mi4yLS4xMzMuMTA0LjAyNC4yMDcuMDY3LjIwNy4wNjcuNDE4LS4zMi43OC0uNDU3Ljc4LS40NTdzLS4wNDItLjAyLS4xNTMtLjAyYy0xLjY0OC4wMjItMy4xNjUgMS4yNS0yLjg4IDMuMzU2LjAzNC4yMi4xMi42MjguMjMuODA1LjAzOC0uMzUuMTctMS4xMjQuNTYtMS45NTYtLjEzNy0uMDUtLjI1LS4wNy0uMjUtLjA3LjA0LS4wODMuMDk2LS4xOS4wOTYtLjE5LjI4OC4wNTUuNTQyLjE3Ny43NjQuMzUtLjA1Mi4wODYtLjA4OC4xNC0uMTE0LjE4OC0uMDgtLjA2My0uMTU3LS4xMTQtLjI0Mi0uMTYzLS40NC43NjctLjY0NCAxLjQ5My0uNzI4IDEuODcyLjAwNi4wMjIuMDUzLjAzNi4wOTMuMDMgMS44MDQtLjIzNSAyLjY1LTEuMTU0IDIuOTA1LTIuMTUyLjE3LS42NTQuMTE0LTEuMzM3LS4xMTItMS44OTYtLjAxNi0uMDQtLjA0Ni0uMTA1LS4wOTgtLjEiLz48L3N2Zz4=");background-repeat:no-repeat;position:absolute;width:20px;height:20px;margin:-2px 0 0 10px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE1IDI5LjA5MnMuNjI0LTEuMDggMS4yMzQtMS42NjhjLjg2Mi0uODI3IDIuMDg0LTEuMzQ2IDMuNzM2LTEuNTg0IDIuMDczLS4zIDMuNTc2LTEgNC40NjMtMi4wNzIuNzE1LS44NzIuODIzLTEuNzQuODI1LTIuMTg0VjQuMTE0aC0uNjgzYy0uODguNjMtMi41NjggMS40OTMtNC43MzguOTU4QzE2LjA3NSA0LjE0OCAxNSAuOTA2IDE1IC45MDZzLTEuMDc2IDMuMjQtNC44MzcgNC4xNjZjLTIuMTczLjUzNS0zLjg2LS4zMy00Ljc0Mi0uOTZoLS42Nzh2MTcuNDcyYzAgLjQ0LjEwOCAxLjMxMi44MjUgMi4xODQuODg1IDEuMDcyIDIuMzg2IDEuNzcgNC40NiAyLjA3MiAxLjY1NS4yMzggMi44NzYuNzU3IDMuNzM4IDEuNTg4LjYzMy42MDggMS4yMzQgMS42NjQgMS4yMzQgMS42NjQiLz48cGF0aCBmaWxsPSIjMDEzNzY5IiBkPSJNMjQuNjQgNC43OTZzLTIuMDU2IDEuNi00Ljk1Ljg3NUMxNi4zMSA0LjgzIDE1IDIuMjk4IDE1IDIuMjk4cy0xLjMxMiAyLjUzLTQuNjkgMy4zNzRjLTIuODk3LjcyNS00Ljk1My0uODc0LTQuOTUzLS44NzR2MTYuNzg4YzAgLjU3LjI0IDIuOTkzIDQuNzU4IDMuNjQ2IDEuNzg2LjI2IDMuMTIuODMyIDQuMDc4IDEuNzU0LjM0NC4zMy42MDYuNjY2LjgwNS45NzguMi0uMzEyLjQ2LS42NDguODA4LS45NzguOTU2LS45MjIgMi4yOS0xLjQ5NCA0LjA3NC0xLjc1NCA0LjUyLS42NTIgNC43Ni0zLjA3NiA0Ljc2LTMuNjQ2VjQuNzk2eiIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNSAyNi4yNTNzMS4zMS0xLjYyMiA0LjcyLTIuMTQ3YzMuOTAzLS42IDMuNzg4LTIuNDMzIDMuNzg4LTIuNTI1di04Ljc5NGwtMTcuMDIuMDAydjguNzkyYzAgLjA5My0uMTEyIDEuOTI1IDMuNzkgMi41MjUgMy40MS41MjYgNC43MiAyLjE0OCA0LjcyIDIuMTQ4Ii8+PHBhdGggZmlsbD0iI0Q1MEEwQSIgZD0iTTExLjAzIDE5LjIxM3YtNC4xOGwtLjUyMy0uMjk1VjEzLjY1aDIuMzl2MS4wODhsLS41LjI5NXY4LjUzbC0xLjI3OC0uMzg0LTEuODQ3LTUuNDV2My41OWwuNTg2LjQ1MnYxLjExbC0yLjU2NS0uNjU3di0uOTRsLjU4Ni0uMjMydi02LjAxNWwtLjYtLjNWMTMuNjVoMS45NE0xNS40MzIgMjMuMDM4bC41MS42MXYxLjA4NmwtMi41MzgtLjk0OHYtLjkybC41Ni0uMjN2LTcuNjAzbC0uNTU2LS4yODN2LTEuMWg0LjQwOHYyLjIxaC0uOTY4bC0uMjk1LS45MDdoLTEuMTJ2Mi41NTJoLjg0bC4zMy0uNDg0aC42Nzd2Mi4yN2gtLjY3NmwtLjMyLS40NmgtLjg1Mk0xOC4yMzYgMjMuNDJ2LTEuMDg1bC42My0uNTE3di02Ljc4NWwtLjU0LS4yODN2LTEuMWgyLjU0MnYxLjFsLS40OTcuMjgzdjYuMzY0bDEuMDkzLS4yOTMuMjA3LTEuNjdoMS4wNXYyLjc5Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuOTMyIDEwLjk4NmwtLjc3LS41OGguOTQybC4zMS0uODg4LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNy0uNzY3LS41MzctLjc2NC41MzdNMTAuMjcyIDEwLjk4NmwtLjc3LS41OGguOTRsLjMxLS44ODguMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA3LS43NjctLjUzNy0uNzY0LjUzN002LjkzMiA3Ljk3NWwtLjc3LS41NzhoLjk0MmwuMzEtLjg5LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNS0uNzY3LS41NC0uNzY0LjU0TTEwLjI3MiA3Ljk3NWwtLjc3LS41NzhoLjk0bC4zMS0uODkuMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA1LS43NjctLjU0LS43NjQuNTRNMjMuMzQ4IDExLjg5M2wtLjc2NC0uNTM4LS43NjYuNTM4LjI4NC0uOTA3LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDExLjg5M2wtLjc2NC0uNTM4LS43NjcuNTM4LjI4NC0uOTA3LS43NzItLjU3OGguOTRsLjMxNC0uODkuMzEuODloLjk0bC0uNzcuNTc4TTIzLjM0OCA4Ljg4bC0uNzY0LS41NC0uNzY2LjU0LjI4NC0uOTA1LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDguODhsLS43NjQtLjU0LS43NjcuNTQuMjg0LS45MDUtLjc3Mi0uNTc4aC45NGwuMzE0LS44OS4zMS44OWguOTRsLS43Ny41NzhNMTUuNzMgNy4zMThjLS4zNDItLjI4LS43MjctLjQ2NC0xLjEzNS0uNTUyLjEtLjA5NC4yMDItLjE3Mi4yODgtLjI0Ny41MS4xMi44NTQuMzUgMS4wODguNTQ1LS4wOC4wODQtLjE2My4xNy0uMjQuMjUzbS0uNDkzLjU5OGMtLjMyNy0uMjgtLjcyNC0uNDgtMS4xNzUtLjU3LjA3LS4wODguMTUtLjE4NS4yMjgtLjI3LjM0My4wNi43ODIuMjQgMS4xNjcuNTU3LS4wOC4wOTYtLjE1Mi4xOS0uMjIuMjgzbS0uNDQ1LjYyNGMtLjM1My0uMjk1LS43NjMtLjQ3NS0xLjE2Ni0uNTUzIDAgMCAuMTIyLS4yMDIuMTkzLS4zMDQuNDkuMDk2Ljg5My4zMjcgMS4xNy41NjQtLjA3LjEtLjEzOC4yLS4xOTguMjkzbTIuMzI4LTIuOTgzcy0uNC4yMDgtLjk1Ni43NTNjLjEyNi4wNzQuMjY4LjE3LjM0OC4yNC0uMDg1LjA3Mi0uMTcuMTU0LS4yNS4yMy0uMzYtLjMtLjczOC0uNDUtMS4wMy0uNTIzLjA5Ny0uMDY3LjItLjEzOC4zMDItLjIuMTU2LjAzNy4zMS4xLjMxLjEuNjI3LS40NzggMS4xNy0uNjg2IDEuMTctLjY4NnMtLjA2Mi0uMDMtLjIzLS4wMjhjLTIuNDcuMDMzLTQuNzQ2IDEuODc2LTQuMzE4IDUuMDM0LjA0OC4zMzQuMTc2Ljk0NC4zNDMgMS4yMS4wNTQtLjUyNi4yNTItMS42ODcuODM4LTIuOTM0LS4yMDUtLjA3My0uMzc1LS4xMDMtLjM3NS0uMTAzLjA2Mi0uMTI3LjE0NS0uMjg2LjE0NS0uMjg2LjQzMy4wODIuODE0LjI2NSAxLjE0Ni41MjUtLjA3OC4xMjctLjEzMy4yMS0uMTcuMjgtLjExOC0uMDk0LS4yMzYtLjE3LS4zNjQtLjI0NC0uNjYgMS4xNS0uOTY1IDIuMjQtMS4wOSAyLjgwOC4wMDguMDM0LjA3OC4wNTMuMTM4LjA0NSAyLjcwNi0uMzUzIDMuOTczLTEuNzMgNC4zNTgtMy4yMy4yNTMtLjk4LjE3Mi0yLjAwNS0uMTY4LTIuODQ0LS4wMjQtLjA1Ny0uMDctLjE1Ni0uMTQ4LS4xNSIvPjwvc3ZnPg==");background-repeat:no-repeat;width:30px;height:30px}.yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwOS44OTYiIGhlaWdodD0iMTMuOTc4Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xMDkuODk2IDEuMDI1bC0zLjY3OCAxMi45NWgtNS41OThsMS41NC01LjQ0Ny0zLjgyMyA0Ljc0MmgtMS44MjJsLTIuMTgtOC4zNWgtNC4zNmwuODktMy44OTZoOC4zMmwuODggNS4xMzggNC4yMzQtNS4xMzV2LS4wMDNoNS41OTV6TTg3LjEzIDEwLjIyYy0uNTY2IDEuODItMi41NTMgMy43NTUtNC40MTQgMy43NTVINzQuNDFjLTEuODYgMC0yLjkyLTEuOTM0LTIuMzU0LTMuNzU1bDEuMzI3LTQuMjc3aDUuODk0TDc3Ljk3IDkuODM3aDMuMjNsMS42Ni00Ljg4NmgtOS4xMmMuNjctMS42OSAyLjYyOC0zLjkyNSA0LjM5NC0zLjkyNWg4LjMwNmMxLjg2IDAgMi44NCAyLjI3IDIuMjc0IDQuMDlMODcuMTMgMTAuMjJ6TTcxLjM1MiA2LjY0Nkg2Ni4yNGwuNTY1LTEuNjc0aC0yLjczbC0xLjY1MyA0Ljg1aDIuNzNsLjQxMi0uOTI0aDUuMDg0bC0uNzYgMi40MjZjLS41NjYgMS44Mi0yLjIxNSAyLjY1LTQuMDc2IDIuNjVoLTYuNDdjLTEuODYgMC0yLjkyLTEuOTMzLTIuMzU0LTMuNzU0bDEuNTg0LTUuMTA1Yy41NjYtMS44MiAyLjA0LTQuMDkgNC43MTctNC4wOWg2LjA1NWMyLjAyNyAwIDMuMDQ1IDIuNDYgMi40OTYgNC4xODhsLS40OSAxLjQzM3ptLTIxLjY2IDcuMzNsMS4xNTUtNC45OThoNC41MUw1NC4yIDEzLjk3NmgtNC41MDh6bS01LjE3NS00Ljk5OGg0LjUwOGwtMS4xNTYgNC45OThoLS4zNDd2LjAwMmgtOC40OXYtLjAwNEgzNS4wM0wzOC4zNzYgMi42NWgtMS4zNGwuODEtMi42M2gxLjM0Vi4wMTZoNi40N0w0Mi4yNzYgMTFoMS43M2wuNTEyLTIuMDIyem0tOS4zNC00LjMxN2gtNC41OWwuNDIzLTEuNjYzaC0xMEwyMS42NDUuMDJoMTQuNjZsLS4wMS4wNDJoLjA0M2wtMS4xNiA0LjZ6TTEyLjI1IDEzLjk3Nkg3LjUwNEw2LjIxNiAyLjY1aC00LjE5bC44MS0yLjYzaDMuMDdWLjAxNmg2LjE0TDEzLjI2IDEwLjI2IDE2LjQwOC4wMTVoMy44MzhsLTQuMTU4IDEzLjk2SDEyLjI1ek01LjI5MyAzLjY3TDUuNiA2LjgzNGwtMi4xMjYgNy4xNEguMDJMMy4xMzUgMy42NjhoMi4xNTh6bTIyLjQ4LjMyNmwtLjY0MiAyLjQ2aDUuMThMMzEuNyA4Ljk5aC01LjM2bC0xLjUzMiA0Ljk4NWgtNi4wNDNsMy4wMS05Ljk4aDUuOTk4em02NS40OCAxLjg3N2wxLjAyIDQuMzg1LTEuMDAyIDMuNzE4aC00LjczNWwyLjM1Mi04LjEwM2gyLjM2NXoiLz48L3N3aXRjaD48L3N2Zz4=");background-repeat:no-repeat;width:110px;height:14px;display:block;position:absolute;margin-left:40px;margin-top:2px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE1Ny4wNDIiIGhlaWdodD0iMjAuMDE1Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xNTYuOTYgMS44NzdsLTUuMjU1IDE4LjEyNmgtNy45OTJsMi4xOTgtNy4zODQtNS40NiA2LjM0aC0yLjZsLTMuMTE0LTExLjgzaC02LjIyN2wxLjI3LTUuMjUyaDExLjg4bDEuMjU3IDcuMjUgNi4wNDctNy4yNDZ2LS4wMDVoNy45OTV6bS0zMi41MTMgMTMuMjRjLS44MDggMi42ODgtMy42NDUgNC44ODctNi4zMDIgNC44ODdoLTExLjg2Yy0yLjY2IDAtNC4xNzItMi4yLTMuMzY0LTQuODg3bDEuODk4LTYuMzEyaDguNDE2bC0xLjg2NiA1Ljc0N2g0LjYxbDIuMzc1LTcuMzc2aC0xMy4wMjZjLjk1OC0yLjUgMy43NTItNS4yOTggNi4yNzUtNS4yOThoMTEuODZjMi42NTcgMCA0LjA1NiAzLjAxOCAzLjI0NyA1LjcwNWwtMi4yNjQgNy41MzR6bS0yMi41My01LjI3NmgtNy4zMDJsLjgwOC0yLjYzMmgtMy45bC0yLjM2IDcuMzIyaDMuOWwuNTg3LTEuMzY1aDcuMjZsLTEuMDg0IDMuNThjLS44MSAyLjY4OC0zLjE2MyAzLjI1OC01LjgyIDMuMjU4aC05LjI0Yy0yLjY1NiAwLTQuMTctMi4yLTMuMzYyLTQuODg3bDIuMjY0LTcuNTMzYy44MDgtMi42ODggMi45MS01LjcwNSA2LjczNS01LjcwNWg4LjY1YzIuODkzIDAgNC4zNDggMy4zIDMuNTYyIDUuODVsLS42OTggMi4xMTN6TTcwLjk4NSAyMC4wMDdsMS42NS02LjcyMmg2LjQ0bC0xLjY1MiA2LjcyMmgtNi40Mzh6bS03LjM5LTYuNzJoNi40MzhsLTEuNjUgNi43MmgtLjQ5NXYuMDAzSDU1Ljc2NnYtLjAwN2gtNS43Mmw0Ljc4LTE2LjA1OGgtMS45MTJMNTQuMDcuMDY1aDEuOTFsLjAwNC0uMDFoOS4yMzhMNjAuMzk2IDE2LjI3aDIuNDY3bC43MzItMi45ODR6TTUwLjI1OCA2LjkxMkg0My43bC43MjQtMi45N2gtMTQuNjVMMzAuOTMuMDY3aDIwLjkzNmwtLjAxNC4wNmguMDZMNTAuMjYgNi45MTR6TTE3LjUxOCAyMGgtNi43ODJMOC45IDMuOTQ1SDIuOTE1TDQuMDcuMDY1aDQuMzg2di0uMDFoOC43N2wxLjcyOCAxNS4xMiA0LjUtMTUuMTJoNS40OGwtNS45NCAxOS45NDZoLTUuNDc3ek03LjU3OCA1LjQ1bC40NCA0LjY3My0zLjAzNyA5Ljg4SC4wNTNMNC40OTYgNS40NUg3LjU4em0zMi4zNDYtLjI3OGwtMS4yMTcgNC4wMzJoNy4zOTdsLS44NzMgMy43NGgtNy42NUwzNS40NSAyMGgtOC42M2w0LjQ3Ni0xNC44MjhoOC42M3ptOTMuMjY0IDMuNTNsMS40NTcgNi40Ny0xLjQzIDQuODMyaC02Ljc2NEwxMjkuODEgOC43aDMuMzh6Ii8+PC9zd2l0Y2g+PC9zdmc+");background-repeat:no-repeat;margin-left:50px;margin-top:2px;width:157px;height:20px}div.yvp-agegate-container{width:100%;height:100%;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;position:absolute;background-color:#000;z-index:25}.yvp-agegate-container .yvp-agegate-info-wrapper{padding:5%}.yvp-agegate-info-wrapper{position:absolute;top:0}.yvp-agegate-container .yvp-agegate-title{font-size:20px;font-weight:normal;padding-bottom:2%;margin-bottom:2%;border-bottom:2px solid #5f33ff}.yvp-agegate-container.small .yvp-agegate-title{font-size:12px}.yvp-agegate-container.small .yvp-agegate-desc{font-size:10px}.yvp-agegate-container .yvp-agegate-action-wrapper{margin-top:4%}.yvp-agegate-container .yvp-agegate-date-input,p.yvp-agegate-input{display:inline}.yvp-agegate-container .yvp-agegate-date-input /*input*/{width:51px;border:none;color:#fff;height:31px;margin:0 8px 0 0;text-align:center;border-radius:0;background-color:rgba(204,204,204,0.7)}input.yvp-agegate-date-input.validate-error{border:1px solid #cc4a4a}.yvp-agegate-container.small .yvp-agegate-date-input /*input*/{height:27px;font-size:14px}.yvp-agegate-container.xsmall .yvp-agegate-date-input /*input*/{width:40px;height:22px;font-size:12px}.yvp-agegate-container .yvp-agegate-btn{padding:8px 20px;background-color:rgba(95,51,255,0.6);border:none;outline:none;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;font-size:14px;cursor:pointer}.yvp-agegate-container.small .yvp-agegate-btn{padding:6px 11px;font-size:10px}.yvp-agegate-container.gatebday.narrow .yvp-agegate-btn{display:block;margin-top:8px}.yvp-agegate-container.gatebday.narrow.xsmall .yvp-agegate-btn{padding:7px 11px;display:inline-block;margin-top:0}.yvp-agegate-container .yvp-agegate-btn.disable{display:none}.yvp-agegate-container .yvp-agegate-icon{position:absolute;right:20px;bottom:20px;background-size:100%;display:inline-block;zoom:1}.yvp-agegate-container.small .yvp-agegate-icon{height:116px;width:116px}.yvp-agegate-container.xsmall .yvp-agegate-icon{display:none}.yvp-agegate-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTQiIGhlaWdodD0iMTU0IiB2aWV3Qm94PSItMSAtMSAxNTQgMTU0Ij48cGF0aCBmaWxsPSIjNzQ1NEZGIiBkPSJNNzYuMjIgMmMxOS43MDcgMCAzOC4yMzQgNy42NzUgNTIuMTcgMjEuNjFDMTQyLjMyNSAzNy41NDUgMTUwIDU2LjA3NCAxNTAgNzUuNzhjMCAxOS43MS03LjY3NSAzOC4yMzUtMjEuNjEgNTIuMTctMTMuOTM2IDEzLjkzNi0zMi40NjMgMjEuNjEtNTIuMTcgMjEuNjEtMTkuNzA2IDAtMzguMjM0LTcuNjc2LTUyLjE3LTIxLjYxUzIuNDQgOTUuNDg4IDIuNDQgNzUuNzhzNy42NzQtMzguMjM0IDIxLjYxLTUyLjE3QzM3Ljk4MyA5LjY3NSA1Ni41MSAyIDc2LjIyIDJtMC0yQzU2LjgyNiAwIDM3LjQzMiA3LjQgMjIuNjM1IDIyLjE5NmMtMjkuNTk0IDI5LjU5NC0yOS41OTQgNzcuNTc2IDAgMTA3LjE2OCAxNC43OTcgMTQuNzk4IDM0LjE5IDIyLjE5NiA1My41ODQgMjIuMTk2czM4Ljc4Ni03LjM5OCA1My41ODMtMjIuMTk2YzI5LjU5Ni0yOS41OTMgMjkuNTk2LTc3LjU3NCAwLTEwNy4xNjhDMTE1LjAwNyA3LjQgOTUuNjEzIDAgNzYuMjIgMHoiIG9wYWNpdHk9Ii43Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzQ1NEZGIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTc1Ljk3NSAxMTIuMDF2MTIuMDA2TTc1LjcgOTYuNjA0VjMxLjY4NyIvPjwvc3ZnPg==");height:43%;width:24%}.yvp-agegate-back-image{opacity:.4;display:block;width:100%;height:auto}.yvp-start-screen{z-index:21;}.yvp-start-screen .yvp-start-screen-image{display:block;width:100%;height:auto}.yvp-start-screen .yvp-start-screen-provider{font-size:91%;font-weight:normal;margin-bottom:5px}.yvp-start-screen .yvp-start-screen-title{font-weight:bold;font-size:100%;margin-bottom:3px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-description{-webkit-font-smoothing:antialiased;font-weight:200;font-size:85%;letter-spacing:.07em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-bar-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yvp-start-screen:hover .yvp-start-screen-bar-wrapper{background-color:rgba(0,0,0,0.4)}.yvp-start-screen .yvp-start-screen-bar{position:absolute;width:96%;min-height:30px;max-height:70px;bottom:0;color:#fff;overflow:hidden;padding:10px 2%;text-shadow:#000 0 1px 3px;background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:linear-gradient(top, transparent, rgba(0,0,0,0.7))}.yvp-start-screen .yvp-start-screen-button{position:absolute;left:50%;top:50%;width:90px;height:90px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjIuMDY2JSIgeTE9Ijk2Ljc1MSUiIHgyPSI5NS42NTklIiB5Mj0iMi45NjklIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iIzZEMDBGNiIgb2Zmc2V0PSIwJSIvPjxzdG9wIHN0b3AtY29sb3I9IiMwMDNBQkMiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEyLjY3NiA3Ny4zNzZjMy45ODMgMy42MDggOC42NjcgNi4yOCAxNC4wMjcgOC4wMTdDMzIuMDc4IDg3LjEyNSAzNy44OSA4OCA0NC4xNjMgODhjNi4xNjQgMCAxMS45MzQtLjg3NSAxNy4yOTYtMi42MDcgMi4xNTQtLjY5NCA0LjE4Ni0xLjU0NyA2LjExNi0yLjU0MyAyLjg4NC0xLjQ5IDUuNTMtMy4zMTIgNy45MTYtNS40NzQgMy45OS0zLjYwNyA3LjA5Ny04LjE4MyA5LjMzLTEzLjcwN0M4Ny4wNSA1OC4xMzYgODguMTY4IDUxLjU4IDg4LjE2OCA0NGMwLTcuNTg2LTEuMTE4LTE0LjE0LTMuMzQ2LTE5LjY3LTIuMjMzLTUuNTMtNS4zNC0xMC4xLTkuMzMtMTMuNzA1LTMuOTg1LTMuNjE3LTguNjYtNi4yODUtMTQuMDMzLTguMDJDNTYuMDk2Ljg3IDUwLjMyNiAwIDQ0LjE2MiAwYy02LjI3MyAwLTEyLjA4NS44NjgtMTcuNDYgMi42MDYtMS43NDMuNTYtMy40MTIgMS4yMzYtNS4wMSAyLjAwNS0zLjMyIDEuNTgzLTYuMzMgMy41NzgtOS4wMTcgNi4wMTVDOC42ODggMTQuMjMgNS41NzggMTguOCAzLjM0NiAyNC4zMyAxLjExNiAyOS44NiAwIDM2LjQxNCAwIDQ0YzAgNy41ODIgMS4xMTcgMTQuMTM3IDMuMzQ2IDE5LjY3IDIuMjMyIDUuNTIzIDUuMzQyIDEwLjEgOS4zMyAxMy43MDZ6IiBmaWxsLW9wYWNpdHk9Ii42NSIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0zNi43MyA1OWgtLjA2NmMtLjkyIDAtMS42NjQtLjc0Mi0xLjY2NC0xLjY1NlYzMC42NTZjMC0uOTE1Ljc0LTEuNjU2IDEuNjY0LTEuNjU2LjAzIDAgLjA2IDAgLjA5LjAwMi4zOC0uMDczLjc4OC0uMDE0IDEuMTUyLjE5NmwyMi42MjIgMTMuMDZjLjc5OC40NiAxLjA3NSAxLjQ3NC42MTMgMi4yNzYtLjAyMy4wNC0uMDQ4LjA4LS4wNzUuMTE4LS4xMzcuMjctLjM1LjUwMy0uNjMuNjdsLTIyLjQ0IDEzLjQ4NGMtLjM5NS4yNC0uODUuMjk1LTEuMjY1LjE5M3oiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");background-color:transparent;background-position:50% 50%;background-repeat:no-repeat;background-size:100%;border-radius:0;margin:-45px 0 0 -45px}div.yvp-feedback-btn{position:absolute;background:#7f6af6;color:#fff;font-size:11px;font-weight:100;padding:3px;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.8;}div.yvp-feedback-btn:hover{opacity:1}.yvp-browser-mobile div.yvp-feedback-btn{font-size:10px}.yvp-end-screen{position:absolute;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#fff;text-align:center;box-sizing:border-box;}.yvp-end-screen.yvp-replay-only .yvp-metadata{display:none}.yvp-error-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTQiIGhlaWdodD0iMTU0IiB2aWV3Qm94PSItMSAtMSAxNTQgMTU0Ij48ZyBmaWxsPSJub25lIiBzdHJva2U9IiM3NDU0RkYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJNMTEyLjc5NSA0MC40MTNsLTYyLjg1NyA2Mi44OE01MS43NDQgMTAxLjQ5bC0xMS4xIDExLjE1NiIvPjwvZz48ZyBmaWxsPSJub25lIiBzdHJva2U9IiM3NDU0RkYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJNMTEyLjg0IDExMi42MDdMNDkuOTYgNDkuNzVNNTEuNzY2IDUxLjU2TDQwLjYwNCA0MC40NTUiLz48L2c+PHBhdGggZmlsbD0iIzc0NTRGRiIgZD0iTTc2LjIyIDJjMTkuNzA3IDAgMzguMjM0IDcuNjc1IDUyLjE3IDIxLjYxQzE0Mi4zMjUgMzcuNTQ1IDE1MCA1Ni4wNzQgMTUwIDc1Ljc4YzAgMTkuNzEtNy42NzUgMzguMjM1LTIxLjYxIDUyLjE3LTEzLjkzNiAxMy45MzYtMzIuNDYzIDIxLjYxLTUyLjE3IDIxLjYxLTE5LjcwNiAwLTM4LjIzNC03LjY3Ni01Mi4xNy0yMS42MVMyLjQ0IDk1LjQ4OCAyLjQ0IDc1Ljc4czcuNjc0LTM4LjIzNCAyMS42MS01Mi4xN0MzNy45ODMgOS42NzUgNTYuNTEgMiA3Ni4yMiAybTAtMkM1Ni44MjYgMCAzNy40MzIgNy40IDIyLjYzNSAyMi4xOTZjLTI5LjU5NCAyOS41OTQtMjkuNTk0IDc3LjU3NiAwIDEwNy4xNjggMTQuNzk3IDE0Ljc5OCAzNC4xOSAyMi4xOTYgNTMuNTg0IDIyLjE5NnMzOC43ODYtNy4zOTggNTMuNTgzLTIyLjE5NmMyOS41OTYtMjkuNTkzIDI5LjU5Ni03Ny41NzQgMC0xMDcuMTY4QzExNS4wMDcgNy40IDk1LjYxMyAwIDc2LjIyIDB6IiBvcGFjaXR5PSIuNyIvPjwvc3ZnPg==")}.yvp-error-screen{position:absolute;width:100%;height:100%;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-weight:normal;}.yvp-error-screen .yvp-error-screen-image{position:absolute;display:block;width:100%;height:100%}.yvp-error-screen .yvp-error-screen-background{position:absolute;height:100%;width:100%;background-image:-webkit-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:-o-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:linear-gradient(210deg, rgba(0,0,0,0.4), #000)}.yvp-error-screen .yvp-error-title{position:relative;display:block;top:40%;width:100%;margin:0 auto;font-size:24px;text-align:center;color:#fff;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-stream .yvp-error-screen .yvp-error-title{top:15%;font-size:20px;line-height:23px}.yvp-ministream .yvp-error-screen .yvp-error-title{top:15%;font-size:15px;line-height:19px}.yvp-error-screen .yvp-error-desc{position:relative;width:368px;top:43%;margin:0 auto;font-size:16px;line-height:22px;letter-spacing:0;text-align:center;color:rgba(255,255,255,0.6);}.yvp-error-screen .yvp-error-desc a:link{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:visited{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:active{color:rgba(115,0,255,0.8)}.yvp-stream .yvp-error-screen .yvp-error-desc{top:22%;width:85%;font-size:16px;line-height:19px}.yvp-ministream .yvp-error-screen .yvp-error-desc{top:22%;width:85%;font-size:9px;line-height:12px}.yvp-error-screen .yvp-error-desc .yvp-browser-refresh{display:block;padding-top:10px}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-wrapper{display:block;padding-top:10px;background-color:transparent;cursor:pointer}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{display:block;width:30%;height:25%;margin-top:10px;background-repeat:no-repeat;}.yvp-browser-mobile .yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{visibility:hidden}.yvp-error-screen .yvp-error-code{position:absolute;bottom:5%;width:100%;display:inline-block;color:rgba(255,255,255,0.3);margin:0 auto;font-size:11px;font-weight:normal;text-align:center;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-ministream .yvp-error-screen .yvp-error-code{bottom:8px;font-size:8px;line-height:10px}.yvp-browser-mobile .yvp-error-screen .yvp-error-code{font-size:10px}.yvp-error-screen .yvp-error-feedback-btn{bottom:12%;right:5%;}.yvp-ministream .yvp-error-screen .yvp-error-feedback-btn{display:none}.yvp-error-screen .yvp-error-indicator{display:none;background-repeat:no-repeat;background-size:100%;position:absolute;bottom:15px;right:5%;padding:3px;height:46%;width:24%;opacity:0;-webkit-animation-name:fadeInOut;animation-name:fadeInOut;-webkit-animation-duration:2s;-moz-animation-duration:2s;animation-duration:2s}.yvp-opensimsim{display:none;position:absolute;z-index:100;background-color:rgba(0,0,0,0.6);width:100%;height:100%;color:rgba(255,255,255,0.8);overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-opensimsim .yvp-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-opensimsim .yvp-close-btn:hover{opacity:1}.yvp-opensimsim .yvp-opensimsim-feedback-btn{top:12px;right:6%;z-index:1;font-weight:bold;padding:5px;text-align:center;cursor:pointer}.yvp-opensimsim .yvp-opensimsim-info{font-size:10px;margin-left:20px;margin-right:20px;position:relative;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-title{color:#714fff;padding-top:20px;padding-bottom:10px}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs{width:100%;height:80px;margin-bottom:25px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph{float:left;width:150px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph div{margin-bottom:5px}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn{padding-top:20px;color:#fff;margin-bottom:20px;font-size:14px;cursor:pointer;}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn:hover{text-decoration:underline}.yvp-browser-tv .yvp-opensimsim-config{position:absolute;top:0;right:0}.yvp-feedback-screen{display:none;position:absolute;z-index:150;background-color:#000;width:100%;height:100%;color:#ccc;overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-feedback-screen .yvp-feedback-screen-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-close-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info{font-size:10px;margin-top:0;margin-right:20px;margin-left:20px;height:100%;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-title{font-size:18px;color:#ccc;display:inline-block;padding-top:10px;padding-bottom:7px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-response{color:#ccc;padding-top:20px;padding-bottom:5px;font-size:14px;margin-left:0}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-refid{color:#ccc;padding-top:0;padding-bottom:0;margin-left:0;font-size:10px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-text{box-sizing:border-box;margin-top:10px;margin-bottom:10px;overflow:auto;resize:none;width:100%;height:105px;border:1px solid #ccc;opacity:.8;padding:5px;color:#000}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-button-container{text-align:right}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn{display:inline-block;background-color:#7f6af6;color:#ccc;cursor:pointer;font-size:12px;text-align:center;padding:5px;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-disclaimer{position:absolute;bottom:10px;padding-right:10px}.yvp-ads-overlay{position:absolute;height:100%;width:100%;display:none;-webkit-transition:height .2s ease-in-out 2s;-moz-transition:height .2s ease-in-out 2s;-o-transition:height .2s ease-in-out 2s;transition:height .2s ease-in-out 2s}@-moz-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-webkit-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-o-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-ms-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}'),
Object.defineProperty(r.prototype,"currentTime",{get:function(){var e=this;return e._renderer?e._renderer.getCurrentTime():0}}),r.prototype.setDefaultRendererType=function(){var e=this;return""!==e._rendererType||M.mobile||e._model.isHtmlEnforced()||!N.isFunction(u)?!0:e.setRendererType("flash")},r.prototype.setRendererType=function(e){var t=this;if(e!==t._rendererType){t._eventBus.publish(p.RENDERER_TYPE_CHANGE,e),t._renderer&&t._renderer.detachNode&&t._renderer.detachNode(),t._rendererType=e,t._renderer=t._renderers[e];var n;if(t._renderer)t._renderer.reattachNode&&t._renderer.reattachNode();else{var r=t._model.capabilities[t._model.playbackState.rendererType];M.tv?M.tizen?t._renderer=new g(t._eventBus,r,t._profiler,t._model):M.orsay?t._renderer=new f(t._eventBus,r,t._profiler,t._model):t._renderer=new v(t._eventBus,r,t._profiler,t._model):"flash"===e?t._renderer=new u(t._eventBus,t._model,t._profiler):"dash"===e?(n=t._renderers.html,t._renderer=new _(t._eventBus,t._model)):"html5-hls"===e?t._renderer=new y(t._eventBus,t._model):(n=t._renderers.dash,t._renderer=new m(t._eventBus,r,t._profiler,t._model)),t._renderers[e]=t._renderer,n?t._renderer.create(n.node):t._mainElem.appendChild(t._renderer.create()),"flash"===e?t._renderer.detectFlashBlockers(t._mainElem):t._model.ui.showControls&&(M.iphone||M.android)&&(t._renderer.node.controls=!0),t._renderer.mode=E.VIDEO}return!t._renderer.isReady||t._renderer.isReady()}},r.prototype._onRendererTypeChange=function(e){var t=this;"flash"===e?(C.classList(t._contentElem).remove("yvp-html"),C.classList(t._contentElem).add("yvp-flash")):(C.classList(t._contentElem).remove("yvp-flash"),C.classList(t._contentElem).add("yvp-html"))},r.prototype.waitForRenderer=function(e){var t=this;t._renderer.waitForReady(function(n){n&&t._handleRendererTimeout(),e(n)})},r.prototype.didRendererTimeOut=function(){var e=this;return e._renderer&&!!e._renderer.timedOut},r.prototype.render=function(){var e=this;if(e._contentElem=C.render(O),e._mainElem=e._contentElem.querySelector(".yvp-main"),e.rootElem.appendChild(e._contentElem),C.classList(e._contentElem).add(e._viewSize),Object.keys(M).filter(function(e){return M[e]}).forEach(function(t){"os"===t&&(t=M.os),"ie"===t&&C.classList(e._contentElem).add("yvp-"+t.toLowerCase()+M[t]),C.classList(e._contentElem).add(Y+t.toLowerCase())}),N.isFunction(L)?e._loadingScreen=new I:e._model.ui.chromeless||N.isFunction(A)&&(e._loadingScreen=new A(e._eventBus)),e._loadingScreen&&e._mainElem.appendChild(e._loadingScreen.create()),e._model.ui.showControls&&!M.iphone&&!M.android){e.controls=new o(e._eventBus,e,e._model);var t=e.controls.create();t.forEach(function(t){e._mainElem.appendChild(t)})}var n=function(t){e._mouseMoveHandler()},r=function(t){e._mouseOutHandler(t)};e.bindMouseEvents=function(){e._lastMouseMoveCoordinates={},e._contentElem.addEventListener("mousemove",function(t){e._lastMouseMoveCoordinates.x!==t.clientX&&e._lastMouseMoveCoordinates.y!==t.clientY&&(n(t),e._lastMouseMoveCoordinates.x=t.clientX,e._lastMouseMoveCoordinates.y=t.clientY)}),e._contentElem.addEventListener("mouseover",n),e._contentElem.addEventListener("mouseout",r)},M.tv||M.mobile||(e.bindMouseEvents(),e.unbindMouseEvents=function(){e._contentElem.removeEventListener("mousemove",n),e._contentElem.removeEventListener("mouseover",n),e._contentElem.removeEventListener("mouseout",r)}),N.isFunction(e._handleFullscreenChange.bind)&&(e._fullscreenChangeEventHandler=e._handleFullscreenChange.bind(e),B.forEach(function(t){document.addEventListener(t,e._fullscreenChangeEventHandler)})),e._openSimSim=new b(e._model,e._eventBus,e._profiler),e._mainElem.appendChild(e._openSimSim.create()),e._easterEgg=new s(function(){e._openSimSim.render()}),e._setRendererModeClasses(E.VIDEO),M.mobile||e._model.ui.chromeless||(e.adsOverlay=new R(e._eventBus,e),e._mainElem.appendChild(e.adsOverlay.create())),e._feedbackScreen=new h(e._model,e._eventBus,e),e._settingsNode=e.getSettingsNode(),e._setContentDimensionsForPlaylist()},r.prototype.isRendererSet=function(){var e=this;return!!e._renderer},r.prototype.getRendererType=function(){var e=this;return e._rendererType},r.prototype.getContentNode=function(){var e=this;return e._contentElem},r.prototype.getOpenSimSim=function(){var e=this;return e._openSimSim},r.prototype.getMainElement=function(){var e=this;return e._mainElem},r.prototype.getVideoElement=function(){var e=this;return e.rootElem.getElementsByTagName("video")[0]},r.prototype.getCustomControlsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-custom-controls")},r.prototype.getSettingsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-settings-container")},r.prototype._setContentDimensionsForPlaylist=function(){var e=this;if(e.showPlaylist()){var t=e.getPlaylistUIPosition();switch(e._playlistUIRendered=!0,e._model.playback.continuousPlay=!0,t){case Q:var n=e.rootElem.clientHeight,r=n+H;e.rootElem.style.height=r+"px",e._contentElem.style.height=n+"px",e._contentElemPlaylistHeight=n+"px";break;case W:var i=e._mainElem.clientWidth,o=(e._contentElem.clientWidth,i-G);e._mainElem.style.width=o+"px",e._mainElemPlaylistWidth=o+"px";break;case q:}}},r.prototype._setContentHeightForNFL=function(){var e=this;setTimeout(function(){e._setContentHeight()},700)},r.prototype._setContentHeight=function(){var e=this;if(e._contentElem&&e._mainElem){var t=M.mobile?e._nflBarDimensions.MOBILE.HEIGHT:e._nflBarDimensions.DESKTOP.HEIGHT,n=e._contentElem.offsetHeight-t+"px";e._mainElem.style.height=n}},r.prototype._loadNFLBranding=function(){var e=this;if(!e._nflBranding){e._setContentHeight(),e._nflBranding=new a(e._eventBus,e,e._model);var t=e._contentElem.querySelector(".yvp-playlist-container");e._nflBrandingNode=e._nflBranding.create(),e.showPlaylist()&&e.getPlaylistUIPosition()===Q&&t?t.parentNode.insertBefore(e._nflBrandingNode,t):e._contentElem.appendChild(e._nflBrandingNode)}},r.prototype._removeNFLBranding=function(){var e=this;e._mainElem&&(e._mainElem.style.height="100%"),e._nflBranding&&(e._contentElem.removeChild(e._nflBranding.node),e._nflBranding.destroy(),e._nflBranding=null,e._nflBrandingNode=null)},r.prototype.getNFLBrandingNode=function(){var e=this;return e._nflBrandingNode},r.prototype.setKeyboardFocus=function(){var e=this;e._contentElem.focus()},r.prototype.updateViewOnEscPress=function(){var e=this;e._openSimSim&&e._openSimSim.isOpen()?e._openSimSim.close():e._feedbackScreen&&e._feedbackScreen.isOpen()?e._feedbackScreen.close():C.classList(e._contentElem).contains("yvp-show-settings")?e.toggleSettings(null,!1):e.getFullscreen()&&e.setFullscreen(!1)},r.prototype.toggleSettings=function(e,t,n){var r=this;if(e&&(r._settingBtn=e),r._settingBtn||(r._settingBtn=r._contentElem.querySelector(".yvp-setting-btn")),r._settingBtn){var i="",o=r._settingBtn.querySelector(".yvp-setting-pointer");C.classList(r._settingBtn).contains("selected")&&t!==!0||t===!1?(C.classList(r._settingsNode).remove("open"),C.classList(r._settingBtn).remove("selected"),C.classList(o).remove("open"),C.classList(r._contentElem).remove("yvp-settings-on"),i="OFF"):C.classList(r._settingBtn).contains("selected")&&t!==!0||(C.classList(r._settingsNode).add("open"),C.classList(r._settingBtn).add("selected"),C.classList(o).add("open"),C.classList(r._contentElem).add("yvp-settings-on"),i="ON"),n||r._eventBus.publish(p.CTRL_SETTINGS)}},r.prototype.disableControls=function(){var e=this;C.classList(e._contentElem).add("yvp-disable-controls")},r.prototype.enableControls=function(){var e=this;C.classList(e._contentElem).remove("yvp-disable-controls")},r.prototype._setRendererModeClasses=function(e){var t=this;Object.keys(E).forEach(function(e){C.classList(t._contentElem).remove(z+E[e])}),C.classList(t._contentElem).add(z+e)},r.prototype._handleRendererTimeout=function(){var e=this;e.syncViewState(),"flash"===e._rendererType&&(M.safari||M.firefox)&&e._setViewState(w.BLOCKED)},r.prototype.resetState=function(){var e=this;e._destroyStartScreen(),e._destroyEndScreen(),e._removeNFLBranding()},r.prototype.checkForNFLBranding=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t?t.provider:null;n&&"video.nflhighlights.com"===n.providerId&&e._loadNFLBranding()},r.prototype.syncViewState=function(){var e=this,t=e._model,n=t.playbackState,r=t.castState,i=r&&r.connected;D.log("setting view state: ",n);var o,a=e._model.playlist&&e._model.playlist.getCurrentItem();e._setFlag(k.CASTING,i),i&&(r.mediaLoaded&&!r.paused?C.classList(e._contentElem).add("yvp-cast-playing"):C.classList(e._contentElem).remove("yvp-cast-playing"));var s=C.classList(e._contentElem).contains(V+k.LOADING);switch(e._setFlag(k.LOADING,n.loading),!s&&n.loading?e._eventBus.publish(p.API.LOADING_BEGIN):s&&!n.loading&&e._eventBus.publish(p.API.LOADING_END),n.state){case T.INIT:case T.WAITING:o=w.START_SCREEN,e._nflBranding||e.checkForNFLBranding(),e._model.playback.continuousPlay&&0!==e._model.playlist.position||e._model.playback.autoplay||!a||!(a.hasThumbnail()&&!M.mobile||a.fetchFinished())||e._renderStartScreen();break;case T.VIDEO:var l,c=n.isVpaidAdPlaying();e._nflBranding||e.checkForNFLBranding(),l=c?E.VPAID:n.isAdPlaying()?E.AD:E.VIDEO,e._renderer.mode=l,e._setRendererModeClasses(l),o=w.VIDEO;var d=!n.paused;d?(e._setFlag(k.PLAYING,!0),e._setFlag(k.PAUSED,!1)):(e._setFlag(k.PLAYING,!1),e._setFlag(k.PAUSED,!0)),e._renderer.paused=!d,e._renderer.seeking=n.seeking;break;case T.END:if(e.endVideo(),e._removeNFLBranding(),n.criticalError)e._model.ui.chromeless?e._eventBus.publish(p.API.PLAYER_ERROR,n.criticalError):e._renderErrorScreen(n.criticalError,a,e._model.guid),o=w.ERROR;else{if(e.isRendererSet()){var u=a&&a.isLive();u?"html"===e._rendererType&&(e._renderer.node.src=""):e._renderer.seek(0)}e._prepEndScreen(n.previousItem),o=w.END_SCREEN}}e._currentViewState=o,e._setViewState(o),e._synchAriaState()},r.prototype.getCurrentViewState=function(){return this._currentViewState},r.prototype._setViewState=function(e){var t=this;Object.keys(w).forEach(function(e){C.classList(t._contentElem).remove(U+w[e])}),C.classList(t._contentElem).add(U+e)},r.prototype.setSelectedStreams=function(e){var t=this;t._renderer.setSelectedStreams(e)},r.prototype.play=function(e){var t=this;t._renderer.play(e)},r.prototype.pause=function(){var e=this;M.tizen||M.orsay?e._renderer.pause():e._renderer.node.pause()},r.prototype._setFlag=function(e,t){var n=this;C.classList(n._contentElem).remove(V+e),t&&C.classList(n._contentElem).add(V+e)},r.prototype.renderAgeGateScreen=function(e,t){if(e){var n=this;n._ageGateScreen=new d(n._eventBus,t),n._mainElem.appendChild(n._ageGateScreen.create(e))}},r.prototype.destroyAgeGateScreen=function(){var e=this;e._ageGateScreen&&(e._mainElem.removeChild(e._ageGateScreen.node),e._ageGateScreen.destroy(),e._ageGateScreen=null)},r.prototype._renderStartScreen=function(){var e=this,t=null,n=null,r=e._model.YVAP;if(!e._startScreen){var i=function(){n&&(n(),clearTimeout(t),n=t=null),e._renderStartScreenImpl(e._model.playlist.getCurrentItem(),e._model)};M.mobile&&r&&r.accountId&&!r.adsReady?(n=e._eventBus.subscribe(p.ADS_READY,i,e),t=setTimeout(i,1e3)):i()}},r.prototype._renderStartScreenImpl=function(e,t){var n=this;n._startScreen||(t.ui.showStartScreen&&(n._startScreen=new S(n._eventBus),n._mainElem.appendChild(n._startScreen.create(e,t))),n._eventBus.publish(p.START_SCREEN_RENDERED))},r.prototype._destroyStartScreen=function(){var e=this,t=e._startScreen&&e._startScreen.node;t&&(e._mainElem.removeChild(t),e._startScreen.destroy(),e._startScreen=null)},r.prototype._prepEndScreen=function(e){var t,n=this;n._endScreen||n.showPlaylist()||(n._model.ui.showEndScreen?n._model.ui.showReplayOnlyEndScreen||!e.relatedVideoIds||e.relatedVideoIds.length<1?n._eventBus.publish(p.FETCH_MORE_RELATED_ITEMS,e,{start:0,count:12,videoUuid:e.id},function(t,r){n._renderEndScreen(e,r)}):(t=e.relatedVideoIds.map(function(e){return n._model.mediaStore.get(e)}),n._renderEndScreen(e,t)):n._renderEndScreen(e,[]))},r.prototype._renderEndScreen=function(e,t){var n=this;if(!n._endScreen){var r=t&&t.length>0;if(n._endScreen=new l(n._eventBus,n,n._model),n._endScreen){var i=r&&!n._model.ui.showReplayOnlyEndScreen?"endscreen":"endscreen-rp";n._mainElem.appendChild(n._endScreen.create(i,e)),r&&"endscreen-rp"!==i&&n._endScreen.renderPlaylist(e,t),n._startScreen||"endscreen-rp"!==i||n._renderStartScreen()}n._eventBus.publish(p.END_SCREEN_RENDERED),n._eventBus.publish(p.API.UI_INTERACT,{srcElement:"es-view"})}},r.prototype._destroyEndScreen=function(){var e=this;e._endScreen&&(e._mainElem.removeChild(e._endScreen._node),e._endScreen.destroy(),e._endScreen=null)},r.prototype._renderErrorScreen=function(e,t,n){var r=this;if(!r._errorScreen){r._errorScreen=new c(r._eventBus);var i=t?t.images.defaultThumbnail:"",o=C.getAssetUrl(r._model.isLocal(),r._model.version,P);if(r._model.isLocal())o="assets/flash_download_logo.svg";else{var a="https:"===document.location.protocol?"https://s.yimg.com":"http://l.yimg.com";o=a+"/rx/builds/"+r._model.version+"/assets/flash_download_logo.svg"}t=t?t:r._model.playlist.getCurrentItem(),r._mainElem.appendChild(r._errorScreen.create(e,n,t.videoSession,i,o)),r._eventBus.publish(p.API.UI_INTERACT,{srcElement:"err-view-"+e.category+"-"+e.subcategory})}},r.prototype._synchAriaState=function(){var e=this;e.controls&&e.controls.syncAriaState()},r.prototype.setStreams=function(e){var t=this;return t._renderer.setStreams(e)},r.prototype.endVideo=function(){var e=this;e.isRendererSet()&&!e._renderer.ended&&(e._renderer.ended=!0,M.tizen||M.orsay?e._renderer.stop():e._renderer.node.pause())},r.prototype.seek=function(e){var t=this;t._renderer.seek(e)},r.prototype.setQuality=function(e){var t=this;t._renderer.setQuality(e)},r.prototype.setFullscreen=function(e){var t=this,n=t._contentElem,r=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen,i=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;e?(M.ios?t._renderer.node.webkitEnterFullscreen():M.android&&!t.controls?t._renderer.node.webkitEnterFullscreen():r?r.call(n):t._enterLightbox(),t._eventBus.publish(p.CTRL_FULLSCREEN,"ON")):(M.ios?t._renderer.node.webkitExitFullScreen():i?i.call(document):t._exitLightbox(),t._eventBus.publish(p.CTRL_FULLSCREEN,"OFF")),t._isFullScreen===e||r||i||(t._eventBus.publish(p.FULLSCREEN_CHANGE,e),t._isFullScreen=e),t._synchAriaState()},r.prototype._enterLightbox=function(){var e=this,t=document.querySelector("body");if(!C.classList(t).contains("yvp-lightbox")){for(var n=e._contentElem.parentNode;"BODY"!==n.nodeName;)C.classList(n).add("yvp-lightbox-ancestor"),n=n.parentNode;C.classList(t).add("yvp-lightbox")}},r.prototype._exitLightbox=function(){var e=this,t=document.querySelector("body");if(C.classList(t).contains("yvp-lightbox")){C.classList(t).remove("yvp-lightbox");for(var n=e._contentElem.parentNode;"BODY"!==n.nodeName;)C.classList(n).remove("yvp-lightbox-ancestor"),n=n.parentNode}},r.prototype.getFullscreen=function(){var e=this,t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return t===e._contentElem||C.classList(document.querySelector("body")).contains("yvp-lightbox")},r.prototype.toggleFullscreen=function(){var e=this;e.setFullscreen(!e.getFullscreen())},r.prototype.setVolume=function(e){var t=this;t._renderer.setVolume(e),t._eventBus.publish(p.API.PLAYER_VOLUME_CHANGE,e)},r.prototype._onMuteChange=function(e){var t=this;e?C.classList(t._contentElem).add("yvp-muted"):C.classList(t._contentElem).remove("yvp-muted")},r.prototype.setMute=function(e){var t=this;e=!!e,t.setVolume(e?0:t._model.playbackState.volume),t._eventBus.publish(p.API.PLAYER_MUTE_CHANGE,e)},r.prototype._mouseMoveHandler=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),C.classList(e._contentElem).remove("yvp-hide-controls"),e._objectOverlay&&C.classList(e._objectOverlay).remove("yvp-overlay-hide-cursor"),e._model.playbackState.seeking||e._model.playbackState.paused||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout)),e._eventBus.publish(p.CONTROLS_BAR_CHANGE,!0);var t=e.getFullscreen();t||e._eventBus.publish(p.CC.POSITION_FLOAT,!0)},r.prototype._mouseOutHandler=function(e){var t=this;if("mouseout"===e.type){t._autoHideControlsTimeout&&clearTimeout(t._autoHideControlsTimeout),C.classList(t._contentElem).add("yvp-hide-controls");var n=t.getFullscreen();n||t._eventBus.publish(p.CC.POSITION_FLOAT,!1)}},r.prototype._onAutoHideControls=function(){var e=this;e._objectOverlay=e._contentElem&&e._contentElem.querySelector(".yvp-object-overlay"),clearTimeout(e._autoHideControlsTimeout),e._autoHideControlsTimeout=null,C.classList(e._contentElem).add("yvp-hide-controls"),e._eventBus.publish(p.CONTROLS_BAR_CHANGE,!1)},r.prototype._onUpnextPgClick=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),e._model.playbackState.seeking||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout))},r.prototype._handleFullscreenChange=function(){var e=this,t=e.getFullscreen();t?C.classList(e._contentElem).add("yvp-state-fullscreen"):C.classList(e._contentElem).remove("yvp-state-fullscreen"),e._isFullScreen!==t&&(e._eventBus.publish(p.FULLSCREEN_CHANGE,t),e._isFullScreen=t)},r.prototype._onPlaybackProgress=function(){var e=this,t=e._model.playerDimension.width,n=e._model.playerDimension.height;(e.isStreamMode()||e.isMiniStreamMode())&&(t>j.SMALL_WIDTH||n>j.SMALL_HEIGHT)&&e._removeStreamMode(),t<j.VERY_SMALL_WIDTH||n<j.VERY_SMALL_HEIGHT?C.classList(e._contentElem).add("yvp-ministream"):(t<j.SMALL_WIDTH||n<j.SMALL_HEIGHT)&&C.classList(e._contentElem).add("yvp-stream")},r.prototype._removeStreamMode=function(){var e=this,t=e.getContentNode();C.classList(t).remove("yvp-ministream"),C.classList(t).remove("yvp-stream")},r.prototype.clearAutoHideTimeout=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout)},r.prototype.setOverlayActive=function(e){var t=this;e?C.classList(t._contentElem).add("yvp-overlay-active"):C.classList(t._contentElem).remove("yvp-overlay-active")},r.prototype.destroyFullscreenChangeListeners=function(){var e=this;e._fullscreenChangeEventHandler&&B.forEach(function(t){document.removeEventListener(t,e._fullscreenChangeEventHandler)})},r.prototype.getClientVideoDimension=function(){var e=this;return{width:e._contentElem.clientWidth,height:e._contentElem.clientHeight}},r.prototype.getCurrentTime=function(){var e=this;return e._renderer.getCurrentTime()},r.prototype.isStreamMode=function(){var e=this;return e._viewSize===x.SMALL},r.prototype.isMiniStreamMode=function(){var e=this;return e._viewSize===x.VERY_SMALL},r.prototype.stopMedia=function(){var e=this;return e._renderer.stopMedia()},r.prototype.showPlaylist=function(){var e=this,t=null,n=null,r=null;return null!==e._showPlaylist?e._showPlaylist:(r=e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0,r&&!M.mobile?(t=e.getPlaylistUIPosition(),n=e._model.uiState.width||e.rootElem.clientWidth,r=t===q&&n>=480?!0:t===Q&&n>=560?!0:t===W&&(e.rootElem.clientWidth>=860||e.rootElem._clientWidth>=860)?!0:!1):r=!1,e._showPlaylist=r,e._showPlaylist)},r.prototype.getPlaylistUIPosition=function(){var e=this;return null!==e._playlistPosition?e._playlistPosition:(e._playlistPosition=e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0&&e._model.ui.playlistUI.position,e._playlistPosition)},r.prototype._onFullScreenChange=function(e){var t=this;t.showPlaylist()&&t._handlePlaylistFullScreen(e)},r.prototype._handlePlaylistFullScreen=function(e){var t=this;(t.getPlaylistUIPosition()===Q||t.getPlaylistUIPosition()===W)&&(e===!0?t.getPlaylistUIPosition()===Q?t._contentElem.style.height="100%":t.getPlaylistUIPosition()===W&&t._mainElem.style&&t._mainElem.style&&(t._mainElem.style.width="100%",t._mainElem.style["z-index"]=1):t.getPlaylistUIPosition()===Q?t._contentElem.style.height=t._contentElemPlaylistHeight:t.getPlaylistUIPosition()===W&&(t._mainElem.style.width=t._mainElemPlaylistWidth,t._mainElem.style["z-index"]="auto"))},r.prototype.destroy=function(){var e=this;e.controls&&e.controls.destroy(),e._easterEgg&&e._easterEgg.destroy(),e._endScreen&&e._endScreen.destroy(),e._errorScreen&&e._errorScreen.destroy(),e._loadingScreen&&e._loadingScreen.destroy(),e._renderer&&e._renderer.destroy(),e._startScreen&&e._startScreen.destroy(),e.destroyAgeGateScreen(),e.destroyFullscreenChangeListeners(),e.unbindMouseEvents&&e.unbindMouseEvents(),e._ageGateController&&e._ageGateController.destroy(),e._openSimSim&&e._openSimSim.destroy(),e._feedbackScreen&&e._feedbackScreen.destroy(),e.rootElem.innerHTML=""}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./easter-egg":19,"./event":"YJm+dH","./renderers/flash":42,"./renderers/html5-dash":146,"./renderers/html5-hls":44,"./renderers/html5-raw":45,"./renderers/html5-tv":146,"./renderers/modes":46,"./renderers/orsay":146,"./renderers/tizen":146,"./states":49,"./util":"jJTEqU","./views/ads-overlay":62,"./views/age-gate-screen":64,"./views/base.html":65,"./views/controls":70,"./views/error-screen":73,"./views/feedback-screen":75,"./views/loading-screen":77,"./views/nfl-branding":79,"./views/open-sim-sim":81,"./views/playlist":84,"./views/start-screen":89,"./views/tumblr-controls":146,"./views/tumblr-loading-screen":146,fs:146,"insert-css":148}],60:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <table border='1'>"),r.b("\n"+n),r.b("        <tr>"),r.b("\n"+n),r.b("            <th>Clip</th>"),r.b("\n"+n),r.b("            <th>Position</th>"),r.b("\n"+n),r.b("        </tr>"),r.b("\n"+n),r.b("        "),r.b("\n"+n),r.s(r.f("clipStats",e,t,1),e,t,0,143,1206,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("            <tr>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("clipId",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b("\n"+n),r.b("                	<table border='1'>"),r.b("\n"+n),r.b("                	<tr>"),r.b("\n"+n),r.s(r.f("data",e,t,1),e,t,0,303,362,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                		<th>"),n.b(n.v(n.f("position",e,t,0))),n.b("</th>"),n.b("\n")}),e.pop()),r.b("                	</tr>"),r.b("\n"+n),r.b("                	<tr>"),r.b("\n"+n),r.s(r.f("data",e,t,1),e,t,0,443,1111,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("                		<td>"),r.b("\n"+n),r.s(r.f("data",e,t,1),e,t,0,495,1060,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("	                		<ul>"),r.b("\n"+n),r.b("	                			<li>Ad Opportunity: "),r.b(r.v(r.f("taken",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Communicator: "),r.b(r.v(r.f("communicator",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Response Code: "),r.b(r.v(r.f("responseCode",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Response Type: "),r.b(r.v(r.f("responseType",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>First Redirect: "),r.b(r.v(r.f("firstRedirect",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Redirect count: "),r.b(r.v(r.f("redirectCount",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Ad Delivery error: "),r.b(r.v(r.f("error",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Ad Media Start latency: "),r.b(r.v(r.f("mediaStartLatency",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                		</ul>"),r.b("\n")}),e.pop()),r.b("                		</td>"),r.b("\n")}),e.pop()),r.b("                	</tr>"),r.b("\n"+n),r.b("                	</table>"),r.b("\n"+n),r.b("				</td>"),r.b("\n"+n),r.b("            </tr>"),r.b("\n")}),e.pop()),r.b("    </table>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],61:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-ads-overlay'></div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],62:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._view=t,n._controlsBottomBar=n._view.rootElem.querySelector(".yvp-bottom-bar"),n._controlsSlider=n._view.rootElem.querySelector(".yvp-slider"),n._eventBus.subscribe(o.CONTROLS_BAR_CHANGE,n._adjustOverlayHeight,n)}t.exports=r;var i=e("../util"),o=e("../event"),a=e("./ads-overlay.html");r.prototype.create=function(){var e=this;return e.node=i.render(a),e.node},r.prototype._adjustOverlayHeight=function(e){var t,n=this,r=n._controlsBottomBar.offsetHeight,i=n._view.rootElem.offsetHeight;t=e?i-r:i,n.node.style.height=t+"px"},r.prototype.destroy=function(){var e=this;e.node=null}},{"../event":"YJm+dH","../util":"jJTEqU","./ads-overlay.html":61}],63:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-agegate-container'>"),r.b("\n"+n),r.b("    <img class='yvp-agegate-back-image' src='"),r.b(r.v(r.f("imageSrc",e,t,0))),r.b("' width='"),r.b(r.v(r.f("width",e,t,0))),r.b("' height='"),r.b(r.v(r.f("height",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("    <div class='yvp-agegate-info-wrapper'>"),r.b("\n"+n),r.b("        <h3 class='yvp-agegate-title'>"),r.b(r.v(r.f("title",e,t,0))),r.b("</h3>"),r.b("\n"+n),r.b("        <p class='yvp-agegate-desc'>"),r.b(r.v(r.f("desc",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("        <div class='yvp-agegate-action-wrapper'>"),r.b("\n"+n),r.s(r.f("isBirthday",e,t,1),e,t,0,355,779,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("                <p class='yvp-agegate-input'>"),r.b("\n"+n),r.b("                    <input type='text' name='month' class='yvp-agegate-date-input' maxlength='2' placeholder='MM'>"),r.b("\n"+n),r.b("                    <input type='text' name='day' class='yvp-agegate-date-input' maxlength='2' placeholder='DD'>"),r.b("\n"+n),r.b("                    <input type='text' name='year' class='yvp-agegate-date-input' maxlength='4' placeholder='YYYY'>"),r.b("\n"+n),r.b("                </p>"),r.b("\n")}),e.pop()),r.s(r.f("isBlock",e,t,1),e,t,1,0,0,"")||(r.b("                <button class='yvp-agegate-btn'>"),r.b(r.v(r.f("button",e,t,0))),r.b("</button>"),r.b("\n")),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.s(r.f("isBlock",e,t,1),e,t,0,955,1020,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("        <div class='yvp-error-icon yvp-agegate-icon'></div>"),n.b("\n")}),e.pop()),r.s(r.f("isBlock",e,t,1),e,t,1,0,0,"")||(r.b("        <div class='yvp-agegate-icon'></div>"),r.b("\n")),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],64:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._controller=t}t.exports=r;var i=e("../util"),o=e("../tap"),a=e("./age-gate-screen.html");r.prototype.create=function(e){var t=this;if(t.node=i.render(a,e),t._ageGateObj=e,t._actionButton=t.node.querySelector(".yvp-agegate-btn"),t._ageGateObj.isBirthday){var n=t.node.querySelectorAll(".yvp-agegate-date-input");t._inputMonth="month"===n[0].name?n[0]:null,t._inputDay="day"===n[1].name?n[1]:null,t._inputYear="year"===n[2].name?n[2]:null}var r=t._controller.getPlayerWidth(),o=t._controller.getPlayerHeight();return 470>r&&i.classList(t.node).add("narrow"),350>r||222>o?(i.classList(t.node).add("small"),i.classList(t.node).add("xsmall")):(401>r||271>o)&&i.classList(t.node).add("small"),t._bindUI(),t.node},r.prototype._bindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap=new o(e._actionButton),e._onButtonTap=function(t){t.stopPropagation();var n=e._ageGateObj.isBirthday&&{inputMonth:e._inputMonth,inputDay:e._inputDay,inputYear:e._inputYear};e._controller.handleClickEvent(t,n)},e._actionButton.addEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._onKeyDown=function(t){e._controller.filterNonDigitInput(t)},e._inputMonth.addEventListener("keydown",e._onKeyDown),e._inputDay.addEventListener("keydown",e._onKeyDown),e._inputYear.addEventListener("keydown",e._onKeyDown))},r.prototype._unBindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap.destroy(),e._actionButton.removeEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._inputMonth.removeEventListener("keydown",e._onKeyDown),e._inputDay.removeEventListener("keydown",e._onKeyDown),e._inputYear.removeEventListener("keydown",e._onKeyDown))},r.prototype.getNode=function(){var e=this;return e.node},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null}},{"../tap":"dsc79Q","../util":"jJTEqU","./age-gate-screen.html":63}],65:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div tabindex='-1' class='yvp-content yvp-hide-controls' aria-label='Yahoo Video Player'>"),r.b("\n"+n),r.b("    <div class='yvp-main'></div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],66:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-cc-options-more close'>"),r.b("\n"+n),r.b("    <div class='yvp-cc-back'>"),r.b("\n"+n),r.b("         <div class='yvp-settings-caret-icon left'></div>"),r.b("\n"+n),r.b("         <div class='yvp-cc-back-header'>"),r.b(r.v(r.d("strings.BACK",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b('    <div class="yvp-tab-container">'),r.b("\n"+n),r.b('        <ul class="yvp-tabs-nav">'),r.b("\n"+n),r.b('            <li class="yvp-tab tab-selected">'),r.b(r.v(r.d("strings.PRESETS",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b('            <li class="yvp-tab">'),r.b(r.v(r.d("strings.TEXT",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b('            <li class="yvp-tab">'),r.b(r.v(r.d("strings.BACKGROUND",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b('            <li class="yvp-tab">'),r.b(r.v(r.d("strings.EFFECTS",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("        </ul>"),r.b("\n"+n),r.b('        <div class="yvp-tabs-content">'),r.b("\n"+n),r.b('            <div class="yvp-tabcontent preset-container tab-show">'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b('            <div class="yvp-tabcontent font-list">'),r.b("\n"+n),r.b('                <div class="yvp-colorpicker fontcolorpicker"></div>'),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b('            <div class="yvp-tabcontent bg-opacity-list">'),r.b("\n"+n),r.b('                <div class="yvp-colorpicker bgcolorpicker"></div>'),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b('            <div class="yvp-tabcontent effects">'),r.b("\n"+n),r.b('                <div class="yvp-effect none">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.PLAIN",e,t,0))),
r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect dropshadow">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.SHADOW",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect raised">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.RAISED",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect depressed">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.LOWERED",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect uniform">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.OUTLINE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b('    <div class="yvp-cc-style-preview">'),r.b("\n"+n),r.b('        <div class="yvp-cc-options-message">'),r.b(r.v(r.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],67:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-cc-options-main close'>"),r.b("\n"+n),r.b("    <div class='yvp-cc-back-to-settings'>"),r.b("\n"+n),r.b("        <div class='yvp-settings-caret-icon left'></div>"),r.b("\n"+n),r.b("        <div class='yvp-back-to-settings'>"),r.b(r.v(r.d("strings.BACK",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-cc-box'>"),r.b("\n"+n),r.b("        <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.CC",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-toggle'>"),r.b("\n"+n),r.b("            <div data-cc-state='on' class='yvp-settings-item yvp-cc-on'>"),r.b(r.v(r.d("strings.ON",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div data-cc-state='off' class='yvp-settings-item yvp-cc-off'>"),r.b(r.v(r.d("strings.OFF",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.LANGUAGE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-language yvp-cc-item'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-cc-divider'></div>"),r.b("\n"+n),r.b("    <div class='yvp-cc-box'>"),r.b("\n"+n),r.b("        <div class='yvp-cc-position yvp-cc-item'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.POSITION",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-cc-pos-wrapper'>"),r.b("\n"+n),r.b("                <ul class='yvp-cc-pos-selection'></ul>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-size yvp-cc-item'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.CC_TYPE_SIZE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-cc-size-selector'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-size-indicators'>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-0' data-size-value='0'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-25' data-size-value='25'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-50' data-size-value='50'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-75' data-size-value='75'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-100' data-size-value='100'>A</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-cc-divider'></div>"),r.b("\n"+n),r.b("    <div class='yvp-cc-box'>"),r.b("\n"+n),r.b("        <div class='yvp-cc-style yvp-cc-item'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-style-preview'>Aa</div>"),r.b("\n"+n),r.b("            <div class='yvp-cc-style-more'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-item'>"),r.b(r.v(r.d("strings.STYLE_OPTIONS",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                <div class='yvp-settings-caret-icon right'></div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        "),r.b("\n"+n),r.b("        <div class='yvp-cc-feedback-link yvp-cc-item'>"),r.b("\n"+n),r.b("            <a href='http://info.yahoo.com/legal/us/yahoo/cc/en-us/' target='_blank'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-item'>"),r.b(r.v(r.d("strings.SUBMIT_FEEDBACK",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            </a>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-preview'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-preview-message'>"),r.b(r.v(r.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],68:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n._eventBus.subscribe(p.CC.FONT_SIZE_CHANGE,n._onSizeChange,n),n._eventBus.subscribe(p.CC.FETCHED,n._populateUI,n),n._eventBus.subscribe(p.CC.LANGUAGE_CHANGE,n._syncLanguageMenu,n),n._eventBus.subscribe(p.CC.TOGGLE,n._syncToggleSelection,n),n._eventBus.subscribe(p.CC.USER_STYLE_PREFERENCES_CHANGE,n._syncCCPreferences,n),n._eventBus.subscribe(p.CC.FONT_FACE_CHANGE,n._applyFontFaceChange,n),n._eventBus.subscribe(p.CC.BG_OPACITY_CHANGE,n._applyBgOpacityChange,n),n._eventBus.subscribe(p.PLAYBACK_STARTED,n._syncCCPreferences,n)}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("../states"),a=e("../strings"),s=e("../util"),l=e("../../../lib"),c=e("../tap"),d=e("../cc"),p=e("../event"),u=(e("../views/uiwidgets/tooltip"),e("../views/uiwidgets/drop-down-menu")),_=e("../views/uiwidgets/slider"),m=e("./cc-options.html"),v=e("./cc-more-options.html"),y="data-cc-state",f=["on","off"],g=["bottom","top"],b={0:16,25:20,50:24,75:28,100:32},h="yvp-settings-activated",E="yvp-cc-preview-activated",S="yvp-cc-preview-",A="top",T="on",L={Font:"font",Background:"bg"};i('.cc-element{position:absolute;bottom:16%;width:95%;left:2.5%;text-align:center;z-index:6;max-height:25%;-webkit-transition-property:bottom;-webkit-transition-duration:.5s;-webkit-transition-delay:0s;transition-property:bottom;transition-duration:.5s;transition-delay:0s;}.cc-element.top{top:5%}.cc-element.bottom{bottom:16%}.cc-element.float{bottom:10%}.yvp-cc-options-main,.yvp-cc-options-more{min-width:496px;max-height:212px;color:#fff;}.yvp-cc-options-main.open,.yvp-cc-options-more.open{display:block}.yvp-cc-options-main.close,.yvp-cc-options-more.close{display:none}.yvp-cc-options-main .yvp-ddm-wrapper,.yvp-cc-options-more .yvp-ddm-wrapper{margin-left:0;padding:0;width:150px;color:#fff;display:inline-block;position:relative;z-index:1;vertical-align:middle}.yvp-cc-options-main .yvp-ddm-availability,.yvp-cc-options-more .yvp-ddm-availability{display:none;background-color:#3db224;width:6px;height:6px;border-radius:8px;position:relative;top:-9px;left:3px;}.yvp-cc-options-main .yvp-ddm-availability.not-available,.yvp-cc-options-more .yvp-ddm-availability.not-available{background-color:#ccc}.yvp-cc-options-main .yvp-ddm-selected,.yvp-cc-options-more .yvp-ddm-selected{text-align:left;padding-left:5px;overflow:hidden;text-overflow:ellipsis;height:20px;line-height:20px}.yvp-cc-options-main .yvp-ddm-selected-wrapper,.yvp-cc-options-more .yvp-ddm-selected-wrapper{width:100%;border:1px solid #5f5f5f;border-radius:3px;}.yvp-cc-options-main .yvp-ddm-selected-wrapper:hover,.yvp-cc-options-more .yvp-ddm-selected-wrapper:hover{cursor:pointer;}.yvp-cc-options-main .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron,.yvp-cc-options-more .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron{opacity:.9}.yvp-cc-options-main .yvp-ddm-chevron,.yvp-cc-options-more .yvp-ddm-chevron{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJjY19jYXJyb3QtIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTEyLjcyNSw3LjQyMTgzNzc3IEw5LDExLjk5ODgzNzggTDEyLjcyNSwxNi41NzQ4Mzc4IEMxMi45NSwxNi44NTI4Mzc4IDEzLjI4NywxNi45OTc4Mzc4IDEzLjYyNiwxNi45OTc4Mzc4IEMxMy44NzMsMTYuOTk3ODM3OCAxNC4xMjIsMTYuOTIwODM3OCAxNC4zMzEsMTYuNzYxODM3OCBDMTQuODI4LDE2LjM4NjgzNzggMTQuOTE2LDE1LjY5MjgzNzggMTQuNTI1LDE1LjIxMzgzNzggTDExLjkwOSwxMS45OTg4Mzc4IEwxNC41MjUsOC43ODM4Mzc3NyBDMTQuOTE2LDguMzA0ODM3NzcgMTQuODI4LDcuNjEwODM3NzcgMTQuMzMxLDcuMjM0ODM3NzcgQzEzLjgzNSw2Ljg1ODgzNzc3IDEzLjExNSw2Ljk0MzgzNzc3IDEyLjcyNSw3LjQyMTgzNzc3IFoiIGlkPSJGaWxsLTMiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyLjAwMDAwMCwgMTIuMDAwMDAwKSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMi4wMDAwMDAsIC0xMi4wMDAwMDApICI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==");position:absolute;padding-left:11px;padding-right:7px;top:0;height:19px;width:5px;right:1.5%;opacity:.7;}.yvp-cc-options-main .yvp-ddm-list,.yvp-cc-options-more .yvp-ddm-list{position:absolute;background-color:rgba(0,0,0,0.8);max-height:120px;display:none;padding:0;min-width:100%;overflow-x:hidden;overflow-y:auto;border:1px solid rgba(255,255,255,0.2);border-top:none;box-sizing:border-box;width:101%;}.yvp-cc-options-main .yvp-ddm-list.open,.yvp-cc-options-more .yvp-ddm-list.open{cursor:pointer;display:block}.yvp-cc-options-main .yvp-ddm-item,.yvp-cc-options-more .yvp-ddm-item{text-align:left;padding:7px 5px;overflow:hidden;text-overflow:ellipsis;border-bottom:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0);}.yvp-cc-options-main .yvp-ddm-item:first-child,.yvp-cc-options-more .yvp-ddm-item:first-child{padding-top:9px}.yvp-cc-options-main .yvp-ddm-item:last-child,.yvp-cc-options-more .yvp-ddm-item:last-child{border-bottom:none}.yvp-cc-options-main .yvp-ddm-item:hover,.yvp-cc-options-more .yvp-ddm-item:hover{cursor:pointer;background:rgba(0,0,0,0.4)}.yvp-cc-options-main .yvp-cc-header,.yvp-cc-options-more .yvp-cc-header{color:rgba(255,255,255,0.6);font-weight:normal}.yvp-cc-options-more .yvp-tab-container{padding:0;width:100%;border:0;position:relative;margin-top:16px;max-height:100px;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav{width:100%;padding-bottom:0;margin-bottom:0;height:32px;display:block;background-color:transparent;text-align:center;overflow:hidden;box-sizing:border-box;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab{display:block;float:left;width:25%;color:rgba(255,255,255,0.6);margin:0;padding:0;border-bottom:1px solid rgba(255,255,255,0.2);background-color:transparent;box-sizing:border-box;text-transform:capitalize;cursor:pointer;height:32px;line-height:24px;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:hover{color:rgba(255,255,255,0.8);border-bottom:3px solid rgba(255,255,255,0.3)}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:last-child{border-right:none}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab.tab-selected{border-bottom:3px solid #0087ff;color:#fff}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent{display:none;background-color:transparent;padding:16px 0;height:40px;position:relative;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent.tab-show{display:block}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-wrapper{display:inline-block;width:150px;margin:0 0 43px 75px;border-radius:3px}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-availability{display:none}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-list{width:auto;max-height:108px}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper{width:auto;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper.hide{display:none}.yvp-cc-options-more .yvp-colorpicker{margin-left:auto;margin-right:auto;padding:0;width:100%;margin-left:-4px;margin-top:1px;display:inline-block;white-space:normal;}.yvp-cc-options-more .yvp-colorpicker .color-option{border:1px solid rgba(255,255,255,0.2);border-radius:2px;width:16px;height:16px;display:inline-block;margin:3px;cursor:pointer;}.yvp-cc-options-more .yvp-colorpicker .color-option:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-cc-options-more .yvp-colorpicker .color-option.nocolor::before{content:" ";position:absolute;border-bottom:1px solid #f00;width:26px;transform:rotate(135deg) translate(9px,-3px);-ms-transform:rotate(135deg) translate(9px,-3px);}.yvp-cc-options-more .yvp-colorpicker .color-option.color-selected{border:1px solid #fff}.yvp-cc-options-more .fontcolorpicker{display:inline-block;width:100px;margin-left:65px}.yvp-cc-options-more .bgcolorpicker{display:inline-block;width:144px;margin-left:65px}.yvp-cc-options-more .effects{margin-left:75px}.yvp-cc-options-more .yvp-effect{display:inline-block;position:relative;width:54px;height:32px;font-size:18px;line-height:30px;background-color:rgba(102,102,102,0.5);border:1px solid rgba(255,255,255,0.2);border-radius:4px;margin-left:2%;box-sizing:border-box;background-repeat:no-repeat;background-position:center;text-align:center;cursor:pointer;}.yvp-cc-options-more .yvp-effect:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-cc-options-more .yvp-effect.none{margin-left:5px}.yvp-cc-options-more .yvp-effect.dropshadow{text-shadow:2px 1px 1px #000}.yvp-cc-options-more .yvp-effect.raised{text-shadow:3px 3px 4px rgba(0,0,0,0.75)}.yvp-cc-options-more .yvp-effect.depressed{text-shadow:0 -4px 4px rgba(0,0,0,0.54)}.yvp-cc-options-more .yvp-effect.uniform{text-shadow:-2px -2px 0 #000,-2px 2px 0 #000,-2px 0 0 #000,2px -2px 0 #000,2px 2px 0 #000,2px 0 0 #000,0 -2px 0 #000,0 2px 0 #000}.yvp-cc-options-more .yvp-effect.effect-selected{border:1px solid #fff;}.yvp-cc-options-more .yvp-effect.effect-selected .yvp-cc-effect-header{color:#fff}.yvp-cc-options-more .yvp-effect .yvp-cc-effect-header{font-size:11px;text-transform:capitalize;color:rgba(255,255,255,0.6);text-shadow:none}.yvp-cc-options-more .preset-container{width:100%;height:100px;position:relative;max-height:100px;display:inline-block}.yvp-cc-options-more .yvp-cc-preset{display:inline-block;width:53px;height:32px;line-height:30px;border:1px solid rgba(255,255,255,0.2);border-radius:3px;font-size:1.3em;box-sizing:border-box;text-align:center;margin:3px;cursor:pointer;}.yvp-cc-options-more .yvp-cc-preset:hover{border:1px solid rgba(255,255,255,0.6);margin:3px}.yvp-cc-options-more .preset-separator{clear:both;width:100%;height:9%}.yvp-cc-options-more .yvp-cc-back{max-width:65px;background-color:transparent;color:inherit;font-size:11px;position:relative;outline:none;cursor:pointer}.yvp-cc-options-more .yvp-cc-back-header{display:inline-block;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-cc-options-more .yvp-cc-back-header:hover{color:#fff}.yvp-cc-options-more .yvp-cc-style-preview{margin:40px 0 20px 85px;display:block;position:relative;font-size:20px;line-height:20px;max-width:260px;}.yvp-cc-options-more .yvp-cc-style-preview .yvp-cc-options-message{margin-left:18px}.yvp-cc-options-main .yvp-cc-back-to-settings{max-width:65px}.yvp-cc-options-main .yvp-back-to-settings{display:inline-block;cursor:pointer;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-cc-options-main .yvp-back-to-settings:hover{color:#fff}.yvp-cc-options-main .yvp-cc-box{display:block;margin-top:16px;clear:both}.yvp-cc-options-main .yvp-cc-item{display:inline-block}.yvp-cc-options-main .yvp-cc-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-cc-options-main .yvp-cc-toggle{display:inline-block;margin:0 20px}.yvp-cc-options-main .yvp-cc-language{margin-left:20px}.yvp-cc-options-main .yvp-cc-position{max-width:175px}.yvp-cc-options-main .yvp-cc-size{margin-left:20px}.yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-cc-options-main .yvp-cc-pos-selection,.yvp-cc-options-main .yvp-cc-style-preview,.yvp-cc-options-main .yvp-cc-size-selector{display:inline-block;margin-left:56px;padding-bottom:18px}.yvp-cc-options-main .yvp-cc-style{padding-bottom:5px}.yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-cc-options-main .yvp-cc-pos-selection{margin-left:0;}.yvp-cc-options-main .yvp-cc-toggle-selection .yvp-cc-position-top,.yvp-cc-options-main .yvp-cc-pos-selection .yvp-cc-position-top{margin-bottom:6px}.yvp-cc-options-main .yvp-cc-pos-selection{padding-bottom:0;vertical-align:middle}.yvp-cc-options-main .yvp-cc-size-selector{margin:0;padding:0}.yvp-cc-options-main .yvp-cc-indicator{display:inline-block;margin-left:19px;padding:0 4px;cursor:pointer;border:1px solid transparent;border-radius:3px;vertical-align:middle;color:#fff;}.yvp-cc-options-main .yvp-cc-indicator:hover{background-color:rgba(255,255,255,0.2)}.yvp-cc-options-main .yvp-cc-indicator.size-active{background-color:rgba(255,255,255,0.4);}.yvp-cc-options-main .yvp-cc-indicator.size-active:hover{background-color:rgba(255,255,255,0.4)}.yvp-cc-options-main .yvp-cc-indicator-0{font-size:15px}.yvp-cc-options-main .yvp-cc-indicator-25{font-size:18px}.yvp-cc-options-main .yvp-cc-indicator-50{font-size:24px}.yvp-cc-options-main .yvp-cc-indicator-75{font-size:28px}.yvp-cc-options-main .yvp-cc-indicator-100{font-size:32px}.yvp-cc-options-main .yvp-slider-wrapper{margin-top:1px;width:213px;color:#ccc;border-top:1px solid #646464;display:none}.yvp-cc-options-main .yvp-slider-track{display:block;width:100%;position:relative;margin-top:-3px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.yvp-cc-options-main .yvp-slider-track:active{cursor:pointer}.yvp-cc-options-main .yvp-slider-track .yvp-slider-handle{position:absolute;display:inline-block;border-radius:50%;height:5px;width:5px;margin:0;background-color:#fff;border:1px solid #fff;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-handle:hover{background-color:#fff;border-width:1px solid #fff;border-radius:50%;width:10px;height:10px;margin-left:-2px;margin-top:-2px;cursor:pointer;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor{position:absolute;margin-right:0;display:inline-block;border-radius:50%;background-color:rgba(255,255,255,0.6);height:5px;width:5px;top:0;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor:hover{background-color:#fff;height:10px;width:10px;margin-right:5px;top:-1px;margin-left:-2px;cursor:pointer}.yvp-cc-options-main .yvp-cc-feedback-link{font-size:11px;float:right;}.yvp-cc-options-main .yvp-cc-feedback-link a:link{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:visited{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:hover{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:active{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a{text-decoration:none}.yvp-cc-options-main .yvp-cc-style-more{display:inline-block;font-size:11px;background-color:transparent;color:inherit;outline:none;overflow:visible;cursor:pointer}.yvp-cc-options-main .yvp-cc-style-preview{display:none;border:1px solid rgba(255,255,255,0.2);border-radius:3px;color:#fff;min-width:54px;max-width:80px;font-size:1.5em;height:32px;line-height:32px;text-align:center;padding:1px 2px;margin:0 0 0 20px;}.yvp-cc-options-main .yvp-cc-style-preview .yvp-cc-style-preview-label{font-size:11px;position:absolute;top:-35px;left:-10px;color:#ccc;text-shadow:0 1px 1px rgba(0,0,0,0.4);font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif}.yvp-cc-options-main .yvp-cc-pos-wrapper{position:relative;display:inline-block;vertical-align:middle;margin:5px 20px 0 20px}.yvp-cc-options-main .yvp-cc-position-top,.yvp-cc-options-main .yvp-cc-position-bottom{display:inline;margin-right:20px;cursor:pointer;color:rgba(255,255,255,0.5);}.yvp-cc-options-main .yvp-cc-position-top:hover,.yvp-cc-options-main .yvp-cc-position-bottom:hover{color:#fff}.yvp-cc-preview{position:absolute;z-index:4;text-align:center;left:65px;bottom:auto;top:auto;font-size:20px;font-weight:bold;opacity:0;pointer-events:none;}.yvp-cc-preview.yvp-cc-preview-activated{opacity:1}.yvp-cc-preview.yvp-cc-preview-top{top:4px;bottom:auto}.yvp-cc-preview.yvp-cc-preview-bottom{bottom:4px;top:auto}.yvp-cc-preview-message{display:inline-block;padding:5px 15px;margin:0 auto}.yvp-content.yvp-state-fullscreen .yvp-cc-preview-message,.yvp-content.yvp-state-fullscreen .yvp-cc-options-message{display:none}'),r.prototype.render=function(){var e=this;return e.node=s.render(m,{strings:a.i18n}),e.ccMoreOptionsNode=s.render(v,{strings:a.i18n}),e._applyUIControls(),e._renderAdvancedCCOptions(),e._bindUI(),e._nodes=[e.node,e.ccMoreOptionsNode],e._currentScreenIndex=0,e._nodes},r.prototype._syncLanguageMenu=function(e,t){var n=this;if(e&&!(t.length<0)){var r=d.prototype.getLanguageForCode.call(null,e||n._model.userPreferences.closedCaptions.lang);n._DDMenu&&n._DDMenu.syncData({selected:r,items:t?t.map(function(e){return d.prototype.getLanguageForCode.call(null,e)}):null,itemsData:t})}},r.prototype._syncCCPreferences=function(){function e(e,t,r,i){var o=e.querySelectorAll(t);Array.prototype.forEach.call(o,function(e){n._model.userPreferences.closedCaptions[i]===e.val?s.classList(e).add(r):s.classList(e).remove(r)})}var t,n=this;for(var r in b)if(b.hasOwnProperty(r)&&b[parseInt(r)]===n._model.userPreferences.closedCaptions.fontSize){t=r;break}var i=n._letterOptionsBtns.querySelector(".yvp-cc-indicator-"+t);i&&s.classList(i).add("size-active"),e(n._fontColorPicker,".color-option","color-selected","fontColor"),e(n._bgColorPicker,".color-option","color-selected","bgColor"),e(n._effectPicker,".yvp-effect","effect-selected","fontEffect"),e(n._ccPositionSelection,".yvp-settings-item",h,"ccPos"),n._lastPosSelected=n._ccPositionSelection.querySelector("."+h),n._fontDDM.syncData({items:[],itemsData:[],selected:n._getFontPropertyByFontName(n._model.userPreferences.closedCaptions.fontName).name}),n._bgOpactiyDDM.syncData({items:[],itemsData:[],selected:n._stringifyBgOpacity(100*n._model.userPreferences.closedCaptions.bgOpacity)}),n._sizeSlider.setValue(t),n._updateCCStylePreviewBoxes()},r.prototype._applyUIControls=function(){var e=this;e._applyCCToggling(),e._applyCCLanguageMenu(),e._applySize(),e._applyAdvancedOptions(),e._applyCCPosition()},r.prototype._applyCCToggling=function(){var e=this,t=e._model.userPreferences.closedCaptions.show;e._ccToggleSelectionNodes=e.node.querySelector(".yvp-cc-toggle"),e._toggleSelections=[],f.forEach(function(n){var r=e._ccToggleSelectionNodes.querySelector(".yvp-cc-"+n),i=n===T;(t&&i||!t&&!i)&&(s.classList(r).add(h),e._lastToggleSelected=r),e._toggleSelections.push(r)})},r.prototype._applyCCLanguageMenu=function(){var e=this;if(e._ccLanguageMenu=e.node.querySelector(".yvp-cc-language"),e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.lang){var t={selected:d.prototype.getLanguageForCode.call(null,e._model.userPreferences.closedCaptions.lang),items:null,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._DDMenu=new u(O,t,e._eventBus),e._ccLanguageMenu.appendChild(e._DDMenu.create()),e._eventBus.publish(p.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,e._model.playlist.getCurrentItem())}},r.prototype._populateUI=function(e){var t=this,n="top"===t._model.userPreferences.closedCaptions.ccPos;t._syncLanguageMenu(e.selectedLang,e.langList),t._syncToggleSelection(t._model.userPreferences.closedCaptions.show),t._eventBus.publish(p.CC.POSITION_CHANGE,n)},r.prototype._applySize=function(){var e,t,n=this,r=n.node.querySelector(".yvp-cc-size-selector"),i={wrapper:"yvp-slider-wrapper",track:"yvp-slider-track",handle:"yvp-slider-handle",anchor:"yvp-slider-anchor"},o={anchors:5,minValue:0,maxValue:100,initialValue:n._model.userPreferences.closedCaptions.fontSize},a=[];n._sizeSlider=new _(i,o,n._eventBus),r.appendChild(n._sizeSlider.create()),n._sliderValues=n.node.querySelectorAll(".yvp-slider-anchor");var l=n._sliderValues.length;for(e=0;l>e;e++){var d=n._sliderValues[e].style.left.trim();a.push(parseFloat(d))}n._ccSizeLetterIndicator=function(e){var t=e.target,r=t.getAttribute("data-size-value")||"";switch(r){case"0":n._sizeSlider.setValue(a[0]);break;case"25":n._sizeSlider.setValue(a[1]);break;case"50":n._sizeSlider.setValue(a[2]);break;case"75":n._sizeSlider.setValue(a[3]);break;case"100":n._sizeSlider.setValue(a[4])}Array.prototype.forEach.call(n._letterOptionsBtns.children,function(e){s.classList(e).remove("size-active")}),s.classList(t).add("size-active")},n._letterOptionsBtns=n.node.querySelector(".yvp-cc-size-indicators"),n._letterOptionsTaps=[];var p=n._letterOptionsBtns.children.length;for(t=0;p>t;t++)n._letterOptionsTaps[t]=new c(n._letterOptionsBtns.children[t]),n._letterOptionsBtns.children[t].addEventListener("tap",n._ccSizeLetterIndicator)},r.prototype._updateCCStylePreviewBoxes=function(){var e=this,t=s.cssHexToRgb(e._model.userPreferences.closedCaptions.bgColor)||{r:0,g:0,b:0};Array.prototype.forEach.call(e._ccStylePreviewBoxes,function(n){n.style.fontSize=e._model.userPreferences.closedCaptions.fontSize,n.style.fontFamily=e._model.userPreferences.closedCaptions.fontName,n.style.color=e._model.userPreferences.closedCaptions.fontColor,n.style.textShadow=D[e._model.userPreferences.closedCaptions.fontEffect],n.style.backgroundColor="rgba("+t.r+","+t.g+","+t.b+","+e._model.userPreferences.closedCaptions.bgOpacity+")"}),e._model.playbackState.state!==o.INIT&&e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},r.prototype._applyFontFaceChange=function(e){for(var t=this,n=0;n<R.length;n++)if(R[n].name===e){t._model.userPreferences.closedCaptions.fontName=e,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(p.CC.UPDATE_STYLE,"font: "+e),t._updateCCStylePreviewBoxes();break}},r.prototype._applyBgOpacityChange=function(e){var t=this;t._model.userPreferences.closedCaptions.bgOpacity=e/100,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(p.CC.UPDATE_STYLE,"opacity: "+e),t._updateCCStylePreviewBoxes()},r.prototype._getFontPropertyByFontName=function(e){for(var t=0;t<R.length;t++)if(R[t].name===e)return R[t];return R[3]},r.prototype._applyFontList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".font-list"),n=R.map(function(e){return e.name}),r=e._getFontPropertyByFontName(e._model.userPreferences.closedCaptions.fontName),i={selected:r.name,items:n,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._fontDDM=new u(O,i,e._eventBus),t.insertBefore(e._fontDDM.create(),t.querySelector(".fontcolorpicker")),e._fontDDM.registerEvent(p.CC.FONT_FACE_CHANGE)},r.prototype._stringifyBgOpacity=function(e){return 100===e?e+"% (opaque)":e+"% (transparency)"},r.prototype._applyBgOpacityList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".bg-opacity-list"),n=100*e._model.userPreferences.closedCaptions.bgOpacity,r={selected:100===n?n+"% (opaque)":n+"% (transparency)",items:P.map(e._stringifyBgOpacity),itemsData:P,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._bgOpactiyDDM=new u(O,r,e._eventBus),t.insertBefore(e._bgOpactiyDDM.create(),t.querySelector(".bgcolorpicker")),e._bgOpactiyDDM.registerEvent(p.CC.BG_OPACITY_CHANGE)},r.prototype._renderAdvancedCCOptions=function(){var e=this;e._fontColorPicker=e.ccMoreOptionsNode.querySelector(".fontcolorpicker"),e._bgColorPicker=e.ccMoreOptionsNode.querySelector(".bgcolorpicker"),e._effectPicker=e.ccMoreOptionsNode.querySelector(".yvp-tabcontent:nth-child(4)"),e._applyCCPresetStyles(),e._applyColorPickerPresetStyles(),e._applyFontList(),e._applyBgOpacityList(),e._renderEffectPickerPresets()},r.prototype._applyCCPresetStyles=function(){for(var e=this,t=e.ccMoreOptionsNode.querySelectorAll(".yvp-cc-preset"),n=0;n<t.length;n++){var r=t[n];r.presetIndex=n,r.style.color=C[n].fontColor,r.style.backgroundColor=C[n].bgColor}},r.prototype._applyColorPickerPresetStyles=function(){function e(e,t,n){for(var r,i=0;i<e.length;i++)r=document.createElement("div"),s.classList(r).add("color-option"),r.style.backgroundColor=e[i].color,r.val=e[i].color,"transparent"===e[i].color&&s.classList(r).add("nocolor"),r.colorpickerType=n,t.appendChild(r)}var t=this;e(I,t._fontColorPicker,L.Font),e(M,t._bgColorPicker,L.Background)},r.prototype._renderEffectPickerPresets=function(){for(var e=this,t=e._effectPicker.querySelectorAll(".yvp-effect"),n=0;n<t.length;n++){var r=t[n];r.val=N[n].name}},r.prototype._applyAdvancedOptions=function(){var e=this;e._ccStylePreviewBoxes=[e.node,e.ccMoreOptionsNode].map(function(e){return e.querySelector(".yvp-cc-style-preview")}),this._updateCCStylePreviewBoxes()},r.prototype._applyCCPosition=function(){var e=this;e._ccPositionSelection=e.node.querySelector(".yvp-cc-pos-selection"),e._ccPositionOptionNodes=[];var t="top"===e._model.userPreferences.closedCaptions.ccPos,n=document.createDocumentFragment();g.forEach(function(r){var i=document.createElement("li");s.classList(i).add("yvp-settings-item"),s.classList(i).add("yvp-cc-position-"+r),i.setAttribute("cc-pos-data",r),i.val=r;var o;o=document.createTextNode(a.i18n[r.toUpperCase()]),(t&&r===A||!t&&r!==A)&&(s.classList(i).add(h),e._lastPosSelected=i),e._ccPositionOptionNodes.push(i),i.appendChild(o),n.appendChild(i)}),e._ccPositionSelection.appendChild(n)},r.prototype._bindUI=function(){var e=this;e._bindCCToggle(),e._bindLanguageMenu(),e._bindSizeSelector(),e._bindAdvancedOptions(),e._bindCCPosition(),e._bindFeedback()},r.prototype._unBindUI=function(){var e=this;e._unBindToggle(),e._unBindLanguageMenu(),e._unBindSizeSelector(),e._unBindAdvancedOptions(),e._unBindCCPosition(),e._unBindCCPreview(),e._unBindFeedback()},r.prototype._syncToggleSelection=function(e){var t=this,n=t._ccToggleSelectionNodes.querySelector(".yvp-cc-"+(e?"on":"off"));s.classList(n).contains(h)||(s.classList(t._lastToggleSelected).remove(h),s.classList(n).add(h),t._lastToggleSelected=n)},r.prototype._bindCCToggle=function(){var e=this;e._toggleTaps=[],e._toggleCC=function(t){var n=t.target.getAttribute(y)===T;e._model.userPreferences.closedCaptions.hasChanged=!0,e._eventBus.publish(p.CC.UI_TOGGLE,n)},e._toggleSelections.forEach(function(t){var n=new c(t);e._toggleTaps.push(n),t.addEventListener("tap",e._toggleCC)})},r.prototype._unBindToggle=function(){var e=this;e._toggleTaps.forEach(function(e){e.destroy()}),e._toggleSelections.forEach(function(t){t.removeEventListener("tap",e._toggleCC)})},r.prototype._bindLanguageMenu=function(){var e=this;e._DDMenu&&e._DDMenu.registerEvent(p.CC.LANGUAGE_CHANGE)},r.prototype._unBindLanguageMenu=function(){var e=this;e._DDMenu.destroy()},r.prototype._bindSizeSelector=function(){
var e=this;e._sizeSlider.registerEvent(p.CC.FONT_SIZE_CHANGE)},r.prototype._onSizeChange=function(e){var t=this,n=b[e];t._model.userPreferences.closedCaptions.fontSize=n,t._model.userPreferences.closedCaptions.hasChanged=!0,t._model.playbackState.state!==o.INIT&&(t._eventBus.publish(p.CC.UPDATE_STYLE,"size: "+e),t._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})),t._showCCPreview()},r.prototype._unBindSizeSelector=function(){for(var e=this,t=0;t<e._letterOptionsBtns.children.length;t++)e._letterOptionsBtns.children[t].removeEventListener("tap",e._ccSizeLetterIndicator);e._sizeSlider.destroy()},r.prototype._bindFeedback=function(){var e=this;e._feedbackLink=e.node.querySelector(".yvp-cc-feedback-link"),e._feedbackLinkTap=new c(e._feedbackLink),e._onSubmitFeedback=function(t){var n=e._model.playbackState;n.paused||e._eventBus.publish(p.TOGGLE_PLAY_PAUSE)},e._feedbackLink.addEventListener("tap",e._onSubmitFeedback)},r.prototype._unBindFeedback=function(){var e=this;e._feedbackLinkTap.destroy()},r.prototype._bindAdvancedOptions=function(){var e=this;e._moreOptionShowComponent=function(t){e._currentScreenIndex=1,s.classList(e._nodes[0]).remove("open"),s.classList(e._nodes[0]).add("close"),s.classList(e._nodes[1]).remove("close"),s.classList(e._nodes[1]).add("open"),e._syncCCPreferences()},e._advancedMenuBackButtonTapListener=function(t){e._currentScreenIndex=0,s.classList(e._nodes[1]).remove("open"),s.classList(e._nodes[1]).add("close"),s.classList(e._nodes[0]).remove("close"),s.classList(e._nodes[0]).add("open")},e._moreOptionsBtn=e.node.querySelector(".yvp-cc-style-more"),e._moreOptionsBtnTap=new c(e._moreOptionsBtn),e._moreOptionsBtn.addEventListener("tap",e._moreOptionShowComponent),e._advancedMenuBackButton=e.ccMoreOptionsNode.querySelector(".yvp-cc-back"),e._advancedMenuBackButtonTap=new c(e._advancedMenuBackButton),e._advancedMenuBackButton.addEventListener("tap",e._advancedMenuBackButtonTapListener),e._bindStylePresetsUI(),e._bindTabUI(),e._bindColorPickerUI(),e._bindEffectPickerUI()},r.prototype._unBindAdvancedOptions=function(){var e=this;e._moreOptionsBtn&&e._moreOptionsBtnTap&&(e._moreOptionsBtnTap.destroy(),e._moreOptionsBtn.removeEventListener("tap",e._moreOptionShowComponent)),e._advancedMenuBackButton&&e._advancedMenuBackButtonTap&&(e._advancedMenuBackButtonTap.destroy(),e._advancedMenuBackButton.removeEventListener("tap",e._advancedMenuBackButtonTapListener)),e._ccOptionPresets&&e._ccOptionPresetsTap&&(e._ccOptionPresetsTap.destroy(),e._ccOptionPresets.removeEventListener("tap",e._ccOptionPresetsTapListener)),e._unbindTabUI&&e._unbindTabUI(),e._unbindColorPickerUI&&e._unbindColorPickerUI(),e._unbindEffectPickerUI&&e._unbindEffectPickerUI(),e._fontDDM.destroy(),e._bgOpactiyDDM.destroy()},r.prototype._togglePosition=function(e){var t=this,n=e.getAttribute("cc-pos-data")===A;s.classList(t._lastPosSelected).remove(h),s.classList(e).add(h),t._lastPosSelected=e,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(p.CC.POSITION_CHANGE,n),t._model.userPreferences.closedCaptions.ccPos=n?"top":"bottom",t._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})},r.prototype._bindCCPosition=function(){var e=this;e._positionTaps=[],e._togglePositionByButton=function(t){var n=t.target;e._togglePosition(n)},e._ccPositionOptionNodes.forEach(function(t){var n=new c(t);e._positionTaps.push(n),t.addEventListener("tap",e._togglePositionByButton)})},r.prototype._unBindCCPosition=function(){var e=this;e._positionTaps.forEach(function(e){e.destroy()}),e._ccPositionOptionNodes.forEach(function(t){t.removeEventListener("tap",e._togglePosition)})},r.prototype._showCCPreview=function(e){var t=this,n=t.node.querySelector(".yvp-cc-preview"),r=t._model.userPreferences.closedCaptions,i=S+e,o=600;e&&(s.classList(n).remove(t._previousAlignmentClassname),s.classList(n).add(i),t._previousAlignmentClassname=i),n.style.fontSize=r.fontSize+"px",n.style.color=r.fontColor,n.style.backgroundColor=r.bgColor,n.style.fontFamily=r.fontName,s.classList(n).add(E),t._ccPreviewTimeout&&clearTimeout(t._ccPreviewTimeout),t._ccPreviewTimeout=setTimeout(function(){s.classList(n).remove(E),t._ccPreviewTimeout=null},o)},r.prototype._bindStylePresetsUI=function(){var e=this;e._ccOptionPresetsTapListener=function(t){var n=t.eventTarget||t.eventSource;if(t.currentTarget!==n&&!s.classList(n).contains("preset-separator")){var r=n.presetIndex;if(l.isNumber(r)){var i=C[r];e._model.userPreferences.closedCaptions.fontColor=i.fontColor,e._model.userPreferences.closedCaptions.hasChanged=!0,e._setBgColor(i.bgColor),e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})}}},e._ccOptionPresets=e.ccMoreOptionsNode.querySelector(".preset-container"),e._ccOptionPresetsTap=new c(e._ccOptionPresets),e._ccOptionPresets.addEventListener("tap",e._ccOptionPresetsTapListener)},r.prototype._bindTabUI=function(){var e=this,t=function(e){var t=e.eventTarget||e.eventSource;e.currentTarget!==t&&(Array.prototype.forEach.call(i,function(e,r){t===e?(s.classList(e).add("tab-selected"),s.classList(n[r]).add("tab-show")):(s.classList(e).remove("tab-selected"),s.classList(n[r]).remove("tab-show"))}),e.stopPropagation())},n=e.ccMoreOptionsNode.querySelectorAll(".yvp-tabcontent"),r=e.ccMoreOptionsNode.querySelector(".yvp-tabs-nav"),i=r.querySelectorAll(".yvp-tab"),o=new c(r);r.addEventListener("tap",t),e._unbindTabUI=function(){o.destroy(),r.removeEventListener("tap",t)}},r.prototype._bindColorPickerUI=function(){var e=this,t=function(t){var n=t.eventTarget||t.eventSource;n.colorpickerType===L.Font?(e._model.userPreferences.closedCaptions.fontColor=n.val,e._model.userPreferences.closedCaptions.hasChanged=!0):n.colorpickerType===L.Background&&e._setBgColor(n.val),e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},n=new c(e._fontColorPicker);e._fontColorPicker.addEventListener("tap",t);var r=new c(e._bgColorPicker);e._bgColorPicker.addEventListener("tap",t),e._unbindColorPickerUI=function(){n.destroy(),e._fontColorPicker.removeEventListener("tap",t),r.destroy(),e._bgColorPicker.removeEventListener("tap",t)}},r.prototype._setBgColor=function(e){var t=this,n=t._model.userPreferences.closedCaptions;n.bgColor=e,"transparent"===e?n.bgOpacity=0:0===n.bgOpacity&&(n.bgOpacity=.75),t._toggleBgOpacityDDM(e)},r.prototype._toggleBgOpacityDDM=function(e){var t=this,n=t.ccMoreOptionsNode.querySelector(".bg-opacity-list"),r=n.querySelector(".yvp-ddm-selected-wrapper");"transparent"===e?s.classList(r).add("hide"):s.classList(r).remove("hide")},r.prototype._bindEffectPickerUI=function(){var e=this,t=function(t){var n=t.eventTarget||t.eventSource,r=n.parentNode.val;r&&(e._model.userPreferences.closedCaptions.fontEffect=r,e._model.userPreferences.closedCaptions.hasChanged=!0,e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions}))},n=new c(e._effectPicker);e._effectPicker.addEventListener("tap",t),e._unbindEffectPickerUI=function(){n.destroy(),e._effectPicker.removeEventListener("tap",t)}},r.prototype._unBindCCPreview=function(){var e=this;e._ccPreviewTimeout&&(clearTimeout(e._ccPreviewTimeout),e._ccPreviewTimeout=null)},r.prototype.showHideCurrentNode=function(e){var t=this;s.showHide(t._nodes[t._currentScreenIndex],e)},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null,e.ccMoreOptionsNode=null};var I=[{color:"#E7E7E7",name:"grey"},{color:"#000000",name:"black"},{color:"#FC2525",name:"red"},{color:"#29FD2F",name:"green"},{color:"#2CFEFE",name:"turquoise"},{color:"#EC369C",name:"pink"},{color:"#FEF149",name:"yellow"},{color:"#2524FB",name:"blue"}],M=[{color:"transparent",name:"none"},{color:"#eaeaea",name:"grey1"},{color:"#c7c7c7",name:"grey2"},{color:"#919191",name:"grey3"},{color:"#5b5b5b",name:"grey4"},{color:"#000000",name:"black"},{color:"#29FD2F",name:"green"},{color:"#2424FB",name:"blue"},{color:"#2CFDFD",name:"turquoise"},{color:"#EC359B",name:"pink"},{color:"#FDF048",name:"yellow"},{color:"#FC2424",name:"red"}],C=[{fontColor:"#cdcdcd",bgColor:"#060606"},{fontColor:"#282828",bgColor:"#c8c8c8"},{fontColor:"#fef149",bgColor:"#0a0908"},{fontColor:"#cdcdcd",bgColor:"transparent"},{fontColor:"#29fd2f",bgColor:"#0a0908"},{fontColor:"#ec369c",bgColor:"#0a0a09"},{fontColor:"#2cfefe",bgColor:"#0a0a09"},{fontColor:"#29fd2f",bgColor:"transparent"}],N=[{name:"none"},{name:"dropshadow"},{name:"raised"},{name:"depressed"},{name:"uniform"}],D={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},R=[{name:"Georgia",fontFamily:"Georgia, serif"},{name:"Palatino Linotype",fontFamily:'"Palatino Linotype", "Book Antiqua", Palatino, serif'},{name:"Times New Roman",fontFamily:'"Times New Roman", Times, serif'},{name:"Arial",fontFamily:"Arial, Helvetica, sans-serif"},{name:"Arial Black",fontFamily:'"Arial Black", Gadget, sans-serif'},{name:"Comic Sans MS",fontFamily:'"Comic Sans MS", cursive, sans-serif'},{name:"Impact",fontFamily:"Impact, Charcoal, sans-serif"},{name:"Lucida Sans Unicode",fontFamily:'"Lucida Sans Unicode", "Lucida Grande", sans-serif'},{name:"Tahoma",fontFamily:"Tahoma, Geneva, sans-serif"},{name:"Trebuchet MS",fontFamily:'"Trebuchet MS", Helvetica, sans-serif'},{name:"Verdana",fontFamily:"Verdana, Geneva, sans-serif"},{name:"Courier New",fontFamily:'"Courier New", Courier, monospace'},{name:"Lucida Console",fontFamily:'"Lucida Console", Monaco, monospace'}],P=[100,75,50,25],O={wrapper:"yvp-ddm-wrapper",selectedWrapper:"yvp-ddm-selected-wrapper",selected:"yvp-ddm-selected",availability:"yvp-ddm-availability",notAvailable:"not-available",dropDownIcon:"yvp-ddm-chevron",list:"yvp-ddm-list",listItem:"yvp-ddm-item"}},{"../../../lib":"bRhrlU","../cc":"zKzgQw","../event":"YJm+dH","../states":49,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/drop-down-menu":90,"../views/uiwidgets/slider":91,"../views/uiwidgets/tooltip":93,"./cc-more-options.html":66,"./cc-options.html":67,fs:146,"insert-css":148}],69:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <div class='yvp-top-bar'>"),r.b("\n"+n),r.b("        <div class='yvp-ad' aria-label='"),r.b(r.v(r.d("strings.ADV_SHORT",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.ADV_SHORT",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-content-type hide'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-bottom-bar'>"),r.b("\n"+n),r.b("        <div class='yvp-playlist-playing-item-title'></div>"),r.b("\n"+n),r.b("        <div class='yvp-bottom-container'>"),r.b("\n"+n),r.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),r.b("\n"+n),r.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),r.b("\n"+n),r.b("                <div class='yvp-handle'></div>"),r.b("\n"+n),r.b("                <div class='yvp-buffer-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-playback-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-visual-seek'>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-thumbnail'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-play-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("                <div class='yvp-upnext-container hide'>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-btn' role='button'>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),r.b("\n"+n),r.b("                        <div class='yvp-hover-elem'></div>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),r.b("\n"+n),r.b("                    <div class='yvp-current-time'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-total-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-menu-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.CC",e,t,0))),r.b("'></div>"),r.b("\n"+n),r.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-object-overlay'></div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],70:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._view=t,r._model=n,r._adBreaks=[],r._playlistRendered=!1,r._playlistFirstPageRendered=!1,r._eventBus.subscribe(o.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(o.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(o.AD_PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(o.CAST.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(o.Ad.PLAYING,r._onAdPlaying,r),r._eventBus.subscribe(o.Ad.ENDED,r._onAdEnded,r),r._eventBus.subscribe(o.Ad.CANCELED,r._onAdEnded,r),r._eventBus.subscribe(o.Video.ENDED,r._onVideoEnded,r),r._eventBus.subscribe(o.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(o.AD_PLAYBACK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(o.RELATED_ITEMS_LOADED,r._onRelatedItemsLoaded,r),r._eventBus.subscribe(o.RELATED_ITEM_CLICK,r._onRelatedItemClick,r),r._eventBus.subscribe(o.FULLSCREEN_CHANGE,function(){r._updateFullscreen(r._view.getFullscreen())}),r._eventBus.subscribe(o.CONTROLS_SET_VOLUME,function(e){r._updateVolumeUI(e)}),r._eventBus.subscribe(o.CAST.VOLUME_CHANGED,function(e){r._updateVolumeUI(e)}),r._eventBus.subscribe(o.CONTROLS_SET_MUTE,function(e){r._updateVolumeUI(r._model.playbackState.volume,e)}),r._eventBus.subscribe(o.CAST.MUTE_CHANGED,function(e){r._updateVolumeUI(r._model.playbackState.volume,e)})}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("../event"),a=(e("../renderers/modes"),e("../tap")),s=e("../util"),l=e("../../../lib"),c=e("../../../lib/user-agent"),d=e("../strings"),p=e("./yahoo-controls"),u=e("./playlist"),_=e("./controls.html"),m="end-screen";i('.yvp-flag-casting .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=")}.yvp-drag .yvp-handle,.yvp-drag .yvp-playback-bar{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}.yvp-mode-ad .yvp-top-bar .yvp-ad,.yvp-mode-vpaid .yvp-top-bar .yvp-ad{display:block}.yvp-mode-ad .yvp-bottom-bar,.yvp-mode-vpaid .yvp-bottom-bar{height:44px;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);}.yvp-mode-ad .yvp-bottom-bar .yvp-bottom-container,.yvp-mode-vpaid .yvp-bottom-bar .yvp-bottom-container{top:0}.yvp-top-bar{position:absolute;z-index:28;width:100%;top:0;height:0;}.yvp-top-bar .yvp-ad{display:none;position:absolute;top:14px;left:24px;color:#fff;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:14px}.yvp-top-bar .yvp-content-type{display:block;opacity:1;height:auto;left:0;top:15px;position:absolute;padding:5px 15px;color:#fff;text-shadow:none;text-transform:uppercase;letter-spacing:1px;font-weight:normal;font-size:11px;border-radius:0 2px 2px 0;background-color:#7300ff;background-image:-webkit-linear-gradient(20deg, #7300ff 0%, #0087ff 100%);background-image:-o-linear-gradient(20deg, #7300ff 0%, #0087ff 100%);background-image:linear-gradient(20deg, #7300ff 0%, #0087ff 100%);}.yvp-top-bar .yvp-content-type.hide{display:none}.yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{display:inline-block;margin-top:10px;position:absolute;right:0;top:0;float:right;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{height:24px;width:24px;bottom:0;background-position:center;background-repeat:no-repeat;float:none;display:inline-block;position:relative;margin-left:8px;cursor:pointer}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZnVsbHNjcmVlbjwvdGl0bGU+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNzAuNzg1IDUwLjYyMmMtLjExLTEuOTYtMS43MzYtMy40NjYtMy44NC0zLjQzaC0uMDAzYy0yIC4xMTQtMy41NDIgMS44NC0zLjQzMyAzLjgxNGwuMjEyIDYuNDEtMTEuMTA3LTEwLjcyNy01LjA2IDUuMjQ0IDExLjEwMyAxMC43MjItNi41My4wMTNjLTEuOTU3LjAzMy0zLjUzIDEuNTk4LTMuNTc4IDMuNTcyLS4wMiAxLjAwNC4zOSAxLjk5IDEuMTIyIDIuNjk2LjY2LjYzIDEuNTI0Ljk5NiAyLjQ2IDEuMDE3bDE5LjUxMi4xNzQtLjg2LTE5LjUwOE00Mi4yMjQgMzYuNzQ1bC0xMS4xMS0xMC43MyA2LjUzMi0uMDFjMS45NTgtLjAzMyAzLjUyNy0xLjU5NyAzLjU4LTMuNTY4LjAxOC0xLjAxLS4zOS0xLjk5My0xLjExNS0yLjY5Ni0uNjYzLS42MzctMS41My0xLTIuNDY4LTEuMDJsLTE5LjUxLS4xNzQuODU4IDE5LjUxYy4xMSAxLjk1OCAxLjczNiAzLjQ2MyAzLjgzNiAzLjQyNmguMDAzYy45NzItLjA1NCAxLjg2Ny0uNDg0IDIuNTE1LTEuMjEuNjUtLjczLjk3OC0xLjY2Ny45Mi0yLjZsLS4yMTItNi40MTJMMzcuMTYgNDEuOTg2bDUuMDY0LTUuMjQiLz48L2c+PC9zdmc+");background-size:100%;left:0;opacity:.8;cursor:pointer;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn.fullscreen{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZXhpdC1mdWxsc2NyZWVuPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00Ny4xOTMgNjUuNzUyYy4wNzMgMS45MTcgMS42MzYgMy40MTQgMy42OSAzLjQxNGguMDA0YzEuOTU3LS4wNzYgMy40OS0xLjczNCAzLjQxOC0zLjY2NWwtLjEtNi4yNjIgMTAuNjY2IDEwLjY2NCA1LjAzMi01LjAzNS0xMC42Ni0xMC42NiA2LjM3NS4wOThjMS45MTMgMCAzLjQ3Ni0xLjUgMy41NTYtMy40My4wMzctLjk4LS4zNDYtMS45NDgtMS4wNS0yLjY1LS42MzMtLjYyOC0xLjQ3LTEtMi4zODUtMS4wMzZsLTE5LjA1Mi0uNTA0LjUwNyAxOS4wNjZNMTcuNTQgMjIuNTdsMTAuNjY3IDEwLjY3LTYuMzgtLjEwM2MtMS45MTIgMC0zLjQ3MiAxLjUtMy41NTUgMy40MjQtLjAzNy45OS4zNDYgMS45NTQgMS4wNDIgMi42NTQuNjM3LjYzNCAxLjQ4IDEuMDAyIDIuMzkzIDEuMDM4bDE5LjA1Mi41MDMtLjUwOC0xOS4wN2MtLjA3My0xLjkxMi0xLjYzNi0zLjQxLTMuNjg3LTMuNDFoLS4wMDRjLS45NS4wMzctMS44My40NC0yLjQ3NiAxLjE0LS42NS43LS45ODQgMS42MS0uOTQ0IDIuNTIybC4xIDYuMjY2TDIyLjU3MyAxNy41NGwtNS4wMzUgNS4wMyIvPjwvZz48L3N2Zz4=");background-size:100%}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yTTYuNDEgMTZjLS4zOTUgMC0uNzY4LS4yMzMtLjkyNy0uNjItLjg1LTIuMDczLTIuNjE2LTMuNjMtNC43MjYtNC4xNjYtLjUzNS0uMTM3LS44Ni0uNjgtLjcyMy0xLjIxNi4xMzUtLjUzNS42OC0uODU1IDEuMjE1LS43MjQgMi43Mi42OTIgNC45OTUgMi42OSA2LjA4NCA1LjM0Ny4yMS41MTItLjAzNiAxLjA5Ni0uNTQ2IDEuMzA2LS4xMjUuMDUtLjI1My4wNzQtLjM4LjA3NCIvPjxwYXRoIGQ9Ik0xMC42MTcgMTZjLS40NDUgMC0uODUtLjI5OC0uOTY3LS43NDgtMS4xLTQuMjItNC41NTctNy40MDItOC44MS04LjEwNS0uNTQ1LS4wOS0uOTE0LS42MDUtLjgyNC0xLjE1LjA5LS41NDUuNjA0LS45MjQgMS4xNS0uODIzIDUuMDMyLjgzIDkuMTIgNC41OSAxMC40MiA5LjU3NC4xMzguNTM0LS4xODIgMS4wOC0uNzE3IDEuMjItLjA4NS4wMi0uMTcuMDMyLS4yNTMuMDMyTTIuNDQ2IDE0LjQ5Yy4wMDQuMDA0LjAwNy4wMS4wMS4wMTUuMDk3LjE3Mi4xNC4zNi4xMy41NDQtLjAxLjE4LS4wNjcuMzYtLjE3NS41MTctLjA4Mi4xMi0uMTkyLjIyNS0uMzI4LjMwMi0uMTU4LjA5LS4zMjcuMTE0LS40OTYuMTE0SC4wMnYtMS40NjZjLS4wMDItLjE3LjAyNS0uMzM4LjExNC0uNDk2LjI3NC0uNDguODg0LS42NDYgMS4zNjQtLjM3NC4yNS4xNDMuNDQuMzIuNTkzLjQ2bC4xNC4xMjdjLjA4OC4wNzQuMTYuMTYuMjE2LjI1NHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn:hover{opacity:1}.yvp-bottom-bar .yvp-play-controls{display:block;top:0;left:0;padding-top:10px;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr}.yvp-bottom-bar .yvp-play-btn{position:relative;display:inline-block;background-position:50% 50%;background-size:100%;bottom:0;left:0;margin-top:0;margin-left:-4px;width:24px;height:24px;cursor:pointer}.yvp-bottom-bar .yvp-upnext-container{bottom:0;left:0;margin-left:4px;width:24px;height:24px;display:inline-block;}.yvp-bottom-bar .yvp-upnext-container.hide{display:none}.yvp-bottom-bar .yvp-upnext-container.disabled{opacity:.25;pointer-events:none}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{position:relative;background-position:50% 50%;background-size:100%;top:0;left:0;width:24px;height:24px;z-index:2;}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{cursor:pointer}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist{z-index:1;}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist.hide{display:none}.yvp-bottom-bar .yvp-time-container{display:inline-block;position:relative;left:0;top:-8px;font-size:11px;margin-left:4px;}.yvp-bottom-bar .yvp-time-container.yvp-hide{display:none}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-vs-time,.yvp-bottom-bar .yvp-total-time{font-size:11px;display:inline-block;}.yvp-bottom-bar .yvp-current-time.yvp-hide,.yvp-bottom-bar .yvp-vs-time.yvp-hide,.yvp-bottom-bar .yvp-total-time.yvp-hide{display:none}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-total-time{position:relative;top:0;left:0 !important;margin-left:0;padding:0;width:auto;background-color:transparent;text-shadow:0 1px 1px rgba(0,0,0,0.3)}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-total-time{color:rgba(255,255,255,0.8);}.yvp-bottom-bar .yvp-current-time:hover,.yvp-bottom-bar .yvp-total-time:hover{color:rgba(255,255,255,0.8)}.yvp-bottom-bar .yvp-vs-time{position:absolute;bottom:3px;left:34px;width:44px;background-color:rgba(0,0,0,0.3);color:#fff;text-shadow:1px 1px 2px #000;border-radius:2px;padding:3px 0;font-size:11px;text-align:center}.yvp-bottom-bar .yvp-slider.yvp-disable{display:none;pointer-events:none}.yvp-bottom-bar .yvp-slider,.yvp-bottom-bar .yvp-handle,.yvp-bottom-bar .yvp-buffer-bar,.yvp-bottom-bar .yvp-playback-bar{position:absolute;height:4px;bottom:44px;border:0;border-radius:3px;opacity:1;direction:ltr;max-width:100%}.yvp-bottom-bar .yvp-slider.yvp-thick-slider{height:6px;bottom:43px;}.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-buffer-bar,.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-playback-bar{height:6px;bottom:43px}.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-handle{margin-top:-3px}.yvp-bottom-bar .yvp-playback-bar{top:0;background-color:#7300ff;background-image:-webkit-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:-o-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:linear-gradient(to right, #7300ff 0%, #188fff 100%);opacity:.8}.yvp-bottom-bar .yvp-slider{width:100%;position:absolute;background:rgba(255,255,255,0.2);border-radius:3px;border-color:transparent;cursor:pointer;}.yvp-bottom-bar .yvp-slider .yvp-slider-extension{position:absolute;width:100%;height:16px;top:-6px}.yvp-bottom-bar .yvp-buffer-bar{top:0;background:rgba(255,255,255,0.2)}.yvp-bottom-bar .yvp-visual-seek{display:none;position:absolute;top:-71px;width:112px;height:63px;margin-left:-57px;background-color:#000;border:0;z-index:2;pointer-events:none;text-align:center}.yvp-bottom-bar .yvp-handle{position:absolute;top:0;width:12px;height:12px;border:0;border-radius:50%;background-color:#fff;margin-top:-4px;margin-left:-6px;background-image:none;display:none;z-index:3;}.yvp-bottom-bar .yvp-handle.active{display:block}.yvp-bottom-bar .yvp-ad-break{background-color:rgba(204,204,204,0.5);position:absolute;top:0;width:3px;height:100%;}.yvp-bottom-bar .yvp-ad-break:hover{background-color:rgba(255,255,255,0.5)}.yvp-bottom-bar .yvp-ad-break.occurred{background-color:rgba(0,0,0,0.25)}.yvp-bottom-bar .yvp-fullscreen-btn-replacement{width:9px;height:30px;position:relative;float:right}.yvp-bottom-bar .yvp-playlist-playing-item-title{display:block;position:absolute;left:35px;top:35px;font-size:16px;opacity:0;color:#fff}.yvp-bottom-bar.yvp-bottom-upnext{height:100%;opacity:.55;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;background:rgba(18,23,23,0.55);}.yvp-bottom-bar.yvp-bottom-upnext .yvp-playlist-playing-item-title{opacity:1;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-slider{opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;display:none;pointer-events:none}.yvp-bottom-bar.yvp-bottom-upnext .yvp-playlist-item{-webkit-transform:translateX(0) scale(1,1);-moz-transform:translateX(0) scale(1,1);-ms-transform:translateX(0) scale(1,1);-o-transform:translateX(0) scale(1,1);transform:translateX(0) scale(1,1);-webkit-transition:transform 420ms cubic-bezier(0,.4,.1,1);-moz-transition:transform 420ms cubic-bezier(0,.4,.1,1);-o-transition:transform 420ms cubic-bezier(0,.4,.1,1);transition:transform 420ms cubic-bezier(0,.4,.1,1)}.yvp-bottom-bar.yvp-drag .yvp-play-controls,.yvp-bottom-bar.yvp-drag .yvp-menu-controls{opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-ie9 .yvp-playback-bar{filter:progid:DXImageTransform.Microsoft.gradient(gradientType:1, startColorStr=#AA7300FF, endColorStr=#FF0087FF)}.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .button,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:.2;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;pointer-events:none}.yvp-state-video .yvp-bottom-bar .yvp-play-btn,.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");opacity:.8;}.yvp-state-video .yvp-bottom-bar .yvp-play-btn:hover,.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn,.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNC41IDYuMjQyYzAtLjY4Ni41NTUtMS4yNDIgMS4yNS0xLjI0Mi42OSAwIDEuMjUuNTY2IDEuMjUgMS4yNDJ2MTEuNTE2YzAgLjY4Ni0uNTU1IDEuMjQyLTEuMjUgMS4yNDItLjY5IDAtMS4yNS0uNTY2LTEuMjUtMS4yNDJWNi4yNDJ6TTcgNi4yNDJDNyA1LjU1NiA3LjU1NSA1IDguMjUgNWMuNjkgMCAxLjI1LjU2NiAxLjI1IDEuMjQydjExLjUxNkM5LjUgMTguNDQ0IDguOTQ1IDE5IDguMjUgMTkgNy41NiAxOSA3IDE4LjQzNCA3IDE3Ljc1OFY2LjI0MnoiLz48L2c+PC9zdmc+");opacity:.8;}.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn:hover,.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-flag-playing.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");opacity:.8;background-size:95%;}.yvp-flag-playing.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dXBuZXh0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMi4wOTIgNjYuMDIzbC0uMTMuMDAyYy0yLjAyNCAwLTMuNjY1LTEuNjQ1LTMuNjY1LTMuNjc2VjI1LjdjMC0xLjU1NS45NjYtMi44ODQgMi4zMjYtMy40MiAxLjA1OC0uNDY2IDIuMzE0LS40NCAzLjM4Ny4xOGwzMS42MDggMTguMjVjLjQ2LjI2NS44NDIuNjEzIDEuMTM4IDEuMDE1LjEuMTMyLjE5NS4yNzIuMjguNDIgMS4wNjMgMS44NC40MzQgNC4xOTUtMS40MTcgNS4yNjRMMjQuMjYgNjUuNTFjLS42ODMuMzk1LTEuNDM4LjU1Ny0yLjE3LjUxek02Mi4zMzMgMjIuMDA0YzAtMi4wMjcgMS42NDYtMy42NyAzLjY2Ny0zLjY3IDIuMDI1IDAgMy42NjcgMS42NSAzLjY2NyAzLjY3djQzLjk5MmMwIDIuMDI3LTEuNjQ2IDMuNjctMy42NjcgMy42Ny0yLjAyNSAwLTMuNjY3LTEuNjUtMy42NjctMy42N1YyMi4wMDR6Ii8+PC9nPjwvc3ZnPg==");opacity:.8;display:inline-block;}.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{opacity:1}.yvp-state-start-screen .yvp-top-bar .yvp-content-type{display:none}.yvp-state-end-screen .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-state-end-screen .yvp-bottom-bar .yvp-slider{pointer-events:none}.yvp-browser-mobile .yvp-bottom-bar .yvp-play-controls{padding-top:7px}.yvp-browser-mobile .yvp-bottom-bar .yvp-play-btn{opacity:1;width:30px;height:30px}.yvp-browser-mobile .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{opacity:1}.yvp-browser-mobile .yvp-bottom-bar .yvp-time-container{top:-10px}.yvp-browser-mobile .yvp-bottom-bar .yvp-current-time,.yvp-browser-mobile .yvp-bottom-bar .yvp-vs-time,.yvp-browser-mobile .yvp-bottom-bar .yvp-total-time{font-size:14px}.yvp-browser-mobile .yvp-bottom-bar .yvp-handle{width:14px;height:14px;margin-top:-5px;display:block}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:7px;}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{width:30px;height:30px}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:1;margin-bottom:0;margin-right:0}.yvp-state-video .yvp-bottom-bar{display:block}.yvp-state-start-screen .yvp-bottom-bar,.yvp-state-error .yvp-bottom-bar,.yvp-state-end-screen .yvp-bottom-bar,.yvp-state-loading .yvp-bottom-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-slider,.yvp-mode-vpaid .yvp-bottom-bar .yvp-slider,.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-ad .yvp-bottom-bar .yvp-playback-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-playback-bar{pointer-events:none;height:4px !important;bottom:0 !important;display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-content-type,.yvp-mode-vpaid .yvp-bottom-bar .yvp-content-type{display:block}.yvp-mode-ad .yvp-bottom-bar .yvp-ad-break,.yvp-mode-vpaid .yvp-bottom-bar .yvp-ad-break{display:none}.yvp-cast-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background-color:#000;z-index:50;display:none;color:#fff;background-repeat:no-repeat;background-size:cover;}.yvp-cast-overlay:after{content:\'\';background-color:rgba(0,0,0,0.85);display:block;width:100%;height:100%;position:absolute;top:0;z-index:-1}.yvp-cast-overlay > div{position:relative;height:calc(100% - 70px);}.yvp-cast-overlay > div .cast-overlay-header{height:25%;display:flex;flex-direction:column;justify-content:center;border-bottom:1px solid #777}.yvp-cast-overlay > div .cast-device-info{margin-left:50px;}.yvp-cast-overlay > div .cast-device-info:before{content:\'\';float:left;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=");background-repeat:no-repeat;background-size:90%;background-position:50%;margin-right:10px;width:36px;height:36px}.yvp-cast-overlay > div .cast-device-name{font-size:.9em;position:relative;top:3px}.yvp-cast-overlay > div .cast-device-type{font-size:.7em;color:#999}.yvp-cast-overlay > div .cast-overlay-content{position:relative;height:50%;left:0;right:0;cursor:pointer;opacity:.6;display:flex;justify-content:center;align-items:center;}.yvp-cast-overlay > div .cast-overlay-content:hover{opacity:1}.yvp-cast-overlay > div .cast-overlay-content:after{content:\'\';display:block;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");background-repeat:no-repeat;background-size:80%;background-position:50%;width:10%;height:0;padding-bottom:10%;}.yvp-cast-playing .yvp-cast-overlay > div .cast-overlay-content:after{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNC41IDYuMjQyYzAtLjY4Ni41NTUtMS4yNDIgMS4yNS0xLjI0Mi42OSAwIDEuMjUuNTY2IDEuMjUgMS4yNDJ2MTEuNTE2YzAgLjY4Ni0uNTU1IDEuMjQyLTEuMjUgMS4yNDItLjY5IDAtMS4yNS0uNTY2LTEuMjUtMS4yNDJWNi4yNDJ6TTcgNi4yNDJDNyA1LjU1NiA3LjU1NSA1IDguMjUgNWMuNjkgMCAxLjI1LjU2NiAxLjI1IDEuMjQydjExLjUxNkM5LjUgMTguNDQ0IDguOTQ1IDE5IDguMjUgMTkgNy41NiAxOSA3IDE4LjQzNCA3IDE3Ljc1OFY2LjI0MnoiLz48L2c+PC9zdmc+")}.yvp-cast-overlay > div .cast-overlay-footer{height:25%;text-align:center;border-top:1px solid #777}.yvp-cast-overlay > div .cast-disconnect-btn{position:relative;top:8px;cursor:pointer;padding:2px 5px;color:#999;}.yvp-cast-overlay > div .cast-disconnect-btn:hover{color:#fff}.yvp-flag-casting .yvp-cast-overlay{display:block}.yvp-flag-casting .yvp-bottom-bar{z-index:75;opacity:1 !important;-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important;display:block !important}body.yvp-lightbox{overflow:hidden !important;}body.yvp-lightbox .yvp-lightbox-ancestor{z-index:2147483647 !important;}body.yvp-lightbox .yvp-lightbox-ancestor .yvp-content.yvp-browser-desktop{position:fixed;top:0;left:0;width:100% !important;height:100% !important;z-index:2147483647}.yvp-stream .yvp-bottom-bar{height:60px;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container{top:26px;margin:0 8px;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-stream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-stream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-stream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-stream .yvp-bottom-bar .yvp-upnext-container,.yvp-stream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-ministream .yvp-bottom-bar{height:60px;}.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container{bottom:85px;padding:6px 0;width:20px;left:2px;}.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container:after{left:5px}.yvp-ministream .yvp-bottom-bar .yvp-volume-level{margin-left:7px}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container{top:35px;margin:0 4px;}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{margin-left:0}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-ministream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-ministream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-ministream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-ministream .yvp-bottom-bar .yvp-upnext-container,.yvp-ministream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-ministream .yvp-start-screen .yvp-start-screen-button{width:50px;height:50px;margin:-25px 0 0 -25px}.yvp-content.yvp-ministream .yvp-main .yvp-mute-indicator{top:66%;right:0}.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar{height:30px;}.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar .yvp-bottom-container{top:5px}.yvp-state-end-screen .yvp-bottom-bar{display:block}'),
r.prototype.create=function(){var e,t=this;l.isFunction(p)?(t._desktopControls=new p(t._eventBus,t._view,t._model),e=t._desktopControls.create()):e=[s.render(_).querySelector(".yvp-bottom-bar"),s.render(_,{strings:d.i18n}).querySelector(".yvp-top-bar")],t._bottomBar=e[0],t._bottomBarContainer=t._bottomBar.querySelector(".yvp-bottom-container"),t._slider=t._bottomBar.querySelector(".yvp-slider"),t._bufferBar=t._bottomBar.querySelector(".yvp-buffer-bar"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._currentTimeLabel=t._bottomBar.querySelector(".yvp-current-time"),t._totalTimeLabel=t._bottomBar.querySelector(".yvp-total-time"),t._handle=t._bottomBar.querySelector(".yvp-handle"),t._playbackBar=t._bottomBar.querySelector(".yvp-playback-bar"),t._playBtn=t._bottomBar.querySelector(".yvp-play-btn"),t._upNextBtn=t._bottomBar.querySelector(".yvp-upnext-btn"),t._upNextPlist=t._bottomBar.querySelector(".yvp-upnext-playlist"),t._upNextContainer=t._bottomBar.querySelector(".yvp-upnext-container"),t._seekBar=t._bottomBar.querySelector(".yvp-seek"),t._visualSeekContainer=t._bottomBar.querySelector(".yvp-visual-seek"),t._fullscreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._volumeBtn=t._bottomBar.querySelector(".yvp-volume-btn"),t._volumeBarContainer=t._bottomBar.querySelector(".yvp-volume-bar-container"),t._volumeIndicator=t._bottomBar.querySelector(".yvp-volume-level"),t._volumeBar=t._bottomBar.querySelector(".yvp-volume-bar"),t._volumeValue=t._bottomBar.querySelector(".yvp-volume-value"),t._volumeHandle=t._bottomBar.querySelector(".yvp-volume-handle"),t._topBar=e[1],t._contentType=t._topBar&&t._topBar.querySelector(".yvp-content-type");var n=t._fullscreenBtn&&c.ie&&c.ie<=10&&s.isIFrame();if(n=n||!t._model.ui.showFullscreen){var r=document.createElement("div");s.classList(r).add("yvp-fullscreen-btn-replacement"),t._fullscreenBtn.parentNode.insertBefore(r,t._fullscreenBtn),t._fullscreenBtn.parentNode.removeChild(t._fullscreenBtn),t._fullscreenBtn=null}return t._initAriaProperties(),t._bindEvents(),e},r.prototype._renderPlaylist=function(){var e=this,t=e._view.getPlaylistUIPosition(),n=e._view.getContentNode();e._fujiPlaylist=new u(e._eventBus,e._view,e._model),"hidden"===t&&(e._playlistNode=e._fujiPlaylist.create("hidden"),e._upNextPlist.appendChild(e._playlistNode),s.classList(e._upNextContainer).remove("hide"),c.mobile||(e._upNextContainer.addEventListener("mouseover",function(t){s.classList(e._bottomBar).contains("yvp-bottom-upnext")||(s.classList(e._bottomBar).add("yvp-bottom-upnext"),e._bottomBarContainer.style.top=e._getUpnextBottomContainerTop()+"px",e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-next-hover"}))}),e._upNextContainer.addEventListener("mouseout",function(){setTimeout(function(){window.getComputedStyle(e._playlistNode).zIndex<0&&(s.classList(e._bottomBar).remove("yvp-bottom-upnext"),e._bottomBarContainer.removeAttribute("style"))},100)}))),"bottom"!==t||c.mobile||(e._playlistNode=e._fujiPlaylist.create("bottom"),n.appendChild(e._playlistNode),s.classList(e._upNextContainer).remove("hide"),s.classList(e._upNextPlist).remove("hide")),"right"!==t||c.mobile||(e._playlistNode=e._fujiPlaylist.create("right"),n.appendChild(e._playlistNode),s.classList(e._upNextContainer).remove("hide"),s.classList(e._upNextPlist).remove("hide")),e._playlistRendered=!0},r.prototype._onAdPlaying=function(){var e=this;e._hideVisualSeek(),e._sliderRemoveEventListener(),e._enableUpNextButton(!1)},r.prototype._onAdPlaybackStarted=function(){var e=this;e._syncVolumeUI(),e._enableUpNextButton(!1),s.classList(e._contentType).add("hide")},r.prototype._onAdEnded=function(){var e=this;e._sliderAddEventListener()},r.prototype._onPlaybackStarted=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode(),e._syncVolumeUI(),e._playlistFirstPageRendered!==!0&&e._view.showPlaylist()&&!e._model.playback.loop&&(e._eventBus.publish(o.RENDER_PLAYLIST_FIRST_BATCH),e._playlistFirstPageRendered=!0),e._upNEnabled||e._enableUpNextButton(!0)},r.prototype._setLiveMode=function(){var e=this;s.classList(e._slider).add("yvp-disable"),s.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;l.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),s.classList(e._contentType).remove("hide")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=d.i18n.LIVE,e._contentType.setAttribute("aria-label",d.i18n.LIVE),s.classList(e._contentType).remove("hide"))},r.prototype._setVodMode=function(){var e=this;s.classList(e._slider).remove("yvp-disable"),s.classList(e._timeDisplay).remove("yvp-hide")},r.prototype._onVideoEnded=function(){var e=this;e._enableUpNextButton(!1)},r.prototype._bindEvents=function(){var e=this;e._playTap=new a(e._playBtn),e._onPlayTap=function(t){t.stopPropagation();var n=e._view.getCurrentViewState(),r=e._model.playlist.getCurrentItem().id,i=e._model.playbackState.paused?"ctrl-play-btn":"ctrl-pause-btn";n===m?(e._eventBus.publish(o.RELATED_ITEM_CLICK,r,-1,!1,!1),e._resetTimeLabels()):(e._eventBus.publish(o.API.UI_INTERACT,{srcElement:i}),e._eventBus.publish(o.TOGGLE_PLAY_PAUSE))},e._playBtn.addEventListener("tap",e._onPlayTap),e._fullscreenBtn&&(e._fullscreenTap=new a(e._fullscreenBtn),e._onFullscreenTap=function(t){t.stopPropagation(),e._view.toggleFullscreen()},e._fullscreenBtn.addEventListener("tap",e._onFullscreenTap)),e._bottomBarClick=new a(e._bottomBar),e._onBottomBarClick=function(e){e.stopPropagation()},e._bottomBar.addEventListener("tap",e._onBottomBarClick),e._sliderAddEventListener(),e._bindVolume()},r.prototype._onRelatedItemClick=function(e,t,n){var r=this;r._resetTimeLabels()},r.prototype._onRelatedItemsLoaded=function(e,t,n){var r=this;r._view.showPlaylist()&&(r._onUpNextBtnTap||(r._onUpNextBtnTap=function(){return c.mobile?(r._upNextPlist.style.display="block",void(s.classList(r._upNextPlist).contains("open")?(s.classList(r._bottomBar).remove("yvp-bottom-upnext"),s.classList(r._upNextPlist).remove("open"),r._bottomBarContainer.removeAttribute("style")):(s.classList(r._upNextPlist).add("open"),r._upNextPlist.style.display="block",r._bottomBarContainer.style.top=r._getUpnextBottomContainerTop()+"px",s.classList(r._bottomBar).add("yvp-bottom-upnext")))):void r._fujiPlaylist.upNextBtnTapHandler()},r._upNextBtnTap=new a(r._upNextBtn),r._upNextBtn.addEventListener("tap",r._onUpNextBtnTap)),n&&n.length>2?r._fujiPlaylist.renderPlaylist(t,n):e&&r._enableUpNextButton(!1))},r.prototype._enableUpNextButton=function(e){var t=this;t._upNextContainer&&t._view.showPlaylist()&&(e&&!t._model.playlist.getCurrentItem().isLive()?s.classList(t._upNextContainer).remove("disabled"):s.classList(t._upNextContainer).add("disabled"),t._upNEnabled=e)},r.prototype._resetTimeLabels=function(){var e=this;e._currentTimeLabel.innerHTML="0:00",e._totalTimeLabel.innerHTML="/ 0:00"},r.prototype._getUpnextBottomContainerTop=function(){var e=this,t=e._view.getContentNode().clientHeight,n=e._bottomBarContainer.clientHeight,r=e._view.getNFLBrandingNode(),i=0;return null!==r&&(i=r.clientHeight),t-n-i},r.prototype._updateFullscreen=function(e){var t=this;t._fullscreenBtn&&(e?(s.classList(t._fullscreenBtn).add("fullscreen"),t._updateFullscreenTooltip(d.i18n.EXIT_FULLSCREEN)):(s.classList(t._fullscreenBtn).remove("fullscreen"),t._updateFullscreenTooltip(d.i18n.FULLSCREEN_SPACE))),t._fullScreenStreamModeUpdate(e),t.syncAriaState()},r.prototype._updateFullscreenTooltip=function(e){var t=this;if(t._fullscreenBtn){var n=t._fullscreenBtn.querySelector(".yvp-tooltip-content");n&&(n.innerHTML=e)}},r.prototype._sliderAddEventListener=function(){var e=this;e._seekBar&&(e._seekTap=new a(e._seekBar),e._onSeekTap=function(t){t.stopPropagation();var n=(t.clientX||t.pageX)-e._seekBar.getBoundingClientRect().left,r=n/e._seekBar.clientWidth,i=Math.min(r*e._duration,Math.max(e._duration-1,0));e._view.seek(i)},e._seekBar.addEventListener("tap",e._onSeekTap)),e._onSliderMove=function(t){e._eventBus.publish(o.SEEK_BAR_MOUSEOVER,t),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t),e._preventTouchDefault(t)},e._onSliderLeave=function(t){e._eventBus.publish(o.SEEK_BAR_MOUSEOUT,t),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t)},e._bindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._onSeekDown=function(t){s.classList(e._handle).add("active"),e._preventTouchDefault(t),e._seeking=!0,e._eventBus.publish(o.CONTROLS_SEEK_START);var n=e._getSeekFraction(t),r=Math.min(n*e._duration,Math.max(e._duration-1,0));e._eventBus.publish(o.CTRL_SEEK,Math.round(r)),e._onSeekMove(t)},e._onSeekMove=function(t){if(e._seeking){e._preventTouchDefault(t),s.classList(e._bottomBar).add("yvp-drag"),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t);var n=e._getSeekFraction(t),r=Math.min(n*e._duration,Math.max(e._duration-1,0));e._playbackBar.setAttribute("style","width: "+100*n+"%;"),e._bufferBar.setAttribute("style","width: 0%;"),e._handle.setAttribute("style","left: "+100*n+"%;"),e._eventBus.publish(o.CONTROLS_SEEKING,r)}},e._onSeekUp=function(t){e._seeking&&(s.classList(e._bottomBar).remove("yvp-drag"),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t),e._seeking=!1,e._eventBus.publish(o.CONTROLS_SEEK_END))},e._bindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},r.prototype._sliderRemoveEventListener=function(){var e=this;e._unbindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._unbindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},r.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},r.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),t._liveState=e.liveState,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),s.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode(),!t._playlistRendered&&t._view.showPlaylist()&&t._renderPlaylist(),t._playlistFirstPageRendered!==!0&&t._model.playback.autoplay!==!0&&t._view.showPlaylist()&&!t._model.playback.loop&&(t._eventBus.publish(o.RENDER_PLAYLIST_FIRST_BATCH),t._playlistFirstPageRendered=!0)},r.prototype._onPlaybackProgress=function(e,t,n,r){var i=this;void 0!==n&&i._duration!==n&&(i._duration=n),r&&i._updateBuffer(r),void 0!==t&&(i._updateProgress(t),i._currentTime=t)},r.prototype._updateProgress=function(e){var t=this,n=t._duration,r=e/t._duration*100;t._currentTimeLabel&&l.isNumber(e)&&l.isNumber(t._duration)&&(n-=e,t._currentTimeLabel.innerHTML=s.formatTime(e)),t._totalTimeLabel&&l.isNumber(t._duration)&&(t._totalTimeLabel.innerHTML="/ "+s.formatTime(t._duration)),l.isNumber(e)&&l.isNumber(t._duration)&&(t._playbackBar.setAttribute("style","width: "+r+"%;"),t._seeking||t._handle.setAttribute("style","left: "+r+"%;"),t._slider.setAttribute("aria-valuemax",t._duration),t._slider.setAttribute("aria-valuenow",e),t._slider.setAttribute("aria-valuetext",s.formatTime(e)+" of "+s.formatTime(t._duration)))},r.prototype._updateBuffer=function(e){var t=this,n=0;e.length>0&&(n=e.end(0)/t._duration*100),t._bufferBar.setAttribute("style","width: "+n+"%;")},r.prototype._updateVisualSeek=function(e){var t=this,n=t._model.playlist.getCurrentItem().visualSeek;if(0!==Object.keys(n).length){var r,i=t._getSeekFraction(e);r=.09>i?.09:i>.91?.91:i,t._visualSeekContainer.style.display="block",t._visualSeekContainer.style.left=100*r+"%";var o=i*t._duration;t._visualSeekContainer.querySelector(".yvp-vs-time").innerHTML=s.formatTime(o);var a=10,l=10,c=a*l,d=Math.ceil(Math.floor(o)/n.frequency),p=n.images[Math.floor(d/c)];if(p){var u=d%c,_=u%l,m=Math.floor(u/l),v=_*n.width,y=m*n.height,f=t._visualSeekContainer.querySelector(".yvp-vs-thumbnail");f.style.width=n.width+"px",f.style.height=n.height+"px",f.style.background="url('"+p.url+"')",f.style.backgroundPosition="-"+v+"px -"+y+"px"}}},r.prototype._bindDragEvents=function(e,t,n,r){["mousedown","touchstart"].forEach(function(n){e.addEventListener(n,t)}),["mousemove","touchmove"].forEach(function(e){document.addEventListener(e,n)}),["mouseup","touchend"].forEach(function(e){document.addEventListener(e,r)})},r.prototype._unbindDragEvents=function(e,t,n,r){["mousedown","touchstart"].forEach(function(n){e.removeEventListener(n,t)}),["mousemove","touchmove"].forEach(function(e){document.removeEventListener(e,n)}),["mouseup","touchend"].forEach(function(e){document.removeEventListener(e,r)})},r.prototype._bindScrollOverEvents=function(e,t,n){["mouseenter","touchstart"].forEach(function(n){e.addEventListener(n,t)}),["mousemove","touchmove"].forEach(function(n){e.addEventListener(n,t)}),["mouseleave","touchend"].forEach(function(t){e.addEventListener(t,n)})},r.prototype._unbindScrollOverEvents=function(e,t,n){["mouseenter","touchstart"].forEach(function(n){e.removeEventListener(n,t)}),["mousemove","touchmove"].forEach(function(n){e.removeEventListener(n,t)}),["mouseleave","touchend"].forEach(function(t){e.removeEventListener(t,n)})},r.prototype._syncVolumeUI=function(){var e=this;e._volumeBtn&&e._updateVolumeUI(e._model.playbackState.volume,e._model.playbackState.mute)},r.prototype._bindMute=function(){var e=this,t=0;e._volumeTap=new a(e._volumeBtn),e._onVolumeTap=function(n){e._isVolumeInChange||(n.stopPropagation(),e._showVolumeHandle(),e._view.clearAutoHideTimeout(),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(e._model.playbackState.mute?"off":"on")}),e._eventBus.publish(o.CONTROLS_SET_MUTE,!e._model.playbackState.mute),1>=t?t++:2===t&&(e._view.getContentNode().querySelector(".yvp-mute-indicator").style.display="none"))},e._volumeBtn.addEventListener("tap",e._onVolumeTap)},r.prototype._bindVolumeBar=function(){var e=this;e._getVolumeFromEvt=function(t){var n,r=e._view.getFullscreen()&&(c.chrome||c.safari);return n=r?t.pageY-s.getOffsetTopFromEl(e._volumeIndicator,"yvp-main"):t.pageY-s.getOffsetTopFromDocument(e._volumeIndicator),e._volumeIndicator.getBoundingClientRect().top?1-Math.max(0,Math.min(1,n/e._volumeIndicator.clientHeight)):1},e._volumeBarTap=new a(e._volumeBarContainer),e._onVolumeBarTap=function(t){t.stopPropagation(),e._showVolumeHandle(),e._initiateVolumeEvents(t)},e._syncMute=function(t){e._model.playbackState.mute!==t&&(e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(t?"on":"off")}),e._eventBus.publish(o.CONTROLS_SET_MUTE,t))},e._initiateVolumeEvents=function(t){var n=e._getVolumeFromEvt(t);e._syncMute(0===n),e._eventBus.publish(o.CONTROLS_SET_VOLUME,n)},e._volumeBarContainer.addEventListener("tap",e._onVolumeBarTap),e._onVolumeBarDown=function(t){e._preventTouchDefault(t),e._isVolumeInChange=!0,e._showVolumeHandle(),e._onVolumeBarMove(t)},e._onVolumeBarMove=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._showVolumeHandle(),e._initiateVolumeEvents(t),e._onVolumeBtnHover(t))},e._onVolumeBarUp=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._isVolumeInChange=!1)},e._bindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp)},r.prototype._showVolumeHandle=function(){var e=this;e._volumeHandleTimeout&&clearTimeout(e._volumeHandleTimeout),s.classList(e._volumeHandle).add("show")},r.prototype._bindVolumeBtnHover=function(){var e=this;e._mouseOutVolumeBtnTimeout=null,e._hasVolumeBarUpdatedOnInit=!1,e._onVolumeBtnHover=function(t){e._preventTouchDefault(t),s.classList(e._volumeBarContainer).add("open"),e._hasVolumeBarUpdatedOnInit||(e._syncVolumeUI(),e._hasVolumeBarUpdatedOnInit=!0),e._showVolumeHandle(),e._eventBus.publish(o.VOLUME_HOVER)},e._onVolumeBtnLeave=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._mouseOutVolumeBtnTimeout=setTimeout(function(){s.classList(e._volumeBarContainer).remove("open")},500)},e._onVolumeBarContainerHover=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout)},e._bindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._bindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave)},r.prototype._bindVolume=function(){var e=this;e._volumeBtn&&e._bindMute(),e._volumeBarContainer&&e._volumeBtn&&(e._bindVolumeBar(),e._bindVolumeBtnHover())},r.prototype._unbindVolume=function(){var e=this;e._volumeBtn&&(e._volumeTap.destroy(),e._volumeBtn.removeEventListener("tap",e._onVolumeTap)),e._volumeBarContainer&&(e._volumeBarTap.destroy(),e._volumeBarContainer.removeEventListener("tap",e._onVolumeBarTap),e._unbindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp),e._unbindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._unbindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave))},r.prototype._updateMuteBtn=function(e){var t=this;t._volumeBtn&&(e?s.classList(t._volumeBtn).add("muted"):s.classList(t._volumeBtn).remove("muted")),t.syncAriaState()},r.prototype._updateVolumeBar=function(e){var t=this;if(t._volumeBar){var n=Math.ceil(100*(1-e)),r=100-n;t._volumeBar.setAttribute("style","height:"+n+"%"),t._volumeValue.setAttribute("style","height:"+r+"%")}if(t._volumeHandle){var i=Math.ceil((1-(1===e?.99:e))*(t._volumeIndicator.clientHeight-t._volumeHandle.offsetHeight));i>0&&(i=3>=i?0:i,t._volumeHandle.setAttribute("style","top:"+i+"px"))}},r.prototype._updateVolumeUI=function(e,t){var n=this;l.isNullOrUndefined(t)?n._updateMuteBtn(!e):(n._updateMuteBtn(t),e=t?0:e),n._updateVolumeBar(e)},r.prototype._getSeekFraction=function(e){var t=this,n=(e.clientX||e.pageX)-t._slider.getBoundingClientRect().left,r=n/t._slider.clientWidth;return Math.max(0,Math.min(1,r))},r.prototype._hideVisualSeek=function(){var e=this;e._visualSeekContainer.style.display="none"},r.prototype._fullScreenStreamModeUpdate=function(e){var t=this,n=t._view.getContentNode(),r=t._view.isStreamMode()||t._view.isMiniStreamMode(),i=t._view.isMiniStreamMode()?"yvp-ministream":"yvp-stream";r&&(e?s.classList(n).remove(i):(s.classList(n).add(i),t._desktopControls&&t._desktopControls.resetSettings()))},r.prototype._initAriaProperties=function(){var e=this;e._model.playbackState;e._playBtn.setAttribute("aria-label",d.i18n.PLAY_VIDEO),e._slider.setAttribute("aria-label",d.i18n.SEEK_SLIDER),e._slider.setAttribute("aria-valuemin",0),e._fullscreenBtn&&e._fullscreenBtn.setAttribute("aria-label",d.i18n.GO_TO_FULLSCREEN),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",d.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",d.i18n.MUTE))},r.prototype.syncAriaState=function(){var e=this,t=e._model.playbackState;t.paused?e._playBtn.setAttribute("aria-label",d.i18n.PLAY_VIDEO):e._playBtn.setAttribute("aria-label",d.i18n.PAUSE_VIDEO),e._fullscreenBtn&&(e._view.getFullscreen()?e._fullscreenBtn.setAttribute("aria-label",d.i18n.GO_TO_NORMAL_SCREEN):e._fullscreenBtn.setAttribute("aria-label",d.i18n.GO_TO_FULLSCREEN)),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",d.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",d.i18n.MUTE)),e._desktopControls&&e._desktopControls.syncAriaState()},r.prototype.destroy=function(){var e=this;e._desktopControls&&e._desktopControls.destroy(),e._playTap&&e._playBtn&&(e._playTap.destroy(),e._playBtn.removeEventListener("tap",e._onPlayTap),e._fullscreenBtn&&e._fullscreenTap&&(e._fullscreenTap.destroy(),e._fullscreenBtn.removeEventListener("tap",e._onFullscreenTap)),e._seekTap&&e._seekBar&&(e._seekTap.destroy(),e._seekBar.removeEventListener("tap",e._onSeekTap)),e._sliderRemoveEventListener(),e._unbindVolume()),e._upNextBtnTap&&(e._upNextBtn.removeEventListener("tap",e._onUpNextBtnTap),e._upNextBtnTap.destroy())}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../renderers/modes":46,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./controls.html":69,"./playlist":84,"./yahoo-controls":95,fs:146,"insert-css":148}],71:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='.yvp-end-screen-container'>"),r.b("\n"+n),r.s(r.f("items",e,t,1),e,t,0,50,1479,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("<li class='yvp-playlist-item'>"),r.b("\n"+n),r.b("    <ul class='yvp-end-screen-fuji-grid "),r.b(r.v(r.f("gridClassName",e,t,0))),r.b("'>"),r.b("\n"+n),r.s(r.f("videos",e,t,1),e,t,0,165,1451,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("            <li class='yvp-end-screen-fuji-tile' data-id='"),r.b(r.v(r.f("id",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("                <img class='yvp-end-screen-fuji-tile-image' src='"),r.b(r.v(r.f("thumbnail",e,t,0))),r.b("'/>"),r.b("\n"+n),r.b("                <div>"),r.b("\n"+n),r.b("                <div class='yvp-overlay-fuji "),r.s(r.f("showUpNext",e,t,1),e,t,0,397,422,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(" yvp-overlay-fuji-up-next")}),e.pop()),r.b("'>"),r.b("\n"+n),r.b("                    <div class='yvp-metadata-fuji'>"),r.b("\n"+n),r.b("                        <div class='yvp-pl-meta'>"),r.b("\n"+n),r.b("                            <span class='yvp-pl-title'>"),r.b(r.v(r.f("title",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                            <span class='yvp-pl-dur'>"),r.b(r.v(r.f("duration",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                        </div>"),r.b("\n"+n),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.s(r.f("showUpNext",e,t,1),e,t,0,800,1405,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('                    <div class="yvp-end-screen-up-next-box">'),r.b("\n"+n),r.b('                        <div class="yvp-end-screen-up-next-circle"></div>'),r.b("\n"+n),r.b('                        <div class="yvp-end-screen-arc yvp-end-screen-arc-start"></div>'),r.b("\n"+n),r.b('                        <div class="yvp-end-screen-arc yvp-end-screen-arc-end"></div>'),r.b("\n"+n),r.b("                        <span class='yvp-end-screen-up-next-time'>"),r.b(r.v(r.f("upNextTime",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                        <span class='yvp-end-screen-up-next-text'>"),r.b(r.v(r.d("strings.UP_NEXT",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                        <span class='yvp-end-screen-up-close'>x</span>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n")}),e.pop()),r.b("            </li>"),r.b("\n")}),e.pop()),r.b("    </ul>"),r.b("\n"+n),r.b("</li>"),r.b("\n")}),e.pop()),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],72:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-error-screen'>"),r.b("\n"+n),r.b("    <img class='yvp-error-screen-image' src='"),r.b(r.v(r.f("imageSrc",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("    <div class='yvp-error-screen-background'></div>"),r.b("\n"+n),r.b("    <div class='yvp-error-title'>"),r.b(r.v(r.d("error.title",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    <div class='yvp-error-desc' id='yvp-error-message'>"),r.b(r.v(r.d("error.message",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    <div class='yvp-error-code'>"),r.b(r.v(r.d("error.rep",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-btn yvp-error-feedback-btn'>"),r.b("\n"+n),r.b("        <p>"),r.b(r.v(r.d("strings.FEEDBACK_BUTTON",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-error-indicator yvp-error-icon'></div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],73:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e}t.exports=r;var i=e("../util"),o=e("../tap"),a=e("../strings"),s=e("../event"),l=e("./error-screen.html");r.prototype.create=function(e,t,n,r,c){var d=this;return d.node=i.render(l,{error:e,guid:t,sessionId:n,imageSrc:r,strings:a.i18n}),d.errorMsg=d.node.querySelector("#yvp-error-message"),d.errorMsg.innerHTML=e.message,d.flashIcon=d.node.querySelector(".yvp-error-flash-download-icon"),d.flashIcon&&c&&(d.flashIcon.src=c),d._feedbackLink=d.node.querySelector(".yvp-error-feedback-btn"),i.isInternalUser()?(d._feedbackLinkTap=new o(d._feedbackLink),d._onFeedbackLinkTap=function(e){d._eventBus.publish(s.OPEN_FEEDBACK,{srcView:"error-screen"})},d._feedbackLink.addEventListener("tap",d._onFeedbackLinkTap)):d._feedbackLink&&(d._feedbackLink.parentNode.removeChild(d._feedbackLink),d._feedbackLink=null),d.node},r.prototype.destroy=function(){var e=this;e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap)),e.node=null}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./error-screen.html":72}],74:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-feedback-screen'>"),r.b("\n"+n),r.b("    <button class='yvp-feedback-screen-close-btn'></button>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-screen-info'>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-title'>"),r.b(r.v(r.d("strings.FEEDBACK_TITLE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-response'></div>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-refid'></div>"),r.b("\n"+n),r.b('        <textarea class=\'yvp-feedback-screen-text\' maxlength="2000" id="feedback_input" placeholder="Enter your comments here."></textarea>'),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-button-container'>"),r.b("\n"+n),r.b("             <div class='yvp-feedback-screen-btn'>"),r.b(r.v(r.d("strings.FEEDBACK_SUBMIT_BUTTON",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-disclaimer'>"),r.b(r.v(r.d("strings.FEEDBACK_DISCLAIMER",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],75:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._view=n,r._viewMainElem=n.getMainElement(),r._eventBus=t,r._isSwfReady=!1,r._playbackInfo={},r._source="unknown",r._playerEvents=[],[i.API.PLAYER_READY,i.API.VIDEO_STARTED,i.API.PLAYBACK_SEEK_COMPLETE,i.API.PLAYER_MUTE_CHANGE,i.API.PLAYER_ERROR,i.API.PLAYBACK_COMPLETE,i.API.PLAYBACK_PAUSE,i.API.PLAYBACK_START,i.API.AD_PLAYBACK_STOP,i.API.AD_PLAYBACK_START,i.API.PLAYER_READY].forEach(function(e){r._eventBus.subscribe(e,function(t){r._playerEvents.push(e),r._playerEvents.length>30&&r._playerEvents.shift()})}),r._eventBus.subscribe(i.OPEN_FEEDBACK,function(e){var t;switch(e.srcView){case"loading-screen":t="loading-screen";break;case"error-screen":t="error-screen";break;case"settings-controller":t="advance-menu";break;case"opensimsim-screen":t="opss"}r._source=t,r.render()})}t.exports=r;var i=e("../event"),o=e("../../../lib/user-agent"),a=e("../util"),s=e("../tap"),l=e("./feedback-screen.html"),c=e("../strings");e("./open-sim-sim");r.prototype.create=function(){var e=this;e._node=a.render(l,{strings:c.i18n});var t=e._node.querySelector(".yvp-feedback-screen-close-btn");e._closeTap=new s(t),e._onCloseTap=function(t){t.stopPropagation(),e.close(),e._view.setKeyboardFocus()},t.addEventListener("tap",e._onCloseTap),e._feedbackTextForm=e._node.querySelector(".yvp-feedback-screen-text"),e._onFeedbackTextKeyDown=function(e){e.stopPropagation()},e._feedbackTextForm.addEventListener("keydown",e._onFeedbackTextKeyDown);var n=e._node.querySelector(".yvp-feedback-screen-btn");return e._feedbackTap=new s(n),e._onFeedbackTap=function(t){var n={},r=JSON.parse(JSON.stringify(e._model));r.playbackState=r.mediaStore=r.playlist={},n.model=r,n.eventLog=JSON.stringify(e._playerEvents),n.source=e._source,n.feedbackText=e._feedbackTextForm.value,n.opssInfo=e._view.getOpenSimSim().fetchInfo(),o.desktop&&o.safari&&e._view.getFullscreen()&&(n.feedbackText+="\n--safari fullscreen--\n"+window.prompt("Enter your comments here")),e._eventBus.publish(i.FEEDBACK_INFO,n),e._feedbackRefId=e._node.querySelector(".yvp-feedback-screen-refid"),e._feedbackRefId.textContent=c.i18n.FEEDBACK_SUBTITLE_RESPONSE_ID+e._model.guid,e._feedbackResponse=e._node.querySelector(".yvp-feedback-screen-response"),e._feedbackResponse.textContent=c.i18n.FEEDBACK_SUBTITLE_RESPONSE_MESSAGE,e._node.querySelector(".yvp-feedback-screen-text").remove(),e._node.querySelector(".yvp-feedback-screen-button-container").remove(),e._node.querySelector(".yvp-feedback-screen-disclaimer").remove()},n.addEventListener("tap",e._onFeedbackTap),e._node},r.prototype.render=function(){var e=this;e._viewMainElem.appendChild(e.create()),a.showHide(e._node,!0)},r.prototype.isOpen=function(){var e=this;return e._node&&"none"!==e._node.style.display},r.prototype.close=function(){var e=this;e._node.style.display="none",e._viewMainElem.querySelector(".yvp-feedback-screen").remove()},r.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._feedbackTextForm&&e._feedbackTextForm.removeEventListener("keydown",e._onFeedbackTextKeyDown),e._feedbackTap&&(e._viewMainElem.querySelector(".yvp-feedback-screen").remove(),e._feedbackTap.destroy())}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./feedback-screen.html":74,"./open-sim-sim":81}],76:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-loading-screen'>"),r.b("\n"+n),r.b("    <div class='yvp-loading-spinner yvp-spinner-icon'></div>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-btn yvp-error-feedback'>"),r.b("\n"+n),r.b("        <p>"),r.b(r.v(r.d("strings.FEEDBACK_BUTTON",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],77:[function(e,t,n){"use strict";function r(e){var t=this;t._eb=e,t._resizeScheduled=!1,t._eb.subscribe(a.FULLSCREEN_CHANGE,t._scheduleResize,t),t._scheduleResize()}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("../util"),a=e("../event"),s=e("../tap"),l=e("../strings"),c=e("./loading-screen.html");i('.yvp-spinner-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSItMjUgLTI1IDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0iTTI1IDBhMjUgMjUgMCAwIDAgMCA1MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGlkPSJhMSIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iOSIgdG89Ijc2IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMHM7IGEyLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTIiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209Ijc2IiB0bz0iOSIgZHVyPSI3NTBtcyIgYmVnaW49ImExLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTMiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgaWQ9ImE0IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InN0cm9rZS13aWR0aCIgZnJvbT0iOCIgdG89IjQiIGR1cj0iNzUwbXMiIGJlZ2luPSJhMy5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE1IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49IjA7IGE4LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE2IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBpZD0iYTciIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjE4MCAyNSAyNSIgdG89IjE4MCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49ImE2LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE4IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIzNjAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNy5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjwvcGF0aD48cGF0aCBkPSJNMjUgNTBhMjUgMjUgMCAxIDAgMC01MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209IjkiIHRvPSI3NiIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhMi5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iNzYiIHRvPSI5IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTEuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2Utd2lkdGgiIGZyb209IjgiIHRvPSI0IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTMuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMjUgMjUiIHRvPSIwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMDsgYTguZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIxODAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNi5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGlkPSJhOCIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMTgwIDI1IDI1IiB0bz0iMzYwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTcuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48L3BhdGg+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAyNSAyNSIgdG89IjM2MCAyNSAyNSIgZHVyPSI2NzUwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9nPjwvc3ZnPg==")}.yvp-loading-screen{display:none;}.yvp-loading-screen .yvp-loading-spinner{position:absolute;top:50%;left:50%;background-size:100% 100%;max-width:60px;max-height:60px;width:60px;height:60px;margin-top:-30px;margin-left:-30px;visibility:hidden;transition:visibility 0s linear 500ms;z-index:20}.yvp-loading-screen.yvp-show-spinner .yvp-loading-spinner{visibility:visible}.yvp-flag-loading .yvp-loading-screen,.yvp-flag-switching .yvp-loading-screen{display:block}.yvp-state-blocked .yvp-loading-screen{display:none}');
var d=60,p=3e4;r.prototype.create=function(){var e=this;return e.node=o.render(c,{strings:l.i18n}),e._feedbackLink=e.node.querySelector(".yvp-error-feedback"),e._eb.subscribe(a.API.LOADING_BEGIN,e._onLoadingScreenVisible,e),e._eb.subscribe(a.API.LOADING_END,e.hide,e),e._feedbackLinkTap=new s(e._feedbackLink),e._onFeedbackLinkTap=function(t){e._eb.publish(a.OPEN_FEEDBACK,{srcView:"loading-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap),e.node},r.prototype._resize=function(){var e=this,t=Math.min(2*e.node.clientWidth/640,1),n=e.node.querySelector(".yvp-loading-spinner");n.style.width=t*d+"px",n.style.height=t*d+"px",n.style.marginLeft=-1*(t*d/2)+"px",n.style.marginTop=-1*(t*d/2)+"px"},r.prototype._scheduleResize=function(){var e=this;if(!e._resizeScheduled){var t=e._eb.subscribe(a.API.LOADING_BEGIN,function(){e._resizeScheduled=!1,e._resize(),t()},e);e._resizeScheduled=!0}},r.prototype._onLoadingScreenVisible=function(){var e=this;o.forceDOMRedrawOnElement(e.node),o.classList(e.node).add("yvp-show-spinner"),o.showHide(e._feedbackLink,!1),o.isInternalUser()&&(e.feedbackLinkRenderTimeOut=setTimeout(e._showFeedbackButton.bind(e),p))},r.prototype._showFeedbackButton=function(){var e=this;o.showHide(e._feedbackLink,!0)},r.prototype.hide=function(){var e=this;o.classList(e.node).remove("yvp-show-spinner"),clearTimeout(e.feedbackLinkRenderTimeOut),e.feedbackLinkRenderTimeOut=null},r.prototype.destroy=function(){var e=this;e.node=null,e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap))}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./loading-screen.html":76,fs:146,"insert-css":148}],78:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-nfl-branding-container'>"),r.b("\n"+n),r.b("    <div class='yvp-nfl-branding'>"),r.b("\n"+n),r.b("      <a href='http://www.nfl.com/' target='nfl_site'>"),r.b("\n"+n),r.b("          <span class='yvp-nfl-brand-span'></span>"),r.b("\n"+n),r.b("          <span class='yvp-nfl-brand-logo'></span>"),r.b("\n"+n),r.b("      </a>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],79:[function(e,t,n){"use strict";function r(){}t.exports=r;var i=e("../util"),o=e("./nfl-branding.html");r.prototype.create=function(){var e=this;return e.node=i.render(o),e.node},r.prototype.destroy=function(){var e=this;e.node=null}},{"../util":"jJTEqU","./nfl-branding.html":78}],80:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-opensimsim' style='display: none'>"),r.b("\n"+n),r.b("    <button class='yvp-opensimsim-close-btn yvp-close-btn'></button>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-btn yvp-opensimsim-feedback-btn'>"),r.b("\n"+n),r.b("        <p>"),r.b(r.v(r.d("strings.FEEDBACK_BUTTON",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-opensimsim-info'>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Yahoo Fireball Video Player</div>"),r.b("\n"+n),r.b("        <div>Version : "),r.b(r.v(r.f("version",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div>Page SpaceID : "),r.b(r.v(r.f("spaceId",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-sessionId'></div>"),r.b("\n"+n),r.b("        <div>YVAP Acct. ID : "),r.b(r.v(r.f("yvap_accountId",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div>YVAP Play Context : "),r.b(r.v(r.f("yvap_playContext",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-videoSpaceId'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Current Media</div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-uuid'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-lmsid'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-renderertype'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-tv'></div>"),r.b("\n"+n),r.b("        <br>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-graphs'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-detail'></div>"),r.b("\n"+n),r.b("        <div class='yvp-swf-ready'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Platform</div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-platform'></div>"),r.b("\n"+n),r.b("        <div class='yvp-profile-btn'>Profile</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],81:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._profiler=n,r._isSwfReady=!1,r._playbackInfo={},r._timestamps=[],r._history={bitrate:{title:"Bit Rate History",data:[]},speed:{title:"Download Speed History",data:[]},bufferLength:{title:"Buffer Length History",data:[]},frameRate:{title:"Frame Rate History",data:[]}},r._eventBus.subscribe(i.PLAYBACK_INFO,function(e){r._playbackInfo=e,r._timestamps.push(Date.now()/1e3),r._history.bitrate.data.push(parseFloat(e.currentStreamBitrate)),r._history.speed.data.push(parseFloat(e.currentKbps)),r._history.bufferLength.data.push(parseFloat(e.bufferLength)),r._history.frameRate.data.push(parseFloat(e.frameRate)),r._updateInfo()}),r._eventBus.subscribe(i.SWF_READY,function(){r._isSwfReady=!0}),r._eventBus.subscribe(i.YVAP_INFO_UPDATE,function(e){r._yvapDom=e}),r._eventBus.subscribe(i.API.PLAYLIST_POSITION_CHANGE,function(){r._updateBasicMediaItemInfo()}),r._eventBus.subscribe(i.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r)}t.exports=r;var i=e("../event"),o=e("../../../lib/user-agent"),a=e("../util"),s=e("../../../lib"),l=e("../tap"),c=e("../vtt-fetcher"),d=e("./open-sim-sim.html"),p=e("../strings"),u=45,_=40;r.prototype.create=function(){var e=this;e._node=a.render(d,{version:e._model.version,spaceId:e._model.baseConfig.pageSpaceId,yvap_accountId:e._model.YVAP.accountId,yvap_playContext:e._model.YVAP.playContext,strings:p.i18n});var t=e._node.querySelector(".yvp-opensimsim-close-btn");e._closeTap=new l(t),e._onCloseTap=function(t){t.stopPropagation(),e.close()},t.addEventListener("tap",e._onCloseTap),e._feedbackLink=e._node.querySelector(".yvp-opensimsim-feedback-btn"),e._feedbackLinkTap=new l(e._feedbackLink),e._onFeedbackLinkTap=function(t){e._eventBus.publish(i.OPEN_FEEDBACK,{srcView:"opensimsim-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap);var n=e._node.querySelector(".yvp-profile-btn");return e._profileTap=new l(n),e._onProfileTap=function(t){t.stopPropagation(),e._profiler.render(e._yvapDom)},n.addEventListener("tap",e._onProfileTap),e._updatePlatformInfo(),e._node},r.prototype.fetchInfo=function(){var e=this;return{history:e._history,playbackInfo:e._playbackInfo,profile:e._profiler}},r.prototype.render=function(){var e=this;e._node.style.display="block",e._updateBasicMediaItemInfo(),e._updateInfo(),e._isHTML5()&&e._setupHTML5Timers()},r.prototype.isOpen=function(){var e=this;return"none"!==e._node.style.display},r.prototype.close=function(){var e=this;e._node.style.display="none",e._clearTimers()},r.prototype._onMediaItemLoaded=function(e){var t=this;t._isHTML5()&&(t._videoNode=document.querySelector(".yvp-html5-video"),t._displayHTML5Info(),t._subscribeToHTML5Events())},r.prototype._isHTML5=function(){var e=this,t=e._model.playlist.getCurrentItem();return o.tv||o.safari&&t&&"html"===t.rendererType},r.prototype._renderGraph=function(e,t,n,r,i){for(var o=t.length-1,a=0,s=e[o],l=t[o],c=t[o],d=o-1;d>=0;d--)if(l=Math.min(l,t[d]),c=Math.max(c,t[d]),d>0&&s-e[d-1]>u){a=d;break}var p=e[a];l>0&&(l=0),l===c&&(c=l+1),n.save(),n.translate(_,i),n.scale((r-_)/u,-1*i/(c-l)),n.beginPath(),n.moveTo(0,t[a]-l);for(var m=a+1;m<t.length;m++)n.lineTo(e[m]-p,t[m]-l);n.restore(),n.lineWidth=1,n.lineCap="round",n.lineJoin="round",n.strokeStyle="white",n.stroke(),n.font="8pt Monospace",n.fillStyle="white",n.fillText(c.toFixed(1),0,10),n.fillText(l.toFixed(1),0,60)},r.prototype._generateHtmlFromKeyValues=function(e){var t="",n=Object.keys(e);return n.forEach(function(n){var r=e[n];t+="<div>"+n+" : "+r+"</div>"}),t},r.prototype._generateConfigHTML=function(e,t){var n=this,r="",i=Object.keys(e);return i.forEach(function(i){var o=e[i];o&&"object"==typeof o?isNaN(i)?(r+="<div>"+i+" :</div>",r+='<div style="padding-left: 10px">'+n._generateConfigHTML(o)+"</div>"):r+="<div>"+n._generateConfigHTML(o,i)+"</div>":r+="<div>"+(t?t+" : ":"")+i+" : "+o+"</div>"}),r},r.prototype._generateHtmlTitle=function(e){return'<div class="yvp-opensimsim-title">'+e+"</div>"},r.prototype._updatePlatformInfo=function(){var e=this,t={OS:o.os,Mobile:o.mobile,"User Agent":o.ua},n=e._node.querySelector(".yvp-opensimsim-platform");n.innerHTML=e._generateHtmlFromKeyValues(t)},r.prototype._updateBasicMediaItemInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._node.querySelector(".yvp-opensimsim-uuid");n.innerHTML="UUID : "+(t?t.id:""),n=e._node.querySelector(".yvp-opensimsim-lmsid"),n.innerHTML="License Id (LMS ID) : "+(t?t.license.licenseId:""),n=e._node.querySelector(".yvp-opensimsim-renderertype"),n.innerHTML="Renderer Type : "+(t?t.rendererType:""),n=e._node.querySelector(".yvp-videoSpaceId"),n.innerHTML="Video SpaceID : "+(t?t.metrics.pageSpaceId:""),n=e._node.querySelector(".yvp-sessionId"),n.innerHTML="SessionId : "+(t?t.videoSession:"none"),e._isHTML5()&&!o.samsung&&(n=e._node.querySelector(".yvp-opensimsim-url"),t.isLive()?n.innerHTML="Master Playlist URL : "+e._videoNode.currentSrc:o.tv&&(n.innerHTML="Current Source URL : "+e._videoNode.currentSrc),n=e._node.querySelector(".yvp-opensimsim-config"),n&&(n.innerHTML=e._generateHtmlTitle("Config")+e._generateConfigHTML(e._model.getConfig())))},r.prototype._updateInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._playbackInfo,r=n.deliveryProtocol;t&&(r+=" / "+t.getType());var i=e._node.querySelector(".yvp-opensimsim-graphs");i.innerHTML="";var o=Object.keys(e._history);o.forEach(function(t){var n=e._history[t].data;if(n.some(function(e){return s.isNumber(e)})){var r=150,o=60,l=document.createElement("div");a.classList(l).add("yvp-opensimsim-graph");var c=document.createElement("div");c.innerHTML=e._history[t].title,l.appendChild(c);var d=document.createElement("canvas");d.width=r,d.height=o,l.appendChild(d),i.appendChild(l);var p=d.getContext("2d");e._renderGraph(e._timestamps,n,p,r,o)}});var l={"Total Quality Levels":n.qualityLevels,"Current Bitrate":n.currentStreamBitrate+" kbps",Protocol:r,cdn:t?t.getCDN():"","Recovery count":t?t.failoverCount:0,"Buffer Length / Time":n.bufferLength+" secs / "+n.bufferTime+" secs","Frame Rate":n.frameRate,"Download Speed":n.currentKbps+" kbps","Dropped Frames":n.droppedFrames,"Hardware Decoding":n.hwDecoding?"Yes":"No","Hardware Rendering":n.hwRendering?"Yes":"No","Memory Used":n.totalMemory+" MB","Media Size":n.mediaWidth+" x "+n.mediaHeight,"Stream Playback Rate":n.playbackBytesPerSecond+" kbps"},c=e._node.querySelector(".yvp-opensimsim-detail");c.innerHTML=e._generateHtmlFromKeyValues(l),c=e._node.querySelector(".yvp-swf-ready"),c.innerHTML="Is SWF ready? "+e._isSwfReady},r.prototype._displayHTML5Info=function(){var e=this,t=e._node.querySelector(".yvp-opensimsim-tv");t.innerHTML+='<div class="yvp-opensimsim-url"></div>',t.innerHTML+=e._generateHtmlTitle("HTML5 Video States");var n={"Current Time":'<span class="yvp-opensimsim-time"></span>',"Playback State":'<span class="yvp-opensimsim-playback"></span>',"Player State":'<span class="yvp-opensimsim-state"></span>',"Buffering State":'<span class="yvp-opensimsim-buffering"></span>',"Network State":'<span class="yvp-opensimsim-network"></span>',"Ready State":'<span class="yvp-opensimsim-ready"></span>',"Error State":'<span class="yvp-opensimsim-error">none</span>'};if(t.innerHTML+=e._generateHtmlFromKeyValues(n),o.tv&&s.isFunction(c)){t.innerHTML+=e._generateHtmlTitle("VTT Info");var r={"VTT Index":'<span class="yvp-opensimsim-vttindex"></span>',"VTT URL":'<span class="yvp-opensimsim-vtturl"></span>',"STREAM BITRATES":'<span class="yvp-opensimsim-bitrate-list"></span>'};t.innerHTML+=e._generateHtmlFromKeyValues(r)}t.innerHTML+='<div class="yvp-opensimsim-config"></div>'},r.prototype._subscribeToHTML5Events=function(){var e=this;e._eventBus.subscribe(i.Video.TIMEUPDATE,function(t){e._node.querySelector(".yvp-opensimsim-time").innerHTML=t});var t=["PLAYING","PAUSE","SEEKING","SEEKED"];t.forEach(function(t){e._eventBus.subscribe(i.Video[t],function(){e._node.querySelector(".yvp-opensimsim-playback").innerHTML=t})}),e._eventBus.subscribe(i.Video.WAITING,function(t){e._node.querySelector(".yvp-opensimsim-buffering").innerHTML=t.value});var n=[null,"aborted","network","decode","source not supported"];e._eventBus.subscribe(i.Video.ERROR,function(t){e._node.querySelector(".yvp-opensimsim-error").innerHTML=n[t.code]}),o.tv&&s.isFunction(c)&&(e._eventBus.subscribe(i.VTT_SEGMENT_LOADED,function(t,n,r,i){e._node.querySelector(".yvp-opensimsim-vttindex").innerHTML=r,e._node.querySelector(".yvp-opensimsim-vtturl").innerHTML=i}),e._eventBus.subscribe(i.CTV.GET_BITRATE_FOR_OPSS,function(t){var n=e._node.querySelector(".yvp-opensimsim-bitrate-list");n.innerHTML="Bitrates : "+JSON.stringify(t)}))},r.prototype._setupHTML5Timers=function(){var e=this;e._playerStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-state").innerHTML=e._model.playbackState.state},1e3);var t=["network empty","network idle","network loading","network no source"];if(!o.samsung){e._networkStateTimer=setInterval(function(){var n=t[e._videoNode.networkState];e._node.querySelector(".yvp-opensimsim-network").innerHTML=n},1e3);var n=["have nothing","have metadata","have current data","have future data","have enough data"];e._readyStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-ready").innerHTML=n[e._videoNode.readyState]},1e3)}},r.prototype._clearTimers=function(){var e=this;e._playerStateTimer&&clearInterval(e._playerStateTimer),e._networkStateTimer&&clearInterval(e._networkStateTimer),e._readyStateTimer&&clearInterval(e._readyStateTimer)},r.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._profileTap&&e._profileTap.destroy(),e._feedbackLinkTap&&e._feedbackLinkTap.destroy()}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../vtt-fetcher":96,"./open-sim-sim.html":80}],82:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b('<div class="yvp-playlist-item-container">'),r.b("\n"+n),r.s(r.f("items",e,t,1),e,t,0,56,718,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('        <li class="yvp-playlist-item" data-id=\''),r.b(r.v(r.f("id",e,t,0))),r.b("' data-idx="),r.b(r.v(r.f("idx",e,t,0))),r.b(">"),r.b("\n"+n),r.b('            <img class="yvp-playlist-item-image" src=\''),r.b(r.v(r.f("thumbnail",e,t,0))),r.b("'/>"),r.b("\n"+n),r.s(r.f("isWideMode",e,t,1),e,t,0,228,297,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('                <div class="yvp-playlist-border"></div>'),n.b("\n")}),e.pop()),r.s(r.f("isWideMode",e,t,1),e,t,1,0,0,"")||(r.b('                <div class="yvp-playlist-item-gradient">'),r.b("\n")),r.b('                <div class="yvp-pl-meta">'),r.b("\n"+n),r.b("                    <span class='yvp-pl-title'>"),r.b(r.v(r.f("title",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                    <span class='yvp-pl-dur'>"),r.b(r.v(r.f("duration",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.s(r.f("isWideMode",e,t,1),e,t,1,0,0,"")||(r.b("                </div>"),r.b("\n")),r.b("        </li>"),r.b("\n")}),e.pop()),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],83:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("isEndscreen",e,t,1),e,t,0,16,158,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("    <div class='yvp-end-screen yvp-end-replay'>"),r.b("\n"+n),r.s(r.f("showReplayOnly",e,t,1),e,t,0,88,138,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('        <div class="yvp-end-rep-icon"></div>'),n.b("\n")}),e.pop())}),e.pop()),r.s(r.f("showReplayOnly",e,t,1),e,t,1,0,0,"")||(r.b("    <div class='yvp-playlist-container "),r.b(r.v(r.f("modeClass",e,t,0))),r.b(" yvp-pl-loading yvp-playlist-theme-"),r.b(r.v(r.f("theme",e,t,0))),r.b("'>"),r.b("\n"+n),r.s(r.f("isHiddenMode",e,t,1),e,t,0,315,384,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('        <div class="yvp-upnext-title">'),n.b(n.v(n.d("strings.UP_NEXT",e,t,0))),n.b("</div>"),n.b("\n")}),e.pop()),r.b('        <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-prev disabled"></div>'),r.b("\n"+n),r.b('        <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-next"></div>'),r.b("\n"+n),r.b('        <div class="yvp-playlist-strip">'),r.b("\n"+n),r.b('            <ul class="yvp-playlist-strip-list strip-animate">'),r.b("\n"+n),r.b("\n"+n),r.b("            </ul>"),r.b("\n"+n),r.b('            <div class="yvp-pl-loader-bg"></div>'),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b('        <div class="yvp-pl-loader yvp-spinner-icon"></div>'),r.b("\n"+n),r.b("    </div>"),r.b("\n")),r.s(r.f("isEndscreen",e,t,1),e,t,0,850,862,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("    </div>"),n.b("\n")}),e.pop()),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],84:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._eventBus.subscribe(o.PLAYER_DIMENSION_CHANGE,r._onDimensionChange,r),r._eventBus.subscribe(o.FULLSCREEN_CHANGE,r._onDimensionChange,r),r._eventBus.subscribe(o.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(o.RENDER_PLAYLIST_FIRST_BATCH,r._renderFirstBatch,r),r._model=n,r._view=t}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("../event"),a=e("../tap"),s=e("../strings"),l=e("../util"),c=e("../../../lib"),d=e("../../../lib/user-agent"),p=e("./playlist.html"),u=e("./playlist-items.html"),_=e("./end-screen-grid.html"),m=5;i('.strip-animate{-webkit-transition:left 420ms cubic-bezier(0,.2,.1,1);-moz-transition:left 420ms cubic-bezier(0,.2,.1,1);-o-transition:left 420ms cubic-bezier(0,.2,.1,1);transition:left 420ms cubic-bezier(0,.2,.1,1)}.yvp-pl-loader{display:none;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:32px;height:32px;background-size:100%}.yvp-pl-loader-bg{background-color:rgba(0,0,0,0.3);position:absolute;left:0;bottom:0;top:0;width:100%;display:none}.yvp-pl-loading .yvp-pl-loader,.yvp-pl-loading .yvp-pl-loader-bg{display:block}.yvp-playlist-pg-btn{width:24px;height:24px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrPC90aXRsZT48cGF0aCBkPSJNMzkuNDY1IDQzLjk1NmwxOS4xNS0xOS41MmMxLjQ0LTEuNDcgMS40NC0zLjg2IDAtNS4zMzItLjctLjcxMi0xLjYyOC0xLjEwNC0yLjYxNi0xLjEwNC0uOTkgMC0xLjkyLjM5Mi0yLjYxOCAxLjEwNGwtMjQuMzEgMjQuNzgtLjA3Mi4wNzIgMjQuMzggMjQuODVjLjcuNzEyIDEuNjMgMS4xMDQgMi42MTcgMS4xMDQuOTg1IDAgMS45MTUtLjM5MiAyLjYxNi0xLjEwNCAxLjQ0LTEuNDcgMS40NC0zLjg2MyAwLTUuMzMzTDM5LjQ2NSA0My45NTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");background-position:center;background-repeat:no-repeat;background-size:100%;position:absolute;top:55px;cursor:pointer;z-index:10;opacity:.8;left:21px;}.yvp-playlist-pg-btn:hover{opacity:1}.yvp-playlist-pg-btn.disabled{opacity:.2;cursor:default}.yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNNDkuMDE4IDQ0LjExOGwtMTkuMTUgMTkuNTE4Yy0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMzLjcuNzEgMS42MjggMS4xMDMgMi42MTYgMS4xMDMuOTkgMCAxLjkxOC0uMzkyIDIuNjE3LTEuMTA0bDI0LjMxLTI0Ljc4LjA3My0uMDcyLTI0LjM4LTI0Ljg1Yy0uNy0uNzEzLTEuNjMtMS4xMDUtMi42MTctMS4xMDUtLjk4NSAwLTEuOTE1LjM5Mi0yLjYxNiAxLjEwNS0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMybDE5LjE0OCAxOS41MTgiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");right:21px;left:auto}.yvp-playlist-strip{position:absolute;left:38px;right:24px;overflow:hidden}.yvp-playlist-strip-list{list-style-type:none;position:relative;left:0;white-space:nowrap}.yvp-pl-meta{opacity:0;position:absolute;left:8px;right:8px;color:#fff;bottom:6px;overflow:hidden}.yvp-pl-title{overflow:hidden;line-height:16px;-webkit-line-clamp:2;text-overflow:ellipsis;max-height:32px;display:-webkit-box;-webkit-box-orient:vertical;font-size:13px;vertical-align:bottom;white-space:normal}.yvp-pl-dur{font-size:11px;opacity:.6;line-height:13px;display:block}.yvp-playlist-mode-hidden{position:absolute;left:-16px;right:-16px;height:auto;bottom:3000px;opacity:0;z-index:-20;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-hidden .yvp-upnext-title{position:absolute;left:42px;font-size:10px;letter-spacing:1px;color:#fff;text-transform:uppercase}.yvp-playlist-mode-hidden .yvp-playlist-strip{top:20px;left:43px;right:43px}.yvp-playlist-mode-hidden .yvp-playlist-pg-btn{top:43px;left:12px;}.yvp-playlist-mode-hidden .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:12px;left:auto}.yvp-playlist-mode-hidden .yvp-pl-loader{top:36px;left:50%}.yvp-playlist-mode-hidden .yvp-playlist-item{width:130px;height:73px;display:inline-block;margin-right:5px;position:relative;cursor:pointer;overflow:hidden;}.yvp-playlist-mode-hidden .yvp-playlist-item.yvp-hide{display:none}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px;overflow:hidden}.yvp-playlist-mode-bottom{position:relative;height:83px;border:1px solid rgba(255,255,255,0.2);-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-bottom .yvp-playlist-strip{position:relative;height:83px;top:0;bottom:0;left:0;right:0;margin:0 24px 5px 24px}.yvp-playlist-mode-bottom .yvp-playlist-pg-btn{top:30px;left:0;}.yvp-playlist-mode-bottom .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto}.yvp-playlist-mode-bottom .yvp-pl-loader{top:30px;left:50%}.yvp-playlist-mode-bottom .yvp-playlist-strip-list{margin-top:5px}.yvp-playlist-mode-bottom .yvp-playlist-item{width:130px;height:73px;display:inline-block;margin-right:5px;position:relative;cursor:pointer;overflow:hidden;border-bottom:5px solid transparent;}.yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing{border-bottom:5px solid #188fff}.yvp-playlist-mode-bottom .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px}.yvp-playlist-mode-right{display:block;height:100%;width:300px;position:absolute;top:0;right:0;border:1px solid rgba(255,255,255,0.2);-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-right ::-webkit-scrollbar-track,.yvp-playlist-mode-right -webkit-box-shadow: inset 0 0 6px rgba(0,.yvp-playlist-mode-right 0,.yvp-playlist-mode-right 0.3){border-radius:10px;background-color:#f5f5f5}.yvp-playlist-mode-right ::-webkit-scrollbar{width:7px;background-color:#f5f5f5}.yvp-playlist-mode-right ::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0.3);background-color:#555}.yvp-playlist-mode-right .yvp-playlist-strip{position:relative;height:100%;top:0;bottom:0;left:0;right:0}.yvp-playlist-mode-right .yvp-playlist-pg-btn{display:none}.yvp-playlist-mode-right .yvp-pl-loader{top:49%;left:49%}.yvp-playlist-mode-right .yvp-playlist-strip-list{height:100%;overflow-y:scroll}.yvp-playlist-mode-right .yvp-playlist-item:first-child{border-top:10px solid transparent}.yvp-playlist-mode-right .yvp-playlist-item:last-child{border-bottom:10px solid transparent}.yvp-playlist-mode-right .yvp-playlist-item{height:73px;display:block;margin:0 14px 0 10px;position:relative;cursor:pointer;overflow-x:visible;border-bottom:5px solid transparent;}.yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px;display:block}.yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-border{display:none;height:73px;position:absolute;top:0;left:0;width:5px;background-color:#188fff}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-playlist-border{display:block}.yvp-playlist-mode-bottom.yvp-playlist-theme-light,.yvp-playlist-mode-right.yvp-playlist-theme-light{background-color:#fff;}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-playlist-pg-btn,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-playlist-pg-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrLWJsYWNrPC90aXRsZT48cGF0aCBkPSJNMTUuNzE3IDYuNzM2Yy4zNzctLjM5Ny4zNzctMS4wNDIgMC0xLjQzOC0uMTgyLS4xOTItLjQyNS0uMjk4LS42ODMtLjI5OC0uMjU4IDAtLjUuMTA2LS42ODMuMjk4TDggMTEuOThsNi4zNSA2LjcyMmMuMTgzLjE5Mi40MjYuMjk4LjY4NC4yOTguMjU3IDAgLjUtLjEwNi42ODMtLjI5OC4zNzctLjM5Ny4zNzctMS4wNDIgMC0xLjQzOEwxMC43MTUgMTJsNS4wMDItNS4yNjR6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNOC4yODMgMTcuMjY0Yy0uMzc3LjM5Ny0uMzc3IDEuMDQyIDAgMS40MzguMTgyLjE5Mi40MjUuMjk4LjY4My4yOTguMjU4IDAgLjUtLjEwNi42ODMtLjI5OEwxNiAxMi4wMiA5LjY1IDUuMjk3QzkuNDY3IDUuMTA2IDkuMjI0IDUgOC45NjYgNWMtLjI1NyAwLS41LjEwNi0uNjgzLjI5OC0uMzc3LjM5Ny0uMzc3IDEuMDQyIDAgMS40MzhMMTMuMjg1IDEybC01LjAwMiA1LjI2NHoiIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-pl-loader-bg,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-loader-bg{background-color:rgba(0,0,0,0.7)}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-pl-meta,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-meta{color:#fff}.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-meta{color:#000}.yvp-playlist-mode-bottom.yvp-playlist-theme-dark,.yvp-playlist-mode-right.yvp-playlist-theme-dark{background-color:rgba(18,23,23,0.75);}.yvp-playlist-mode-bottom.yvp-playlist-theme-dark .yvp-playlist-pg-btn,.yvp-playlist-mode-right.yvp-playlist-theme-dark .yvp-playlist-pg-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrPC90aXRsZT48cGF0aCBkPSJNMzkuNDY1IDQzLjk1NmwxOS4xNS0xOS41MmMxLjQ0LTEuNDcgMS40NC0zLjg2IDAtNS4zMzItLjctLjcxMi0xLjYyOC0xLjEwNC0yLjYxNi0xLjEwNC0uOTkgMC0xLjkyLjM5Mi0yLjYxOCAxLjEwNGwtMjQuMzEgMjQuNzgtLjA3Mi4wNzIgMjQuMzggMjQuODVjLjcuNzEyIDEuNjMgMS4xMDQgMi42MTcgMS4xMDQuOTg1IDAgMS45MTUtLjM5MiAyLjYxNi0xLjEwNCAxLjQ0LTEuNDcgMS40NC0zLjg2MyAwLTUuMzMzTDM5LjQ2NSA0My45NTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");}.yvp-playlist-mode-bottom.yvp-playlist-theme-dark .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next,.yvp-playlist-mode-right.yvp-playlist-theme-dark .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNNDkuMDE4IDQ0LjExOGwtMTkuMTUgMTkuNTE4Yy0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMzLjcuNzEgMS42MjggMS4xMDMgMi42MTYgMS4xMDMuOTkgMCAxLjkxOC0uMzkyIDIuNjE3LTEuMTA0bDI0LjMxLTI0Ljc4LjA3My0uMDcyLTI0LjM4LTI0Ljg1Yy0uNy0uNzEzLTEuNjMtMS4xMDUtMi42MTctMS4xMDUtLjk4NSAwLTEuOTE1LjM5Mi0yLjYxNiAxLjEwNS0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMybDE5LjE0OCAxOS41MTgiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-playlist-mode-hidden .yvp-playlist-item{-webkit-transform:translateX(24px) scale(.9,.9);-moz-transform:translateX(24px) scale(.9,.9);-ms-transform:translateX(24px) scale(.9,.9);-o-transform:translateX(24px) scale(.9,.9);transform:translateX(24px) scale(.9,.9);-webkit-transition:transform 420ms cubic-bezier(0,.4,.1,1);-moz-transition:transform 420ms cubic-bezier(0,.4,.1,1);-o-transition:transform 420ms cubic-bezier(0,.4,.1,1);transition:transform 420ms cubic-bezier(0,.4,.1,1)}.yvp-playlist-mode-hidden .yvp-playlist-item-gradient,.yvp-playlist-mode-bottom .yvp-playlist-item-gradient,.yvp-playlist-mode-right .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-hidden .yvp-pl-meta,.yvp-playlist-mode-bottom .yvp-pl-meta,.yvp-playlist-mode-right .yvp-pl-meta{position:absolute;left:0;right:0;bottom:0;opacity:1;color:#fff;overflow:hidden}.yvp-playlist-mode-hidden .yvp-pl-title,.yvp-playlist-mode-bottom .yvp-pl-title,.yvp-playlist-mode-right .yvp-pl-title{display:none;max-height:32px;font-size:13px;margin-left:6px;margin-right:5px;margin-bottom:5px;overflow:hidden;line-height:16px;vertical-align:bottom;white-space:normal;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;opacity:0;}.yvp-playlist-mode-hidden .yvp-pl-title.yvp-show,.yvp-playlist-mode-bottom .yvp-pl-title.yvp-show,.yvp-playlist-mode-right .yvp-pl-title.yvp-show{opacity:1;display:block}.yvp-playlist-mode-hidden .yvp-pl-dur,.yvp-playlist-mode-bottom .yvp-pl-dur,.yvp-playlist-mode-right .yvp-pl-dur{display:block;font-size:11px;line-height:13px;margin-left:6px;margin-bottom:5px;opacity:1;text-shadow:1px 1px 1px #000;}.yvp-playlist-mode-hidden .yvp-pl-dur.yvp-hide,.yvp-playlist-mode-bottom .yvp-pl-dur.yvp-hide,.yvp-playlist-mode-right .yvp-pl-dur.yvp-hide{display:none}.yvp-playlist-mode-hidden .yvp-playlist-item-gradient-duration,.yvp-playlist-mode-bottom .yvp-playlist-item-gradient-duration,.yvp-playlist-mode-right .yvp-playlist-item-gradient-duration{height:50px}.yvp-browser-desktop .yvp-hover-elem{display:none;opacity:.1;position:absolute;bottom:28px;width:100%;height:100px;left:0}.yvp-browser-desktop .yvp-upnext-container:hover .yvp-hover-elem{display:block;background-color:rgba(0,0,0,0)}.yvp-browser-desktop .yvp-upnext-container:hover .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:136px}.yvp-browser-desktop .yvp-playlist-item .yvp-playlist-item-gradient{opacity:0}.yvp-browser-desktop .yvp-playlist-item:hover .yvp-playlist-item-gradient{opacity:1}.yvp-browser-desktop .yvp-playlist-item:hover .yvp-pl-meta{opacity:1}.yvp-browser-desktop .yvp-overlay-fuji{opacity:0;}.yvp-browser-desktop .yvp-overlay-fuji:hover{opacity:1;}.yvp-browser-desktop .yvp-overlay-fuji:hover .yvp-pl-meta{opacity:1}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item .yvp-playlist-item-gradient{opacity:1}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-playlist-item-gradient{height:100%;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0.5) 0%, rgba(18,23,23,0.5) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0.5) 0%, rgba(18,23,23,0.5) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0.5) 0%, rgba(18,23,23,0.5) 100%)}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-playlist-item-image,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-playlist-item-image{-webkit-transform:scale(1.2,1.2);-moz-transform:scale(1.2,1.2);-ms-transform:scale(1.2,1.2);-o-transform:scale(1.2,1.2);transform:scale(1.2,1.2);-webkit-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);-moz-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);-o-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);transition:transform 2.5s cubic-bezier(.1,.2,.6,1)}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-pl-dur,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-pl-dur{display:none;opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-pl-title,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-pl-title{display:block;opacity:1;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing:hover .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing:hover .yvp-playlist-item-gradient{height:50px;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:135px;background-color:rgba(0,0,0,0)}.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-item-gradient{filter:progid:DXImageTransform.Microsoft.gradient(startColorStr=#00000000, endColorStr=#FF000000)}.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-dur{text-shadow:none;opacity:1;display:block}.yvp-playlist-mode-right .yvp-playlist-item:hover .yvp-pl-dur{opacity:1;display:block}.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-meta{color:rgba(255,255,255,0.8);position:absolute;top:0;left:130px;padding-left:10px;font-size:13px;line-height:16px}.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-title{display:block;display:-webkit-box;margin-top:12px;margin-left:0;margin-right:0;opacity:.8}.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-dur{color:rgba(255,255,255,0.6);font-size:11px;margin-left:0;margin-bottom:0;opacity:.8;text-overflow:ellipsis;overflow:hidden}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-pl-meta{color:#fff;background-image:-webkit-linear-gradient(-90deg, rgba(18,23,23,0.3), rgba(115,115,115,0.2));background-image:-o-linear-gradient(-90deg, rgba(18,23,23,0.3), rgba(115,115,115,0.2));background-image:linear-gradient(-90deg, rgba(18,23,23,0.3), rgba(115,115,115,0.2))}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-pl-title{font-weight:600}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-pl-dur{opacity:1}.yvp-playlist-mode-right .yvp-playlist-item:hover .yvp-pl-meta{color:#fff;background-image:-webkit-linear-gradient(-90deg, rgba(18,23,23,0.3), rgba(115,115,115,0.2));background-image:-o-linear-gradient(-90deg, rgba(18,23,23,0.3), rgba(115,115,115,0.2));background-image:linear-gradient(-90deg, rgba(18,23,23,0.3), rgba(115,115,115,0.2))}.yvp-playlist-mode-right .yvp-playlist-item:hover .yvp-pl-dur{opacity:1}.yvp-browser-mobile .yvp-hover-elem{display:none}.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-hover-elem{display:none}.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:45px}.yvp-browser-mobile .yvp-playlist-item-gradient{opacity:1}.yvp-browser-mobile .yvp-pl-meta{opacity:1}.yvp-browser-mobile .yvp-playlist-strip{overyflow-y:hidden;overflow-x:scroll;-webkit-overflow-scrolling:touch}.yvp-browser-mobile .yvp-playlist-pg-btn{display:none}.yvp-state-end-screen .yvp-start-screen{display:block}.yvp-state-end-screen .yvp-start-screen-bar-wrapper{display:none}.yvp-state-end-screen .yvp-start-screen-button{display:none}.yvp-state-end-screen .yvp-end-screen{z-index:22;background-color:rgba(0,0,0,0.85);}.yvp-state-end-screen .yvp-end-screen.yvp-end-replay{background-color:rgba(18,23,23,0.6)}.yvp-state-end-screen .yvp-end-rep-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.6;width:80px;height:98px;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;cursor:pointer}.yvp-state-end-screen .yvp-playlist-mode-endscreen{position:absolute;margin:auto;left:0;right:0;height:184px;width:512px;top:0;bottom:50px;z-index:10;opacity:1;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn{top:74px;left:-19px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto;right:-15px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip{position:absolute;left:18px;right:14px;height:100%;bottom:0}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip-list{height:100%;margin-right:0;width:500px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-item{width:100%;display:inline-block;position:relative;height:100%}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-pl-loader{top:35px;left:50%}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-grid{width:100%;height:100%;list-style-type:none;white-space:normal;text-align:left;overflow:hidden}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile{position:relative;width:150px;height:84px;cursor:pointer;float:left;margin-right:10px;overflow:hidden;margin-bottom:10px;padding:0}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile-image{width:151px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji{position:absolute;top:0;left:0;width:100%;height:100%;color:#fff;font-size:13px;line-height:14px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji.yvp-overlay-fuji-up-next{background-color:rgba(0,0,0,0.6);opacity:1}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-metadata-fuji{position:absolute;top:30px;left:0;right:0;bottom:0;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.8))}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-box{position:absolute;top:8px;left:8px;font-size:13px;line-height:14px;text-align:left;width:80px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-time{position:relative;margin-top:6px;display:inline-block;left:8px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-text{position:relative;margin-top:5px;display:inline-block;left:19px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close{position:relative;left:57px;font-weight:500;font-size:19px;opacity:.6;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close:hover{opacity:1}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col{height:84px;width:347px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-pg-btn{top:35px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-strip-list{width:332px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col{height:84px;width:178px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-pg-btn{top:35px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-strip-list{width:158px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col{height:284px;width:678px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-pg-btn{top:135px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-strip-list{width:666px}.yvp-content div.yvp-end-screen-up-next-circle{width:20px;height:20px;-moz-border-radius:20px;-webkit-border-radius:20px;border-radius:20px;border:2px solid rgba(255,255,255,0.9);display:block;position:absolute;top:0;left:0}.yvp-content div.yvp-end-screen-arc{position:absolute;top:0;left:0;width:100px;height:100px;border-radius:100%;border:1px solid;display:none}.yvp-overflow-y{overflow-y:hidden}'),
r.prototype.create=function(e,t){var n=this;n._seedMediaItem=n._model.playlist.getCurrentItem(),n._start=0,n._count=12,n._playlisItemIdx=0,n._posL=0,n._scrL=0,n._taps=[],n._theme=n._getTheme(e),n._mode=e,n._mdUpN="hidden"===e||"bottom"===e||"right"===e,n._mdEnd="endscreen"===e||"endscreen-rp"===e;var r="yvp-playlist-mode-"+e;return n._repOnly=n._mdEnd&&"endscreen-rp"===e,n._onPlaylistItemTap=function(){n._mdUpN&&l.classList(n._node).remove("open"),n._eventBus.publish(o.RELATED_ITEM_CLICK,this.getAttribute("data-id"),this.itemIndex,n._mdUpN,!1),n._cancelUpNextTimeout()},n._node=l.render(p,{strings:s.i18n,modeClass:r,isHiddenMode:"hidden"===e||!1,isEndscreen:n._mdEnd,showReplayOnly:n._repOnly,theme:n._theme}),n._repOnly?(n._mI=t,n._onEndScreenTap=function(){n._eventBus.publish(o.RELATED_ITEM_CLICK,n._mI.id,-1,!1,!1)},n._endScreenTap=new a(n._node),n._node.addEventListener("tap",function(){n._onEndScreenTap(!1)}),n._node):(n._plList=n._node.querySelector(".yvp-playlist-strip-list"),n._plStrip=n._node.querySelector(".yvp-playlist-strip"),n._plCont=n._mdEnd?n._node.querySelector(".yvp-playlist-container"):n._node,n._pgPrev=n._node.querySelector(".yvp-playlist-pg-btn-prev"),n._pgNext=n._node.querySelector(".yvp-playlist-pg-btn-next"),n._plLoader=n._node.querySelector(".yvp-pl-loader-bg"),n._hiddenTitle=n._view.getContentNode().querySelector(".yvp-playlist-playing-item-title"),n._body=document.querySelector("body"),n._seedMediaItem.isLive()||n._model.playback.loop||n._mdEnd||n.renderPlaylist(n._seedMediaItem,[n._seedMediaItem]),n._bindEvents(),n._node)},r.prototype._bindEvents=function(){var e=this;e._pgPrevTap=new a(e._pgPrev),e._pgPrev.addEventListener("tap",function(){e._onPageBtnTap(!1)}),e._pgNextTap=new a(e._pgNext),e._pgNext.addEventListener("tap",function(){e._onPageBtnTap(!0)}),d.mobile&&e._plStrip.addEventListener("scroll",function(t){e._relItems&&e._relItems.length<100&&e._plStrip.scrollLeft+e._plStrip.offsetWidth>=e._plStrip.scrollWidth&&!e._eoL&&e._fetchMoreRelatedItems()}),"right"===e._mode&&(e._plList.addEventListener("scroll",function(t){e._relItems&&e._relItems.length<100&&e._plList.scrollTop+e._plList.offsetHeight>=e._plList.scrollHeight&&!e._eoL&&e._fetchMoreRelatedItems()}),d.mobile||(e._plStrip.addEventListener("mouseenter",function(t){l.classList(e._body).contains("yvp-overflow-y")||l.classList(e._body).add("yvp-overflow-y")},!1),e._plStrip.addEventListener("mouseleave",function(t){l.classList(e._body).contains("yvp-overflow-y")&&l.classList(e._body).remove("yvp-overflow-y")},!1)))},r.prototype.upNextBtnTapHandler=function(){var e=this,t=e._model.playlist.position,n=t+1,r=e._model.playlist.getMediaItemAt(n),i=r.id;e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-next-click"}),e._eventBus.publish(o.RELATED_ITEM_CLICK,i,n,e._mdUpN,!1)},r.prototype._renderFirstBatch=function(){var e=this;if(!e._seedMediaItem.isLive()&&!e._model.playback.loop&&!e._mdEnd){var t=e._getAPIParamOptions();e._eventBus.publish(o.FETCH_MORE_RELATED_ITEMS,e._seedMediaItem,t,!1)}},r.prototype.renderPlaylist=function(e,t){var n=this;n._mI=e,n._relItems=[],n._posL=0,n._scrL=0,n._taps=[],n._eoL=!1,n._plList.parentElement.scrollLeft=0,l.classList(n._pgPrev).add("disabled"),l.classList(n._pgNext).remove("disabled"),n._removeItems(),t&&(n._mdEnd||0!==n._start||n._seedMediaItem.id===t[0].id||t.unshift(n._seedMediaItem),n._renderPlaylistItems(t))},r.prototype._renderPlaylistItems=function(e){var t=this,n=t._mdUpN?u:_,r=[],i=d.chrome>43,p=!1;if(e){for(var v=0;v<e.length;v++){var y=e[v],f="";y.duration&&c.isNumber(y.duration)&&(f=l.formatTime(y.duration)),"right"===t._mode&&y.provider&&y.provider.name&&(f+="  "+y.provider.name);var g=y.title;g&&g.length>40&&!i&&(g=g.substring(0,40)+"...");var b={id:y.id,title:g,showUpNext:0===v||p,upNextTime:m,thumbnail:y.images.thumbnail,duration:f,idx:t._playlisItemIdx++},h='.yvp-playlist-item[data-id="'+b.id+'"]',E=t._plList.querySelector(h)||null;b.thumbnail&&!E?(r.push(b),p=!1):b.showUpNext&&(p=!0)}if(t._mdEnd){var S=0,A=6;t._itemW=500,t._model.uiState.width<384?(A=1,t._itemW=158,l.classList(t._plCont).add("yvp-pl-one-col")):t._model.uiState.width<550?(A=2,t._itemW=332,l.classList(t._plCont).add("yvp-pl-two-col")):t._model.uiState.width>800&&(A=12,t._itemW=666,l.classList(t._plCont).add("yvp-pl-three-col"));var T=parseInt(r.length/A),L=[];if(A>1)for(S=0;T>S;S++){var I=S*A,M=r.slice(I,I+A);L.push({videos:M})}else for(S=0;S<r.length;S++)L.push({videos:[r[S]]});r=L}var C=l.render(n,{items:r,strings:s.i18n,isWideMode:"right"===t._mode});C=Array.prototype.slice.call(C.querySelectorAll(".yvp-playlist-item"),0);for(var N=0;N<C.length;N++){var D=C[N];if(t._mdUpN)D.itemIndex=N+t._relItems.length,t._taps.push(new a(D)),D.addEventListener("tap",t._onPlaylistItemTap);else if(t._mdEnd)for(var R=Array.prototype.slice.call(D.querySelectorAll(".yvp-end-screen-fuji-tile"),0),P=0;P<R.length;P++){var O=R[P];O.itemIndex=P+t._relItems.length,t._taps.push(new a(O)),O.addEventListener("tap",t._onPlaylistItemTap)}t._plList.appendChild(D)}t._relItems=t._relItems.concat(e),t._mdEnd&&(t._upNClose=t._node.querySelector(".yvp-end-screen-up-close"),t._upNCloseT=new a(t._upNClose),t._upNClose.addEventListener("tap",function(e){t._eventBus.publish(o.API.UI_INTERACT,{srcElement:"es-vid-cancel"}),t._cancelUpNextTimeout(),e.stopPropagation()}),t._upNtime=m,t._upNtimer=setTimeout(function(){t._upNextTimeout()},1e3)),t._setPlaylistViewSize(),l.classList(t._plCont).remove("yvp-pl-loading"),t._mdEnd||t._setCurrentVideoItemUI(!1)}},r.prototype._setPlaylistViewSize=function(){var e=this;e._listW=e._plStrip.offsetWidth||e._plStrip._offsetWidth,e._mdEnd?e._numPgItems=1:(e._itemW=134,e._numPgItems=parseInt(e._listW/e._itemW))},r.prototype._cancelUpNextTimeout=function(){var e=this;if(e._upNtimer){clearTimeout(e._upNtimer),e._upNtimer=null,e._upNClose&&(e._upNCloseT.destroy(),e._upNClose.removeEventListener("tap",e._cancelUpNextTimeout));var t=e._node.querySelector(".yvp-end-screen-up-next-box");t&&(l.classList(t.parentElement.querySelector(".yvp-overlay-fuji")).remove("yvp-overlay-fuji-up-next"),t.parentElement.removeChild(t))}},r.prototype._upNextTimeout=function(){var e=this;0===e._upNtime?(e._eventBus.publish(o.RELATED_ITEM_CLICK,e._relItems[0].id,0,!1,!0),e._upNtimer=null):(e._upNtime-=1,e._node.querySelector(".yvp-end-screen-up-next-time").innerHTML=e._upNtime,e._upNtimer=setTimeout(function(){e._upNextTimeout()},1e3))},r.prototype._onPageBtnTap=function(e){var t=this;if(t._cancelUpNextTimeout(),"right"!==t._mode){t._mdUpN&&t._eventBus.publish(o.UP_NEXT_PG_CLICK);var n=t._mdEnd?"es-":"next-";n=e?n+"right":n+"left",t._eventBus.publish(o.API.UI_INTERACT,{srcElement:n}),t._listW=t._plList.offsetWidth||t._plList._offsetWidth;var r=(t._plList.children.length-t._numPgItems)*t._itemW;t._scrL=t._transTimer?t._scrL:t._plList.parentElement.scrollLeft;var i=t._scrL%t._listW,a=l.classList(t._pgPrev).contains("disabled");if(!a||e){!e&&i&&(i=-1*(t._listW-i));var s=parseInt((r-t._scrL)/t._itemW)>=t._numPgItems,c=t._scrL>=r;if((c||!s)&&e)return void(t._eoL||(l.classList(t._pgNext).add("disabled"),t._relItems&&t._relItems.length<100?t._fetchMoreRelatedItems():t._eoL=!0));t._posL=e?t._posL-t._listW:t._posL+t._listW,t._scrL=e?t._scrL+t._listW:t._scrL-t._listW,t._posL+=i,t._scrL-=i,t._scrL<=r&&l.classList(t._pgNext).remove("disabled"),t._scrL>0?l.classList(t._pgPrev).remove("disabled"):l.classList(t._pgPrev).add("disabled"),l.classList(t._plList).add("strip-animate"),t._plList.style.left=t._posL+"px",t._transTimer&&(clearTimeout(t._transTimer),t._transTimer=null),t._transTimer=setTimeout(function(){l.classList(t._plList).remove("strip-animate"),t._plList.style.left="0px",t._posL=0,t._transTimer=null,t._node.querySelector(".yvp-playlist-strip").scrollLeft=t._scrL,t._plStrip.scrollLeft=t._scrL,t._mdEnd&&(t._plLoader.style.left=t._scrL+"px")},1e3)}}},r.prototype._setCurrentVideoItemUI=function(e){var t=this,n=t._model.playlist.getCurrentItem(),r=n&&n.id,i=t._plList.querySelector(".yvp-currently-playing"),o='.yvp-playlist-item[data-id="'+r+'"]',a=t._plList.querySelector(o);if(i&&(l.classList(i).remove("yvp-currently-playing"),"right"!==t._mode)){var s=i.querySelector(".yvp-pl-title"),c=i.querySelector(".yvp-pl-dur"),d=i.querySelector(".yvp-playlist-item-gradient");l.classList(s).remove("yvp-show"),l.classList(c).remove("yvp-hide"),l.classList(d).remove("yvp-playlist-item-gradient-duration")}if(a){var p=a.offsetLeft,u=Number(a.getAttribute("data-idx"))||0;if(l.classList(a).add("yvp-currently-playing"),"right"!==t._mode){var _=a.querySelector(".yvp-pl-title"),m=a.querySelector(".yvp-pl-dur"),v=a.querySelector(".yvp-playlist-item-gradient");l.classList(_).add("yvp-show"),l.classList(m).add("yvp-hide"),l.classList(v).add("yvp-playlist-item-gradient-duration"),t._plList.parentElement.scrollLeft=p}else if("right"===t._mode&&e){var y=a.offsetTop;t._plList.scrollTop=y-5}t._plList.children.length-u<t._numPgItems&&t._fetchMoreRelatedItems(!0),t._plList.parentElement.scrollLeft>0?l.classList(t._pgPrev).remove("disabled"):l.classList(t._pgPrev).add("disabled")}"hidden"===t._mode&&(i&&l.classList(i).remove("yvp-hide"),a&&(l.classList(a).add("yvp-hide"),t._hiddenTitle.innerHTML=n&&n.title))},r.prototype._fetchMoreRelatedItems=function(e){var t=this;t._start+=t._count,l.classList(t._plCont).add("yvp-pl-loading"),t._eventBus.publish(o.FETCH_MORE_RELATED_ITEMS,t._mI,t._getAPIParamOptions(),function(n,r){r&&r.length>0?(t._renderPlaylistItems(r),d.mobile||e||t._onPageBtnTap(!0)):(l.classList(t._plCont).remove("yvp-pl-loading"),t._eoL=!0)})},r.prototype._getTheme=function(e){var t,n=this,r=n._model.ui.playlistUI&&n._model.ui.playlistUI.theme||"light",i="dark";switch(e){case"bottom":t=r;break;case"hidden":case"right":t=i;break;default:t=i}return t},r.prototype._getAPIParamOptions=function(){var e=this;return{start:e._start,count:e._count,videoUuid:e._seedMediaItem.id,playlistId:e._model.ui.playlistUI&&e._model.ui.playlistUI.playlistId||null,playlistAlias:e._model.ui.playlistUI&&e._model.ui.playlistUI.playlistAlias||null}},r.prototype._onDimensionChange=function(){var e=this;e._plStrip.scrollLeft=0,e._scrL=0,e._posL=0,l.classList(e._pgPrev).add("disabled"),e._setPlaylistViewSize(),setTimeout(function(){e._setPlaylistViewSize()},1e3)},r.prototype._onPlaybackStarted=function(){var e=this;e._mdEnd||e._setCurrentVideoItemUI(!0)},r.prototype._removeItems=function(){var e=this;e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[];var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)}),e._plList.innerHTML=""},r.prototype.destroy=function(){var e=this;if(e._cancelUpNextTimeout(),e._pgNextTap&&e._pgNextTap&&(e._pgNextTap.destroy(),e._pgNextTap.destroy(),e._pgPrev.removeEventListener("tap",e._onPageBtnTap),e._pgNext.removeEventListener("tap",e._onPageBtnTap)),e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[],e._repOnly)e._node.removeEventListener("tap",e._onEndScreenTap),e._endScreenTap.destroy();else{var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)})}}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./end-screen-grid.html":71,"./playlist-items.html":82,"./playlist.html":83,fs:146,"insert-css":148}],85:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <pre>"),r.b("\n"+n),r.b(r.v(r.f("config",e,t,0))),r.b("\n"+n),r.b("    </pre>"),r.b("\n"+n),r.b("    <table border='1'>"),r.b("\n"+n),r.b("        <style>"),r.b("\n"+n),r.b("            .bars {"),r.b("\n"+n),r.b("                white-space: nowrap;"),r.b("\n"+n),r.b("            }"),r.b("\n"+n),r.b("            .bars div {"),r.b("\n"+n),r.b("                display: inline-block;"),r.b("\n"+n),r.b("                height: 25px;"),r.b("\n"+n),r.b("            }"),r.b("\n"+n),r.b("            .bar {"),r.b("\n"+n),r.b("                background-color: #714fff;"),r.b("\n"+n),r.b("                border: 1px solid #000;"),r.b("\n"+n),r.b("            }"),r.b("\n"+n),r.b("        </style>"),r.b("\n"+n),r.b("        <tr>"),r.b("\n"+n),r.b("            <th>Type</th>"),r.b("\n"+n),r.b("            <th>Description</th>"),r.b("\n"+n),r.b("            <th>Start</th>"),r.b("\n"+n),r.b("            <th>End</th>"),r.b("\n"+n),r.b("            <th>Diff</th>"),r.b("\n"+n),r.b("            <th>Bar</th>"),r.b("\n"+n),r.b("        </tr>"),r.b("\n"+n),r.s(r.f("profileItems",e,t,1),e,t,0,602,1024,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("            <tr>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("type",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("desc",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("startTime",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("endTime",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("timeDiff",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td class='bars'>"),r.b("\n"+n),r.b("                    <div style='width: "),r.b(r.v(r.f("startWidth",e,t,0))),r.b("px;'></div>"),r.b("\n"+n),r.b("                    <div class='bar' style='width: "),r.b(r.v(r.f("barWidth",e,t,0))),r.b("px;'></div>"),r.b("\n"+n),r.b("                </td>"),r.b("\n"+n),r.b("            </tr>"),r.b("\n")}),e.pop()),r.b("    </table>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],86:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-settings-container' tabindex='0'>"),r.b("\n"+n),r.b("    <div class='yvp-main-settings open'>"),r.b("\n"+n),r.b("        <div class='yvp-settings-embed'>"),r.b("\n"+n),r.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.EMBED",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.EMBED",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-input-container yvp-embed-input-container'>"),r.b("\n"+n),r.b("                <input type='text' class='yvp-embed-input' value='' data-link-type='emb' readonly />"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-divider'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-settings-quality'>"),r.b("\n"+n),r.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.VIDEO_QUALITY",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.VIDEO_QUALITY",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item "),r.b(r.v(r.d("qualityMap.auto.btnClass",e,t,0))),r.b(" yvp-settings-activated' tabindex='1'>"),r.b(r.v(r.d("strings.AUTO",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item "),r.b(r.v(r.d("qualityMap.high.btnClass",e,t,0))),r.b(" yvp-disabled' tabindex='2'>"),r.b(r.v(r.d("strings.HIGH",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item "),r.b(r.v(r.d("qualityMap.medium.btnClass",e,t,0))),r.b(" yvp-disabled' tabindex='3'>"),r.b(r.v(r.d("strings.MEDIUM",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item last-item "),r.b(r.v(r.d("qualityMap.low.btnClass",e,t,0))),r.b(" yvp-disabled' tabindex='4'>"),r.b(r.v(r.d("strings.LOW",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-divider'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-settings-cc'>"),r.b("\n"+n),r.b("            <div class='yvp-settings-header last-item' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.CC_SETTINGS",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.CC_SETTINGS",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-caret-icon right'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],87:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n._ccOptions=new p(n._eventBus,n._model),n._qualityMap={auto:{btnClass:"yvp-quality-auto",bitrate:0},low:{btnClass:"yvp-quality-low",bitrate:0},medium:{btnClass:"yvp-quality-medium",bitrate:0},high:{btnClass:"yvp-quality-high",bitrate:0}},n._streamMap=null,n._availableStreamCount=0,n._eventBus.subscribe(o.PLAYBACK_STARTED,n._onPlaybackStarted,n),n._eventBus.subscribe(o.MEDIA_ITEM_LOADED,n._bindEmbedCode,n)}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("../event"),a=e("../tap"),s=e("../strings"),l=e("../util"),c=e("../../../lib/logger"),d=(e("../../../lib"),e("../../src/stream")),p=e("./cc-options"),u=e("./settings.html");i('.yvp-bottom-bar .yvp-settings-container{position:absolute;z-index:4;width:auto;background:rgba(18,23,23,0.8);padding:16px;display:none;bottom:37px;border-radius:4px;right:0;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:11px;-webkit-font-smoothing:subpixel-antialiased;color:#fff;cursor:default;pointer-events:auto;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;animation-duration:.4s;}.yvp-bottom-bar .yvp-settings-container.open{display:block}.yvp-bottom-bar .yvp-settings-container.hide{display:none}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header{color:rgba(255,255,255,0.6);margin-bottom:12px;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item{margin-bottom:0;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item:hover{color:#fff}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon{position:relative;display:inline-block;width:6px;height:10px;margin:0;background-size:100%;background-repeat:no-repeat;cursor:pointer;opacity:1;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.right{top:2px;left:2px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMuNzU1IDQuNjk3bC0zLjU2IDMuNTZjLS4yNi4yNi0uMjYuNjgyIDAgLjk0Mi4yNi4yNi42ODMuMjYuOTQzIDBMNS42NCA0LjY5NiAxLjEzOC4xOTVDMS4wMDguMDY1LjgzOCAwIC42NjggMCAuNDk1IDAgLjMyNS4wNjUuMTk1LjE5NWMtLjI2LjI2LS4yNi42ODMgMCAuOTQzbDMuNTYgMy41NiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+Cg==")}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.left{top:1px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlPmljb24tY2FyZXQtbGVmdC1mcG88L3RpdGxlPjxwYXRoIGQ9Ik0yLjI0NSA1LjMwM2wzLjU2LTMuNTZjLjI2LS4yNi4yNi0uNjgyIDAtLjk0Mi0uMjYtLjI2LS42ODMtLjI2LS45NDMgMEwuMzYgNS4zMDRsNC41MDIgNC41MDJjLjEzLjEzLjMuMTk1LjQ3LjE5NS4xNzIgMCAuMzQyLS4wNjUuNDcyLS4xOTUuMjYtLjI2LjI2LS42ODMgMC0uOTQzbC0zLjU2LTMuNTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item{display:inline-block;margin-right:6px;cursor:pointer;color:#fff;padding:4px;border:0;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item:hover{background-color:rgba(255,255,255,0.2);border-radius:3px}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item.last-item{margin-right:0}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item.yvp-disabled{display:none;pointer-events:none}.yvp-bottom-bar .yvp-settings-container .yvp-settings-activated{color:#fff;font-weight:normal;border-radius:3px;background-color:rgba(255,255,255,0.4);}.yvp-bottom-bar .yvp-settings-container .yvp-settings-activated:hover{background-color:rgba(255,255,255,0.4)}.yvp-main-settings.open{display:block}.yvp-main-settings.close{display:none}.yvp-main-settings .yvp-settings-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-main-settings .yvp-settings-embed.close{display:none}.yvp-main-settings .yvp-settings-embed.open{display:block}.yvp-main-settings .yvp-input-container{height:20px;border:1px solid rgba(255,255,255,0.2);border-radius:4px}.yvp-main-settings .yvp-embed-input{display:block;min-width:178px;padding:3px 10px;font-size:11px;color:rgba(255,255,255,0.6);background:transparent;outline:none;box-shadow:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.yvp-main-settings .yvp-embed-input:hover{color:#fff;cursor:pointer}.yvp-main-settings .yvp-settings-quality{min-width:200px;display:none;}.yvp-main-settings .yvp-settings-quality.yvp-quality-enabled{display:block}.yvp-main-settings .yvp-settings-cc{min-width:115px;max-width:145px;cursor:pointer;}.yvp-main-settings .yvp-settings-cc .yvp-settings-header{display:inline-block;}.yvp-main-settings .yvp-settings-cc .yvp-settings-header:hover{color:rgba(255,255,255,0.6);opacity:1}'),r.prototype.create=function(){var e=this,t=l.render(u,{strings:s.i18n,qualityMap:e._qualityMap}),n=e._ccOptions.render();return e._node=t,e._mainSettings=t.querySelector(".yvp-main-settings"),e._qualityNode=e._mainSettings.querySelector(".yvp-settings-quality"),e._qualityAutoBtn=e._mainSettings.querySelector("."+e._qualityMap.auto.btnClass),e._qualityLowBtn=e._mainSettings.querySelector("."+e._qualityMap.low.btnClass),e._qualityMediumBtn=e._mainSettings.querySelector("."+e._qualityMap.medium.btnClass),e._qualityHighBtn=e._mainSettings.querySelector("."+e._qualityMap.high.btnClass),e._ccOptionsLink=e._mainSettings.querySelector(".yvp-settings-cc"),e._currentActivatedQuality=e._qualityAutoBtn,n.length>0&&(n.forEach(function(t){e._node.appendChild(t)}),e._ccSettingsMainScreen=n[0],e._backToMainSettings=e._ccSettingsMainScreen.querySelector(".yvp-cc-back-to-settings")),e._bindEvents(),t},r.prototype._bindEvents=function(){var e=this;e._ccOptionsTap=new a(e._ccOptionsLink),e._onCcOptionsTap=function(t){t.stopPropagation(),e._showCCMainOptions()},e._ccOptionsLink.addEventListener("tap",e._onCcOptionsTap),e._backToMainSettingsTap=new a(e._backToMainSettings),e._onBackToMainSettingsTap=function(t){t.stopPropagation(),e._backToSettings()},e._backToMainSettings.addEventListener("tap",e._onBackToMainSettingsTap),e._settingContainerTap=new a(e._node),e._onSettingContainerTap=function(e){e.stopPropagation()},e._node.addEventListener("tap",e._onSettingContainerTap)},r.prototype._showCCMainOptions=function(){var e=this;l.classList(e._mainSettings).remove("open"),l.classList(e._mainSettings).add("close"),l.classList(e._ccSettingsMainScreen).remove("close"),l.classList(e._ccSettingsMainScreen).add("open")},r.prototype._backToSettings=function(){var e=this;l.classList(e._mainSettings).remove("close"),l.classList(e._mainSettings).add("open"),l.classList(e._ccSettingsMainScreen).remove("add"),l.classList(e._ccSettingsMainScreen).add("close")},r.prototype._bindQualitySelection=function(e,t,n,r,i){var s=this;null!==e?(l.classList(t).remove("yvp-disabled"),"auto"!==i&&(s._availableStreamCount++,s._onlyAvailableStream=i),s._qualityMap[i].bitrate=e.bitrate,s[n]=function(n){n.stopPropagation(),s._bindQualityActivatedClass(t);var r="sr-"+i;s._eventBus.publish(o.API.UI_INTERACT,{srcElement:r}),s._eventBus.publish(o.QUALITY_SELECTED,{preference:i,stream:e}),s._model.playback.quality=i,c.log("selected stream with bitrate: "+e.bitrate)},s[r]=new a(t),t.addEventListener("tap",s[n])):l.classList(t).add("yvp-disabled")},r.prototype._bindVideoQuality=function(){var e=this;e._populateStreamSelections(),e._bindQualitySelection(e._lowQualityStream,e._qualityLowBtn,"_onQualityLowTap","_qualityLowTap","low"),e._bindQualitySelection(e._mediumQualityStream,e._qualityMediumBtn,"_onQualityMediumTap","_qualityMediumTap","medium"),e._bindQualitySelection(e._highQualityStream,e._qualityHighBtn,"_onQualityHighTap","_qualityHighTap","high"),e._bindQualitySelection(e._autoQualityStream,e._qualityAutoBtn,"_onQualityAutoTap","_qualityAutoTap","auto"),e._checkForOnlyOneStream()},r.prototype._populateStreamSelections=function(){var e=this;e._lowQualityStream=null,e._mediumQualityStream=null,e._highQualityStream=null,e._streams=e._model.playlist.getCurrentItem().streams,e._streamCapability=e._model.capabilities[e._model.playbackState.rendererType],e._setAutoQualityStream(),e._streams.length>1?e._streamMap=l.mapStreamsToQualities(e._streams):e._streamMap=l.mapStreamsToQualities({bitrates:e._model.playback.bitrates,heights:e._model.playback.heights}),e._lowQualityStream=e._streamMap.low,e._mediumQualityStream=e._streamMap.medium,e._highQualityStream=e._streamMap.high},r.prototype._checkForOnlyOneStream=function(){var e=this;if(1===e._availableStreamCount){var t=e._qualityMap[e._onlyAvailableStream].btnClass,n=e._qualityNode.querySelector("."+t);l.classList(n).add("yvp-disabled")}},r.prototype._onPlaybackStarted=function(){var e,t=this,n=l.shouldEnableQualitySelector(t._model);n?(t._bindVideoQuality(),e=t._qualityNode.querySelector("."+t._qualityMap.auto.btnClass),t._bindQualityActivatedClass(e),l.classList(t._qualityNode).add("yvp-quality-enabled")):l.classList(t._qualityNode).remove("yvp-quality-enabled")},r.prototype._bindQualityActivatedClass=function(e){var t=this;l.classList(t._currentActivatedQuality).remove("yvp-settings-activated"),t._currentActivatedQuality=e?e:t._qualityAutoBtn,l.classList(t._currentActivatedQuality).add("yvp-settings-activated")},r.prototype._destroyVQEventListener=function(e,t,n,r){t&&n&&(n.destroy(),e.removeEventListener("tap",r))},r.prototype._setAutoQualityStream=function(){var e=this,t=d.findStreamByProperty(e._streams,"bitrate",e._model.playback.desiredBitrate,e._streamCapability);e._autoQualityStream=t},r.prototype._bindEmbedCode=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._getShareUrl(),r=t.embedCode||n,i=t.embedRights,c=e._node.querySelector(".yvp-settings-embed");e._emebedInputBox=e._node.querySelector(".yvp-embed-input"),e._embedCodeTap=new a(e._emebedInputBox),e._onEmbedCodeTap=function(t){t.target.focus(),t.target.setSelectionRange(0,t.target.value.length),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"settings-embed"})},e._emebedInputBox.addEventListener("tap",e._onEmbedCodeTap),n?(e._emebedInputBox.value=i?e.generateEmbedCode(r):s.i18n.EMBED_NOT_ALLOWED,l.classList(c).add("open"),l.classList(c).remove("close")):(l.classList(c).add("close"),l.classList(c).remove("open"))},r.prototype._getShareUrl=function(){var e=this,t=e._model.playlist&&e._model.playlist.getCurrentItem(),n=t&&t.shareUrl;return!e._model.playback.playInlineVideo&&window.location.pathname.indexOf(".html")>-1&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname),n},r.prototype.generateEmbedCode=function(e){return e.match(/<iframe/)?e:"<iframe width='640' height='360' scrolling='no' frameborder='0' src='"+e+"?format=embed' allowfullscreen='true' mozallowfullscreen='true' webkitallowfullscreen='true' allowtransparency='true'></iframe>"},r.prototype.destroy=function(){var e=this;e._ccOptionsTap&&e._ccOptionsLink&&(e._ccOptionsTap.destroy(),e._ccOptionsLink.removeEventListener("tap",e._onCcOptionsTap)),e._embedCodeTap&&e._emebedInputBox&&(e._embedCodeTap.destroy(),e._emebedInputBox.removeEventListener("tap",e._onEmbedCodeTap)),e._backToMainSettingsTap&&e._backToMainSettings&&(e._backToMainSettingsTap.destroy(),e._backToMainSettings.removeEventListener("tap",e._onBackToMainSettingsTap)),e._settingContainerTap&&e._node&&(e._settingContainerTap.destroy(),e._node.removeEventListener("tap",e._onSettingContainerTap)),e._destroyVQEventListener(e._qualityAutoBtn,e._autoQualityStream,e._qualityAutoTap,e._onQualityAutoTap),e._destroyVQEventListener(e._qualityLowBtn,e._lowQualityStream,e._qualityLowTap,e._onQualityLowTap),e._destroyVQEventListener(e._qualityMediumBtn,e._mediumQualityStream,e._qualityMediumTap,e._onQualityMediumTap),e._destroyVQEventListener(e._qualityHighBtn,e._highQualityStream,e._qualityHighTap,e._onQualityHighTap),e._ccOptions=null,e._qualityNode=null,e._node=null}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../src/stream":"Af6MnA","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./cc-options":68,"./settings.html":86,fs:146,"insert-css":148}],88:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-start-screen' tabindex='-1'>"),r.b("\n"+n),r.b("    <img class='yvp-start-screen-image' src='"),r.b(r.v(r.f("imageSrc",e,t,0))),r.b("' width='"),r.b(r.v(r.f("width",e,t,0))),r.b("' height='"),r.b(r.v(r.f("height",e,t,0))),r.b("' aria-hidden='true'>"),r.b("\n"+n),r.s(r.d("config.showButton",e,t,1),e,t,0,188,308,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("        <div class='yvp-start-screen-button' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.PLAY_VIDEO",e,t,0))),n.b("' role='button'></div>"),n.b("\n")}),e.pop()),r.b("    <div class='yvp-start-screen-bar-wrapper'>"),r.b("\n"+n),r.b("        <div class='yvp-start-screen-bar' tabindex='-1'>"),r.b("\n"+n),r.s(r.d("config.showProvider",e,t,1),e,t,0,471,579,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                <h4 class='yvp-start-screen-provider' tabindex='1'>"),n.b(n.v(n.d("item.provider.name",e,t,0))),n.b("</h4>"),n.b("\n")}),e.pop()),r.s(r.d("config.showTitle",e,t,1),e,t,0,637,734,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                <h3 class='yvp-start-screen-title' tabindex='2'>"),n.b(n.v(n.d("item.title",e,t,0))),n.b("</h3>"),n.b("\n")}),e.pop()),r.s(r.d("config.showDescription",e,t,1),e,t,0,795,902,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                <p class='yvp-start-screen-description' tabindex='3'>"),n.b(n.v(n.d("item.description",e,t,0))),n.b("</p>"),n.b("\n")}),e.pop()),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],89:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e}t.exports=r;var i=e("../event"),o=e("../tap"),a=e("../util"),s=e("../strings"),l=e("../../../lib/user-agent"),c=e("./start-screen.html");r.prototype.create=function(e,t){var n=this,r=t.ui.startScreenConfig,d={showTitle:r.showTitle&&e.title,showButton:r.showButton,showDescription:r.showDescription&&e.description,showProvider:r.showProvider&&e.provider&&e.provider.name},p=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider;return n.node=a.render(c,{item:e,config:d,width:t.uiState.width,height:t.uiState.height,imageSrc:p,strings:s.i18n}),n._startScreenTap=new o(n.node),n._onStartScreenTap=function(){var e=function(){n._eventBus.publish(i.START_SCREEN_CLICK),n._eventBus.publish(i.API.UI_INTERACT,{srcElement:"startScreen"})};l.htc_one?setTimeout(e,500):e()},n.node.addEventListener("tap",n._onStartScreenTap),n.node},r.prototype.destroy=function(){var e=this;e._startScreenTap.destroy(),e.node.removeEventListener("tap",e._onStartScreenTap),e.node=null}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./start-screen.html":88}],90:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._cssSettings=e,r._config=t,r._eventBus=n,r._events=[],r._config.items=r._config.items||[]}t.exports=r;var i=e("../../util"),o=e("../../tap"),a=e("../../../../lib");r.prototype.create=function(){var e=this;return e.node=document.createElement("div"),i.classList(e.node).add(e._cssSettings.wrapper),e._selectedItemWrapper=document.createElement("div"),i.classList(e._selectedItemWrapper).add(e._cssSettings.selectedWrapper),
e._selectedItem=document.createElement("div"),i.classList(e._selectedItem).add(e._cssSettings.selected),e._selectedIndicator=document.createElement("span"),i.classList(e._selectedIndicator).add(e._cssSettings.availability),e._dropDownIcon=document.createElement("span"),i.classList(e._dropDownIcon).add(e._cssSettings.dropDownIcon),e._selectedItemWrapper.appendChild(e._selectedItem),e._selectedItemWrapper.appendChild(e._dropDownIcon),e.node.appendChild(e._selectedItemWrapper),e._syncListItems(),e.node.appendChild(e._itemList),e._syncUI(e._config.selected),e._bindUI(),e.node},r.prototype._syncListItems=function(){var e=this;e._itemList?(e._unBindItemList(),e._itemList.innerHTML=""):e._itemList=document.createElement("ul"),i.classList(e._itemList).add(e._cssSettings.list);var t,n=document.createDocumentFragment();e._config.items.length>0?e._config.items.forEach(function(r,o){t=document.createElement("li"),e._config.itemsData&&(t.val=e._config.itemsData[o]),i.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(r));var a=document.createElement("span");i.classList(a).add(e._cssSettings.availability),t.appendChild(a),n.appendChild(t)}):(t=document.createElement("li"),i.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(e._config.noItemsText)),n.appendChild(t)),e._itemList.innerHTML="",e._itemList.appendChild(n),e._bindItemList()},r.prototype.syncData=function(e){var t=this;e.items&&(t._config.items=e.items.length>0?e.items:t._config.items,t._config.itemsData=e.itemsData.length>0?e.itemsData:t._config.itemsData,t._syncListItems()),t._config.selected=e.selected,t._syncUI(t._config.selected)},r.prototype._syncUI=function(e){var t=this,n=document.createTextNode(e);t._selectedItem.firstChild?t._selectedItem.replaceChild(n,t._selectedItem.firstChild):(t._selectedItem.appendChild(n),t._selectedItem.appendChild(t._selectedIndicator)),t._config.items.length>0?i.classList(t._selectedIndicator).remove(t._cssSettings.notAvailable):i.classList(t._selectedIndicator).add(t._cssSettings.notAvailable)},r.prototype._bindUI=function(){var e=this;e._dropDownTap=new o(e._selectedItemWrapper),e._onDropDownIconTap=function(t){t.stopPropagation(),e._toggleListDisplay()},e._selectedItemWrapper.addEventListener("tap",e._onDropDownIconTap)},r.prototype._bindItemList=function(){var e=this;e._onItemSelected=function(t){t.stopPropagation(),e._syncUI(t.target.textContent),e._toggleListDisplay(),e._publishEvents(t.target)},e._childTaps=[],Array.prototype.forEach.call(e._itemList.childNodes,function(t){var n=new o(t);e._childTaps.push(n),t.childNodes[0].nodeValue!==e._config.noItemsText&&t.addEventListener("tap",e._onItemSelected)})},r.prototype._toggleListDisplay=function(){var e=this;e._isListOpen?i.classList(e._itemList).remove("open"):i.classList(e._itemList).add("open"),e._isListOpen=!e._isListOpen},r.prototype._unBindUI=function(){var e=this;e._dropDownTap&&e._dropDownTap.destroy(),e._dropDownTap&&e._dropDownIcon.removeEventListener("tap",e._onDropDownIconTap),e._unBindItemList()},r.prototype._unBindItemList=function(){var e=this;e._itemList.childNodes&&(Array.prototype.forEach.call(e._itemList.childNodes,function(t){t.removeEventListener("tap",e._onItemSelected)}),e._childTaps.forEach(function(e){e.destroy()}))},r.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},r.prototype.removeEvent=function(e){var t=this,n=t._events.indexOf(e);-1!==n&&t._events.splice(n,1)},r.prototype._publishEvents=function(e){var t=this,n=a.isNullOrUndefined(e.val)?null:e.val;if(null===n&&(n=e.textContent),t._events)for(var r=0;r<t._events.length;r++)t._eventBus.publish(t._events[r],n)},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null,e._itemList=null,e._childTaps=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],91:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._cssSettings=e,r._config=t,r._eventBus=n,r._events=[],r._validateInput()}t.exports=r;var i=e("../../util"),o=e("../../../../lib"),a=e("../../tap");r.prototype._validateInput=function(){var e=this;if(!e._config)throw new Error("No config object provided for slider");if(e._config.minValue>=e._config.maxValue)throw new Error("Slider's min value is bigger/equal than max value");if(e._config.minValue>e._config.initialValue)throw new Error("Slider's min value is bigger than initial value");if(e._config.maxValue<e._config.initialValue)throw new Error("Slider's max value is smaller than initial value")},r.prototype.create=function(){var e=this;e.node=document.createElement("div"),i.classList(e.node).add(e._cssSettings.wrapper),e._track=document.createElement("div"),i.classList(e._track).add(e._cssSettings.track);var t=100/(e._config.anchors-1),n=0;if(e._trackAnchorsXPos=[],e._config.anchors>0)for(var r=0;r<e._config.anchors;r++){var o=document.createElement("div");i.classList(o).add(e._cssSettings.anchor),o.setAttribute("style","left: "+n+"%"),e._trackAnchorsXPos.push(n),n+=t,e._track.appendChild(o)}return e._sliderHandle=document.createElement("div"),i.classList(e._sliderHandle).add(e._cssSettings.handle),e._config.initialValue&&(e._sliderHandle.setAttribute("style","left: "+e._config.initialValue+"%"),e._fractionValue=e._config.initialValue/e._config.maxValue),e._track.appendChild(e._sliderHandle),e.node.appendChild(e._track),e._bindUI(),e.node},r.prototype._syncUI=function(e){var t,n=this;if(n._config.anchors>0){var r=100;n._trackAnchorsXPos.forEach(function(n){Math.abs(n-e)<r&&(r=Math.abs(n-e),t=n)})}e=o.isNullOrUndefined(t)?e:t,n._syncSliderHandlePosition(e),n._publishEvents(e)},r.prototype._getEvtPositionAndSyncUI=function(e){var t=this,n=t._getSliderValue(e);this._syncUI(n)},r.prototype._bindUI=function(){var e=this;e.node&&(e._sliderTap=new a(e.node),e._onSliderTap=function(t){t.stopPropagation(),e._getEvtPositionAndSyncUI(t)},e.node.addEventListener("tap",e._onSliderTap),e._onSliderDown=function(t){e._preventTouchDefault(t),e._isSliding=!0,e._onSliderMove(t)},e._onSliderMove=function(t){e._isSliding&&(e._preventTouchDefault(t),e._getEvtPositionAndSyncUI(t))},e._onSliderUp=function(t){e._isSliding&&(e._preventTouchDefault(t),e._isSliding=!1)},["mousedown","touchstart"].forEach(function(t){e.node.addEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.addEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.addEventListener(t,e._onSliderUp)}))},r.prototype._unBindUI=function(){var e=this;e._sliderTap&&e._sliderTap.destroy(),e.node.removeEventListener("tap",e._onSliderTap),["mousedown","touchstart"].forEach(function(t){e.node.removeEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.removeEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.removeEventListener(t,e._onSliderUp)})},r.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},r.prototype._syncSliderHandlePosition=function(e){var t=this;t._sliderHandle.setAttribute("style","left: "+e+"%")},r.prototype._getSliderValue=function(e){var t=this,n=e.pageX-t.node.getBoundingClientRect().left;return t._fractionValue=n/t.node.clientWidth,100*Math.max(0,Math.min(1,t._fractionValue))},r.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},r.prototype.removeEvent=function(e){var t=this,n=t._events.indexOf(e);-1!==n&&t._events.splice(n,1)},r.prototype._publishEvents=function(e){var t=this;t._events.forEach(function(n){t._eventBus.publish(n,e)})},r.prototype.getValue=function(){var e=this;return e._fractionValue?e._config.maxValue&&e._fractionValue*e._config.maxValue:void 0},r.prototype.setValue=function(e){var t=this;t._fractionValue=t._config.maxValue&&e/t._config.maxValue,t._syncUI(e)},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],92:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-tooltip-wrapper'>"),r.b("\n"+n),r.b("    <div class='yvp-tooltip-content'>"),r.b("\n"+n),r.b("        "),r.b(r.v(r.f("tooltip-msg",e,t,0))),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],93:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r.node=e,r._tooltipText=o.isString(t)?t:"";var a=i.render(s,{"tooltip-msg":r._tooltipText});r._tooltipTextNode=a.querySelector(".yvp-tooltip-content"),r._tooltipWrapperNode=a,r.node.appendChild(a),r.setEnabled(!0),r._onMouseLeave=function(e){e.stopPropagation(),i.classList(r.node).remove("yvp-tooltip-hidden")},n&&(n.hideUponClick&&r.hideOnClick(),n.positionBottom&&r.setPositionBottom())}t.exports=r;var i=e("../../util"),o=e("../../../../lib"),a=e("../../tap"),s=e("./tooltip.html");r.prototype.setText=function(e){var t=this;t._tooltipText=e,t._tooltipTextNode.innerHTML=t._tooltipText},r.prototype.setEnabled=function(e){var t=this;t._isEnabled=e,e?i.classList(t.node).add("yvp-tooltip"):i.classList(t.node).remove("yvp-tooltip")},r.prototype.hideOnClick=function(){var e=this;e._hideOnClick||(e._elemTap=new a(e.node),e._onElemTap=function(t){e.node&&i.classList(e.node).add("yvp-tooltip-hidden")},e.node.addEventListener("tap",e._onElemTap,e),["mouseleave","touchend"].forEach(function(t){e.node.addEventListener(t,e._onMouseLeave)}),e._hideOnClick=!0)},r.prototype.setPositionBottom=function(){var e=this;i.classList(e._tooltipWrapperNode).add("yvp-tooltip-pos-bottom")},r.prototype.destroy=function(){var e=this;e.node&&(e._elemTap&&(e._elemTap.destroy(),e.node.removeEventListener("tap",e._onElemTap)),["mouseleave","touchend"].forEach(function(t){e.node.removeEventListener(t,e._onMouseLeave)})),e._tooltipTextNode=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU","./tooltip.html":92}],94:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <div class='yvp-top-bar'>"),r.b("\n"+n),r.b("        <a class='yvp-provider-logo' target='_blank' aria-hidden='true'></a>"),r.b("\n"+n),r.b("        <div class='yvp-content-type hide' tabindex='0'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-login-prompt' id='yvp-login-prompt' role='dialog' tabindex='0'>"),r.b("\n"+n),r.b("        <div class='yvp-login-prompt-close' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("        <p class='yvp-login-prompt-msg' tabindex='0'>"),r.b(r.v(r.d("strings.LOGIN_MESSAGE",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("        <div class='yvp-login-yahoo-icn' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-bottom-bar'>"),r.b("\n"+n),r.b("        <div class='yvp-playlist-playing-item-title'></div>"),r.b("\n"+n),r.b("        <div class='yvp-bottom-container'>"),r.b("\n"+n),r.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),r.b("\n"+n),r.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),r.b("\n"+n),r.b("                <div class='yvp-handle'></div>"),r.b("\n"+n),r.b("                <div class='yvp-buffer-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-playback-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-visual-seek'>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-thumbnail'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-play-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("                <div class='yvp-upnext-container hide'>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-btn' role='button'>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),r.b("\n"+n),r.b("                        <div class='yvp-hover-elem'></div>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),r.b("\n"+n),r.b("                    <div class='yvp-current-time'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-total-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-menu-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-volume-btn button' role='button' tabindex='0'>"),r.b("\n"+n),r.b("                    <div class='yvp-volume-bar-container'>"),r.b("\n"+n),r.b("                        <div class='yvp-volume-level'>"),r.b("\n"+n),r.b("                            <div class='yvp-volume-bar'>"),r.b("\n"+n),r.b("                                <div class='yvp-volume-handle'></div>"),r.b("\n"+n),r.b("                            </div>"),r.b("\n"+n),r.b("                            <div class='yvp-volume-value'></div>"),r.b("\n"+n),r.b("                        </div>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.CC",e,t,0))),r.b("'></div>"),r.b("\n"+n),r.b("                <div class='yvp-setting-btn button' role='button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.SETTINGS",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("                    <div class='yvp-setting-pointer' aria-hidden='true'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-chromecast-btn button' role='button' tabindex='0' style='display:none;' aria-label='"),r.b(r.v(r.d("strings.CHROMECAST",e,t,0))),r.b("'></div>"),r.b("\n"+n),r.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-cast-overlay'>"),r.b("\n"+n),r.b("        <div>"),r.b("\n"+n),r.b("            <div class='cast-overlay-header'>"),r.b("\n"+n),r.b("                <div class='cast-device-info'>"),r.b("\n"+n),r.b("                    <p class='cast-device-name'>"),r.b(r.v(r.d("strings.CAST_PLAYING_RECEIVER",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("                    <small class='cast-device-type'>"),r.b(r.v(r.d("strings.CHROMECAST",e,t,0))),r.b("</small>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='cast-overlay-content'></div>"),r.b("\n"+n),r.b("            <div class='cast-overlay-footer'>"),r.b("\n"+n),r.b("                <small class='cast-disconnect-btn'>"),r.b(r.v(r.d("strings.DISCONNECT",e,t,0))),r.b("</small>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-mute-indicator'></div>"),r.b("\n"+n),r.b("    <div class='yvp-custom-controls'></div>"),r.b("\n"+n),r.b("    <div class='yvp-object-overlay'></div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":147}],95:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._view=t,r._model=n,r._isLive=!1,r._liveState=null,r._ccAvailable=!0,r._eventBus.subscribe(a.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(a.Video.PLAYING,r._onVideoPlaying,r),r._eventBus.subscribe(a.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(a.AD_PLAYBACK_STARTED,r._onAdPlaying,r),r._eventBus.subscribe(a.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(a.AD_PLAYBACK_PROGRESS,r._onAdPlaybackProgress,r),r._eventBus.subscribe(a.UPDATE_AD_BREAKS,r._updateAdBreaks,r),r._eventBus.subscribe(a.UPDATE_AD_COUNT,r._updateAdCount,r),r._eventBus.subscribe(a.CC.SHOW_CONTROLS,r._setCCUIAvailability,r),r._eventBus.subscribe(a.CC.REMOVED,r._checkCCAvailability,r),r._eventBus.subscribe(a.CC.UI_TOGGLE,r._toggleCCFromSettings,r),r._eventBus.subscribe(a.API.CAST_AVAILABILITY_CHANGE,r._setChromecastBtnVisibility,r),r._eventBus.subscribe(a.CAST.CONNECTION_STATUS_CHANGED,r._onCastConnectionChange,r),r._eventBus.subscribe(a.CAST.MEDIA_CHANGED,r._onCastMediaLoaded,r),r._eventBus.subscribe(a.CAST.CAPTION_AVAILABILITY_CHANGED,r._onCastCCAvailabilityChanged,r),r._eventBus.subscribe(a.CONTROLS_BAR_CHANGE,r._onControlsBarChange,r),r._eventBus.subscribe(a.KEYDOWN,r._onKeyDown,r),r._eventBus.subscribe(a.Video.CLICK,r._onVideoClick,r)}t.exports=r;var i=(e("fs"),e("insert-css")),o=e("../../../lib/user-agent"),a=(e("../cc"),e("../error"),e("../event")),s=(e("../stream"),e("../strings")),l=e("../tap"),c=e("../util"),d=e("../../../lib"),p=e("./settings"),u=e("../views/uiwidgets/tooltip"),_=e("./yahoo-controls.html"),m="on";i(".yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls.yvp-muted .yvp-mute-indicator{opacity:.8;visibility:visible;-webkit-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;-moz-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;-o-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;transition:visibility 0s linear .5s,opacity .5s ease-in .8s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content:hover .yvp-bottom-bar{opacity:1;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content:hover .yvp-ads-overlay{-webkit-transition:height 0s;-moz-transition:height 0s;-o-transition:height 0s;transition:height 0s}.yvp-content:hover.yvp-muted .yvp-mute-indicator{opacity:0;visibility:hidden;-webkit-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;-moz-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;-o-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;transition:visibility 0s linear .1s,opacity 0s ease-out 0s}.yvp-content:hover.yvp-muted .yvp-mute-indicator:hover{opacity:0;visibility:visible;-webkit-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;-moz-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;-o-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;transition:visibility 0s linear .5s,opacity .2s ease-out 1s}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-flag-paused:hover .yvp-bottom-bar{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-content.yvp-flag-paused:hover .yvp-top-bar .yvp-content-type{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-content.yvp-user-inactive div.yvp-bottom-bar{cursor:none;}.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-slider,.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-buffer-bar,.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-playback-bar{height:3px;bottom:2px;direction:ltr;-webkit-transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:height .5s linear 0s,bottom .5s linear 0s;-o-transition:height .5s linear 0s,bottom .5s linear 0s;transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:none}.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-handle{-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);margin-top:-4px;-webkit-transition:all .51s linear 0s;-moz-transition:all .51s linear 0s;-o-transition:all .51s linear 0s;transition:all .51s linear 0s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-disable-controls .yvp-bottom-bar{opacity:0 !important}.yvp-top-bar{position:absolute;z-index:28;width:100%;top:0;}.yvp-top-bar.hide{display:none}.yvp-top-bar .yvp-provider-logo{position:absolute;right:0;display:block;height:20px;width:55px;margin-top:20px;margin-right:10px;border:0;background-repeat:no-repeat;cursor:pointer;}.yvp-top-bar .yvp-provider-logo.yvp-hide{display:none}.yvp-top-bar .yvp-ad-count-container{display:none;position:absolute;left:16px;top:12px}.yvp-top-bar .yvp-ad-count,.yvp-top-bar .yvp-ad-countdowntimer{display:inline-block;color:#fff;position:relative;text-shadow:0 1px #000;font-size:11px;font-weight:normal}.yvp-top-bar .yvp-ad-countdowntimer{padding-left:5px;text-align:right}.yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXpNNTIuNDQgNzAuMjQ1Yy0xLjY0NiAwLTIuOTI2LTEuMzQyLTMuMjkzLTIuNjAzLS41NS0xLjg4LjQ4OC0zLjg4IDIuMzEzLTQuNDYgOC4wMzMtMi41NiAxMy42NDQtMTAuNDEgMTMuNjQ0LTE5LjA5IDAtOC42NjMtNS42MS0xNi41MDYtMTMuNjQ2LTE5LjA3Mi0xLjgyNC0uNTgtMi44Ni0yLjU4My0yLjMxLTQuNDY0QzQ5LjU5IDE5LjA1IDUwLjk2NyAxOCA1Mi41IDE4Yy4zNTIgMCAuNzAyLjA1NSAxLjA0LjE2NCAxMC45MjUgMy40ODggMTguNTU4IDE0LjE1IDE4LjU1OCAyNS45MjggMCAxMS4xMzYtNy4wNjcgMjEuMDYtMTguNDQ0IDI1LjktLjM5My4xNy0uOC4yNTMtMS4yMTUuMjUzem0uMDk3LTE1LjQ4NGMtMS4wMDYgMC0xLjk2OC0uNDI3LTIuNjQtMS4xNzUtMS4yOTUtMS40Ni0xLjE2OC0zLjcuMjgtNC45OTcgMS4zMzgtMS4xOTMgMi4xMDUtMi45MDIgMi4xMDUtNC42OTQgMC0xLjgxOC0uNzYyLTMuNTM2LTIuMDktNC43MTItMS40NTYtMS4yOTctMS41OS0zLjUzNS0uMy00Ljk5Mi42NzUtLjc1OCAxLjY0LTEuMTkgMi42NS0xLjE5Ljg2NCAwIDEuNjk3LjMxNiAyLjM0NS44OSAyLjg0IDIuNTIzIDQuNDY3IDYuMTcgNC40NjcgMTAuMDA0IDAgMy44MDMtMS42MjYgNy40MzctNC40NjIgOS45Ny0uNjUuNTgtMS40ODYuODk3LTIuMzU1Ljg5N3oiLz48L2c+PC9zdmc+\");background-size:100%;left:0;top:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:hover,.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:active{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn.muted{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGU8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTI1LjY4MiA1NS4wMTZIMTYuNTNjLS40OTUgMC0uOTQ0LS4xOTQtMS4yNzMtLjUxMi0uMzYzLS4zMzQtLjU5LS44MTQtLjU5LTEuMzQ4di0xOC4yNGMwLS4xNy4wMjItLjMzMi4wNjQtLjQ4Ny4yLS43OTMuOTItMS4zNzggMS43NzUtMS4zNzhoOS4xNjJWMzNsMTQuNjY2LTE0LjY2N3Y1MS4zMzRsLTE0LjY1LTE0LjY1ek01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIvPjwvZz48L3N2Zz4=\")}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c2V0dGluZ3M8L3RpdGxlPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTU1LjczNyA0NC4zMTRjLS4wMDQtNi4yMTUtNS4xMDQtMTEuMzM4LTExLjMyLTExLjM1Ni02LjI3LS4wMjItMTEuNDIgNS4xMDgtMTEuNDE3IDExLjM3NC4wMDQgNi4yMTUgNS4xMDQgMTEuMzM0IDExLjMxNSAxMS4zNiA2LjI3NC4wMiAxMS40MjYtNS4xMTIgMTEuNDIyLTExLjM3OHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMi0xLjA4NC4xOTUtLjk5NC0uMzgtMS45MzYtLjg5OC0yLjkwNC0xLjMzOC0zLjAzNi0xLjM4Ni02LjI0LS4wNTItNy40MyAzLjA4Ny0uNDU3IDEuMjE2LS45IDEuNzk4LTEuMzUyIDMuMDE2aC02LjgxNmMtLjQ1LTEuMjE4LS45LTEuOC0xLjM1My0zLjAxNy0xLjE4NC0zLjE0LTQuMzg1LTQuNDc0LTcuNDI4LTMuMDg4LS45NjguNDQtMS45MS45NTMtMi45MDQgMS4zMzgtLjMuMTE3LS44NS4wMjYtMS4wODUtLjE5NC0xLjM0LTEuMjU0LTIuNi0yLjU5My0zLjkyNC0zLjg2NS0uNDMtLjQwNi0uNDA4LS43NDMtLjE2Mi0xLjIyLjQ5LS45NDYuOTUtMS45MSAxLjM4LTIuODg2IDEuMzItMi45NTUtLjAxNi02LjE0LTMuMDM3LTcuMy0xLjI0Mi0uNDc3LTIuNDk2LS45MjgtMy43NDctMS4zOXYtNi44MTZjMS4yMi0uNDUgMi40NC0uODk4IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zODIgMy4wODYtNy40My0uNDQtLjk2Ny0uOTUzLTEuOTEtMS4zNDItMi45MDMtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zMzggMi41NTItMi42MzYgMy44OS0zLjg5LjIzNS0uMjIuNzg1LS4zMTIgMS4wODYtLjE5NS45OTQuMzgyIDEuOTM2LjkgMi45MDQgMS4zNCAzLjA0MyAxLjM4IDYuMjQ4LjA0NiA3LjQzLTMuMDkuNDUzLTEuMjE2LjktMS44NDUgMS4zNTItMy4wNmg2LjgxNmMuNDUgMS4yMTUuODk4IDEuODQ4IDEuMzUzIDMuMDYgMS4xODQgMy4xNCA0LjM4NSA0LjQ3NSA3LjQzIDMuMDkuOTY3LS40NCAxLjkxLS45NTggMi45MDMtMS4zNC4zLS4xMTcuODUtLjAyNSAxLjA4NS4xOTUgMS4zNCAxLjI1NCAyLjYgMi41OTIgMy45MjQgMy44NjQuNDMuNDA4LjQwNy43NDYuMTYyIDEuMjIyLS40OTIuOTQ2LS45NSAxLjkxLTEuMzggMi44OS0xLjMyIDIuOTUuMDE2IDYuMTQ1IDMuMDM3IDcuMjk2IDEuMjQ3LjQ3NyAyLjQ5Ny45MjggMy43NDQgMS4zOXY2LjgxNmMtMS4yMTguNDUtMi40MzUuOS0zLjY1MiAxLjM1M3oiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNNTUuNzM3IDQ0LjI4Yy0uMDA0LTYuMjE2LTUuMTA0LTExLjMzOC0xMS4zMi0xMS4zNTYtNi4yNy0uMDIyLTExLjQyIDUuMTA3LTExLjQxNyAxMS4zNzQuMDA0IDYuMjE1IDUuMTA0IDExLjMzMyAxMS4zMTUgMTEuMzYgNi4yNzQuMDIgMTEuNDI2LTUuMTEyIDExLjQyMi0xMS4zOHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMy0xLjA4NC4xOTYtLjk5NC0uMzgyLTEuOTM2LS45LTIuOTA0LTEuMzQtMy4wMzYtMS4zODUtNi4yNC0uMDUtNy40MyAzLjA5LS40NTcgMS4yMTYtLjkgMS44Ni0xLjM1MiAzLjA4aC02LjgxNmMtLjQ1LTEuMjItLjktMS44NjQtMS4zNTMtMy4wOC0xLjE4NC0zLjE0LTQuMzg1LTQuNDc1LTcuNDI4LTMuMDktLjk2OC40NC0xLjkxLjk1NS0yLjkwNCAxLjM0LS4zLjExNy0uODUuMDI1LTEuMDg1LS4xOTUtMS4zNC0xLjI1My0yLjYtMi41OS0zLjkyNC0zLjg2My0uNDMtLjQwNy0uNDA4LS43NDUtLjE2Mi0xLjIyLjQ5LS45NDcuOTUtMS45MTIgMS4zOC0yLjg4NyAxLjMyLTIuOTU1LS4wMTYtNi4xNDItMy4wMzctNy4zLTEuMjQyLS40NzctMi40OTYtLjkyOC0zLjc0Ny0xLjM5di02LjgxNmMxLjIyLS40NSAyLjQ0LS45IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zOCAzLjA4Ni03LjQyOC0uNDQtLjk2OC0uOTUzLTEuOTEtMS4zNDItMi45MDQtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zNCAyLjU1Mi0yLjYzNyAzLjg5LTMuODkuMjM1LS4yMi43ODUtLjMxMiAxLjA4Ni0uMTk1Ljk5NC4zOCAxLjkzNi44OTggMi45MDQgMS4zMzggMy4wNDMgMS4zODMgNi4yNDguMDQ4IDcuNDMtMy4wODcuNDUzLTEuMjE4LjktMS44MTMgMS4zNTItMy4wMjdoNi44MTZjLjQ1IDEuMjE0Ljg5OCAxLjgxMiAxLjM1MyAzLjAyNiAxLjE4NCAzLjEzOCA0LjM4NSA0LjQ3MiA3LjQzIDMuMDg2Ljk2Ny0uNDQgMS45MS0uOTU3IDIuOTAzLTEuMzM4LjMtLjExNy44NS0uMDI2IDEuMDg1LjE5NCAxLjM0IDEuMjU0IDIuNiAyLjU5MyAzLjkyNCAzLjg2NS40My40MDcuNDA3Ljc0NC4xNjIgMS4yMi0uNDkyLjk0Ny0uOTUgMS45MS0xLjM4IDIuODktMS4zMiAyLjk1Mi4wMTYgNi4xNDYgMy4wMzcgNy4yOTcgMS4yNDcuNDc3IDIuNDk3LjkyOCAzLjc0NCAxLjM5djYuODE2Yy0xLjIxOC40NS0yLjQzNS44OTgtMy42NTIgMS4zNTN6IiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iLjIiLz48L2c+PC9zdmc+\");background-size:100%;left:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn.hide{display:none}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer{position:relative;display:none;width:1px;border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:6px 5px 0;top:-11px;bottom:0;left:6px;content:'';}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.open{display:block}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.hide{display:none}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+Y2M8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE5LjA1NCA0NC4wNlY0NGMwLTYuMzE4IDUuMDUyLTExLjI3IDExLjg2OC0xMS4yNyA0LjYgMCA3LjU1NSAxLjg1NCA5LjU1IDQuNTE2bC00LjY5NSAzLjUwMmMtMS4yODctMS41NDgtMi43NjgtMi41MzQtNC45Mi0yLjUzNC0zLjE1MiAwLTUuMzY4IDIuNTYzLTUuMzY4IDUuNzJWNDRjMCAzLjI1MiAyLjIxNSA1Ljc4NiA1LjM2NyA1Ljc4NiAyLjM0NiAwIDMuNzMyLTEuMDQ1IDUuMDgtMi42M2w0LjY5NSAzLjIyNGMtMi4xMiAyLjgxNi00Ljk4NSA0Ljg5LTkuOTcgNC44OS02LjQzIDAtMTEuNjA4LTQuNzQtMTEuNjA4LTExLjIxTTQ2LjgzNCA0NC4wNlY0NGMwLTYuMzE4IDUuMDUzLTExLjI3IDExLjg3LTExLjI3IDQuNiAwIDcuNTU3IDEuODU0IDkuNTUgNC41MTZsLTQuNjk2IDMuNTAyYy0xLjI4Ny0xLjU0OC0yLjc2NS0yLjUzNC00LjkyLTIuNTM0LTMuMTUzIDAtNS4zNzIgMi41NjMtNS4zNzIgNS43MlY0NGMwIDMuMjUyIDIuMjIgNS43ODYgNS4zNzIgNS43ODYgMi4zNDYgMCAzLjczMi0xLjA0NSA1LjA4LTIuNjNsNC42OTUgMy4yMjRjLTIuMTIgMi44MTYtNC45ODUgNC44OS05Ljk3IDQuODktNi40MyAwLTExLjYxLTQuNzQtMTEuNjEtMTEuMjEiLz48cGF0aCBkPSJNMTEuMDQyIDI1Ljc3N2g2NS45MjN2MzYuNTZIMTEuMDQydi0zNi41NnptLTcuMzc1LS4xMXYzNi42NjZjMCA1LjUgMS44MzMgNy4zMzQgNy4zMzMgNy4zMzRoNjZjNS41IDAgNy4zMzMtMS44MzQgNy4zMzMtNy4zMzRWMjUuNjY3YzAtNS41LTEuODMzLTcuMzM0LTcuMzMzLTcuMzM0SDExYy01LjUgMC03LjMzMyAxLjgzNC03LjMzMyA3LjMzNHoiLz48L2c+PC9zdmc+\");background-size:100%;top:0;left:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide:hover{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+Y2Mtb248L3RpdGxlPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTMuNjY3IDI1LjY2N3YzNi42NjZjMCA1LjUgMS44MzMgNy4zMzQgNy4zMzMgNy4zMzRoNjZjNS41IDAgNy4zMzMtMS44MzQgNy4zMzMtNy4zMzRWMjUuNjY3YzAtNS41LTEuODMzLTcuMzM0LTcuMzMzLTcuMzM0SDExYy01LjUgMC03LjMzMyAxLjgzNC03LjMzMyA3LjMzNHpNMTkuMDU0IDQ0LjA2VjQ0YzAtNi4zMTggNS4wNTItMTEuMjcgMTEuODY4LTExLjI3IDQuNiAwIDcuNTU1IDEuODU0IDkuNTUgNC41MTZsLTQuNjk1IDMuNTAyYy0xLjI4Ny0xLjU0OC0yLjc2OC0yLjUzNC00LjkyLTIuNTM0LTMuMTUyIDAtNS4zNjggMi41NjMtNS4zNjggNS43MlY0NGMwIDMuMjUyIDIuMjE1IDUuNzg2IDUuMzY3IDUuNzg2IDIuMzQ2IDAgMy43MzItMS4wNDUgNS4wOC0yLjYzbDQuNjk1IDMuMjI0Yy0yLjEyIDIuODE2LTQuOTg1IDQuODktOS45NyA0Ljg5LTYuNDMgMC0xMS42MDgtNC43NC0xMS42MDgtMTEuMjF6bTI3Ljc4IDBWNDRjMC02LjMxOCA1LjA1My0xMS4yNyAxMS44Ny0xMS4yNyA0LjYgMCA3LjU1NyAxLjg1NCA5LjU1IDQuNTE2bC00LjY5NiAzLjUwMmMtMS4yODctMS41NDgtMi43NjUtMi41MzQtNC45Mi0yLjUzNC0zLjE1MyAwLTUuMzcyIDIuNTYzLTUuMzcyIDUuNzJWNDRjMCAzLjI1MiAyLjIyIDUuNzg2IDUuMzcyIDUuNzg2IDIuMzQ2IDAgMy43MzItMS4wNDUgNS4wOC0yLjYzbDQuNjk1IDMuMjI0Yy0yLjEyIDIuODE2LTQuOTg1IDQuODktOS45NyA0Ljg5LTYuNDMgMC0xMS42MS00Ljc0LTExLjYxLTExLjIxeiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4=\");opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide:hover{opacity:.35}.yvp-bottom-bar .yvp-volume-bar-container{display:block;position:relative;bottom:95px;left:-1px;width:24px;height:72px;padding:7px 0;background:rgba(18,23,23,0.8);border-radius:4px;z-index:1;visibility:hidden;-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0s;-moz-animation-duration:0s;animation-duration:0s;}.yvp-bottom-bar .yvp-volume-bar-container:after{display:block;border:solid;border-color:rgba(18,23,23,0.8) transparent;border-width:6px 5px 0;position:absolute;top:100%;bottom:0;left:7px;content:''}.yvp-bottom-bar .yvp-volume-bar-container.open{visibility:visible}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level,.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{margin-top:0;height:100%}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{background:rgba(255,255,255,0.1);border-radius:2px}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level{background:rgba(255,255,255,0.4);width:4px;margin-left:10px;margin-top:0;border-radius:2px}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle{position:relative;width:12px;height:12px;background:#fff;border:0;border-radius:50%;margin-left:-4px;z-index:2;opacity:0;}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle.show{opacity:1}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-value{background:rgba(255,255,255,0.8);border:0;border-radius:2px}.yvp-main .yvp-tooltip{display:inline-block;position:absolute;}.yvp-main .yvp-tooltip:hover{text-decoration:none;}.yvp-main .yvp-tooltip:hover .yvp-tooltip-wrapper .yvp-tooltip-content{display:table}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper{bottom:34px;margin:auto;position:absolute;display:block;z-index:5;text-align:center;left:-1000px;right:-1000px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content{display:none;background:rgba(25,26,27,0.8);color:#fff;font-size:11px;margin:auto;padding:5px 11px;white-space:nowrap;text-align:center;pointer-events:none;border-radius:3px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content:before{border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:5px 3px 0;bottom:-5px;content:'';display:block;left:50%;margin-left:-3px;position:absolute;z-index:5}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom{top:30px;bottom:0;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom .yvp-tooltip-content:before{border-width:0 3px 5px;top:-5px;bottom:0}.yvp-main .yvp-tooltip.yvp-tooltip-hidden .yvp-tooltip-wrapper{display:none}.yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper{margin-right:60px;}.yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper .yvp-tooltip-content:before{margin-left:25px}.yvp-mode-ad.yvp-flag-playing .yvp-top-bar .yvp-ad-count-container,.yvp-mode-vpaid.yvp-flag-playing .yvp-top-bar .yvp-ad-count-container{display:block}.yvp-state-video .yvp-top-bar{display:block}.yvp-state-start-screen .yvp-top-bar,.yvp-state-error .yvp-top-bar,.yvp-state-end-screen .yvp-top-bar,.yvp-state-loading .yvp-top-bar{display:none}.yvp-mode-ad .yvp-top-bar .yvp-provider-logo,.yvp-mode-vpaid .yvp-top-bar .yvp-provider-logo{display:none}.yvp-settings-on .yvp-bottom-bar .yvp-upnext-playlist{display:none}.yvp-settings-on .yvp-bottom-bar .yvp-volume-bar-container{visibility:hidden}.yvp-content .yvp-main .yvp-mute-indicator{position:relative;opacity:0;visibility:hidden;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGUtc2hhZG93PC90aXRsZT48ZGVmcz48ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImEiPjxmZU9mZnNldCBkeT0iMiIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEuNSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjcgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+PC9maWx0ZXI+PGZpbHRlciB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJiIj48ZmVPZmZzZXQgZHk9IjIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjUiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC43IDAiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSIvPjxmZU1lcmdlPjxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+PC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXoiIGZpbHRlcj0idXJsKCNhKSIvPjxwYXRoIGQ9Ik01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIgZmlsdGVyPSJ1cmwoI2IpIi8+PC9nPjwvc3ZnPg==\");background-size:100%;background-color:transparent;z-index:32;width:44px;height:44px;float:right;background-repeat:no-repeat;background-position:50% 50%;border-radius:0;top:75%;right:8px;}.yvp-content .yvp-main .yvp-mute-indicator:hover{cursor:pointer}.yvp-content.normal .yvp-main .yvp-mute-indicator{width:44px;height:44px;top:85.5%;right:8px;border-radius:0;display:block}.yvp-content.yvp-state-fullscreen .yvp-main .yvp-mute-indicator{width:44px;height:44px;top:85%;right:8px;border-radius:0;display:none}.yvp-overlay-hide-cursor{position:absolute;display:block;z-index:30;cursor:none;top:0;right:0;bottom:0;left:0}.yvp-custom-controls{position:absolute;z-index:29;display:none;height:100%;width:100%}#Stencil .channel-applet-wrap.mode-embedtron .yvp-content{z-index:5}html[dir='rtl'] .yvp-settings-caret-icon.right{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg);left:0;right:2px}html[dir='rtl'] .yvp-settings-caret-icon.left{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}html[dir='rtl'] .yvp-cc-feedback-link{float:left}html[dir='rtl'] .yvp-cc-options-more .effects{margin-left:0;margin-right:90px}html[dir='rtl'] .yvp-cc-options-more .bgcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-cc-options-more .fontcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-cc-options-more .yvp-cc-style-preview{margin:40px 85px 20px 0}@-moz-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-webkit-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-o-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-ms-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-ms-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}"),
r.prototype.create=function(){var e,t=this,n={hideUponClick:!0},r=c.render(_,{strings:s.i18n});t._topBar=r.querySelector(".yvp-top-bar"),t._bottomBar=r.querySelector(".yvp-bottom-bar"),t._customControls=r.querySelector(".yvp-custom-controls"),t._objectOverlay=r.querySelector(".yvp-object-overlay"),t._muteIndicator=r.querySelector(".yvp-mute-indicator"),t._castOverlay=r.querySelector(".yvp-cast-overlay"),t._slider=t._bottomBar.querySelector(".yvp-slider"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._settingBtn=t._bottomBar.querySelector(".yvp-setting-btn"),t._fullScreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._ccBtn=t._bottomBar.querySelector(".yvp-cc-btn"),t._castBtn=t._bottomBar.querySelector(".yvp-chromecast-btn"),t._menuControls=t._bottomBar.querySelector(".yvp-menu-controls"),t._contentType=t._topBar.querySelector(".yvp-content-type"),e=new p(t._eventBus,t._model),t._settingsNode=e.create(),t._menuControls.parentNode.insertBefore(t._settingsNode,t._menuControls.nextSibling),t._menuLabelTooltip=new u(t._settingBtn,s.i18n.SETTINGS,n),t._sliderTap=new l(t._slider),t._onSliderTap=function(e){e.stopPropagation()},t._slider.addEventListener("tap",t._onSliderTap,t),t._fullScreenTooltip=new u(t._fullScreenBtn,s.i18n.FULLSCREEN_SPACE,n),t._ccTooltip=new u(t._ccBtn,s.i18n.CAPTIONS_AVAILABLE,n);var i=[t._bottomBar,t._topBar,t._customControls,t._objectOverlay,t._muteIndicator];return o.chrome>=32&&!t._model.disableCasting?(i.push(t._castOverlay),t._castBtnTooltip=new u(t._castBtn,s.i18n.CHROMECAST,n)):(t._castOverlay.parentNode.removeChild(t._castOverlay),t._castOverlay=null,t._castBtn.parentNode.removeChild(t._castBtn),t._castBtn=null),t._bindEvents(),i},r.prototype._bindEvents=function(){var e=this;e._bindMuteIndicator(),e._bindCC(),e._settingBtn&&(e._settingTap=new l(e._settingBtn),e._onSettingTap=function(t){t.stopPropagation(),e._view.toggleSettings(e._settingBtn)},e._settingBtn.addEventListener("tap",e._onSettingTap),e._bottomBarTap=new l(e._bottomBar),e._onBottomBarTap=function(t){t.stopPropagation(),e._hideSettings()},e._bottomBar.addEventListener("tap",e._onBottomBarTap)),e._castBtn&&(e._castBtnTap=new l(e._castBtn),e._onCastBtnTap=function(t){t.stopPropagation();var n="ctrl-cast-"+(e._castBtn.connected?"stop":"start");e._eventBus.publish(a.API.UI_INTERACT,{srcElement:n})},e._castBtn.addEventListener("tap",e._onCastBtnTap),e._castOverlayContent=e._castOverlay.querySelector(".cast-overlay-content"),e._castOverlayTap=new l(e._castOverlayContent),e._onCastOverlayTap=function(t){t.stopPropagation(),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-cast-overlay"})},e._castOverlayContent.addEventListener("tap",e._onCastOverlayTap),e._castDisconnectBtn=e._castOverlay.querySelector(".cast-disconnect-btn"),e._castDisconnectBtnTap=new l(e._castDisconnectBtn),e._onCastDisconnectBtnTap=function(t){t.stopPropagation(),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-cast-disconnect"})},e._castDisconnectBtn.addEventListener("tap",e._onCastDisconnectBtnTap)),e._handleKeyDown=function(t){var n=function(){t.preventDefault()};e._eventBus.publish(a.KEYDOWN,{keyCode:t.keyCode,shiftDown:t.shiftKey,ctrlDown:t.ctrlKey,altDown:t.altKey,target:t.target,preventDefault:n})},e._view.getContentNode().addEventListener("keydown",e._handleKeyDown,!1)},r.prototype._bindMuteIndicator=function(){var e,t=this;t._muteOnTimeout=function(n){n.stopPropagation(),e||(e=setTimeout(function(){t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-off"}),e=null},600))},["mouseenter","touchstart"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)})},r.prototype._onKeyDown=function(e){var t=this,n=t._model.playbackState.volume,r=.05;switch(e.keyCode){case 27:t._view.updateViewOnEscPress();break;case 32:t._eventBus.publish(a.TOGGLE_PLAY_PAUSE);break;case 38:var i=n+r;t._eventBus.publish(a.CONTROLS_SET_VOLUME,i>1?1:i);break;case 40:var o=n-r;t._eventBus.publish(a.CONTROLS_SET_VOLUME,0>o?0:o);break;case 70:t._view.toggleFullscreen();break;case 191:e.shiftDown&&t._view.toggleSettings()}},r.prototype._syncMatureIndicator=function(){var e=this;e._isMature&&(e._contentType.innerHTML=s.i18n.MATURE,e._contentType.setAttribute("aria-label",s.i18n.MATURE),c.classList(e._contentType).remove("hide"))},r.prototype._onMediaItemLoaded=function(e){var t=this,n=t._getCCButtonState();t._isLive=e.isLive(),t._liveState=e.liveState,t._isMature=e&&e.ageGate&&"none"!==e.ageGate,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),c.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode(),t._setCCButtonsState(n)},r.prototype._bindCC=function(){var e=this;e._onCCButtonTap=function(t){if(t.stopPropagation(),e._ccAvailable){var n=c.classList(e._ccBtn).contains(m),r=!n,i=!(!e._model.castState||!e._model.castState.connected),o="cc-"+(r?"on":"off")+(i?"-cast":"");e._eventBus.publish(a.API.UI_INTERACT,{srcElement:o}),e._eventBus.publish(a.CC.UI_TOGGLE,r),e._setCCButtonsState(r)}},e._ccBtnTap=new l(e._ccBtn),e._ccBtn.addEventListener("tap",e._onCCButtonTap,e)},r.prototype._unBindCC=function(){var e=this;e._ccBtnTap&&e._ccBtn&&(e._ccBtnTap.destroy(),e._ccBtn.removeEventListener("tap",e._onCCButtonTap,e))},r.prototype._checkCCAvailability=function(){var e=this;e._ccAvailable=!1},r.prototype._toggleCCFromSettings=function(e){var t=this;t._setCCButtonsState(e)},r.prototype._setCCButtonsState=function(e){var t=this;e?(c.classList(t._ccBtn).add(m),t._updateCCTooltip(s.i18n.CAPTIONS_ON)):(c.classList(t._ccBtn).remove(m),t._updateCCTooltip(s.i18n.CAPTIONS_OFF)),t._ccAvailable||t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE)},r.prototype._setCCUIAvailability=function(e){var t=this;t._ccAvailable=e,e?(c.classList(t._ccBtn).remove("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_AVAILABLE)):(c.classList(t._ccBtn).add("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE))},r.prototype._getCCButtonState=function(){var e=this;return e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show},r.prototype._updateCCTooltip=function(e){var t=this,n=t._ccBtn.querySelector(".yvp-tooltip-content");n.innerHTML=e},r.prototype._setChromecastBtnVisibility=function(e){var t=this;t._castBtn.style.display=e?"":"none"},r.prototype._onCastConnectionChange=function(e,t){var n=this,r=n._castOverlay&&n._castOverlay.querySelector(".cast-device-name");if(r&&e){var i=t.receiverName;r.innerHTML=c.strSubstitute(s.i18n.CAST_PLAYING_RECEIVER,{"device-name":i})}n._castBtn&&(n._castBtn.connected=e,n._castBtn.setAttribute("data-connected",e),n._castBtnTooltip.setText(e?s.i18n.DISCONNECT:s.i18n.CHROMECAST))},r.prototype._onAdPlaying=function(){var e=this;e._setAdMode()},r.prototype._onVideoPlaying=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode()},r.prototype._onCastMediaLoaded=function(e,t){var n=this;if(n._castOverlay){var r=t?t.thumbnail:"";n._castOverlay.style.backgroundImage="url("+r+")"}},r.prototype._onCastCCAvailabilityChanged=function(e){var t=this;t._setCCUIAvailability(e)},r.prototype._updateAdBreaks=function(e){var t=this;if(t._adBreaks=e,t._duration){for(var n=t._slider.querySelectorAll(".yvp-ad-break"),r=0;r<n.length;r++)t._slider.removeChild(n[r]);e&&e.forEach(function(e){var n=document.createElement("div");c.classList(n).add("yvp-ad-break"),e.occurred&&c.classList(n).add("occurred"),n.style.left=e.time/t._duration*100+"%",t._slider.appendChild(n)})}},r.prototype._onPlaybackProgress=function(e,t,n,r){var i=this;d.isNumber(n)&&i._duration!==n&&(i._duration=n,i._updateAdBreaks(i._adBreaks))},r.prototype._onAdPlaybackProgress=function(e,t,n,r){var i=this;if(d.isNumber(t)&&d.isNumber(n)&&i._countdownTimeIndicator){var o=Math.round(n-t);if(o>0){var a=o>1?s.i18n.NUM_SECONDS:s.i18n.NUM_SECOND;i._countdownTimeIndicator.innerHTML=c.strSubstitute(a,{"num-seconds":o})}else i._countdownTimeIndicator.innerHTML=""}},r.prototype._updateAdCount=function(e,t){var n=this,r=n._model.YVAP,i=r&&r.standaloneAd&&r.standaloneAd.xml;(!i||"undefined"!=typeof r.standaloneAd.showAdSlug&&r.standaloneAd.showAdSlug)&&(n._countIndicatorContainer||(n._countIndicatorContainer=document.createElement("div"),c.classList(n._countIndicatorContainer).add("yvp-ad-count-container"),n._topBar.appendChild(n._countIndicatorContainer)),n._countIndicator||(n._countIndicator=document.createElement("div"),c.classList(n._countIndicator).add("yvp-ad-count"),n._countIndicatorContainer.appendChild(n._countIndicator)),n._countdownTimeIndicator||(n._countdownTimeIndicator=document.createElement("div"),c.classList(n._countdownTimeIndicator).add("yvp-ad-countdowntimer"),n._countIndicatorContainer.appendChild(n._countdownTimeIndicator)),n._countIndicator.innerHTML=s.i18n.ADV_SHORT,!d.isNullOrUndefined(e)&&!d.isNullOrUndefined(t)&&t>1&&(n._countIndicator.innerHTML+=" "+e+" of "+t),c.classList(n._contentType).add("hide"))},r.prototype._onPlaybackStarted=function(){var e=this;e._bindProviderLogo()},r.prototype._setAdMode=function(){var e=this;c.classList(e._slider).add("yvp-disable"),c.classList(e._contentType).add("hide"),c.classList(e._timeDisplay).add("yvp-hide")},r.prototype._setLiveMode=function(){var e=this;c.classList(e._slider).add("yvp-disable"),c.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;d.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),c.classList(e._contentType).remove("hide")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=s.i18n.LIVE,e._contentType.setAttribute("aria-label",s.i18n.LIVE),c.classList(e._contentType).remove("hide"))},r.prototype._setVodMode=function(){var e=this;c.classList(e._slider).remove("yvp-disable"),c.classList(e._timeDisplay).remove("yvp-hide"),e._syncMatureIndicator()},r.prototype._bindProviderLogo=function(){var e=this,t=e._topBar.querySelector(".yvp-provider-logo"),n=e._model.playlist.getCurrentItem(),r=n.provider.providerLogoUrl,i=n.shareUrl;r?(c.classList(t).remove("yvp-hide"),t.style.backgroundImage="url("+r+")",t.setAttribute("href",i)):c.classList(t).add("yvp-hide")},r.prototype._onControlsBarChange=function(e){var t=this,n=t._settingsNode&&c.classList(t._settingsNode).contains("open"),r=n&&t._bottomBar.querySelector(".yvp-settings-container:hover");n&&e===!1&&!r&&t.resetSettings();var i=!(!t._bottomBar.querySelector(":hover")&&t._bottomBar.parentNode.querySelector(":hover")!==t._bottomBar);if(t._ccAvailable&&!i){var o=t._view.getFullscreen();o||t._eventBus.publish(a.CC.POSITION_FLOAT,e)}},r.prototype._onVideoClick=function(){var e=this;e._hideSettings()},r.prototype._hideSettings=function(){var e=this,t=c.classList(e._view.getContentNode()).contains("yvp-settings-on");t&&e.resetSettings()},r.prototype.resetSettings=function(){var e=this,t=e._settingsNode.querySelector(".yvp-main-settings"),n=e._settingsNode.querySelector(".yvp-cc-options-main"),r=e._settingsNode.querySelector(".yvp-cc-options-more");e._view.toggleSettings(e._settingBtn,!1),c.classList(t).add("open"),c.classList(t).remove("close"),c.classList(n).add("close"),c.classList(n).remove("open"),c.classList(r).add("close"),c.classList(r).remove("open")},r.prototype._unBindMuteIndicator=function(){var e=this;["mouseenter","touchstart"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)})},r.prototype.syncAriaState=function(){},r.prototype.destroy=function(){var e=this;e._view.getContentNode().removeEventListener("keydown",e._handleKeyDown,!1),e._sliderTap&&e._slider&&(e._sliderTap.destroy(),e._slider.removeEventListener("tap",e._onSliderTap)),e._settingTap&&e._settingBtn&&(e._settingTap.destroy(),e._settingBtn.removeEventListener("tap",e._onSettingTap),e._menuLabelTooltip.destroy()),e._castBtnTap&&e._castBtn&&(e._castBtnTap.destroy(),e._castBtn.removeEventListener("tap",e._onCastBtnTap),e._castBtnTooltip&&(e._castBtnTooltip.destroy(),e._castBtnTooltip=null)),e._castOverlay&&(e._castOverlayTap&&(e._castOverlayTap.destroy(),e._castOverlayContent.removeEventListener("tap",e._onCastOverlayTap)),e._castDisconnectBtnTap&&(e._castDisconnectBtnTap.destroy(),e._castDisconnectBtn.removeEventListener("tap",e._onCastDisconnectBtnTap))),e._bottomBarTap&&e._bottomBar&&(e._bottomBarTap.destroy(),e._bottomBar.removeEventListener("tap",e._onBottomBarTap)),e._unBindCC(),e._fullScreenTooltip.destroy(),e._ccTooltip.destroy(),e._unBindMuteIndicator(),e.node=null}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":20,"../event":"YJm+dH","../stream":"Af6MnA","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/tooltip":93,"./settings":87,"./yahoo-controls.html":94,fs:146,"insert-css":148}],96:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._eventBus.subscribe(o.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(o.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(o.PLAYBACK_RESUMED,n._onPlaybackResumed,n),n._model=t;var r=t.ui.vttIndex;r>=1&&l>=r&&(c=r),n._vttPlaylistURL="",n._language="",n._vttList=[],n._resumed=!1,n._endReached=!1}t.exports=r;var i=e("xhr"),o=e("./event"),a=e("../../lib/logger"),s=2,l=10,c=3;r.prototype._onMediaItemLoaded=function(e){var t=this;if(e.isLive()&&e&&e.streams&&e.streams[0]&&e.streams[0].url){var n=e.streams[0].url;t._urlPrefix=n.substring(0,n.lastIndexOf("/"));var r={url:n};i(r,function(e,n,r){if(e)return void a.warn("Could not fetch m3u8: "+e);var i="#EXTM3U";if(-1!==r.indexOf(i)){for(var s,l=/#*BANDWIDTH=([0-9]+)/g,c=[];null!==(s=l.exec(r));)c.push(s[1]);c&&t._eventBus.publish(o.CTV.GET_BITRATE_FOR_OPSS,c);var d=r.match(/TYPE=SUBTITLES.+URI=['|"](.+?)['|"]/);if(d){var p=d[0].match(/LANGUAGE=['|"](.+?)['|"]/);if(!p)return;t._language=p[1],t._vttPlaylistURL=t._completeURL(d[1]),0===t._vttPlaylistURL.indexOf("http")&&(t._urlPrefix=t._vttPlaylistURL.substring(0,t._vttPlaylistURL.lastIndexOf("/")),a.log("urlPrefix updated to:"+t._urlPrefix)),a.log("vttplaylisturl:"+t._vttPlaylistURL)}}})}},r.prototype._onPlaybackProgress=function(e,t){var n=this;if(!n._endReached&&n._vttPlaylistURL)return n._lastTime||0===n._lastTime?n._resumed?(n._resumed=!1,n._lastTime=t,n._vttList=[],void n._updateVttList()):void(t-n._lastTime>=s&&(n._lastTime+=s,n._updateVttList())):(n._lastTime=t,void n._updateVttList())},r.prototype._onPlaybackResumed=function(){var e=this;e._resumed=!0},r.prototype._updateVttList=function(){var e=this;if(e._vttPlaylistURL){var t={url:e._vttPlaylistURL};i(t,function(t,n,r){if(t)return void a.warn("Could not fetch VTT m3u8: "+t);var i=r.match(/#EXT-X-MEDIA-SEQUENCE:(.+)/);if(i)var o=Number(i[1]);if(0===e._vttList.length)e._addVttDataToList(r,o);else{var s=r.lastIndexOf("#EXTINF:"),l=r.match(/#EXTINF:/g).length,c=r.substring(s);e._addVttDataToList(c,o+l-1)}e._endReached=r.indexOf("#EXT-X-ENDLIST")>-1})}},r.prototype._addVttDataToList=function(e,t){for(var n=this,r=/\r\n|\r|\n/,i=e.split(r),o="",a=0,s=0;s<i.length;s++){var c=i[s].match(/#EXT-X-PROGRAM-DATE-TIME:(.+)/);if(c)o=c[1];else{var d=i[s].match(/#EXTINF:(.+),/);if(d)a=d[1];else if(i[s]&&"#"!==i[s].charAt(0)){var p=n._vttList[n._vttList.length-1];if(p&&i[s]===p.url)return;var u={};u.url=i[s],u.seqNum=t++,o&&(u.dateTime=o),a&&(u.duration=a),n._language&&(u.language=n._language),n._vttList.push(u),n._vttList.length>l&&n._vttList.shift(),n._sendVttEvent()}}}},r.prototype._sendVttEvent=function(){var e=this,t=e._vttList[e._vttList.length-c];if(t){var n={url:e._completeURL(t.url)};i(n,function(n,r,i){if(n)return void a.warn("Could not load VTT: "+n);var s={};s.mpegTSTime=0,s.localCueTime=0,s.clockReference=0,s.data=i,e._eventBus.publish(o.VTT_SEGMENT_LOADED,s,!0,c,e._completeURL(t.url))})}},r.prototype._completeURL=function(e){var t=this;return 0===e.indexOf("http")?e:"/"===e.charAt(0)?t._urlPrefix+e:t._urlPrefix+"/"+e}},{"../../lib/logger":"IS9j5T","./event":"YJm+dH",xhr:188}],97:[function(e,t,n){"use strict";function r(e,t,n,o,a,s,l){var c=this;c.playbackId=e,c.pos=r.AD_ORDER[t]||"",c.position=t||"",c.adId=s||"",c.streams=n||[],c.clickUrl=o||"http://screen.yahoo.com/",c.type=a||r.ADTYPES.NO_AD,c.duration=l||i.DEFAULT_AD_DURATION}t.exports=r;var i=e("./common/Constants");r.AD_ORDER={bumper:"start1",preroll:"start0",postroll:"end",midroll:"immediate"},r.POSITION={bumper:"start0",preroll:"start1",postroll:"end",midroll:"immediate"},r.ADTYPES={NORMAL:i.AD,NO_AD:i.NOAD,VPAID:i.VPAID}},{"./common/Constants":105}],98:[function(e,t,n){"use strict";function r(){var e=this;e.priorityList=[],e.communicatorAllocation={},e.settingMap=null,e.communicatorIdNameMap={},e.algoId=null,e.propertyId="",e.disableFallback=!1}t.exports=r;var i=e("./CommunicatorSpec");r.prototype._canService=function(e,t){for(var n=t&&t.length,r=0;r<t.length;r++)n=n&&e.indexOf(t[r])>-1;return n},r.prototype.pickCommunicator=function(e){var t,n,r=this,o=0,a=null,s=null;if(e){for(t in r.communicatorAllocation)r.communicatorAllocation.hasOwnProperty(t)&&r.communicatorAllocation[t]>o&&(o=r.communicatorAllocation[t],a=t);a&&(n=r.settingMap["NETWORK."+a+".adTypes"].split(","),r._canService(n,e.actionValues)&&(s=new i,s.communicatorId=a,s.communicatorName=r.communicatorIdNameMap[a],s.isFallback=!1,s.propertyMap=r.settingMap,s.propertyId=r.propertyId))}return s},r.prototype.pickFallbackCommunicator=function(e){var t,n,r=this,o=0,a=null;if(!r.disableFallback&&e){for(n=e.communicatorId,o=0;o<r.priorityList.length&&r.priorityList[o]!==n;o++);t=r.priorityList[o+1],t&&(a=new i,a.communicatorId=t,a.communicatorName=r.communicatorIdNameMap[t],a.isFallback=!0,a.propertyMap=r.settingMap,a.propertyId=r.propertyId)}return a},r.prototype.pickPossibleCommunicators=function(e){var t,n=this,r=[];for(t=n.pickCommunicator(e);t;)r.push(t),t=n.pickFallbackCommunicator(t);return r}},{"./CommunicatorSpec":100}],99:[function(e,t,n){"use strict";var r=(e("../../util"),e("./Allocation")),i=e("../../../../lib");n.understandAllocation=function(e){if(!e)return null;var t=e.Settings||{},n=e.AllocationModule||{},o=e.NetworkModules;i.isArray(o)||(o=[o.NetworkModule]);var a,s,l,c,d,p,u={},_=null;for(c=0;c<t.length;c++)l=t[c],d=l["@name"],p=l["@value"],u[d]=p;var m=u["SELECTOR.ID"],v="true"===u["SELECTOR."+m+".disablePriorityFallback"],y=u["SYSTEM.PID"];for(c=0;c<n.length;c++)a=n[c],a["@id"]===m&&a["@uri"].indexOf("PercentageAllocationManager")&&(_=new r,_.algoId=m,_.disableFallback=v,_.propertyId=y);if(_){var f,g,b={};for(c=0;c<o.length;c++)s=o[c],f=s["@id"],g=s["@name"],b[f]=g;_.communicatorIdNameMap=b;var h,E,S,A;for(h in b)b.hasOwnProperty(h)&&(A="SELECTOR."+m+".NETWORK."+h,E=parseInt(u[A],10),S=parseInt(u[A+".priority"],10),_.priorityList[S]=h,_.communicatorAllocation[h]=E);_.settingMap=u}return _}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","./Allocation":98}],100:[function(e,t,n){"use strict";function r(){var e=this;e.propertyMap={},e.communicatorId=null,e.communicatorName=null,e.isFallback=!1,e.propertyId=""}t.exports=r,r.prototype.getSetting=function(e){var t=this;return t.propertyMap["NETWORK."+t.communicatorId+"."+e]}},{}],101:[function(e,t,n){"use strict";function r(){var e=this;o.call(e)}t.exports=r;var i=e("../../util"),o=e("./Allocation"),a=e("../common/Constants"),s=e("./CommunicatorSpec");i.inherits(r,o),r.prototype.pickCommunicator=function(e){var t=null;return e&&(t=new s,t.communicatorName=a.REFRESH),t}},{"../../util":"jJTEqU","../common/Constants":105,"./Allocation":98,"./CommunicatorSpec":100}],102:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r.timestamp=(new Date).getTime(),r.payload=t,r.key=e,r.cacheIdentifier=n}t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e){var t=this;t._yvapBus=e,s.call(t,"cachemanager-bus"),t._IDENTIFIER="adCache"+Math.floor(100*Math.random())+(new Date).getTime(),t._ruleCache={},t._allocationCache={},t._playerDataCache={},t._cuePointsCache={},t._adCache={},t._adEngine=new i,t._positionsToPrefetch=[d.BUMPER,d.PREROLL,d.POSTROLL],t._midrollsCuePoints={}}t.exports=r;var i=e("../engine/AdEngine"),o=(e("../allocation/AllocationManager"),e("../communicator/Ad"),e("../communicator/AdResponse"),e("../communicator/CommunicatorFactory")),a=e("../../util"),s=e("../../../../lib/event-bus"),l=e("./CacheEntry"),i=e("../engine/AdEngine"),c=e("../common/Events"),d=e("../common/Constants"),p=e("../../../../lib/user-agent");a.inherits(r,s);var u=12e5,_=10;r.prototype.prefetchCompleteHandler=function(e,t,n){var r=this;r._yvapBus.publish(c.AD_CALL_END,n,e),r.addAdResponseForKey(e,t)},r.prototype.prefetchFailureHandler=function(e,t,n,r){var i,o=this;i=e.adSpec,o._yvapBus.publish(c.AD_CALL_END,n,e),e&&e.setNewRedirectUrl&&(e.adCallSequence=i.adCallSequence,e.errorState=r,o.addAdResponseForKey(e,t))},r.prototype.updateAdCache=function(e,t){var n,r,i,a,s,l,p,u,_,m,v=this,y=v.getRuleForClipId(t),f=v.getAllocationForClipId(t),g=v.getPlayerDataForClipId(t),b={},h="",E="-1";e=e||[];for(var S=0;S<e.length;S++)n=e[S],r=n.adXML,i=n.key,h=i.adSystem||"",E=i.brId||"-1",p=i.pos,a=i.network,p&&r&&(a===d.MME||a===d.BRX)&&("BMPR"===p?p=d.BUMPER:"VID"===p&&(p=d.PREROLL),b[p]=r);if(y&&f&&g)for(S=0;S<v._positionsToPrefetch.length;S++){p=v._positionsToPrefetch[S],u=v._adEngine.preEvaluate(p,y);for(var A=0;A<u.length;A++){_=u[A],m=f.pickPossibleCommunicators(_);for(var T=0;T<m.length;T++)if(l=m[T],s=o.getCommunicatorUsingSpec(l),s&&s.allowPrefetch())if(s.subscribe(c.AD_READY,v.prefetchCompleteHandler,v),s.subscribe(c.AD_FAILURE,v.prefetchFailureHandler,v),v._yvapBus.publish(c.AD_CALL_START,s),b[p]){var L=b[p];s.prefetchAd(L,_,g,h,E)}else s.getNewAd(_,g)}}},r.prototype.getAd=function(e,t,n){var r=this,i=null;if(e&&t&&n){var a=r.getPlayerDataForClipId(e),s=o.getCommunicatorUsingSpec(t);if(s){var l=s.getKey(n,a);i=r.getAdResponseForKey(l),i||r.getNewAd(s,n,a)}}return i},r.prototype.getNewAd=function(e,t,n){var r=this;e&&(e.subscribe(c.AD_READY,r.prefetchCompleteHandler,r),e.subscribe(c.AD_FAILURE,r.prefetchFailureHandler,r),r._yvapBus.publish(c.AD_CALL_START,e),e.getNewAd(t,n))},r.prototype.isMyOwn=function(e){var t=this;return e&&e.cacheIdentifier===t._IDENTIFIER},r.prototype.hasEntryExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},r.prototype.hasBucketExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},r.prototype._sortAscendingByTimeStamp=function(e,t){return e.timestamp>t.timestamp},r.prototype._cleanExpiredEntries=function(e){for(var t,n=this,r=[],i=0;i<e.length;i++)t=e[i],n.hasEntryExpired(t)||r.push(t);return r},r.prototype.sync=function(){var e,t,n,r,i,o,s=this,l=[],c=0;for(e in s._adCache)if(s._adCache.hasOwnProperty(e)){if(t=s._adCache[e]||[],l=s._cleanExpiredEntries(t),l.length>0&&!p.tv){for(i=a.localStorage.get(e),o=[],i&&(s.hasBucketExpired(i)?a.localStorage.remove(e):o=i.bucket||[]),o=s._cleanExpiredEntries(o),c=o.length,n=0;_-c>n;n++)r=l.shift(),r&&o.push(r);if(o.length>0){if(i={},i.bucket=o,i.timestamp=(new Date).getTime(),!a.localStorage.put(e,i)){for(c=l.length,n=0;_-c>n;n++)r=o.shift(),r&&!s.hasEntryExpired(r)&&l.push(r);a.localStorage.remove(e)}}else a.localStorage.remove(e)}s._adCache[e]=l}},r.prototype.addAdResponseForKey=function(e,t){var n=this,r=new l(t,e,n._IDENTIFIER),i=n._adCache[t]||[];i.push(r),n._adCache[t]=i,e.isCached=!0,n._yvapBus.publish(c.CACHE_UPDATE,t,e)},r.prototype.getAdResponseForKey=function(e){var t,n,r,i,o=this,s=null;for(n=o._adCache[e]||[],i=0;i<n.length;i++)if(t=n[i],!o.hasEntryExpired(t)){n.splice(i,1);break}if(t)s=t.payload;else if(r=a.localStorage.get(e)){for(o.hasBucketExpired(r)?(a.localStorage.remove(e),n=[]):n=r.bucket||[],i=0;i<n.length;i++)if(t=n[i],!o.hasEntryExpired(t)){n.splice(i,1);break}n.length>0?(r.bucket=n,r.timestamp=(new Date).getTime(),a.localStorage.put(e,r)):a.localStorage.remove(e)}return t&&(s=t.payload,s.cacheState=o.isMyOwn(t)?"l0":"l1"),s},r.prototype.addRuleForClipId=function(e,t){var n=this;e&&t&&(n._ruleCache[t]=e)},r.prototype.getRuleForClipId=function(e){var t=this;return t._ruleCache[e]},r.prototype.addAllocationForClipId=function(e,t){var n=this;e&&t&&(n._allocationCache[t]=e)},r.prototype.getAllocationForClipId=function(e){var t=this;return t._allocationCache[e]},r.prototype.addPlayerDataForClipId=function(e,t){var n=this;e&&t&&(n._playerDataCache[t]=e)},r.prototype.getPlayerDataForClipId=function(e){var t=this;return t._playerDataCache[e]},r.prototype.addCuePointsForClipId=function(e,t){var n=this;e&&t&&(n._midrollsCuePoints[t]=e)},r.prototype.getCuePointsForClipId=function(e){var t=this;return t._midrollsCuePoints[e]}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../allocation/AllocationManager":99,"../common/Constants":105,"../common/Events":108,"../communicator/Ad":110,"../communicator/AdResponse":111,"../communicator/CommunicatorFactory":115,"../engine/AdEngine":130,"./CacheEntry":102}],104:[function(e,t,n){"use strict";function r(e){var t=this;s.call(t,e),t._vmapObjMap={}}t.exports=r;var i=e("../communicator/CommunicatorFactory"),o=e("../common/Events"),a=e("../../util"),s=e("./CacheManager");a.inherits(r,s),r.prototype.updateAdCache=function(e,t){var n=this;e&&t&&(n._vmapObjMap[t]=e)},r.prototype.getAd=function(e,t,n){var r=this,a=null;if(e&&t&&n){var s=r._vmapObjMap[e],l=s.adBreakMap,c=n.type;if(l.hasOwnProperty(c)){var d=l[c],p=i.getCommunicatorUsingSpec(t),u=r.getPlayerDataForClipId(e);if(p&&(p.subscribe(o.AD_READY,r.prefetchCompleteHandler,r),p.subscribe(o.AD_FAILURE,r.prefetchFailureHandler,r),r._yvapBus.publish(o.AD_CALL_START,p),d)){p.prefetchAd(d,n,u);var _=p.getKey(n,u);a=r.getAdResponseForKey(_)}}}return a},r.prototype.getNewAd=function(e,t,n,r){var i=this;e&&(e.subscribe(o.AD_READY,i.prefetchCompleteHandler,i),e.subscribe(o.AD_FAILURE,i.prefetchFailureHandler,i),i._yvapBus.publish(o.AD_CALL_START,e),e.getNewAd(t,n,r))}},{"../../util":"jJTEqU","../common/Events":108,"../communicator/CommunicatorFactory":115,"./CacheManager":103}],105:[function(e,t,n){"use strict";n.MARKETING_AD_BREAK=3,n.DEFAULT_VPAID_TIMEOUT=5,n.AD_CACHE_EXPTIME=12e5,n.HTTP="http://",n.HTTPS="https://",n.SSL="https:",n.HTML="html",n.PROGRESSIVE="progressive",n.AD="ad",n.NOAD="noad",n.VPAID="vpaid",n.OVERLAY="overlay",n.VPAID_FLASH_FORMAT="application/x-shockwave-flash",n.VPAID_JS_FORMAT="application/javascript",n.STATIC_RESORUCE="static",n.IFRAME_RESORUCE="iframe",n.HTML_RESORUCE="html",n.OVERLAY_IMAGE="image/jpeg",n.OVERLAY_VPAID="application/x-shockwave-flash",n.BUMPER="bumper",n.PREROLL="preroll",n.POSTROLL="postroll",n.NON_LINEAR="overlay",n.MIDROLL="midroll",n.CLIP_START="clip-start",n.CLIP_END="clip-end",n.COMPANION="companion",n.RULES_MISSING="rules-missing",n.CLIP_DATA_MISSING="clip-data-missing",n.CACHE_L0="l0",n.CACHE_L1="l1",n.CACHE_L2="l2",n.MME="MME",n.FREEWHEEL="FREEWHEEL_VAST",n.CBS="CBS",n.DFP="DFP",n.PREVIEW="PREVIEW",n.YAXv="YAXv",n.BRX="BRX",n.REFRESH="REFRESH",n.NFL_FREE_TIME=240,n.NFL_SESSION_TIME=14400,n.NFL_PREROLL="NFL_Preroll",n.NFL_ONLOAD="NFL_onLoad",n.NFL_NOW_LMSID="a0Vd0000003unOyEAI",n.NFL_SESSION_COOKIE="rvl_NFL",n.YVAP_INFO_AD_BREAKS="adBreaks",n.MAX_VOD_ADS_MIDROLL=4,n.MIDROLL_DEFAULT_ADS_PER_BREAK=4,n.MIDROLL_PREFETCH_AD_LENGTH=120,n.MIDROLL_PREFETCH_MAX_RETRY=2,n.MIDROLL_PREFETCH_TIMER=18e5,n.DEFAULT_AD_DURATION=30,n.VIEWABILITY_ON=!0,n.ADBLOCKER=!1,n.INTERNAL_POLLING_INTERVAL=200,n.TIME_FOR_VIEWABLE_IMPRESSION=2e3,n.VIEWABILITY_THRESHOLD=.5,n.VIEWABILITY_MEASURABLE=1,n.VIEWABILITY_NOT_MEASURABLE_IFRAME=2,n.VIEWABILITY_NOT_MEASURABLE_NO_DARLA=3,n.PLAYER_AUTO_PLAY_ON=1,n.PLAYER_AUTO_PLAY_OFF=2,n.PLAYER_SOUND_ON=1,n.PLAYER_SOUND_OFF=2,n.PLAYER_IN_BANNER=1,n.PLAYER_NOT_IN_BANNER=2,n.PLAYER_LOCATION_ABOVE_THE_FOLD=1,n.PLAYER_LOCATION_BELOW_THE_FOLD=2,n.UNKNOWN=3,n.STATUS_INITIALIZATION=0,n.STATUS_SWF_LOADED=1,n.STATUS_AD_INITED=2,n.VIDEO_START="VIDEO_START",n.VIDEO_QUARTILE_25="VIDEO_QUARTILE_25",n.VIDEO_QUARTILE_50="VIDEO_QUARTILE_50",n.VIDEO_QUARTILE_75="VIDEO_QUARTILE_75",n.VIDEO_QUARTILE_100="VIDEO_QUARTILE_100",n.VIDEO_VIEW="VIDEO_VIEW"},{}],106:[function(e,t,n){"use strict";function r(){var e=o.getCookie("yvapF");return e?JSON.parse(e):{}}function i(e){var t=JSON.stringify(e);o.setCookie("yvapF",t,{expires:new Date(Date.now()+1e5),path:"/",session:!0})}var o=e("../../util");n.getTotalClipCount=function(){var e=r(),t=e.cc;return t?t:0},n.incrementTotalClipCount=function(){var e=r(),t=e.cc;t=t?t+1:1,e.cc=t,i(e)},n.resetTotalClipCount=function(){var e=r();e.cc=0,i(e)},n.getRecentClipCount=function(){var e=r(),t=e.rcc||0;return t},n.incrementRecentClipCount=function(){var e=r();e.rcc=(e.rcc||0)+1,i(e)},n.resetRecentClipCount=function(){var e=r();e.rcc=0,i(e)},n.getTotalVideoLength=function(){var e=r(),t=e.vl||0;return t},n.incrementTotalVideoLength=function(e){var t=r(),n=e||1;t.vl=(t.vl||0)+n,i(t)},n.resetTotalVideoLength=function(){var e=r();e.vl=0,i(e)},n.getRecentVideoLength=function(){var e=r(),t=e.rvl||0;return t},n.incrementRecentVideoLength=function(e){var t=r(),n=e||1;t.rvl=(t.rvl||0)+n,i(t)},n.incrementNFLVideoLength=function(e){var t=r(),n=e||1;t.rvl_NFL=(t.rvl_NFL||0)+n,i(t)},n.getNFLVideoLength=function(e){var t=r(),n=t.rvl_NFL||0;return n},n.resetRecentVideoLengthNFL=function(){var e=r();e.rvl_NFL=0,i(e)},n.createNFLSession=function(){var e=r();(0===parseInt(e.session_NFL,10)||isNaN(parseInt(e.session_NFL,10)))&&(e.session_NFL=(new Date).getTime()/1e3,i(e))},n.resetNFLSession=function(){var e=r();e.session_NFL=0,i(e)},n.getNFLSession=function(){var e=r(),t=e.session_NFL||0;return t},n.resetRecentVideoLength=function(){var e=r();e.rvl=0,i(e)},n.getAdLength=function(){var e=r(),t=e.al||0;return t},n.incrementAdLength=function(e){var t=r(),n=e||1;t.al=(t.al||0)+n,i(t)},n.resetAdLength=function(){var e=r();e.al=0,i(e)},n.getAdCount=function(){var e=r(),t=e.ac||0;return t},n.incrementAdCount=function(){var e=r();e.ac=(e.ac||0)+1,i(e)},n.resetAdCount=function(){var e=r();e.ac=0,i(e)}},{"../../util":"jJTEqU"}],107:[function(e,t,n){"use strict";n.AD_CALL_TIMEOUT="ERR_AD_CALL_TIMEOUT",n.XML_PARSING="ERR_XML_PARSING",n.RESPONSE_GENERIC="ERR_RESPONSE_GENERIC",n.EMPTY_RESPONSE="ERR_EMPTY_RESPONSE",n.NO_PARSER="ERR_NO_PARSER",n.MISSING_ADTGT="ERR_MISSING_ADTGT",n.REQUEST_GENERIC="ERR_REQUEST_GENERIC",n.INCOMPATIBLE_MEDIA="ERR_INCOMPATIBLE_MEDIA",n.MEDIA_PLAYBACK="ERR_MEDIA_PLAYBACK",n.PLAYER_TIMEOUT="PLAYER_TIMEOUT",n.GENERIC="ERR_GENERIC",n.VPAID_TIMEOUT="ERR_VPAID_TIMEOUT",n.THIRD_PARTY_NO_AD="THIRD_PARTY_NO_AD",n.SSL_MISMATCH="SSL_MISMATCH",n.MISSING_SPACEID="MISSING_SPACEID",n.ADBLOCKER="ADBLOCKER",n.VPAID_SWF_DOWNLOAD_ERROR="ERR_VPAID_SWF_DOWNLOAD_ERROR",n.BRX_WITHOUT_FLASH="ERR_BRX_WITHOUT_FLASH"},{}],108:[function(e,t,n){"use strict";n.AD_READY="ad-ready",n.AD_FAILURE="ad-failure",n.CACHE_UPDATE="cache-update",n.CACHE_REFRESH_REQUEST="cache-refresh-request",n.AD_METRIC="ad-metric",n.BEGIN_AD_EXP="begin-ad-experience",n.AD_OPPORTUNITY="ad-opportunity",n.NULL_AD_OPPORTUNITY="null-ad-opportunity",n.AD_CALL_START="ad-call-start",n.AD_CALL_END="ad-call-end",n.AD_REQUESTED="ad-requested",n.AD_SUBMITTED="ad-submitted",n.AD_DELIVERED="ad-delivered",n.AD_DELIVERY_ERROR="ad-delivery-error",n.VIDEO_START="video-start",n.VIDEO_END="video-end",n.AD_PAUSED="ad-paused",n.AD_RESUMED="ad-resumed",n.AD_STOPPED="ad-stopped",n.AD_STARTED="ad-started",n.PLAYER_FULLSCREEN="player-fullscreen",n.VPAID_AD_RENDERED="vpaid-ad-rendered",n.VPAID_AD_STARTED="vpaid-ad-started",n.ADBREAK_START="adbreak-start",n.MIDROLL_START="midroll_start",n.AD_BREAK_ENDED="ad-break-ended",n.AD_BREAK_SUBMITTED="ad-break-sumbitted",n.MIDROLL_CACHE_UPDATE="midroll-cache-update",n.VPAID_AD_INITED="vpaid-ad-inited",n.VPAID_SWF_LOAD_START="vpaid-swf-load-start",n.VPAID_SWF_LOAD_END="vpaid-swf-load-end",n.OVERLAY_CLICK="overlay-click",n.OVERLAY_RENDERED="overlay-rendered",n.PLAYER_SWF_READY="player-swf-ready",n.VPAID_PREFETCH_REQUEST="vpaid-prefetch-request",
n.COMPANION_ADS_DELIVERED="companion-ads-delivered"},{}],109:[function(e,t,n){"use strict";n.AdLoaded="AdLoaded",n.AdStarted="AdStarted",n.AdStopped="AdStopped",n.AdLinearChange="AdLinearChange",n.AdExpandedChange="AdExpandedChange",n.AdRemainingTimeChange="AdRemainingTimeChange",n.AdVolumeChange="AdVolumeChange",n.AdImpression="AdImpression",n.AdVideoStart="AdVideoStart",n.AdVideoFirstQuartile="AdVideoFirstQuartile",n.AdVideoMidpoint="AdVideoMidpoint",n.AdVideoThirdQuartile="AdVideoThirdQuartile",n.AdVideoComplete="AdVideoComplete",n.AdClickThru="AdClickThru",n.AdUserAcceptInvitation="AdUserAcceptInvitation",n.AdUserMinimize="AdUserMinimize",n.AdUserClose="AdUserClose",n.AdPaused="AdPaused",n.AdPlaying="AdPlaying",n.AdLog="AdLog",n.AdError="AdError",n.AdTimeout="AdTimeout",n.AdProgress="AdProgress",n.AdSwfDownloadError="VPAIDSwfDownloadError"},{}],110:[function(e,t,n){"use strict";function r(){var e=this;e.adId=null,e.creativeId=null,e.bookingId=null,e.redirectUrl="",e.adFormat=null,e.streams=[],e.beacons={},e.params={},e.url="",e.type="",e.nonLinearAd=null,e.companion=[],e.isSkippable=!1,e.skipCountdown=5,e.isFallback=!1,e.fallbackFor="",e.timestamp=0,e.adXmlParseErr=null}t.exports=r,r.prototype.addBeaconOfType=function(e,t){var n,r=this;t&&e&&(t=t.toLowerCase(),n=r.beacons[t]||[],e=e.trim(),n.push(e),r.beacons[t]=n)},r.prototype.addMedia=function(e,t,n,r,i){if(e&&t&&n){var o=this;o.streams.push({url:n,format:e,bitrate:t,deliveryType:r,apiFramework:i})}},r.prototype.merge=function(e){var t,n,r,i,o=this;if(e&&e.merge){for(r in e.beacons)e.beacons.hasOwnProperty(r)&&(t=e.beacons[r]||[],t.length>0&&(n=(o.beacons[r]||[]).concat(t),o.beacons[r]=n));for(i in e.params)e.params.hasOwnProperty(i)&&(o.params[i]=e.params[i]);o.creativeId=e.creativeId,o.bookingId=e.bookingId,o.timestamp=e.timestamp,o.impressionId=e.impressionId,o.serveTime=e.serveTime,o.serveId=e.serveId,o.spaceId=e.spaceId,o.position=e.position}},r.prototype.addParamOfName=function(e,t){var n=this;t&&e&&(n.params[t.toLowerCase()]=e)},r.prototype.getParamOfName=function(e){var t=this;return e?t.params[e.toLowerCase()]:void 0},r.prototype.getBeaconsOfType=function(e){var t=this;return e?t.beacons[e.toLowerCase()]:void 0}},{}],111:[function(e,t,n){"use strict";function r(){var e=this;e.adSpec=null,e.adObj=null,e.fallbackAdObj=null,e.adTagURI="",e.isCached=!1,e.communicatorSpec=null,e.cacheState=null,e.errorState=null,e.redirectList=[],e.firstCall="",e.type="",e.adCallSequence=0,e.midrollbreak=null,e.midrolladsequence=null,e.adDuration=0,e.adIdBeacon=0}t.exports=r,r.prototype.toString=function(){return JSON.stringify(this)},r.prototype.setNewRedirectUrl=function(e){var t=this;t.redirectList&&t.redirectList.push(e)},r.prototype.clone=function(e){var t=this;if(e&&e.setNewRedirectUrl)for(var n in e)e.hasOwnProperty(n)&&("redirectList"===n?t.redirectList=[].concat(e.redirectList):t[n]=e[n])}},{}],112:[function(e,t,n){"use strict";function r(e){var t=this;o.call(t,e)}t.exports=r;var i=e("../../util"),o=e("./Communicator"),a=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events"),l=(e("./VMAP"),e("./ParserManager")),c=e("../yvap-util");i.inherits(r,o),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"BRX",o=t.clipId||"";return i+"_"+o},r.prototype.processAdXml=function(e){var t,n,r,i,o,a,s,c=l.parseAdXml(e);for(i=0;i<c.length;i++)for(t=c[i],r="errorimpression",n=t.beacons[r]||[],o=0;o<n.length;o++)a=n[o],s=a.replace(/\[ERRORCODE\]/g,"{err_code}"),n[o]=s;return c},r.prototype.getNewAd=function(e,t){var n,r,o=this,l=o.spec;if(r=l.getSetting("AdServerUrl"),o.key=o.getKey(e,t),!i.isFlashInstalled()&&!l.isFallback)return n=o.getNewAdResponseObject(e,r),void o.publish(s.AD_FAILURE,n,o.key,o,a.BRX_WITHOUT_FLASH);if(r){r=r.replace("http:",location.protocol),r=r.replace(/\[timestamp\]/g,c.getTimeStamp()),r=r.replace(/\[spid\]/g,l.customSPID),r=r.replace(/\[br_pageurl\]/g,l.customDomain),n=o.getNewAdResponseObject(e,r);try{o.fireRequest(r,n)}catch(d){o.publish(s.AD_FAILURE,n,o.key,o,d.message)}}else n=o.getNewAdResponseObject(e),o.publish(s.AD_FAILURE,n,o.key,o,a.REQUEST_GENERIC)},r.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"../yvap-util":145,"./AdResponse":111,"./Communicator":114,"./ParserManager":120,"./VMAP":125}],113:[function(e,t,n){"use strict";function r(e){var t=this;o.call(t,e)}t.exports=r;var i=e("../../util"),o=e("./Communicator"),a=e("./ParserManager"),s=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),l=e("../common/Events");i.inherits(r,o),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",o=t.clipId||"";return i+"_"+o},r.prototype.getNewAd=function(e,t){var n,r,i,o,c,d=this,p=t.adTargeting||"";if(o=a.parseXml(p),c=o.childNodes[0],d.key=d.getKey(e,t),c&&"adData"===c.nodeName&&(r=c.getAttribute("id"),"ad_url"===r&&(i=c.getAttribute("value"),i+=i.indexOf("xml=vast")>-1?";pos=1":";pos=1;xml=yahoo")),i){i=i.replace("http:",location.protocol),n=d.getNewAdResponseObject(e,i);try{d.fireRequest(i,n)}catch(u){d.publish(l.AD_FAILURE,n,d.key,d,u.message)}}else n=d.getNewAdResponseObject(e),d.publish(l.AD_FAILURE,n,d.key,d,s.MISSING_ADTGT)},r.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"./AdResponse":111,"./Communicator":114,"./ParserManager":120}],114:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,"communicator"),t.spec=e||{}}t.exports=r;var i=e("../../util"),o=e("../../../../lib/logger"),a=e("../../../../lib/event-bus"),s=e("./ParserManager"),l=e("./VastValidator"),c=e("./AdResponse"),d=e("../common/Events"),p=e("../common/Errors"),u=e("../common/Constants"),_=e("../../../../lib/user-agent"),m=e("xhr");i.inherits(r,a);var v={"amgdgt.com":!0,"adap.tv":!0,"videohub.tv":!0,"doubleclick.net":!0,"undertone.com":!0,"jivox.com":!0,"adform.net":!0,"flashtalking.com":!0,"telemetryverification.net":!0,"fwmrm.net":!0,"eyereturn.com":!0,"zedo.com":!0,"tubemogul.com":!0,"tidaltv.com":!0,"yahoo.com":!0,"cbs.com":!0,"innovid.com":!0,"moatads.com":!0,"stickyadstv.com":!0,"btrll.com":!0,"ads.adaptv":!0};r.prototype.getNewAd=function(e,t,n){var r=this,i=r.getNewAdResponseObject(e,n);r.key=r.getKey(e,t);try{r.fireRequest(n,i)}catch(o){r.publish(d.AD_FAILURE,i,r.key,r,o.message)}},r.prototype.handleAdResponse=function(e){var t,n,r=this;t=e.adObj,t&&("redirect"===t.type?(n=t.redirectUrl,r.setNewRedirect(n,e)):(l.validateAdObj(t),r.publish(d.AD_READY,e,r.key,r)))},r.prototype.processAdObjects=function(e,t){for(var n,r,i,o=this,a=0;a<t.length;a++)n=t[a],i=new c,i.clone(e),r=e.adObj,r&&n.merge(r),i.adObj=n,o.handleAdResponse(i)},r.prototype.getKey=function(){return"null-key"},r.prototype.getFirstCall=function(){return"null-first-call"},r.prototype.getNewAdResponseObject=function(e,t){var n=this,r=new c;return r.adSpec=e,r.type=e.type,r.communicatorSpec=n.spec,r.firstCall=t||n.getFirstCall(),r},r.prototype.processAdXml=function(e){return s.parseAdXml(e)},r.prototype.prefetchAd=function(e,t,n,r,i){var a,s,l=this;if(e){s=l.getNewAdResponseObject(t),s.adSystem=r,s.brId=i,l.key=l.getKey(t,n);try{a=l.processAdXml(e),l.processAdObjects(s,a)}catch(c){o.log(c),l.publish(d.AD_FAILURE,s,l.key,l,c.message)}}},r.prototype._isWhiteListed=function(e){var t=!1;for(var n in v)if(v.hasOwnProperty(n)&&e.indexOf(n)>-1){t=v[n];break}return t},r.prototype.fireRequest=function(e,t){var n=this,r=(new Date).getTime(),a=i.parseDomain(e),s=n._isWhiteListed(a),l=n.httpTimeout||3e3;if(window.location.protocol===u.SSL&&0!==e.indexOf(u.SSL))throw new Error(p.SSL_MISMATCH);try{var c={url:e,method:"GET",cors:s,sync:!1,timeout:l};_.ie&&_.ie<10&&(c.responseType="text"),m(c,function(e,i,o){var a,s=i.statusText;a=(new Date).getTime(),a-r>=l?n.onAdCallFailure(t,"timeout"):e?n.onAdCallFailure(t,s):n.onAdCallSuccess(t,o)})}catch(d){throw o.log(d),new Error(p.REQUEST_GENERIC)}},r.prototype.setNewRedirect=function(e,t){var n=this;t.setNewRedirectUrl(e),n.fireRequest(e,t)},r.prototype.onAdCallSuccess=function(e,t){var n,r=this;if(t)try{n=r.processAdXml(t),r.processAdObjects(e,n)}catch(i){o.log(i),r.publish(d.AD_FAILURE,e,r.key,r,i.message)}else r.publish(d.AD_FAILURE,e,r.key,r,p.EMPTY_RESPONSE)},r.prototype.onAdCallFailure=function(e,t){var n,r=this;n="timeout"===t?p.AD_CALL_TIMEOUT:"SSLMismatch"===t?p.SSL_MISMATCH:u.ADBLOCKER?p.ADBLOCKER:p.RESPONSE_GENERIC,r.publish(d.AD_FAILURE,e,r.key,r,n)},r.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"./AdResponse":111,"./ParserManager":120,"./VastValidator":127,xhr:188}],115:[function(e,t,n){"use strict";var r=e("../common/Constants"),i=e("./MMECommunicator"),o=e("./FreeWheelCommunicator"),a=e("./CBSCommunicator"),s=e("./DFPCommunicator"),l=e("./PreviewCommunicator"),c=e("./RefreshCommunicator"),d=e("./YAXvCommunicator"),p=e("./BRXCommunicator");n.getCommunicatorUsingSpec=function(e){var t=null;if(e){var n=e.communicatorName;n.indexOf(r.MME)>-1?t=new i(e):n.indexOf(r.FREEWHEEL)>-1?t=new o(e):n.indexOf(r.CBS)>-1?t=new a(e):n.indexOf(r.DFP)>-1?t=new s(e):n.indexOf(r.REFRESH)>-1?t=new c(e):n.indexOf(r.PREVIEW)>-1?t=new l(e):n.indexOf(r.YAXv)>-1?t=new d(e):n.indexOf(r.BRX)>-1&&(t=new p(e))}return t}},{"../common/Constants":105,"./BRXCommunicator":112,"./CBSCommunicator":113,"./DFPCommunicator":116,"./FreeWheelCommunicator":117,"./MMECommunicator":118,"./PreviewCommunicator":121,"./RefreshCommunicator":122,"./YAXvCommunicator":128}],116:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),o=e("../../../../lib/logger"),a=e("./Communicator"),s=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors"),e("../common/Events"),e("./VMAP"),e("./ParserManager"),e("../common/Constants")),l=e("../../../../lib/user-agent.js"),c=e("../yvap-util");i.inherits(r,a),r.prototype._replaceAll=function(e,t,n){return n.replace(new RegExp(e,"g"),t)},r.prototype._parseAdTargeting=function(e){var t=this;e=t._replaceAll("nflnow:","",e),e=t._replaceAll("=",'":"',e),e=t._replaceAll(",",'","',e),e='{"'+e+'"}';try{return JSON.parse(e)}catch(n){return JSON.parse("{}")}},r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",o=t.clipId||"";return i+"_"+o},r.prototype._getPlatform=function(){var e="nflnow/web/yahoo";return l.android?e=l.androidTablet?"nflnow/app/tablet/android/yahoo":"nflnow/app/phone/android/yahoo":l.ios&&(e=l.ipad?"nflnow/app/tablet/ios/yahoo":"nflnow/app/phone/ios/yahoo"),e},r.prototype._getValue=function(e){var t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};if(null===e)return"";if("<"!==e.trim().charAt(0)&&">"!==e.trim().charAt(e.length-1))return"";var n=t(e);return n.getElementsByTagName("adData")[0].getAttribute("value")},r.prototype._populateMacro=function(e,t){var n,r,i,a=this,l={},d={},p={freeUserPeriodInSeconds:240,premiumUserPeriodInSeconds:720,publisherId:"1234567abcd",endpoint_preroll:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_loader:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Donloader%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_clubs:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/team.${club}.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}"};return l.serverUrl="",t.content_provider_data&&t.content_provider_data.rules&&(p=t.content_provider_data.rules),e.subType===s.NFL_ONLOAD?l.serverUrl=p.endpoint_loader:e.subType===s.NFL_PREROLL?(n=t.adTargeting||"",r=a._parseAdTargeting(a._getValue(n)),i=r.origin||"",d.channel_id=r.channel,"CLUBS"===i.toUpperCase()?(d.club=r.contentProvider,l.serverUrl=p.endpoint_clubs):l.serverUrl=p.endpoint_preroll):o.log("error case"),d.timestamp=c.getTimeStamp(),d.platform=a._getPlatform(),d.referrer_url=document.referrer,l.serverUrl=l.serverUrl.replace("[PLATFORM]","${platform}"),l.serverUrl=l.serverUrl.replace("[CLUB]","${club}"),l.serverUrl=l.serverUrl.replace("[CHANNEL_ID]","${channel_id}"),l.serverUrl=l.serverUrl.replace("[referrer_url]","${referrer_url}"),l.serverUrl=l.serverUrl.replace("[timestamp]","${timestamp}"),l.macroDict=d,l},r.prototype.updateProtocol=function(e){var t=window.location.protocol;return e=t===s.SSL?e.replace(s.HTTP,s.HTTPS):e.replace(s.HTTPS,s.HTTP)},r.prototype.getNewAd=function(e,t){var n,r,i=this,o={},a=i.spec,d=a.getSetting("AdServerUrl");if(t.licenseId!==s.NFL_NOW_LMSID)d=d.replace("[referrer_url]","${referrer_url}"),d=d.replace("[REQUESTID]","${requestid}"),d=d.replace("[timestamp]","${requestid}"),d=d.replace("[TIMESTAMP]","${requestid}"),d=d.replace("${REQUESTID}","${requestid}"),l.mobile&&(d=d.replace("iu=/4595/nfl.video.yahoo","iu=/4595/nfl.video.yahoo/mobileweb")),o.requestid=c.getTimeStamp(),o.referrer_url=document.referrer||"yahoo.com";else{var p=i._populateMacro(e,t);o=p.macroDict,d=p.serverUrl}n=c.expandMacro(d,o),null!==n&&""!==n&&(n=i.updateProtocol(n),r=i.getNewAdResponseObject(e,n),i.key=i.getKey(e,t),i.fireRequest(n,r))},r.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/logger":"IS9j5T","../../../../lib/user-agent.js":"ty5FFo","../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"../yvap-util":145,"./AdResponse":111,"./Communicator":114,"./ParserManager":120,"./VMAP":125}],117:[function(e,t,n){"use strict";function r(e){var t=this;o.call(t,e)}t.exports=r;var i=e("../../util"),o=e("./Communicator"),a=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events"),l=(e("./VMAP"),e("./ParserManager"));i.inherits(r,o),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",o=t.clipId||"";return i+"_"+o},r.prototype.processAdXml=function(e){var t,n,r,i,o,a,s=l.parseAdXml(e);if(s&&s.adBreakMap){t=s.adBreakMap.preroll||{},n=t.adSource||{},r=n.vastAdData||[],i=t.trackingEvents||{},o=i.trackings||[];for(var c=0;c<o.length;c++)"breakStart"===o[c].event&&(a=o[c]);if(a)for(c=0;c<r.length;c++)r[c].addBeaconOfType(a.url,"ad-break-start");return r}return s},r.prototype.getNewAd=function(e,t){var n,r,o=this,l=o.spec,c=";;",d=";",p=t.clipCategory||"",u=t.adTargeting||"",_=new DOMParser,m=_.parseFromString(u,"application/xml");r=m.childNodes[0];var v,y,f,g,b,h,E,S,A,T,L="";if(A=l.getSetting("AdServerUrl"),n=o.getNewAdResponseObject(e,A),o.key=o.getKey(e,t),r&&"adData"===r.nodeName){v=r.getAttribute("id"),("TurnerVideoID"===v||"YahooPartnerVideoID"===v)&&(L=r.getAttribute("value")),y="true"===l.getSetting("OverrideSAPI")?l.getSetting("SiteSectionMapping"):p,f={nw:l.getSetting("YahooNetworkId"),metr:l.getSetting("CapabilitySupportFlags"),resp:l.getSetting("ResponseType"),sfid:l.getSetting("SiteSectionFallbackId"),ssnw:l.getSetting("SiteSectionNetworkId"),pvrn:Math.round(1e8*Math.random()).toString(),caid:L,csid:y,crtp:l.getSetting("CustomResponseType"),vprn:Math.round(1e8*Math.random()).toString(),afid:l.getSetting("VideoAssetFallbackId"),flag:l.getSetting("ImpressionFlags"),asnw:l.getSetting("VideoAssetNetworkId"),prof:l.getSetting("PlayerProfile")},h=i.querystring(f),g={tpcl:l.getSetting("SlotTimePositionClass"),slau:l.getSetting("CustomAdUnitName"),slid:l.getSetting("SlotCustomId"),ptgt:l.getSetting("SlotType"),flag:l.getSetting("SlotFlags"),h:l.getSetting("SlotHeight"),w:l.getSetting("SlotWidth"),tpos:l.getSetting("SlotTimePosition")},E=i.querystring(g),b={flag:l.getSetting("SlotFlags2"),h:l.getSetting("SlotHeight2"),w:l.getSetting("SlotWidth2"),tpcl:l.getSetting("SlotTimePositionClass2"),slau:l.getSetting("CustomAdUnitName2"),slid:l.getSetting("SlotCustomId2"),ptgt:l.getSetting("SlotType2"),tpos:l.getSetting("SlotTimePosition2")},S=i.querystring(b),A=A.replace("http:",location.protocol),T=A+"?"+h+c+E+d+S,n.firstCall=T;try{o.fireRequest(T,n)}catch(I){o.publish(s.AD_FAILURE,n,o.key,o,I.message)}}else o.publish(s.AD_FAILURE,n,o.key,o,a.MISSING_ADTGT)},r.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"./AdResponse":111,"./Communicator":114,"./ParserManager":120,"./VMAP":125}],118:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),o=e("../yvap-util"),a=e("./Communicator"),s=(e("./AdResponse"),e("./ParserManager")),l=e("../common/Constants"),c=e("../common/Events"),d=e("../common/Errors"),p=e("../../../../lib/user-agent"),l=e("../common/Constants");i.inherits(r,a);var u="yvap.query.yahoo.com/v1/public/yql",_="flv_as3;xml_ver_2.0vast",m="vi_ct_1",v="vpaidt_none;fm_mp4;fm_webm;vi_ct_1",y={overlayC2V:"v4",overlayC2S:"v5",clickable:"v1;v7;v8",interactive:"v2",asq:"v6"},f={bumper:"BMPR",overlay:"VIDO",preroll:"VID",postroll:"VID",midroll:"VID"},g=["playback0","playback25","playback50","playback75","playback100"],b="csc.beap.bc.yahoo.com/yi";r.prototype._parseCSCImpressionBeacon=function(e,t){for(var n=/([^,()]+),|([^,():]+)\)/g,r=t.match(n),i={},o=null,a=0,s=null,l=0;l<r.length;l++)o=r[l],a=o.length-1,o=","===o.charAt(a)||")"===o.charAt(a)?o.substr(0,a):o,s=o.split("$"),s=2===s.length?s:o.split("="),2===s.length&&(i[s[0]]=s[1]);e.position=i.ypos,e.bookingId=i.bi,e.creativeId=i.cr,e.impressionId=i.aid,e.serveTime=i.st,e.serveId=i.gid,e.spaceId=i.sp},r.prototype.getNewAd=function(e,t){var n,r,a,s,g,b,h=this,E=h.spec,S=E.getSetting("adBaseUrl")||"us",A="true"===E.getSetting("sendRsParam")?"lmsid:"+t.licenseId:"",T=e.actionValues||[],L=f[e.type]||"",I=m,M="",C="",N="",D=t.spaceId;if(e.type===l.MIDROLL){I="";var R=E.getSetting("spaceIdOverride");R&&(D=R),M=' vid.forcead=1  adbreak="'+e.cdtBreak.toString()+'" ';var P=parseInt(E.getSetting("adsPerBreak"))||l.MAX_ADS_MIDROLL;e.cdtBreak===l.MARKETING_AD_BREAK&&P++,L=P>0&&"VID"===L?"n"+P+L:L}for(var O="",w=0;w<T.length;w++)O=O+y[T[w]]+";";if(p.mobile&&(I=v),t.showName&&(C='show_name="'+t.showName+'" '),t.topics&&(N='cTopId="'+t.topics.join()+'" '),O+=_+";"+I,b='content="'+O+'" '+M+C+N,r={pn:"'"+E.getSetting("partnerId")+"'",f:"'"+D+"'",p:"'"+E.propertyId+"'",c:"'x'",rand:"'"+Math.round(1e13*Math.random())+"'",rs:"'"+A+"'",l:"'"+L+"'",at:"'"+b+"'",rg:"'"+S+"'",pt:"'"+location.protocol+"'"},a={q:o.generateYqlQuery(r,"yahoo.ads.video.vat"),format:"json",env:"prod"},s=i.querystring(a),g=location.protocol+"//"+u+"?"+s,n=h.getNewAdResponseObject(e,g),n.timestamp=(new Date).getTime()/1e3,h.key=h.getKey(e,t),!D)return void h.publish(c.AD_FAILURE,n,h.key,h,d.MISSING_SPACEID);try{h.fireRequest(g,n)}catch(k){h.publish(c.AD_FAILURE,n,h.key,h,k.message)}},r.prototype.getFirstCall=function(){var e=this,t=e.spec,n=t.getSetting("adBaseUrl")||"us";return"http://"+n+u},r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",o=t.spaceId||"",a=(t.clipId||"",t.licenseId||""),s=e.type||"",l=f[s]||"";return i+"_"+o+"_"+l+"_"+a},r.prototype.processAdXml=function(e){var t=this,n=null;if(e=e.trim(),"<"===e.charAt(0))n=e;else try{var r=JSON.parse(e);if(!(r&&r.query&&r.query.results&&r.query.results.result))throw new Error(d.EMPTY_RESPONSE);n=r.query.results.result.xmlResponse||r.query.results.result}catch(i){throw new Error(d.XML_PARSING)}var o,a,l,c,p,u,_,m,v,y=s.parseAdXml(n);for(_=0;_<y.length;_++){for(o=y[_],m="impression",a=o.beacons[m]||[],u=0;u<a.length;u++)l=a[u],l.indexOf("csc.beap")>-1&&(t._parseCSCImpressionBeacon(o,l),l=l.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),a[u]=l);for(p=0;p<g.length;p++)for(m=g[p],a=o.beacons[m]||[],u=0;u<a.length;u++)l=a[u],l.indexOf("beap-bc")>-1&&(v=l.lastIndexOf("))"),v>-1&&(c=l.substring(0,v)+",{beap_client_event}))",a[u]=c));for(m="noadimpression",a=o.beacons[m]||[],u=0;u<a.length;u++)l=a[u],c=l.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),a[u]=c;for(m="errorimpression",a=o.beacons[m]||[],u=0;u<a.length;u++)l=a[u],l.indexOf(b)>-1&&a.splice(u,1);for(u=0;u<a.length;u++)l=a[u],c=l.replace(/\[ERRORCODE\]/g,"{err_code}"),a[u]=c}return y},r.prototype.allowPrefetch=function(){return!0}},{"../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"../yvap-util":145,"./AdResponse":111,"./Communicator":114,"./ParserManager":120}],119:[function(e,t,n){"use strict";function r(e,t){var n=this;n._yvapBus=e,n._cacheManager=t,n._communicator=null,n._midrollsAds=[],n._totalAdEnd=0,n._fetchRetry=0,n._totalNoAds=0,n._totalDuplicatedAds=0,n._totalPrefetchedAdsDuration=0,n._toFillMidrollsAds=!1,n._adsPerBreak=0,n._successAdCount=0,n._failAdCount=0,n._toUnsubscribe=[],n._cdtbreak=1}t.exports=r;var i=e("../../../../lib/logger"),o=(e("../../../../lib/event-bus"),e("./AdResponse"),e("../common/Events")),a=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./CommunicatorFactory"),c=e("../allocation/CommunicatorSpec"),d=e("../yvap-util"),p=(e("../ads-json"),function(e){var t="MIDROLL: ";i.log(t,e)});r.prototype._getNewAds=function(e,t){var n=this;if(e){var r=new s(a.MIDROLL,["clickable"]);r.cdtBreak=n.getCDTBreak(),r.fallbackParam=!1;var i=e.pickCommunicator(r);if(i&&i.communicatorName===a.MME){var c=l.getCommunicatorUsingSpec(i);n._adsPerBreak=parseInt(i.getSetting("adsPerBreak"),10),isNaN(n._adsPerBreak)&&(n._adsPerBreak=a.MIDROLL_DEFAULT_ADS_PER_BREAK),p("Making xhr call to fetch ads with: adsPerBreak="+n._adsPerBreak),n._toFillMidrollsAds=!!t.isLive,n._totalAdEnd=0,n._failAdCount=0,n._successAdCount=0,n._toUnsubscribe.push(c.subscribe(o.AD_READY,n._adReadyHandler,n)),n._toUnsubscribe.push(c.subscribe(o.AD_FAILURE,n._adFailureHandler,n)),c.getNewAd(r,t)}else p("No suitable communicator found for midroll fetch")}},r.prototype._getCommunicator=function(e){var t=new c;return t.communicatorId=11,t.communicatorName="MME",t.isFallback=!1,t.propertyMap=e.settingMap,t.propertyId=e.propertyId,l.getCommunicatorUsingSpec(t)},r.prototype._checkForVPAIDPreInit=function(e){var t=this;if(e){var n=e.adObj;if(n&&n.type===a.VPAID){var r=n.streams||[],i=r[0];i&&"application/x-shockwave-flash"===i.format&&t._yvapBus.publish(o.VPAID_PREFETCH_REQUEST,n)}}},r.prototype._trimPrefetchedAds=function(e){var t,n,r,i,o=this,s=[],l={},c=0,d=0;for(i=0;i<e.length;i++)n=e[i],r=n&&n.adObj,r&&r.type!==a.NOAD&&r.streams&&r.streams.length&&r.streams.length>0?(t=r.creativeId,l[t]?c++:(l[t]=!0,s.push(n))):d++;return o._totalNoAds+=d,o._totalDuplicatedAds+=c,p("Trim: duplicate="+c+", no-ad="+d),s},r.prototype._startFetchAds=function(e,t){var n=this;n._currentPlayerDataItem=t,n._currentCommunicatorAllocation=e,n._fetchRetry=0,n._totalNoAds=0,n._totalDuplicatedAds=0,n._totalPrefetchedAdsDuration=0,n._getNewAds(e,t)},r.prototype._fillMidrollsAds=function(){var e,t,n=this,r=0;for(n._midrollsAds=n._trimPrefetchedAds(n._midrollsAds),e=0;e<n._midrollsAds.length;e++)t=n._midrollsAds[e],r+=t&&t.adObj&&t.adObj.duration||0;n._totalPrefetchedAdsDuration=r,p("Updated prefetched ads="+r+", total ads="+n._midrollsAds.length),r<a.MIDROLL_PREFETCH_AD_LENGTH&&n._fetchRetry<a.MIDROLL_PREFETCH_MAX_RETRY?(n._fetchRetry++,p("Fetch retry #"+n._fetchRetry),n._getNewAds(n._currentCommunicatorAllocation,n._currentPlayerDataItem)):n._publishPrefetchedAdsData()},r.prototype._publishPrefetchedAdsData=function(){var e=this,t={retryCount:e._fetchRetry,totalUniqueAds:e._midrollsAds.length,totalDuplicatedAds:e._totalDuplicatedAds,totalNoAds:e._totalNoAds,uniqueAdsDuration:e._totalPrefetchedAdsDuration};e._yvapBus.publish(o.MIDROLL_CACHE_UPDATE,t)},r.prototype._adReadyHandler=function(e,t,n,r){var i=this,s=[];e.type=a.MIDROLL,s=i._midrollsAds,i._toFillMidrollsAds||s&&s[0]&&e.timestamp===s[0].timestamp||i.clearMidrollsAdCache(),i._addMidrollsAdCache(e),i._processAdCallEnd(r),i._yvapBus.publish(o.AD_CALL_END,n,e)},r.prototype._processAdCallEnd=function(e){var t=this;t._toFillMidrollsAds&&(t._totalAdEnd++,e?t._failAdCount++:t._successAdCount++,t._toFillMidrollsAds&&t._totalAdEnd>=t._adsPerBreak&&(p("SuccessAdCount="+t._successAdCount+", failAdCount="+t._failAdCount),t._fillMidrollsAds()))},r.prototype._adFailureHandler=function(e,t,n,r){var i=this;e.type=a.MIDROLL,e.errorState=r,i._addMidrollsAdCache(e),i._processAdCallEnd(r),i._yvapBus.publish(o.AD_CALL_END,n,e)},r.prototype.startMidRollsFetchThread=function(e){var t=this,n=t._cacheManager.getPlayerDataForClipId(e),r=t._cacheManager.getAllocationForClipId(e);r&&n?(t.resetCDTBreak(),t._startFetchAds(r,n),t.midRollFetchThread=setInterval(function(){t._startFetchAds(r,n)},a.MIDROLL_PREFETCH_TIMER)):p("Allocation, playerdata missing")},r.prototype.stopMidRollsFetchThread=function(){var e=this;e._currentPlayerDataItem=null,e._currentCommunicatorAllocation=null,e.midRollFetchThread&&clearInterval(e.midRollFetchThread);for(var t=0;t<e._toUnsubscribe.length;t++){var n=e._toUnsubscribe[t];n()}},r.prototype.getMidrollsAds=function(e,t){var n,r=this,i=r._midrollsAds||[],l=[],c=r._cacheManager.getPlayerDataForClipId(e),u=[],_=-1,m=new s(a.MIDROLL,["clickable"]),v=r._cacheManager.getAllocationForClipId(e),y=null,f=r._cacheManager.getCuePointsForClipId(e),g=0,b=0,h=0,E=function(e){var t=3;for(var n in f)if(f[n]){var r=f[n].timeOffset;if(r=d.convertTimeToSeconds(r),e+t>=r&&r>=e-t)return f[n].breakId}return 0};u=i.map(function(e){return e.timestamp||-1}),_=Math.max.apply(null,u);var S=E(t),A=r.getCDTBreak();if(v&&c&&f){y=v.pickCommunicator(m);var T,L=0;c.isLive?T=i.length:(T=a.MAX_VOD_ADS_MIDROLL,y&&(L=y.getSetting("adsPerBreak")),parseInt(L)>0&&(T=L),A===a.MARKETING_AD_BREAK&&T++);for(var I=0;T>I;I++){var M=I+1;if(r._yvapBus.publish(o.AD_OPPORTUNITY,e,a.MIDROLL,m,y,c,M),c.isLive||i.length>I&&i[I].timestamp===_){n=i[I],n.midrollbreak=S,n.midrolladsequence=M,n.midrollnumber=A;var C=n.adObj;C&&(C.type===a.AD?b++:C.type===a.NOAD?g++:C.type===a.VPAID&&h++),l.push(n)}}r._yvapBus.publish(o.AD_BREAK_SUBMITTED,e,a.MIDROLL,T,l.length,g,b,h,S),r.clearMidrollsAdCache()}return r.incrementCDTBreak(),p("AdsToSendToPlayer size="+l.length),v&&c&&(p("Start prefill next midroll ads cache"),r._startFetchAds(v,c)),l},r.prototype.clearMidrollsAdCache=function(){var e=this;e._midrollsAds=[]},r.prototype.updateMidrollsAdCache=function(e){var t=this;t._midrollsAds=e},r.prototype._addMidrollsAdCache=function(e){var t=this;t._midrollsAds.push(e),t._checkForVPAIDPreInit(e)},r.prototype.resetCDTBreak=function(){var e=this;e._cdtbreak=1},r.prototype.getCDTBreak=function(){var e=this;return e._cdtbreak},r.prototype.incrementCDTBreak=function(){var e=this;e._cdtbreak++}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../ads-json":97,"../allocation/CommunicatorSpec":100,"../common/Constants":105,"../common/Events":108,"../engine/AdSpec":132,"../yvap-util":145,"./AdResponse":111,"./CommunicatorFactory":115}],120:[function(e,t,n){"use strict";var r=e("./VASTParser"),i=e("./VMAPParser"),o=e("../common/Errors");n.parseAdXml=function(e){var t,r,i=null;if(!e)return null;e=n.cleanXml(e);try{t=n.parseXml(e,!0)}catch(a){throw new Error(o.XML_PARSING)}if(t.xml&&(r=t.xml.childNodes[0],i=n.parseDom(r)),"object"==typeof i&&null!==t.xmlParseErr)for(var s=0;s<i.length;s++)i[s].adXmlParseErr=t.xmlParseErr;return i},n.cleanXml=function(e){return e&&(e=e.replace(/>\s+</g,"><"),e=e.replace(/<!--[\s\S]*?-->/g,"")),e},n.parseXml=function(e,t){var n=null,r=null;if("undefined"!=typeof DOMParser){n=(new DOMParser).parseFromString(e,"text/xml");var i=n.getElementsByTagName("parsererror");i.length&&(r="NonIE")}else"undefined"!=typeof ActiveXObject?(n=document.implementation.createDocument(),n.loadXML(e),0!==n.parseError&&(r="IE")):r="All";return t===!0?{xml:n,xmlParseErr:r}:n},n.parseDom=function(e){var t,r,i;if(!e)throw new Error(o.XML_PARSING);if(t=n.getParser(e),!t)throw i=e.nodeName,"parsererror"===i?new Error(o.XML_PARSING):new Error(o.NO_PARSER);return r=t.parse(e)},n.getParser=function(e){var t=e?e.nodeName:"";return"VAST"===t?r:t.indexOf("VMAP")>-1?i:null}},{"../common/Errors":107,"./VASTParser":124,"./VMAPParser":126}],121:[function(e,t,n){"use strict";function r(e){var t=this;t.key=t.getKey(),a.call(t,e)}t.exports=r;var i=e("../../util"),o=e("../../../../lib"),a=e("./MMECommunicator"),s=e("../common/Events"),l=e("../common/CookieUtil"),c=e("../yvap-util");i.inherits(r,a),r.prototype.getNewAd=function(e,t){var n,r=this;r.spec;if(o.isFunction(window.showAdInfo)&&r.subscribe(s.AD_READY,function(e){window.showAdInfo(e.adObj)}),o.isFunction(window.getAdXmlForPreview)){var i=window.getAdXmlForPreview();"tag"===i.type?(n=r.getNewAdResponseObject(e,i.value),r.fireRequest(i.value,n)):(n=r.getNewAdResponseObject(e),r.onAdCallSuccess(n,i.value))}},r.prototype.getKey=function(){return"preview-key"},r.prototype.setNewRedirect=function(e,t){var n=this;t.setNewRedirectUrl(e),e=n.fillMacros(e),n.fireRequest(e,t)},r.prototype.fillMacros=function(e){var t=this,n=t.spec;return e=e.replace("[CONTENT_WATCHED]",l.getTotalVideoLength()),e=e.replace("[CONTENT_CLIPS_WATCHED]",l.getTotalClipCount()),e=e.replace("[PLAYER_WIDTH]",n.getSetting("SlotWidth")),e=e.replace("[PLAYER_HEIGHT]",n.getSetting("SlotHeight")),e=e.replace("[TIMESTAMP]",c.getTimeStamp())},r.prototype.allowPrefetch=function(){return!0}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/CookieUtil":106,"../common/Events":108,"../yvap-util":145,"./MMECommunicator":118}],122:[function(e,t,n){"use strict";function r(e){var t=this;o.call(t,e),t._macros={}}t.exports=r;var i=e("../../util"),o=e("./Communicator"),a=e("../common/Events"),s=e("../yvap-util"),l=(e("../common/CookieUtil"),e("./ParserManager")),c=["playback0","playback25","playback50","playback75","playback100"],d="csc.beap.bc.yahoo.com/yi";i.inherits(r,o),r.prototype.getNewAd=function(e,t,n){var r=this,i=r.getNewAdResponseObject(e,n);r.key=r.getKey(e,t);try{r.fireRequest(n,i)}catch(o){r.publish(a.AD_FAILURE,i,r.key,r,o.message)}},r.prototype.prefetchAd=function(e,t,n){var r,o=this;if(e){for(var s,l=e.adSource||{},c=l.vastAdData||[],d=l.adTagURI||"",p=e.trackingEvents||{},u=p.trackings||[],_=0;_<u.length;_++)"breakStart"===u[_].event&&(s=u[_]);if(s)for(_=0;_<c.length;_++)c[_].addBeaconOfType(s.url,"ad-break-start");r=o.getNewAdResponseObject(t),r.adTagURI=d,o.key=o.getKey(t,n),o._fillMacros(n);try{o._parseAdObjects(c),o.processAdObjects(r,c)}catch(m){i.log(m),o.publish(a.AD_FAILURE,r,o.key,o,m.message)}}},r.prototype._parseAdObjects=function(e){var t,n,r,i,o,a,s,l,p,u=this;for(s=0;s<e.length;s++){for(t=e[s],l="impression",n=t.beacons[l]||[],a=0;a<n.length;a++)r=n[a],r.indexOf("csc.beap")>-1&&(u._parseCSCImpressionBeacon(t,r),r=r.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),n[a]=r);for(o=0;o<c.length;o++)for(l=c[o],n=t.beacons[l]||[],a=0;a<n.length;a++)r=n[a],r.indexOf("beap-bc")>-1&&(p=r.lastIndexOf("))"),p>-1&&(i=r.substring(0,p)+",{beap_client_event}))",n[a]=i));for(l="noadimpression",n=t.beacons[l]||[],a=0;a<n.length;a++)r=n[a],i=r.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),n[a]=i;for(l="errorimpression",n=t.beacons[l]||[],a=0;a<n.length;a++)r=n[a],r.indexOf(d)>-1&&n.splice(a,1);for(a=0;a<n.length;a++)r=n[a],i=r.replace(/\[ERRORCODE\]/g,"{err_code}"),n[a]=i;
}},r.prototype._parseCSCImpressionBeacon=function(e,t){for(var n=/([^,()]+),|([^,():]+)\)/g,r=t.match(n),i={},o=null,a=0,s=null,l=0;l<r.length;l++)o=r[l],a=o.length-1,o=","===o.charAt(a)||")"===o.charAt(a)?o.substr(0,a):o,s=o.split("$"),s=2===s.length?s:o.split("="),2===s.length&&(i[s[0]]=s[1]);e.position=i.ypos,e.bookingId=i.bi,e.creativeId=i.cr,e.impressionId=i.aid,e.serveTime=i.st,e.serveId=i.gid,e.spaceId=i.sp},r.prototype.setNewRedirect=function(e,t){var n=this;e=n._expandMacros(e),t.setNewRedirectUrl(e),n.fireRequest(e,t)},r.prototype._fillMacros=function(e){var t=this,n=e.adTargeting||"",r="",i=new DOMParser,o=i.parseFromString(n,"application/xml"),a=o.childNodes[0];if(a&&"adData"===a.nodeName){var l=a.getAttribute("id");("TurnerVideoID"===l||"YahooPartnerVideoID"===l)&&(r=a.getAttribute("value"))}var c=e.clipCategory||"";t._macros={"[TIMESTAMP]":s.getTimeStamp(),"[AD_TARGETING]":r,"[CONTENT_CATEGORY]":c}},r.prototype._expandMacros=function(e){var t=this;if(!e||0===e.length)return null;var n=t._macros||{};for(var r in n)n.hasOwnProperty(r)&&(e=e.replace(r,n[r]));return e},r.prototype.allowPrefetch=function(){return!0},r.prototype.getKey=function(e,t){var n=t.spaceId||"",r=t.licenseId||"",i=e.type||"";return"Refresh_"+n+"_"+i+"_"+r},r.prototype.processAdXml=function(e){var t,n,r,i,o,a,s=l.parseAdXml(e);if(s&&s.adBreakMap){t=s.adBreakMap.preroll||{},n=t.adSource||{},r=n.vastAdData||[],i=t.trackingEvents||{},o=i.trackings||[];for(var c=0;c<o.length;c++)"breakStart"===o[c].event&&(a=o[c]);if(a)for(c=0;c<r.length;c++)r[c].addBeaconOfType(a.url,"ad-break-start");return r}return s}},{"../../util":"jJTEqU","../common/CookieUtil":106,"../common/Events":108,"../yvap-util":145,"./Communicator":114,"./ParserManager":120}],123:[function(e,t,n){"use strict";function r(e,t){var n=this;n._beaconMap={},n._beaconMap[o.VIDEO_START]="playback0",n._beaconMap[o.VIDEO_QUARTILE_25]="playback25",n._beaconMap[o.VIDEO_QUARTILE_50]="playback50",n._beaconMap[o.VIDEO_QUARTILE_75]="playback75",n._beaconMap[o.VIDEO_QUARTILE_100]="playback100",n._beaconMap[o.VIDEO_VIEW]="impression",n._yvapBus=e,n._standaloneAdXML=t.xml,n._standaloneAdBeacons=t.beacons,n._standaloneAdResponse=null;var r=new l;r.communicatorName="STANDALONE";var c=new a(o.PREROLL,["clickable"]),d=null,p=new s(r);p&&(p.subscribe(i.AD_READY,n.prefetchCompleteHandler,n),p.subscribe(i.AD_FAILURE,n.prefetchFailureHandler,n),n._yvapBus.publish(i.AD_CALL_START,p),p.prefetchAd(n._standaloneAdXML,c,d,"STANDALONE",parseInt(1e5*Math.random())))}t.exports=r;var i=(e("../../../../lib/logger"),e("../../../../lib/event-bus"),e("../common/Events")),o=e("../common/Constants"),a=e("../engine/AdSpec"),s=e("./Communicator"),l=e("../allocation/CommunicatorSpec");r.prototype.prefetchCompleteHandler=function(e,t,n){var r=this;r._yvapBus.publish(i.AD_CALL_END,n,e),e&&e.adObj&&r.addBeacons(e.adObj),r._standaloneAdResponse=e},r.prototype.prefetchFailureHandler=function(e,t,n,r){},r.prototype.getAd=function(){var e=this;return e._standaloneAdResponse},r.prototype.addBeacons=function(e){var t=this;if(t._standaloneAdBeacons)for(var n in t._beaconMap)if(t._beaconMap.hasOwnProperty(n))for(var r=t._standaloneAdBeacons[n],i=t._beaconMap[n],o=0;o<r.length;o++){var a=r[o];e.addBeaconOfType(a,i)}}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../allocation/CommunicatorSpec":100,"../common/Constants":105,"../common/Events":108,"../engine/AdSpec":132,"./Communicator":114}],124:[function(e,t,n){"use strict";function r(e,t,n){for(var r,i,o=e.childNodes,a=0;a<o.length;a++)r=o[a],i=t[r.nodeName],i&&i.call(void 0,n,r)}function i(e,t){var n={MediaFile:function(e,t){var n,r,i=t.getAttribute("type"),o=t.getAttribute("apiFramework"),a=t.getAttribute("delivery");n=t.getAttribute("bitrate")||100,n=parseInt(n,10),r=C.getTextFromNode(t),e.addMedia(i,n,r,a,o)}};r(t,n,e)}function o(e,t){var n={yahoo_video_ad_item:function(e,t){var n=t.getAttribute("name");n&&t.textContent&&e.addParamOfName(t.textContent,n)},yahoo_video_ad_beacon:function(e,t){var n=t.getAttribute("id");n&&t.textContent&&e.addBeaconOfType(t.textContent,n)},"#cdata-section":function(e,t){var n=e.adParameters||{};e.adParameters=n;var r=n.AdParameters||"";n.AdParameters=r+t.nodeValue},"#text":function(e,t){e.adParameters={AdParameters:t.nodeValue}}};r(t,n,e)}function a(e,t){var n={Tracking:function(e,t){var n,r=t.getAttribute("event");r&&t.textContent&&(n=P[r],n?e.addBeaconOfType(t.textContent,n):e.addBeaconOfType(t.textContent,r))}};r(t,n,e)}function s(e,t){var n={ClickThrough:function(e,t){t.textContent&&e.addParamOfName(t.textContent,"clickurl")},ClickTracking:function(e,t){var n=t.nodeName;n&&t.textContent&&e.addBeaconOfType(t.textContent,"clicktracking")}};r(t,n,e)}function l(e,t){var n={MediaFiles:i,AdParameters:o,TrackingEvents:a,VideoClicks:s,Duration:function(e,t){if(N.isNullOrUndefined(e.duration)){var n=C.getTextFromNode(t);e.duration=D.convertTimeToSeconds(n)}}};e.streams=[];for(var l in e.beacons)e.beacons.hasOwnProperty(l)&&"impression"!==l&&"errorimpression"!==l&&delete e.beacons[l];r(t,n,e)}function c(e,t){var n,r;e=e||{},t.textContent&&(n=t.getAttribute("creativeType")||"",r=t.textContent||"",e.resourceUrl=r.trim(),e.resourceType=n.trim())}function d(e,t){var n;e.nonLinearAd||{};t.textContent&&(n=t.textContent||"",n=n.trim(),e.addParamOfName(n,"clickurl"))}function p(e,t){var n={StaticResource:c,NonLinearClickThrough:d,AdParameters:o},i=e.nonLinearAd||{},a=t.getAttribute("width"),s=t.getAttribute("height"),l=t.getAttribute("scalable"),p=t.getAttribute("apiFramework");i.width=a,i.height=s,i.scalable=l,i.apiFramework=p,e.nonLinearAd=i,r(t,n,e),n={StaticResource:c},r(t,n,e.nonLinearAd)}function u(e,t){var n={TrackingEvents:a,NonLinear:p};r(t,n,e)}function _(e,t){e=e||{};t.textContent&&(e.companionClickThrough=t.textContent)}function m(e,t){var n,r;e=e||{},t.textContent&&(n=t.getAttribute("creativeType")||"",r=t.textContent||"",e.companionBannerSrc=r.trim(),e.companionMimeType=n)}function v(e,t){var n={},i=t.getAttribute("width"),o=t.getAttribute("height");n.companionWidth=i,n.companionHeight=o;var a=t.getElementsByTagName("StaticResource"),s=t.getElementsByTagName("IFrameResource"),l=t.getElementsByTagName("HTMLResource");a&&a.length>0?n.companionBannerType=R.STATIC_RESORUCE:s&&s.length>0?n.companionBannerType=R.IFRAME_RESORUCE:l&&l.length>0&&(n.companionBannerType=R.HTML_RESORUCE);var c={TrackingEvents:y,CompanionClickThrough:_,StaticResource:m,IFrameResource:m,HTMLResource:m};r(t,c,n),e.companion.push(n)}function y(e,t){var n={Tracking:function(e,t){var n=t.getAttribute("event");n&&t.textContent&&(e.companionImpression=t.textContent)}};r(t,n,e)}function f(e,t){var n={Companion:v};r(t,n,e)}function g(e,t){var n={Linear:l,CompanionAds:f,NonLinearAds:u};r(t,n,e)}function b(e,t){var n={Creative:g};r(t,n,e)}function h(e,t){var n=C.getTextFromNode(t);e.addBeaconOfType(n,"impression")}function E(e,t){var n,r,i,o,a,s=t.getAttribute("type");"SkipAd"===s?(n=t.childNodes[0],n&&"SkipDirective"===n.nodeName&&"2"===n.textContent&&(e.isSkippable=!0),r=t.childNodes[1],r&&"SkipBeacon"===r.nodeName&&r.textContent&&e.addBeaconOfType(r.textContent,"skip")):"CPCV"===s?(i=t.childNodes[0],i&&"Progress30SecBeacon"===i.nodeName&&i.textContent&&e.addBeaconOfType(i.textContent,"cpcv")):"CustomTracking"===s?(o=t.childNodes[0],o&&"NoAdImpression"===o.nodeName&&o.textContent&&e.addBeaconOfType(o.textContent,"noadimpression")):"YahooViewability"===s&&(a=t.childNodes[0],a&&"CustomTrackingViewableImpression"===a.nodeName&&a.textContent&&e.addBeaconOfType(a.textContent,"viewableimpression"))}function S(e,t){var n=C.getTextFromNode(t);e.addBeaconOfType(n,"errorimpression")}function A(e,t){var n={Extension:E};r(t,n,e)}function T(e,t){var n={VASTAdTagURI:function(e,t){e.redirectUrl=C.getTextFromNode(t),e.type="redirect"},Impression:h,Creatives:b,Extensions:A,Error:S};r(t,n,e)}function L(e,t){var n={Impression:h,Creatives:b,Extensions:A,Error:S};r(t,n,e)}function I(e,t){var n=t.getAttribute("fallbackfor"),i=t.getAttribute("id");i&&(e.adId=i),n&&(e.isFallback=!0,e.fallbackFor=n);var o={Wrapper:T,InLine:L};return r(t,o,e),e}var M=e("./Ad"),C=e("../../util"),N=e("../../../../lib"),D=e("../yvap-util"),R=e("../common/Constants"),P={start:"playback0",firstQuartile:"playback25",midpoint:"playback50",thirdQuartile:"playback75",complete:"playback100"};n.parse=function(e){var t,n=[];if(!e||"VAST"!==e.nodeName)return n;var i={Ad:function(e,t){e=new M,e.adFormat="vast",I(e,t),n.push(e)}};return r(e,i,t),0===n.length&&(t=new M,t.adFormat="vast",t.type=R.NOAD,n.push(t)),n}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/Constants":105,"../yvap-util":145,"./Ad":110}],125:[function(e,t,n){"use strict";function r(){var e=this;e.adBreakMap={},e.version=""}function i(){var e=this;e.adSource=null,e.trackingEvents=null,e.timeOffset="",e.breakType=[],e.breakId="",e.repeatAfter="",e.extensions=null}function o(){var e=this;e.id="",e.allowMultipleAds=0,e.followRedirects=0,e.adTagURI="",e.customAdData="",e.vastAdData=""}function a(){var e=this;e.trackings=[]}function s(){var e=this;e.event="",e.url=""}function l(){var e=this;e.extensions=[],e.clientRules=null}function c(){var e=this;e.xml="",e.type="",e.data={}}t.exports={VMAPObject:r,AdBreak:i,AdSource:o,TrackingEvents:a,Tracking:s,Extensions:l,Extension:c}},{}],126:[function(e,t,n){"use strict";function r(e,t,n){for(var r,i,o=e.childNodes,a=0;a<o.length;a++)r=o[a],i=t[r.nodeName],i&&i.call(void 0,n,r)}function i(e,t){var n=new c.TrackingEvents,i={"vmap:Tracking":function(e,t){var n=new c.Tracking,r=t.getAttribute("event")||"";n.event=r,n.url=t.textContent,e.trackings.push(n)}};r(t,i,n),e.trackingEvents=n}function o(e,t){var n=new c.Extensions,i={ClientRules:a};r(t,i,n),e.extensions=n}function a(e,t){var n={},i={MinDuration:function(e,t){var n=t.textContent||0;e.MinDuration=n},StartAtClip:function(e,t){var n=t.textContent||0;e.StartAtClip=n},Frequency:function(e,t){var n=t.textContent||0;e.Frequency=n},Length:function(e,t){var n=t.textContent||0;e.Length=n},Offset:function(e,t){var n=t.textContent||0;e.Offset=n},AdDuration:function(e,t){var n=t.textContent||0;e.AdDuration=n},Repeat:function(e,t){var n=t.textContent||0;e.Repeat=n}};r(t,i,n),e.clientRules=n}function s(e,t){var n=new c.AdSource,i={"vmap:VASTAdData":function(e,t){var n=t.childNodes[0],r=d.getParser(n);e.vastAdData=r.parse(n)},"vmap:VASTData":function(e,t){var n=t.childNodes[0],r=d.getParser(n);e.vastAdData=r.parse(n)},"vmap:AdTagURI":function(e,t){e.adTagURI=t.textContent},"vmap:CustomAdData":function(e,t){e.customAdData=t.textContent}};r(t,i,n),e.adSource=n}function l(e,t){var n=new c.AdBreak,a=t.getAttribute("breakId")||"";a.indexOf("pre")>-1?n.breakId="preroll":n.breakId=a,n.breakType=(t.getAttribute("breakType")||"").split(","),n.timeOffset=t.getAttribute("timeOffset")||"";var l={"vmap:AdSource":s,"vmap:TrackingEvents":i,"vmap:Extensions":o};r(t,l,n),e.adBreakMap[n.breakId]=n}var c=e("./VMAP"),d=e("./ParserManager");e("../yvap-util"),e("../common/Constants");n.parse=function(e){var t=null;if(!e||"vmap:VMAP"!==e.nodeName)return t;t=new c.VMAPObject;var n={"vmap:AdBreak":l};return r(e,n,t),t}},{"../common/Constants":105,"../yvap-util":145,"./ParserManager":120,"./VMAP":125}],127:[function(e,t,n){"use strict";var r=e("../common/Constants");n._isVpaid=function(e){var t=e.apiFramework||"";return t.toLowerCase()===r.VPAID},n._setType=function(e){var t=r.NOAD;if(e.nonLinearAd)t=r.OVERLAY;else if(e.streams&&e.streams.length>0){var i=e.streams,o=[],a=[];i.forEach(function(e){n._isVpaid(e)?a.push(e):o.push(e)}),o.length>0?(t=r.AD,e.streams=o):a.length>0&&(t=r.VPAID,e.streams=a)}e.type=t},n.validateAdObj=function(e){for(var t=[n._setType],r=0;r<t.length;r++)e=t[r](e)}},{"../common/Constants":105}],128:[function(e,t,n){"use strict";function r(e){var t=this;o.call(t,e)}t.exports=r;var i=e("../../util"),o=e("./Communicator"),a=(e("./ParserManager"),e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events");e("../yvap-util");i.inherits(r,o),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"YAXv",o=t.clipId||"";return i+"_"+o},r.prototype.getNewAd=function(e,t){var n,r,i=this;if(r="https://na.ads.yahoo.com/yax/vdo?ve=1&si=370&tc=ac958c0f81cbb7a6&vdn=0&vdm=30&vfo=2&xmlVersion=xml_ver_2.0vast_wrapper,xml_ver_2.0vast&vpaidt=vpaidt_none&u=tumblr.com",i.key=i.getKey(e,t),r){r=r.replace("http:",location.protocol),n=i.getNewAdResponseObject(e,r);try{i.fireRequest(r,n)}catch(o){i.publish(s.AD_FAILURE,n,i.key,i,o.message)}}else n=i.getNewAdResponseObject(e),i.publish(s.AD_FAILURE,n,i.key,i,a.REQUEST_GENERIC)}},{"../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"../yvap-util":145,"./AdResponse":111,"./Communicator":114,"./ParserManager":120}],129:[function(e,t,n){"use strict";function r(){var e=this;e.actionValues=null,e.placement=null,e.ruleFunctions=[],e.cookieUtil=o}var i=e("../../../../lib"),o=e("../common/CookieUtil");e("../common/Constants");t.exports=r,r.evaluateDefault=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,n=e.start||1;return t>=n},r.evaluateStart=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,n=e.start||1;return t===n},r.evaluateOverlay=function(){var e,t,n,r,i=this,o=i.clipDuration,a=i.timeUpdate,s=i.overlayStart||0,l=i.repeat||0,c=i.lastShown||0,d=i.padding||0,p=i.duration||0;return c=c>=a?0:c,e=a-c,t=a-s,n=a+p+d,r=t>=0&&(!c||e>=l)&&o>=n,r&&(i.lastShown=a),r},r.evaluateFrequency=function(){var e=this,t=e.cookieUtil.getRecentClipCount(),n=e.interval||0;return t>=n||1===n},r.evaluateLength=function(){var e=this,t=e.length||0,n=e.cookieUtil.getRecentVideoLength();return n>=t},r.evaluateRatio=function(){var e=this,t=e.ratio||0,n=e.cookieUtil.getAdLength(),r=e.cookieUtil.getTotalVideoLength(),i=r/n;return!isNaN(i)&&i>=t},r.evaluateMinimumDuration=function(){var e=this,t=e.clipDuration||0,n=e.minimumDuration||0;return t>=n},r.evaluatefirstAdProbability=function(){var e=this,t=e.probability||100,n=100*Math.random(),r=e.cookieUtil.getTotalClipCount()+1,i=e.start||1;return r===i&&t>=n},r.prototype.addRuleFunction=function(e){var t=this;i.isFunction(e)&&t.ruleFunctions.push(e)},r.prototype.evaluate=function(e,t){var n=this,r=0,i=n.ruleFunctions,o=!0;for(n.clipDuration=e||0,n.timeUpdate=t||0,r=0;r<i.length;r++)o=o&&i[r].call(this);return o}},{"../../../../lib":"bRhrlU","../common/Constants":105,"../common/CookieUtil":106}],130:[function(e,t,n){"use strict";function r(){}var i=e("./ActionRule"),o=e("./RuleGroup"),a=e("./AdSpec");t.exports=r;var s={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline"};r.prototype.understandRules=function(e){if(!e||"{}"===JSON.stringify(e))return null;var t,n,r,a,s,l,c,d,p,u,_,m=this,v=new o,y=e.ruleGroup;for(t=y[0],a=t.actionRule2,!a||a instanceof Array||(s=a,a=[],a.push(s)),r=0;r<a.length;r++){for(s=a[r],l=new i,c=s["@basis"]||"",d=s["@type"]||"",p=s.actionParam||[],n=0;n<p.length;n++)u=p[n],"id"===u["@name"]?l.actionValues=(u["@value"]||"").split(","):"placement"===u["@name"]&&(l.placement=u["@value"]);"videoTimeline"===c?(l.type=c,m._parseNonLinearRules(l,s)):"triggers"===c&&(l.type=d,m._parseLinearRules(l,s)),_=v[l.type]||[],_.push(l)}return v},r.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t["@startatclip"],10),e.duration=parseInt(t["@duration"],10),e.interval=parseInt(t["@intervalbetweenclips"],10),e.overlayStart=parseInt(t["@start"],10),e.padding=parseInt(t["@padding"],10),e.repeat=parseInt(t["@interval"],10),e.addRuleFunction(i.evaluateOverlay))},r.prototype._parseLinearRules=function(e,t){var n=this,r=!1,o=!1,a=!1,s=!1;if(e&&t){r="true"===t["@ratioEnabled"],o="true"===t["@minDurEnabled"],a="true"===t["@lengthEnabled"],s="true"===t["@firstAdProbabilityEnabled"],e.interval=parseInt(t["@interval"],10),e.start=parseInt(t["@start"],10),e.addRuleFunction(i.evaluateDefault),o&&(e.minimumDuration=parseInt(t["@minDuration"],10),e.addRuleFunction(i.evaluateMinimumDuration));var l;s?(e.probability=parseInt(t["@firstAdProbability"],10),l=i.evaluatefirstAdProbability):l=i.evaluateStart;var c;r?(e.ratio=parseInt(t["@ratio"],10),c=i.evaluateRatio):a?(e.length=parseInt(t["@length"],10),c=i.evaluateLength):c=i.evaluateFrequency,e.addRuleFunction(n._combineFunctions(l,c,"OR"))}},r.prototype._combineFunctions=function(e,t,n){var r=function(){return!1};return"AND"===n?r=function(){var n=this;return e.call(n)&&t.call(n)}:"OR"===n&&(r=function(){var n=this;return e.call(n)||t.call(n)}),r},r.prototype.onAdEvent=function(e,t,n,r){var i=(this.constructor,s[e]),o=null,l=null;return t&&t.preEvaluate&&(l=t.evaluate(i,n,r),l&&(o=new a(e,l.actionValues,l.placement,l.duration,l.subType))),o},r.prototype.preEvaluate=function(e,t){var n,r,i=(this.constructor,s[e]),o=[],l=null;if(t&&t.preEvaluate)for(l=t.preEvaluate(i),r=0;r<l.length;r++)n=l[r],o.push(new a(e,n.actionValues,n.placement));return o}},{"./ActionRule":129,"./AdSpec":132,"./RuleGroup":134}],131:[function(e,t,n){"use strict";function r(){var e=this;i.call(e)}var i=e("./AdEngine"),o=e("./RuleGroup"),a=e("./ActionRule"),s=e("../../util");t.exports=r,s.inherits(r,i);var l={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline"};r.prototype.understandRules=function(e){var t=this,n=new o,r=e.adBreakMap||{};for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],c=l[i],d=n[c],p=s.extensions||{},u=p.clientRules;if(u){var _=new a;_.type=c,"videoTimeline"===c?t._parseNonLinearRules(_,u):t._parseLinearRules(_,u),d.push(_)}}return n},r.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t.StartAtClip,10),e.duration=parseInt(t.AdDuration,10),e.interval=parseInt(t.Frequency,10),e.overlayStart=parseInt(t.Offset,10),e.repeat=parseInt(t.Repeat,10),e.placement="bottom",e.addRuleFunction(a.evaluateOverlay))},r.prototype._parseLinearRules=function(e,t){var n=this,r=function(){return!0};e.addRuleFunction(a.evaluateDefault);var i=t.MinDuration>0,o=t.Length>0,s=t.Frequency>0,l=t.StartAtClip>0;i&&(e.minimumDuration=parseInt(t.MinDuration,10),e.addRuleFunction(a.evaluateMinimumDuration));var c=a.evaluateStart;l&&(e.start=parseInt(t.StartAtClip,10));var d;o?(e.length=parseInt(t.Length,10),d=a.evaluateLength):s?(e.interval=parseInt(t.Frequency,10),d=a.evaluateFrequency):d=r,e.addRuleFunction(n._combineFunctions(c,d,"OR"))}},{"../../util":"jJTEqU","./ActionRule":129,"./AdEngine":130,"./RuleGroup":134}],132:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=this;o.type=e||"",o.actionValues=t||[],o.placement=n||"",o.adCallSequence=1,o.duration=r||0,o.adCount=0,o.fallbackParam=!0,o.adIdBeacon=0,o.subType=i}t.exports=r},{}],133:[function(e,t,n){"use strict";function r(e,t){var n=this;n.actionValues=null,n.placement=null,n.ruleFunctions=[],n.cookieUtil=o,n.nfl_free_time=e,n.nfl_session_time=t,n.subType=""}var i=e("../../util"),o=e("../common/CookieUtil"),a=e("../common/Constants"),s=e("./ActionRule");i.inherits(r,s),t.exports=r,r.prototype._evaluateNFLPreroll=function(){var e=this,t=parseInt(e.cookieUtil.getNFLVideoLength(),10);return t>=e.nfl_free_time},r.prototype._isNFLSessionExpired=function(){var e=this,t=parseInt(e.cookieUtil.getNFLSession(),10);return(new Date).getTime()/1e3-t>=e.nfl_session_time},r.prototype.evaluate=function(){var e=this;return e._isNFLSessionExpired()?(e.actionValues=["clickable"],e.subType=a.NFL_ONLOAD,!0):e._evaluateNFLPreroll()?(e.actionValues=["clickable"],e.subType=a.NFL_PREROLL,!0):!1}},{"../../util":"jJTEqU","../common/Constants":105,"../common/CookieUtil":106,"./ActionRule":129}],134:[function(e,t,n){"use strict";function r(){var e=this;e.preroll=[],e.clipGateway=[],e.videoTimeline=[],e.postroll=[]}t.exports=r;e("./ActionRule.js");r.prototype.evaluate=function(e,t,n){var r,i,o=this,a=o[e]||[],s=null;for(i=0;i<a.length;i++)r=a[i],r.type===e&&r.evaluate(t,n)&&(s=r);return s},r.prototype.preEvaluate=function(e){var t=this;return t[e]||[]}},{"./ActionRule.js":129}],135:[function(e,t,n){"use strict";function r(e,t){var n,r=/\{(\w)+\}/g;return n=e.replace(r,function(e){var n,r=/(\w)+/g,i=e.match(r),o=i[0],a="";if("beap_client_event"===o.toLowerCase()){for(var s in t)t.hasOwnProperty(s)&&(a+=s+"$"+t[s]+",");return a=a.substring(0,a.length-1)}return"1x1pixel"===o.toLowerCase()?"http://ads.yimg.com/a/a/vdo/a/1x1.gif":(n=t[o],(null===t[o]||void 0===t[o])&&(n=e),n)})}function i(e,t){for(var n,i=[],o=0;o<e.length;o++)n=e[o],n=r(n,t),a.sendImageBeacon(n),i.push(n);return i}function o(e,t){var n=e.adObj,r=n.beacons.impression||[],o=e.midrollbreak||0,a=e.midrolladsequence||0,s=n.duration||0,l=[];return l=l.concat(i(r,{cuuid:t,player_version:"nextgen",ad_break:o,ad_sequence:a,duration:s})),n.beacons.impression=null,l}var a=e("../../util"),s=e("../common/Errors"),l=e("../common/Constants"),a=e("../../util"),c={};c[l.NOAD]=125,c[s.AD_CALL_TIMEOUT]=102,c[s.EMPTY_RESPONSE]=5122,c[s.XML_PARSING]=108,c[s.NO_PARSER]=5125,c[s.MISSING_ADTGT]=122,c[s.PLAYER_TIMEOUT]=105,c[s.REQUEST_GENERIC]=104,c[s.INCOMPATIBLE_MEDIA]=120,c[s.MEDIA_PLAYBACK]=114,c[s.ADBLOCKER]=124,c[s.SSL_MISMATCH]=121,c[s.VPAID_TIMEOUT]=127,c[s.RESPONSE_GENERIC]=5130,c[s.VPAID_SWF_DOWNLOAD_ERROR]=8121;var d={};d[l.NOAD]=303,d[s.AD_CALL_TIMEOUT]=301,d[s.EMPTY_RESPONSE]=912,d[s.XML_PARSING]=100,d[s.NO_PARSER]=101,d[s.MISSING_ADTGT]=913,d[s.PLAYER_TIMEOUT]=402,d[s.REQUEST_GENERIC]=900,d[s.INCOMPATIBLE_MEDIA]=200,d[s.MEDIA_PLAYBACK]=405,d[s.VPAID_TIMEOUT]=901,n.onAdProgress=function(e,t,n,r,a){var s=e.adObj,c=s.isSkippable?2:1;n=Math.floor(n),t=Math.round(t);var d=25*Math.floor(4*t/n),p="playback"+d,u=s.type===l.VPAID,_=[];0!==d||u||null===s.beacons.impression||(_=_.concat(o(e,a)));var m=s.beacons[p]||[];return n=Math.floor(n),r.ad_dur=n,r.s=c,_=_.concat(i(m,r)),s.beacons[p]=null,t>=30&&(m=s.beacons.cpcv||[],_=_.concat(i(m,{ad_dur:n,s:c})),s.beacons.cpcv=null),_},n.onAdStart=function(e,t,n){var r=e.adObj,a=[],s=r.type===l.VPAID,c=r.type===l.OVERLAY;(s||c)&&(a=a.concat(o(e,n)));var d=r.beacons.bitrate||[];return a=a.concat(i(d,{type:"bitrate",value:t})),r.beacons.bitrate=null,a},n.onAdBreakStart=function(e){var t=e.adObj,n=[];if(t&&t.beacons){var r=t.beacons["ad-break-start"]||[];n=n.concat(i(r)),t.beacons["ad-break-start"]=null}return n},n.onAdClick=function(e,t,n){var r,o=e.adObj,a=o.beacons.interaction||[],s=o.beacons.clicktracking||[],l=a.concat(s),c=Math.floor(t||10),d=[];return r=(o.params.clickCount||0)+1,o.params.clickCount=r,d=d.concat(i(l,{type:"click",time:c,seq:r}))},n.onNoAd=function(e,t){var n,r,o,s,p=e.redirectList.length,u=p>0,_=e.adObj,m=[],v=a.parseDomain(e.redirectList[0]||"")||"",y=a.parseDomain(e.redirectList[p-1]||"")||"",f=e.midrollbreak||0,g=e.midrolladsequence||0,b=_.duration||0;return _=e.adObj||{},u||_.type!==l.NOAD?(r=e.errorState||_.type,o=c[r]||r,s=d[r],n=_.beacons.noadimpression||[],m=m.concat(i(n,{err_code:o,initial_domain:v,vendor_domain:y,cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.noadimpression=null,n=_.beacons.errorimpression||[],m=m.concat(i(n,{err_code:s})),_.beacons.errorimpression=null):(n=_.beacons.impression||[],m=m.concat(i(n,{cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.impression=null),m},n.onCompanionDisplayed=function(e){i(e,{})}},{"../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107}],136:[function(e,t,n){"use strict";function r(){var e=this;e.bumper=null,e.preroll=null,e.midroll=null,e.postroll=null}function i(){var e=this;e.adOppEvents=[],e.adCallEvents=[],e.adDeliveryEvents=[]}function o(){var e=this;e.playContext="",e.networkName="",e.adPosition="none",e.subType="",e.taken=!1}function a(){var e=this;e.responseCode="",e.responseType="",e.firstRedirect="",e.redirectCount=0,e.adCallSequence=0,e.networkName="",e.creativeId="",e.bookingId="",e.cacheHit="",e.cacheId="",e.latency=null,e.clipStarted=!1,e.midrollAdBreak="",e.midrollAdPos="",e.adSystem="",e.br_id=""}function s(){var e=this;e.mediaStartLatency=null,e.serveId=null,e.error=""}function l(){}function c(){var e=this;e.latency=-1}function d(e,t,n,r){var i=this;i._yvapBus=e,i.yvapVersion=t||"default",i.accountId=n||"test",i.playerTimeout=r,i._adProfileMap={},i._allStats={},i._clipStartBoolean={},i._archiveStats={},i._yvapBus.subscribe(u.BEGIN_AD_EXP,i._onBeginAdExperience,i),i._yvapBus.subscribe(u.AD_OPPORTUNITY,i._onAdOpportunity,i),i._yvapBus.subscribe(u.NULL_AD_OPPORTUNITY,i._onNullAdOpportunity,i),i._yvapBus.subscribe(u.AD_CALL_START,i._onAdCallStart,i),i._yvapBus.subscribe(u.AD_CALL_END,i._onAdCallEnd,i),i._yvapBus.subscribe(u.AD_SUBMITTED,i._onAdSubmitted,i),i._yvapBus.subscribe(u.AD_DELIVERED,i._onAdDelivered,i),i._yvapBus.subscribe(u.AD_DELIVERY_ERROR,i._onAdDeliveryError,i),i._yvapBus.subscribe(u.VIDEO_START,i._onContentVideoStart,i),i._yvapBus.subscribe(u.VIDEO_END,i._onContentVideoEnd,i),i._yvapBus.subscribe(u.AD_BREAK_ENDED,i._midRollEnd,i),i._yvapBus.subscribe(u.AD_BREAK_SUBMITTED,i._onAdBreakSubmission,i),i._yvapBus.subscribe(u.VPAID_AD_RENDERED,i._onVpaidAdRendered,i),i._yvapBus.subscribe(u.VPAID_AD_STARTED,i._onVpaidAdStarted,i)}var p=e("../../util"),u=e("../common/Events"),_=e("../common/Errors"),m=e("../common/Constants");t.exports=d;var v={};v[m.NOAD]=2,v[m.AD]=2,v[m.VPAID]=4,v.ERROR=106;var y={};y[m.NOAD]=1,y[m.AD]=2,y[m.VPAID]=2,y[_.AD_CALL_TIMEOUT]=102,y[_.EMPTY_RESPONSE]=5122,y[_.XML_PARSING]=108,y[_.NO_PARSER]=5125,y[_.MISSING_ADTGT]=122,y[_.PLAYER_TIMEOUT]=105,y[_.REQUEST_GENERIC]=104,y[_.THIRD_PARTY_NO_AD]=125,y[_.SSL_MISMATCH]=121,y[_.MISSING_SPACEID]=131,y[_.RESPONSE_GENERIC]=5130,y[_.ADBLOCKER]=124,y[_.BRX_WITHOUT_FLASH]=750;var f={};f[m.CACHE_L0]=1,f[m.CACHE_L1]=2,f[m.CACHE_L2]=3;var g=[m.PREROLL,m.BUMPER,m.CLIP_START,m.MIDROLL,m.POSTROLL,m.CLIP_END],b={};b[_.INCOMPATIBLE_MEDIA]=120,b[_.MEDIA_PLAYBACK]=114,b[_.GENERIC]=112,b[_.VPAID_TIMEOUT]=115,b[_.ADBLOCKER]=124,b[_.VPAID_SWF_DOWNLOAD_ERROR]=8121;var h={};h[m.NOAD]=125,h[_.AD_CALL_TIMEOUT]=102,h[_.EMPTY_RESPONSE]=124,h[_.XML_PARSING]=108,h[_.MISSING_ADTGT]=122,h[_.PLAYER_TIMEOUT]=105,h[_.REQUEST_GENERIC]=104,h[_.INCOMPATIBLE_MEDIA]=120,h[_.MEDIA_PLAYBACK]=114,h[_.VPAID_TIMEOUT]=127;var E=1,S=2;a.prototype.translate=function(e){var t,n,r,i=this;e&&(t=e.adObj||{},e.errorState?i.responseType=v.ERROR:t.type&&(i.responseType=v[t.type]),n=e.errorState||t.type,i.responseCode=y[n]||"",i.firstRedirect=p.parseDomain(e.redirectList[0])||"",i.redirectCount=e.redirectList.length,n===m.NOAD&&i.redirectCount>0&&(i.responseCode=y[_.THIRD_PARTY_NO_AD]),r=e.cacheState||"",i.cacheHit=f[r]||"",i.creativeId=t.creativeId||"",i.bookingId=t.bookingId||"",i.adId=t.adId||"",i.adXmlParseErr=t.adXmlParseErr||"",e.type===m.MIDROLL&&(i.midrollAdBreak=e.midrollbreak,i.midrollAdPos=e.midrolladsequence))},c.prototype.start=function(){var e=this;e._startTime=(new Date).getTime()},c.prototype.end=function(){var e=this;e._startTime&&(e._latency=(new Date).getTime()-e._startTime)},c.prototype.getLatency=function(){var e=this;return e._latency},d.prototype._onBeginAdExperience=function(e){var t=this;e&&(t._clipStartBoolean[e]=!1,t._allStats[e]=null)},d.prototype._onNullAdOpportunity=function(e,t){var n=this,r=new o;r.adPosition=t,r.taken=S,n._fireAdOpportunity(r)},d.prototype._onAdOpportunity=function(e,t,n,r,i,a){var s,l=this,c=null!==n&&null!==r,d=new o;a||(a=0),d.adPosition=t,n&&(d.subType=n.subType||t),i&&(d.playContext=i.licenseId),r&&(d.networkName=r.communicatorName),d.taken=c?E:S,e&&(s=l._getPositionStats(e,t),s.adOppEvents[a]=d)},d.prototype._onAdCallStart=function(e){var t,n,r=this;e&&(t="adCall"+Math.floor(100*Math.random())+(new Date).getTime(),n=new c,n.start(),r._adProfileMap[t]=n,e.adCallIdentifier=t)},d.prototype._onAdCallEnd=function(e,t){var n,r,i=this;e&&t&&(n=e.adCallIdentifier||"",r=i._adProfileMap[n],r&&(r.end(),t.adCallIdentifier=n))},d.prototype._onAdSubmitted=function(e,t){var n,r,i,o,s,l,c,d,p=this,u=0;t&&e&&(n=t.adCallIdentifier,s=t.type,o=p._adProfileMap[n],c=t.communicatorSpec,d=t.adSpec,s===m.MIDROLL&&(u=t.midrolladsequence),r=new a,r.position=s,l=p._getPositionStats(e,s),l.adCallEvents[u]=r,r.latency=o?o.getLatency():0,r.clipStarted=p._clipStartBoolean[e]?E:S,r.adCallSequence=d.adCallSequence,r.networkName=c.communicatorName,r.translate(t),r.adSystem=t.adSystem||"",r.br_id=t.br_id||"",p._clipStartBoolean[e]&&s!==m.MIDROLL&&(l=p._getArchivedPositionStats(e,s),l&&(i=l.adOppEvents[u],l.adCallEvents[u]=r,p._fireAdCall(i,r))))},d.prototype._onAdBreakSubmission=function(e,t,n,r,i,o,a,s){var l,c,d,p=this;n=n||0,r=r||0,i=i||0,o=o||0,a=a||0,s=s||0,e&&t===m.MIDROLL&&(l={vx:"99",cf02:p.yvapVersion,brId:s},c={vx:"99",cf02:p.yvapVersion,brId:s,oppN:n,submit:r,noads:i,VAST:o,VPAID:a,ptval:p.playerTimeout},d={evt:"ad_mbrk",pver:p.yvapVersion,adbrk:s,n_adopp:n,n_adsub:r,n_noad:i,n_ads:o,n_vpads:a,tmout_ms:p.playerTimeout,yvap:!0},p._yvapBus.publish(u.AD_METRIC,{ywa:l,qos:c,ult:d}))},d.prototype._getArchivedPositionStats=function(e,t){var n,r=this;return n=r._archiveStats[e],n?n[t]:null},d.prototype._getPositionStats=function(e,t){var n,o,a=this;return n=a._allStats[e]||new r,a._allStats[e]=n,o=n[t]||new i,n[t]=o,o},d.prototype._archivePositionStats=function(e,t,n){var o,a,s,l,c,d,p=this;n=n||0,o=p._allStats[e],s=o[t],o[t]&&(l=o[t].adOppEvents[n],d=o[t].adDeliveryEvents[n],c=o[t].adCallEvents[n],o[t].adOppEvents[n]=null,o[t].adCallEvents[n]=null,o[t].adDeliveryEvents[n]=null),a=p._archiveStats[e]||new r,a[t]=a[t]||new i,l&&(a[t].adOppEvents[n]=l),l&&(a[t].adCallEvents[n]=c),l&&(a[t].adDeliveryEvents[n]=d),p._archiveStats[e]=a},d.prototype._fireForPrecedingPositions=function(e,t){for(var n,r,i,o=this,a=0;a<g.length&&g[a]!==t;a++){if(n=o._getPositionStats(e,g[a]))for(var s=0;s<n.adOppEvents.length;s++)r=n.adOppEvents[s],o._fireAdOpportunity(r),i=n.adCallEvents[s],o._fireAdCall(r,i);o._archivePositionStats(e,g[a])}},d.prototype._onAdDelivered=function(e,t,n,r,i,o,a){var l,c,d,p,_,v,y,f,g=this,b=i||0,h=o||0,E=a||0,S=0,A=0;if(g._fireForPrecedingPositions(e,t),r&&(A=r.adObj.duration||0),r&&r.type===m.MIDROLL&&(S=r.midrolladsequence),e&&t){if(d=new s,d.mediaStartLatency=n,r&&r.adObj&&r.adObj.serveId&&(d.serveId=r.adObj.serveId),l=g._getPositionStats(e,t),c=g._getArchivedPositionStats(e,t),l.adDeliveryEvents[S]=d,p=l.adOppEvents[S],g._fireAdOpportunity(p),_=l.adCallEvents[S],g._fireAdCall(p,_),c&&(p=p||c.adOppEvents[S],_=_||c.adCallEvents[S]),p&&_&&(v={vx:"12",cf60:_.networkName,cf65:p.adPosition,cf66:_.firstRedirect,cf70:_.redirectCount,cf03:g.accountId,cf02:g.yvapVersion,cf47:_.responseCode,cf48:_.responseType,cf89:_.creativeId,cf90:_.bookingId,cf250:_.cacheHit,cf56:d.mediaStartLatency,cf84:_.adCallSequence,cf17:_.midrollAdBreak,cf39:A},y={vx:"12",cf60:_.networkName,cf65:p.adPosition,subT:p.subType,cf66:_.firstRedirect,cf70:_.redirectCount,cf03:g.accountId,cf02:g.yvapVersion,cf47:_.responseCode,cf48:_.responseType,cf89:_.creativeId,cf90:_.bookingId,cf250:_.cacheHit,cf56:d.mediaStartLatency,cf84:_.adCallSequence,midrolltime:_.midrollAdBreak,midrollpos:_.midrollAdPos,duration:A,ptval:g.playerTimeout,vsl:b,vil:h,vst:E,serveId:d.serveId,ad_id:_.adId,ad_xml_err:_.adXmlParseErr},f={evt:"ad_dlv",ntwk:_.networkName,pos:p.adPosition,f_hop:_.firstRedirect,n_hop:_.redirectCount,acct_id:g.accountId,pver:g.yvapVersion,r_code:_.responseCode,r_type:_.responseType,crid:_.creativeId,bkid:_.bookingId,cchit:_.cacheHit,ms_lat:d.mediaStartLatency,adseq:_.adCallSequence,mrtime:_.midrollAdBreak,duration:A,subt:p.subType,mrpos:_.midrollAdPos,tmout_ms:g.playerTimeout,vsl:b,vil:h,vst:E,serv_id:d.serveId,adid:_.adId,ad_xml_err:_.adXmlParseErr,yvap:!0},g._yvapBus.publish(u.AD_METRIC,{ywa:v,qos:y,ult:f}),window.showLatencies)){var T={vsl:b,vil:h,vst:E,aml:d.mediaStartLatency};window.showLatencies(T,!0)}g._archivePositionStats(e,t,S)}},d.prototype._onAdDeliveryError=function(e,t,n,r,i,o,a){var l,c,d,p,v,y,f,g,h=this,E=0;n!==m.NOAD&&(h._fireForPrecedingPositions(e,t),r&&r.type===m.MIDROLL&&(E=r.midrolladsequence),e&&t&&(d=new s,d.error=n||_.GENERIC,f=h._getPositionStats(e,t),g=h._getArchivedPositionStats(e,t),
f.adDeliveryEvent=d,l=f.adOppEvents[E],h._fireAdOpportunity(l),c=f.adCallEvents[E],h._fireAdCall(l,c),g&&(l=l||g.adOppEvents[E],c=c||g.adCallEvents[E]),l&&c&&(p={vx:"18",cf60:c.networkName,cf65:l.adPosition,cf66:c.firstRedirect,cf70:c.redirectCount,cf03:h.accountId,cf02:h.yvapVersion,cf89:c.creativeId,cf90:c.bookingId,cf47:c.responseCode,cf48:c.responseType,cf93:b[d.error],cf84:c.adCallSequence},v={vx:"18",cf60:c.networkName,cf65:l.adPosition,subT:l.subType,cf66:c.firstRedirect,cf70:c.redirectCount,cf03:h.accountId,cf02:h.yvapVersion,cf89:c.creativeId,cf90:c.bookingId,cf47:c.responseCode,cf48:c.responseType,cf93:b[d.error],cf84:c.adCallSequence,midrolltime:c.midrollAdBreak,midrollpos:c.midrollAdPos,ptval:h.playerTimeout,vsl:i,vil:o,vpaidS:a,ad_id:c.adId,serveId:d.serveId,ad_xml_err:c.adXmlParseErr},y={evt:"ad_err",ntwk:c.networkName,pos:l.adPosition,f_hop:c.firstRedirect,n_hop:c.redirectCount,acct_id:h.accountId,pver:h.yvapVersion,r_code:c.responseCode,r_type:c.r_type,crid:c.creativeId,bkid:c.bookingId,a_dlv_err:b[d.error],adseq:c.adCallSequence,subt:l.subType,mrtime:c.midrollAdBreak,mrpos:c.midrollAdPos,tmout_ms:h.playerTimeout,vsl:i,vil:o,vpaidS:a,adid:c.adId,serv_id:d.serveId,ad_xml_err:c.adXmlParseErr,yvap:!0},h._yvapBus.publish(u.AD_METRIC,{ywa:p,qos:v,ult:y})),h._archivePositionStats(e,t,E)))},d.prototype._onVpaidAdRendered=function(e,t,n){var r,i,o,a=this,s=0;n&&n.type===m.MIDROLL&&(s=n.midrolladsequence),e&&t&&(r=a._getPositionStats(e,t),i=r.adOppEvents[s],a._fireAdOpportunity(i),o=r.adCallEvents[s],a._fireAdCall(i,o),a._archivePositionStats(e,t,s))},d.prototype._onVpaidAdStarted=function(e,t,n){var r,i,o,a,s,c,d,p,_=this,v=0,y=0;n&&(y=n.adObj.duration||0),n&&n.type===m.MIDROLL&&(v=n.midrolladsequence),e&&t&&(o=new l,n&&n.adObj&&n.adObj.serveId&&(o.serveId=n.adObj.serveId),r=_._getPositionStats(e,t),i=_._getArchivedPositionStats(e,t),r.adStartEvents=o,a=r.adOppEvents[v],s=r.adCallEvents[v],i&&(a=a||i.adOppEvents[v],s=s||i.adCallEvents[v]),a&&s&&(d={vx:"11",cf60:s.networkName,cf65:a.adPosition,subT:a.subType,cf66:s.firstRedirect,cf70:s.redirectCount,cf03:_.accountId,cf02:_.yvapVersion,cf47:s.responseCode,cf48:s.responseType,cf89:s.creativeId,cf90:s.bookingId,cf250:s.cacheHit,cf84:s.adCallSequence,midrolltime:s.midrollAdBreak,midrollpos:s.midrollAdPos,duration:y,ptval:_.playerTimeout,serveId:o.serveId,ad_id:s.adId,ad_xml_err:s.adXmlParseErr},c={vx:"11",cf60:s.networkName,cf65:a.adPosition,subT:a.subType,cf66:s.firstRedirect,cf70:s.redirectCount,cf03:_.accountId,cf02:_.yvapVersion,cf47:s.responseCode,cf48:s.responseType,cf89:s.creativeId,cf90:s.bookingId,cf250:s.cacheHit,cf84:s.adCallSequence,midrolltime:s.midrollAdBreak,midrollpos:s.midrollAdPos,duration:y,ptval:_.playerTimeout,serveId:o.serveId,ad_id:s.adId,ad_xml_err:s.adXmlParseErr},p={evt:"ad_beg",ntwk:s.networkName,pos:a.adPosition,subt:a.subType,f_hop:s.firstRedirect,n_hop:s.redirectCount,acct_id:_.accountId,pver:_.yvapVersion,r_code:s.responseCode,r_type:s.responseType,crid:s.creativeId,bkid:s.bookingId,cchit:s.cacheHit,adseq:s.adCallSequence,mrtime:s.midrollAdBreak,mrpos:s.midrollAdPos,duration:y,tmout_ms:_.playerTimeout,serv_id:o.serveId,adid:s.adId,ad_xml_err:s.adXmlParseErr,yvap:!0},_._yvapBus.publish(u.AD_METRIC,{ywa:d,qos:c,ult:p})),_._archivePositionStats(e,t,v))},d.prototype._onContentVideoStart=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,m.CLIP_START)},d.prototype._midRollEnd=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,m.POSTROLL)},d.prototype._onContentVideoEnd=function(e){var t=this;t._fireForPrecedingPositions(e,m.CLIP_END)},d.prototype._fireAdOpportunity=function(e){var t,n,r,i=this;e&&(t={vx:"16",cf60:e.networkName,cf65:e.adPosition,cf03:i.accountId,cf02:i.yvapVersion,cf82:e.taken},n={vx:"16",cf60:e.networkName,cf65:e.adPosition,subT:e.subType,cf03:i.accountId,cf02:i.yvapVersion,cf82:e.taken,ptval:i.playerTimeout},r={evt:"ad_oppty",pos:e.adPosition,ntwk:e.networkName,acct_id:i.accountId,pver:i.yvapVersion,tmout_ms:i.playerTimeout,subt:e.subType,taken:e.taken,yvap:!0},i._yvapBus.publish(u.AD_METRIC,{ywa:t,qos:n,ult:r}))},d.prototype._fireAdCall=function(e,t){var n,r,i,o,a=this;if(e&&t&&(o=t.clipStarted?E:S,n={vx:"7",cf60:t.networkName,cf65:e.adPosition,cf66:t.firstRedirect,cf70:t.redirectCount,cf03:a.accountId,cf02:a.yvapVersion,cf47:t.responseCode,cf48:t.responseType,cf67:t.clipStarted,cf89:t.creativeId,cf90:t.bookingId,cf250:t.cacheHit,cf61:e.playContext,cf84:t.adCallSequence},r={vx:"7",cf60:t.networkName,cf65:e.adPosition,subT:e.subType,cf66:t.firstRedirect,cf70:t.redirectCount,cf03:a.accountId,cf02:a.yvapVersion,cf47:t.responseCode,cf48:t.responseType,cf67:t.latency,cf89:t.creativeId,cf90:t.bookingId,cf250:t.cacheHit,cf61:e.playContext,cf84:t.adCallSequence,timeout:t.clipStarted,ptval:a.playerTimeout,adblock:m.ADBLOCKER,adSystem:t.adSystem,br_id:t.br_id,ad_id:t.adId,ad_xml_err:t.adXmlParseErr},i={evt:"ad_call",ntwk:t.networkName,pos:e.adPosition,f_hop:t.firstRedirect,n_hop:t.redirectCount,acct_id:a.accountId,pver:a.yvapVersion,r_code:t.responseCode,r_type:t.responseType,tmout:t.clipStarted,adl:t.latency,crid:t.creativeId,bkid:t.bookingId,cchit:t.cacheHit,lms_id:e.playContext,adseq:t.adCallSequence,subt:e.subType,tmout_ms:a.playerTimeout,adblock:m.ADBLOCKER,ad_sys:t.adSystem,br_id:t.br_id,adid:t.adId,ad_xml_err:t.adXmlParseErr,yvap:!0},a._yvapBus.publish(u.AD_METRIC,{ywa:n,qos:r,ult:i}),window.showLatencies)){var s={adl:t.latency};window.showLatencies(s)}},d.prototype.getArchive=function(){var e=this;return e._archiveStats}},{"../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108}],137:[function(e,t,n){"use strict";function r(){var e=this;e.diagnostic=null}var i=e("../../views/ads-diagnostics.html"),o=e("../../util"),a=e("../common/Constants");t.exports=r,r.prototype.generateDiagnostics=function(e){var t=this,n=[];for(var r in e)if(e.hasOwnProperty(r)){var s={};s.clipId=r;var l=e[r];s.data=[];var c={};c.position=a.PREROLL,c.data=t._generatePositionStat(l.preroll),s.data.push(c);var d={};d.position=a.BUMPER,d.data=t._generatePositionStat(l.bumper),s.data.push(d);var p={};p.position=a.MIDROLL,p.data=t._generatePositionStat(l.midroll),s.data.push(p);var u={};u.position=a.POSTROLL,u.data=t._generatePositionStat(l.postroll),s.data.push(u),n.push(s)}var _;return n&&(_=o.render(i,{clipStats:n})),_},r.prototype._generatePositionStat=function(e){var t=[];if(e)for(var n=e.adOppEvents,r=e.adCallEvents,i=e.adDeliveryEvents,o=0;o<n.length;o++){var a={},s=n[o];s&&(a.taken=1===s.taken?!0:!1,a.communicator=s.networkName);var l=r[o];l&&(a.responseCode=l.responseCode,a.responseType=l.responseType,a.firstRedirect=l.firstRedirect,a.redirectCount=l.redirectCount);var c=i[o];c&&(a.error=c.error,a.mediaStartLatency=c.mediaStartLatency),t.push(a)}return t}},{"../../util":"jJTEqU","../../views/ads-diagnostics.html":60,"../common/Constants":105}],138:[function(e,t,n){"use strict";function r(e,t){var n=this;n._reset(),n._eventBus=e,n._rendererDiv=t,n._rendererDivRect=t&&t.getClientRects?t.getClientRects()[0]:null,n._eventBus.subscribe(l.AD_PLAYBACK_ENDED,n._stop,n),n._eventBus.subscribe(l.Ad.PAUSE,n._pause,n),n._eventBus.subscribe(l.AD_PLAYBACK_RESUMED,n._resume,n),n._eventBus.subscribe(l.FULLSCREEN_CHANGE,n._toggleFullScreenSetting,n),n._rendererDiv&&(n._rendererDiv.id=n._rendererDiv.id?n._rendererDiv.id:"vidView001")}var i=e("../../util"),o=(e("../../../../lib"),e("../../../../lib/logger")),a=e("../yvap-util"),s=(e("../common/Events"),e("../common/Errors"),e("../common/Constants")),l=e("../../event");t.exports=r,r.prototype._reset=function(){var e=this;clearInterval(e._timer),e._timer=null,e._ad=null,e._communicatorName=null,e._isFullScreen=!1,e._firstCheck=!0,e._viewAtInit=0,e._viewabilityBeaconFired=!1,e._viewableTime=0,e._totalViewableTime=0,e._totalPlaybackDuration=0,e._started=0,e._percentViewArr=[],e._isViewabilityMeasurable=s.UNKNOWN},r.prototype._getViewability=function(){var e=this,t=null,n=0,r=e._rendererDiv.id;if(e._isIFrame){var i=top.document.querySelector('iframe[src="'+location.href+'"]');i.getAttribute("id")||i.setAttribute("id","vidView"+(new Date).getTime()),r=i.getAttribute("id")}e._isFullScreen?n=1:(e._darla&&e._darla.yvap.view&&(t=e._darla.yvap.view(r)),n=t?t.iv:0),e._handleViewability(n)},r.prototype._handleViewability=function(e){var t=this;if(t._totalPlaybackDuration=t._firstCheck?0:t._totalPlaybackDuration+s.INTERNAL_POLLING_INTERVAL,e>=s.VIEWABILITY_THRESHOLD&&!t._firstCheck?(t._viewableTime=t._viewableTime+s.INTERNAL_POLLING_INTERVAL,t._totalViewableTime=t._totalViewableTime+s.INTERNAL_POLLING_INTERVAL):t._viewableTime=0,t._firstCheck&&(t._firstCheck=!1,t._viewAtInit=e>=s.VIEWABILITY_THRESHOLD?1:0),t._percentViewArr.push(e),t._viewableTime>=s.TIME_FOR_VIEWABLE_IMPRESSION&&!t._viewabilityBeaconFired){var n=t._getAvBeaconUrl(e),r=t._ad.beacons.viewableimpression||[];if(n||r.length>0){if(n&&i.sendImageBeacon(n),r.length>0)for(var a=0;a<r.length;a++)t._processYamPlusBeacon(r[a],e);o.log("ViewabilityManager: beacon fired"),t._viewabilityBeaconFired=!0}else o.log("ViewabilityManager: beacon params not found.")}},r.prototype._processYamPlusBeacon=function(e,t){var n=this;if(e){var r,o={},a=(new Date).getTime();o.pctview=100*t,o.initview=n._viewAtInit,o.MeasurementType=1,o.Timestamp=a,r=n._populateYamPlusMacros(e,o),i.sendImageBeacon(r)}},r.prototype._populateYamPlusMacros=function(e,t){var n,r=/\{(\w)+\}|\%(\w)+\%/g,i=t,o=function(e){var t,n=/(\w)+/g,r=e.match(n),o=r[0];return t=i[o],"undefined"!=typeof t&&null!==t?t:e};return n=e.replace(r,o)},r.prototype._getAvBeaconUrl=function(e){var t=this,n=t._getBeaconData(e),r="";return n&&t._darla.yvap.avb&&(r=t._darla.yvap.avb(n.spaceId,n.pvId,n.position,n.serveTime)),r},r.prototype._getBeaconData=function(e){var t=this,n={},r={};return r.size=t._rendererDivRect?t._rendererDivRect.width+"x"+t._rendererDivRect.height:"",r.bookID=t._ad.bookingId,r.ioID=999999,r.lineID=999999,r.adID=999999,r.slotID=999999,r.creativeID=t._ad.creativeId,r.impID=t._ad.impressionId,r.pctIV=100*e,r.initIV=t._viewAtInit,n.spaceId=t._ad.spaceId,n.pvId=t._ad.serveId,n.serveTime=t._ad.serveTime,n.position={},n.position[t._ad.position]=r,n},r.prototype._toggleFullScreenSetting=function(){var e=this,t=e._isFullScreen;e._isFullScreen=t?!1:!0},r.prototype._pause=function(){var e=this;clearInterval(e._timer)},r.prototype._resume=function(e){var t=this;1===t._started&&(t._timer=setInterval(function(){t._getViewability()},s.INTERNAL_POLLING_INTERVAL))},r.prototype._stop=function(e){var t=this;clearInterval(t._timer),t._started=0},r.prototype.start=function(e,t){var n,r=this;if(r._reset(),r._rendererDiv&&e)if(r._ad=e.adObj,n=e.communicatorSpec,r._communicatorName=n&&n.communicatorName?n.communicatorName:"",r._communicatorName===s.MME||r._communicatorName===s.PREVIEW)if(a.isViewabilityMeasurable()){var i=a.getDARLA();r._darla=i?i.darla:null,r._isIFrame=i?i.isIFrame:0,r._isViewabilityMeasurable=s.VIEWABILITY_MEASURABLE,r._started=1,r._timer=setInterval(function(){r._getViewability()},s.INTERNAL_POLLING_INTERVAL)}else r._isViewabilityMeasurable=a.getViewabilityNonMeasurableValue(),o.log("ViewabilityManager: Viewability Not measureable: "+r._isViewabilityMeasurable);else o.log("ViewabilityManager: Not a MME Ad. Viewability will not be measured");else o.log("ViewabilityManager: Ad object not present OR Videoplayer element not found")},r.prototype.getViewabilitySummary=function(){var e=this,t={data:e._percentViewArr,max:function(){return this.data.length?Math.max.apply(Math,this.data):0},min:function(){return this.data.length?Math.min.apply(Math,this.data):0},avg:function(){for(var e=this.data,t=e.length,n=0,r=0,i=0;t>i;i++)n+=e[i];return r=n/t||0}},n={vi_tpd:e._totalPlaybackDuration,vi_tvd:e._totalViewableTime,vi_mpv:(100*t.min()).toFixed(0),vi_mxpv:(100*t.max()).toFixed(0),vi_apv:(100*t.avg()).toFixed(0),vi_pw:e._rendererDivRect.width,vi_ph:e._rendererDivRect.height,vi_psnd:s.PLAYER_SOUND_ON,vi_ploc:s.UNKNOWN,vi_pib:s.UNKNOWN,vi_pap:s.UNKNOWN,vi_m:e._isViewabilityMeasurable};return n}},{"../../../../lib":"bRhrlU","../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../../util":"jJTEqU","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"../yvap-util":145}],139:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=this;t&&(o.playbackId=e||"",o.resourceType=t.resourceType||"",o.resourceUrl=t.resourceUrl||"",o.scalable=t.scalable||"",o.duration=r||0,o.position=n||"",i&&(o.adParams=i.AdParameters))}t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e){var t=this;t._customParams={},t.rules=null,t.allocation=null,t.adList=null,t.rendererType=null,t.adTargeting=null,t.clipCategory=null,t.iceBreaker=null,e&&(t.clipId=e.clipId,t.clipDuration=e.clipDuration,t.licenseId=e.licenseId,t.spaceId=e.spaceId,t.playlistId=e.playlistId,t.rendererType=e.rendererType,e.yvap&&t._processAdData(e.yvap),t.isLive=e.isLive||!1,t.isLive&&0===t.clipDuration&&(t.clipDuration=450))}t.exports=r;var i=e("./common/Constants"),o=(e("./communicator/VMAPParser"),e("./communicator/ParserManager"));r.prototype.addCustomParams=function(e,t){var n=this;n._customParams[e]=t},r.prototype.getCustomParams=function(e){var t=this;return t._customParams[e]},r.prototype.setAdData=function(e){var t=this;t._processAdData(e)},r.prototype._processAdData=function(e){var t,n=this;if(e){var r=e.adRules;if(r){var a=r.result;if(a){n.rules=a.ruleGroup||{},n.allocation=a.allocation||{},n.rendererType=a.rendererType||"",n.adList=a.adList||[];var s=a.vmap;s&&(t=o.parseAdXml(s),t&&(n.vmapData=t))}else r.adResponse&&(t=o.parseAdXml(r.adResponse),t&&(n.vmapData=t))}n.adTargeting=e.ad_targeting||"",n.clipCategory=e.category||"",n[i.YVAP_INFO_AD_BREAKS]=e[i.YVAP_INFO_AD_BREAKS]||"",n.content_provider_data=e.content_provider_data,n.topics=e.topics}},r.prototype.clean=function(){var e=this;e.rules=null,e.allocation=null,e.rendererType=null,e.adList=null,e.iceBreaker=null,e.vmapData=null,e[i.YVAP_INFO_AD_BREAKS]=null}},{"./common/Constants":105,"./communicator/ParserManager":120,"./communicator/VMAPParser":126}],141:[function(e,t,n){"use strict";function r(e,t){var n=this;n._yvapBus=e,t&&t.getElementsByTagName&&(n._container=t),n._overlayDiv=document.createElement("div"),n._overlayDiv.style.display="inline-block",n._overlayDiv.style.textAlign="auto",n._overlayDiv.style.position="absolute",n._currentDom=null,n._displayTimer=null;n.svgElem=document.createElement("div"),n.svgElem.style.display="block",n.svgElem.style.position="absolute",n.svgElem.style.top="0",n.svgElem.style.right="0",n.svgElem.style.backgroundColor="white",n.svgElem.style.pointerEvents="auto",n.svgElem.style.width="10px",n.svgElem.style.height="10px",n.svgElem.innerHTML='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top:0px; right:0px;">        <g>        <title>Layer 1</title>        <polygon fill="#000000" points="10,1.502 8.498,0 5,3.499 1.502,0.001 0,1.503 3.498,5 0,8.498 1.502,10 5,6.502 8.498,10 10,8.498    6.502,5 " id="svg_1"/>        </g>        </svg>',n.svgElem.addEventListener("click",function(e){n.removeOverlay()})}var i=e("../common/Events"),o=e("../../../../lib/logger");t.exports=r,r.prototype.renderOverlay=function(e){var t,n,r,a,s,l,c,d=this,p=document.createElement("div");if(!d._currentDom&&e&&(c=e.playbackId||"",n=e.resourceType||"",t=e.resourceUrl||"",a=e.scalable||!1,s=e.duration||0,l=e.position,"image/jpeg"===n&&t?(r=document.createElement("img"),r.src=t,a&&o.log("scaling not implemented")):o.log("overlay is not known type: "+n+", aborting overlay rendering"),r&&d._container)){d._overlayDiv.style[l]="0px",p.appendChild(r),p.appendChild(d.svgElem),d._currentDom=p;var u=d._overlayDiv.style;u.position="absolute",u.display="block",d._overlayDiv.style[l]="0px",u.height="50px",u.width="100%",u.zIndex=100,u.pointerEvents="none",u.background="transparent",u.textAlign="center",p.style.position="relative",p.style.display="inline-block",p.style.textAlign="auto",p.style.background="transparent",p.style.textAlign="center",p.style.height="50px",d._container.appendChild(d._overlayDiv),d._overlayDiv.appendChild(p),d._displayTimer=setTimeout(function(){d.removeOverlay()},1e3*s),r.style.pointerEvents="auto",r.style.opacity="0.5",r.addEventListener("click",function(e){d._yvapBus&&d._yvapBus.publish(i.OVERLAY_CLICK,c)}),r.addEventListener("mouseover",function(e){e.target.style.opacity="1.0"}),r.addEventListener("mouseout",function(e){e.target.style.opacity="0.85"}),d._yvapBus&&d._yvapBus.publish(i.OVERLAY_RENDERED,c)}},r.prototype.removeOverlay=function(){var e=this;e._container&&e._currentDom&&e._overlayDiv&&(e._overlayDiv.removeChild(e._currentDom),e._container.removeChild(e._overlayDiv),e._currentDom=null),clearTimeout(e._displayTimer)}},{"../../../../lib/logger":"IS9j5T","../common/Events":108}],142:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this,d=e.yvap.accountId,p=e.yvap.timeout;i._config=e,i._eventBus=t,i._yvapBus=new a("yvap"),i._rendererDiv=n||{},i._player=r||{},i._standaloneMode=e.yvap.standaloneAd&&e.yvap.standaloneAd.xml?!0:!1,i._cacheManager=null,i._analytics=new T(i._yvapBus,"fireball",d,p),i._viewabilityManager=new L(i._eventBus,i._rendererDiv),i._adEngine=null,i._allocationManager=h,i._adPlaybackManager=S,i._diagnostics=new A;var u=i._rendererDiv.clientWidth,_=i._rendererDiv.clientHeight;i._vpaidjsRenderer=new E(i._eventBus),i._vpaidflashInterface=new M(i._eventBus,i._yvapBus,u,_,r,e.yvap.vpaidTimeout,e.yvap.preInitVpaid),i._overlayRenderer=new C(i._yvapBus,i._rendererDiv),i._midrollsHelper=null,(!s.ie||s.ie>=10)&&P.detectAdBlocker(function(e){c.ADBLOCKER=e}),i._currentClipId="",i.playbackMap={},i.waitlistMap={},i._videoStartTime=0,i._lastVolume=1,"number"==typeof e.yvap.volume&&(i._lastVolume=e.yvap.volume),i._mute=e.yvap.mute||!1,i._onVolumeChange(i._lastVolume),i._onMuteChange(i._mute),i._clipStarted=!1,i._yvapBus.subscribe(l.CACHE_UPDATE,i._onCacheUpdate,i),i._yvapBus.subscribe(l.CACHE_REFRESH_REQUEST,i._onCacheRefreshRequest,i),i._yvapBus.subscribe(l.MIDROLL_CACHE_UPDATE,i._onMidrollCacheUpdate,i),i._yvapBus.subscribe(l.AD_METRIC,i._onAdMetric,i),t.subscribe(o.PLAYBACK_PROGRESS,i._onContentVideoProgress,i),t.subscribe(o.PLAYBACK_STARTED,i._onContentVideoStart,i),t.subscribe(o.PLAYBACK_ENDED,i._onContentVideoEnd,i),t.subscribe(o.AD_PLAYBACK_STARTED,i._onAdStart,i),t.subscribe(o.AD_PLAYBACK_PROGRESS,i._onAdProgress,i),t.subscribe(o.AD_PLAYBACK_ENDED,i._onAdEnd,i),t.subscribe(o.AD_CLICK,i._onAdClick,i),t.subscribe(o.Ad.NO_PLAYABLE_STREAM,i._onAdNotPlayable,i),t.subscribe(o.Ad.NO_AD,i._onNoAd,i),t.subscribe(o.AD_PLAYBACK_ERROR,i._onAdPlaybackError,i),t.subscribe(o.API.PLAYBACK_SEEK_COMPLETE,i._onContentVideoSeek,i),t.subscribe(o.PLAYER_RESIZE,i._onPlayerResize,i),t.subscribe(o.CONTROLS_SET_VOLUME,i._onVolumeChange,i),t.subscribe(o.CONTROLS_SET_MUTE,i._onMuteChange,i),t.subscribe(o.AD_PLAYBACK_REQUEST,i._onAdPlaybackRequest,i),t.subscribe(o.SWF_READY,i._onSwfReady,i),t.subscribe(o.PAUSE_VPAID,i._onPauseVpaid,i),t.subscribe(o.RESUME_VPAID,i._onResumeVpaid,i),i._yvapBus.subscribe(l.OVERLAY_CLICK,i._onOverlayAdClick,i),i._yvapBus.subscribe(l.OVERLAY_RENDERED,i._onOverlayAdStart,i),t.subscribe(o.AD_BREAK_STARTED,i._midRollStart,i),t.subscribe(o.AD_BREAK_ENDED,i._midRollEnd,i),i._yvapBus.subscribe(l.AD_STARTED,i._onVpaidAdStart,i),i._secretCode="",i._theBestTeam(),i._standaloneMode&&(i._standaloneAdHelper=new k(i._yvapBus,e.yvap.standaloneAd))}t.exports=r;var i=e("../../../lib/logger"),o=e("../event"),a=e("../../../lib/event-bus"),s=e("../../../lib/user-agent"),l=e("./common/Events"),c=e("./common/Constants"),d=e("./common/Errors"),p=e("./ads-json"),u=e("./engine/AdSpec"),_=e("./player-data"),m=e("./engine/AdEngine"),v=e("./engine/AdEngineIceBreaker"),y=e("./engine/NFLRules"),f=(e("./engine/ActionRule"),e("./allocation/RefreshAllocation")),g=e("./cache/CacheManager"),b=e("./cache/CacheManagerIceBreaker"),h=e("./allocation/AllocationManager"),E=e("./vpaid/vpaidjs-renderer"),S=e("./monitoring/AdPlaybackManager"),A=e("./monitoring/Diagnostics"),T=e("./monitoring/Analytics"),L=e("./monitoring/ViewabilityManager"),I=e("./engine/RuleGroup"),M=e("./vpaid/VPAIDFlashInterface"),C=e("./renderer/HTML5OverlayRenderer"),N=e("./communicator/CommunicatorFactory"),D=e("./allocation/CommunicatorSpec"),R=e("./common/CookieUtil"),P=e("./yvap-util"),O=e("./overlay-json"),w=e("./communicator/MidRollsHelper"),k=e("./communicator/StandaloneAdHelper"),x={};x[c.BUMPER]=!0,x[c.PREROLL]=!0,x[c.POSTROLL]=!0,x[c.NON_LINEAR]=!1;var j=e("./communicator/ParserManager"),B=e("./yvap-util"),U=(e("./communicator/YAXvCommunicator"),[d.AD_CALL_TIMEOUT,d.PLAYER_TIMEOUT,d.ERR_VPAID_TIMEOUT,d.ADBLOCKER]);r.prototype._parseNewPlayerData=function(e){var t=this;t._cacheManager||(t._cacheManager=new b(t._yvapBus)),t._adEngine||(t._adEngine=new v);var n=e.clipId,r=e.vmapData,i=t._adEngine.understandRules(r);t._cacheManager.addRuleForClipId(i,n),t._cacheManager.addAllocationForClipId(new f,n),t._cacheManager.addPlayerDataForClipId(e,n),t._cacheManager.updateAdCache(r,n)},r.prototype._parsePlayerData=function(e){var t=this;t._cacheManager||(t._cacheManager=new g(t._yvapBus)),t._adEngine||(t._adEngine=new m);var n=e.clipId,r=e.rules,i=t._adEngine.understandRules(r);i&&t._cacheManager.addRuleForClipId(i,n);var o=e.allocation,a=t._allocationManager.understandAllocation(o);a&&t._cacheManager.addAllocationForClipId(a,n),t._cacheManager.addPlayerDataForClipId(e,n);var s=e.adList;t._cacheManager.updateAdCache(s,n)},r.prototype._handleNFLRules=function(e,t){var n=this,r=new I,i=r.preroll,o=c.NFL_FREE_TIME,a=c.NFL_SESSION_TIME;t&&t.rules&&(o=parseInt(t.rules.freeUserPeriodInSeconds,10),a=parseInt(t.rules.onloaderPeriodInSeconds,10));var s=new y(o,a);s.type=c.PREROLL,i.push(s),n._cacheManager.addRuleForClipId(r,e)},r.prototype.updatePlayerData=function(e){for(var t,n=this,r=0;r<e.length;r++){t=new _(e[r]),t.vmapData?n._parseNewPlayerData(t):n._parsePlayerData(t);var i=t.clipId;if(t.licenseId===c.NFL_NOW_LMSID&&n._handleNFLRules(i,t.content_provider_data),t[c.YVAP_INFO_AD_BREAKS]){var o=j.parseAdXml(t[c.YVAP_INFO_AD_BREAKS])||{};o=o.adBreakMap,t.isLive&&(o={}),n._cacheManager.addCuePointsForClipId(o,i),n._midrollsHelper||(n._midrollsHelper=new w(n._yvapBus,n._cacheManager))}t.clean()}},r.prototype.getAdsFor=function(e){var t,n,r,i,o,a=this,s=new D;return s.communicatorName=c.YAXv,t=N.getCommunicatorUsingSpec(s),e&&e.clipId?(o=e.clipId,t?(r=new _(e),n=new u(c.PREROLL,["clickable"]),i=t.getKey(n,r),a._cacheManager.addPlayerDataForClipId(r,o),a._yvapBus.publish(l.AD_OPPORTUNITY,o,c.PREROLL,n,s,r),a._cacheManager.getNewAd(t,n,r),a._addKeyToWaitlist(i,n),!0):!1):(a._yvapBus.publish(l.NULL_AD_OPPORTUNITY,o,c.CLIP_DATA_MISSING),!1)},r.prototype.beginAdExperience=function(e,t){var n,r=this;if(r.waitlistMap={},r._currentClipId=e,r._clipStarted=!1,r._overlayRenderer.removeOverlay(),r._vpaidflashInterface.stopAd(),r._yvapBus.publish(l.BEGIN_AD_EXP,e),r._standaloneMode){var a=r._standaloneAdHelper.getAd();return void(a&&(r._yvapBus.publish(l.AD_OPPORTUNITY,e,a.type,a.adSpec,a.communicatorSpec,{}),r._updateAds(a)))}if(n=r._cacheManager.getCuePointsForClipId(e)){var s=[];Object.keys(n).length||0;for(var d in n)if(n.hasOwnProperty(d)){var p=B.convertTimeToSeconds(n[d].timeOffset);s.push(p)}r._eventBus.publish(o.AD_BREAK_TIMELINE,s)}r._cacheManager.getPlayerDataForClipId(e);n&&(r._midrollsHelper.stopMidRollsFetchThread(),r._midrollsHelper.startMidRollsFetchThread(e));var u=r._cacheManager.getRuleForClipId(e);if(u){var _=r._getAd(c.PREROLL,e);r._updateAds(_);var m=r._getAd(c.BUMPER,e);r._updateAds(m)}else i.log("Rules missing"),r._yvapBus.publish(l.NULL_AD_OPPORTUNITY,e,c.RULES_MISSING);r._fireAdsReady()},r.prototype._fireAdsReady=function(){var e=this,t=!1;for(var n in e.waitlistMap)e.waitlistMap.hasOwnProperty(n)&&(t=t||e.waitlistMap[n]);t||e._eventBus.publish(o.ADS_READY)},r.prototype._getAd=function(e,t,n){var r=this,i=null,o=r._cacheManager.getRuleForClipId(t),a=r._cacheManager.getPlayerDataForClipId(t),s=r._cacheManager.getAllocationForClipId(t);if(o&&a&&s){var c=r._adEngine.onAdEvent(e,o,a.clipDuration,n),d=s.pickCommunicator(c);if(null!==d&&(d.customSPID=r._config.yvap.customSPID,d.customDomain=r._config.yvap.customDomain),r._yvapBus.publish(l.AD_OPPORTUNITY,t,e,c,d,a),i=r._cacheManager.getAd(t,d,c),!i){var p=N.getCommunicatorUsingSpec(d);if(p){var u=p.getKey(c,a);r._addKeyToWaitlist(u,c)}}}return i},r.prototype._checkForVPAIDPreInit=function(e){var t,n=this;e&&(t=e.adObj,t&&t.type===c.VPAID&&n._yvapBus.publish(l.VPAID_PREFETCH_REQUEST,t))},r.prototype._createAdsJson=function(e){var t=null;if(e){var n=e.adObj,r=e.type,i="ad"+Math.floor(1e3*Math.random())+(new Date).getTime(),o=0;if(n&&!e.errorState){var a=n.type,s=n.streams,l=n.params?n.params.clickurl:null,d=n.adId;o=n.duration||c.DEFAULT_AD_DURATION,t=new p(i,r,s,l,a,d,o)}else t=new p(i,r,null,"",c.NOAD,"",o)}return t},r.prototype._handleFallback=function(e){var t,n=this,r=n._cacheManager.getPlayerDataForClipId(n._currentClipId),i=e.adSpec,o=e.communicatorSpec,a=n._cacheManager.getAllocationForClipId(n._currentClipId),s=a&&a.pickFallbackCommunicator&&a.pickFallbackCommunicator(o);if(s){i.adCallSequence++;var l=n._cacheManager.getAd(n._currentClipId,s,i);if(l)l.adSpec=e.adSpec,l.type=e.type,e=l;else{var d=N.getCommunicatorUsingSpec(s);if(d)return t=d.getKey(i,r),n._addKeyToWaitlist(t,i),null}}else if(o.communicatorName===c.REFRESH&&e.adTagURI){i.adCallSequence++;var p=N.getCommunicatorUsingSpec(o);return t=p.getKey(i,r),n._addKeyToWaitlist(t,i),n._cacheManager.getNewAd(p,i,r,e.adTagURI),null}return e},r.prototype._updateAds=function(e){var t=this,n=[];if(e){var r=e.adObj,i=e.errorState&&-1===U.indexOf(e.errorState);(r&&r.type===c.NOAD||i)&&(e=t._handleFallback(e))}if(e){var a=t._createAdsJson(e),s=a.playbackId;if(t.playbackMap[s]=e,n.push(a),t._clipStarted){var p=e.type;(p===c.BUMPER||p===c.PREROLL)&&(e.errorState=d.PLAYER_TIMEOUT,S.onNoAd(e,t._currentClipId))}"l1"===e.cacheState&&t._checkForVPAIDPreInit(e),t._yvapBus.publish(l.AD_SUBMITTED,t._currentClipId,e)}n.length>0&&(t._eventBus.publish(o.ADS_OBJS_UPDATE,n),t._fireAdsReady())},r.prototype._renderOverlay=function(e){var t=this;if(e){var n=e.adSpec,r=e.adObj;if(r){var i="ad"+Math.floor(1e3*Math.random())+(new Date).getTime();t.playbackMap[i]=e;var o=new O(i,r.nonLinearAd,n.placement,n.duration,r.adParameters),a=o.resourceType;a===c.OVERLAY_VPAID?t._vpaidflashInterface.renderOverlayAd(o):a===c.OVERLAY_IMAGE&&t._overlayRenderer.renderOverlay(o)}}},r.prototype._addKeyToWaitlist=function(e,t){var n=this;e&&t&&(n.waitlistMap[e]=t)},r.prototype.renderVPAIDAd=function(e,t,n,r,i,a,s){var c,p,u=this;if(e){p=u.playbackMap[e]||{},c=p.adObj||{};for(var _=c.streams,m=null,v=null,y=0;y<_.length;y++){var f=_[y],g=f.format||"";g.indexOf("shockwave")>-1?m=f:g.indexOf("javascript")>-1&&(v=f)}u._yvapBus.publish(l.VPAID_AD_RENDERED,u._currentClipId,p.type,p),m&&"flash"===s?(c.streams=[m],u._vpaidflashInterface.renderAd(e,p)):v?(c.streams=[v],u._vpaidjsRenderer.render(e,n,r,t,c,u._rendererDiv)):u._eventBus.publish(o.Ad.ERROR,d.INCOMPATIBLE_MEDIA)}else u._eventBus.publish(o.Ad.ERROR,d.GENERIC)},r.prototype._limitAdsBasedOnDuration=function(e,t){var n,r,i=0,o=[];if(!t)return e;for(var a=0;a<e.length&&(r=e[a],n=r&&r.adObj&&parseInt(r.adObj.duration,10)||NaN,isNaN(n)&&(n=0),i+=n,o.push(r),!(i>=t));a++);return o},r.prototype.getMidrollAds=function(e,t){var n,r,o,a=this,s=a._midrollsHelper.getMidrollsAds(a._currentClipId,a._cacheManager,e),c=[];i.log("MIDROLL: Time position="+e+" requiredDuration="+t+" ads=",s),t&&(s=a._limitAdsBasedOnDuration(s,t),i.log("MIDROLL: After trim based on required duration, ads=",s));for(var d=0;d<s.length;d++)n=s[d],r=a._createAdsJson(n),o=r.playbackId,a.playbackMap[o]=n,a._yvapBus.publish(l.AD_SUBMITTED,a._currentClipId,n),c.push(r);return c},r.prototype._onAdPlaybackRequest=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&S.onAdBreakStart(t))},r.prototype._onMidrollCacheUpdate=function(e){var t=this;t._eventBus.publish(o.YVAP_MIDROLL_CACHE_UPDATE,e)},r.prototype._onCacheUpdate=function(e,t){var n,r,i=this;i._checkForVPAIDPreInit(t),e&&(n=i.waitlistMap[e],n&&(r=i._cacheManager.getAdResponseForKey(e),r&&(r.adSpec=n,r.type=n.type,i.waitlistMap[e]=null,r.type===c.NON_LINEAR?i._renderOverlay(r):i._updateAds(r))))},r.prototype._onCacheRefreshRequest=function(e){var t=this;e&&e.length>0&&t._eventBus.publish(o.SAPI_REFRESH_REQUEST,e)},r.prototype._onAdMetric=function(e){var t=this;t._eventBus.publish(o.AD_METRICS,e)},r.prototype._onContentVideoStart=function(e){var t=this;t._videoStartTime=0,R.incrementTotalClipCount(),R.incrementRecentClipCount(),t._clipStarted=!0,t._yvapBus.publish(l.VIDEO_START,e);var n=t._getAd(c.POSTROLL,e);t._updateAds(n),t._cacheManager.sync();var r=t._analytics.getArchive(),i=t._diagnostics.generateDiagnostics(r);t._eventBus.publish(o.YVAP_INFO_UPDATE,i)},r.prototype._onContentVideoProgress=function(e,t,n){var r,i=this,o=t-i._videoStartTime;i._videoStartTime=t,R.incrementTotalVideoLength(o),R.incrementRecentVideoLength(o);var a=i._getAd(c.NON_LINEAR,e,t);i._renderOverlay(a),r=i._cacheManager.getPlayerDataForClipId(e),r&&r.licenseId===c.NFL_NOW_LMSID&&(R.incrementNFLVideoLength(o),R.createNFLSession())},r.prototype._onContentVideoSeek=function(e){},r.prototype._onContentVideoEnd=function(e){var t=this;t._overlayRenderer.removeOverlay(),t._yvapBus.publish(l.VIDEO_END,t._currentClipId)},r.prototype._midRollStart=function(){},r.prototype._midRollEnd=function(){var e=this;e._yvapBus.publish(l.AD_BREAK_ENDED,e._currentClipId)},r.prototype._onAdEnd=function(e){var t=this;t.playbackMap[e]=null},r.prototype._onOverlayAdClick=function(e){var t,n,r,i=this;e&&(r=i.playbackMap[e],r&&(n=r.adObj||{},t=n.params?n.params.clickurl:null,S.onAdClick(r,0,0),t&&window.open(t,"_blank")))},r.prototype._onOverlayAdStart=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&S.onAdStart(t,"",n._currentClipId))},r.prototype._onAdStart=function(e,t,n,r,i,o){var a,s,d=this,p=n||"";d._videoStartTime=0,R.resetRecentVideoLength(),R.resetRecentClipCount(),R.incrementAdCount(),d._overlayRenderer.removeOverlay(),e&&(a=d.playbackMap[e],a&&(s=a.adSpec||{},s.placement===c.NFL_ONLOAD?R.resetNFLSession():s.placement===c.NFL_PREROLL&&R.resetRecentVideoLengthNFL(),S.onAdStart(a,t,d._currentClipId),c.VIEWABILITY_ON&&d._viewabilityManager.start(a,d._currentClipId),d._yvapBus.publish(l.AD_DELIVERED,d._currentClipId,a.type,p,a,r,i,o))),d._renderCompanionAd(a)},r.prototype._onVpaidAdStart=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&n._yvapBus.publish(l.VPAID_AD_STARTED,n._currentClipId,t.type,t))},r.prototype._renderCompanionAd=function(e){var t,n=window.YAHOO_Yvap||{};if(e&&n&&n.load_companions){t=e.adObj,t.companion.list=t.companion;var r=n.load_companions(t.companion);S.onCompanionDisplayed(r)}},r.prototype._onAdProgress=function(e,t,n){var r,i,o=this,a=t-o._videoStartTime;o._videoStartTime=t,R.incrementAdLength(a),e&&(r=o.playbackMap[e],r&&(i=c.VIEWABILITY_ON&&P.isViewabilityMeasurable()?o._viewabilityManager.getViewabilitySummary():{},r.adDuration||(r.adDuration=n),S.onAdProgress(r,t,n,i,o._currentClipId)))},r.prototype._onAdClick=function(e,t,n){var r=this,i=r.playbackMap[e];i&&S.onAdClick(i,t,n)},r.prototype._onAdNotPlayable=function(e){var t=this,n=t.playbackMap[e];n&&(n.errorState=d.INCOMPATIBLE_MEDIA,t._yvapBus.publish(l.AD_DELIVERY_ERROR,t._currentClipId,n.type,d.INCOMPATIBLE_MEDIA,n),S.onNoAd(n,t._currentClipId))},r.prototype._onAdPlaybackError=function(e,t,n){var r=this,i=r.playbackMap[e],o="string"==typeof t?t:d.MEDIA_PLAYBACK;o=c.ADBLOCKER?d.ADBLOCKER:o;var a=-1,s=-1,p=2;n&&(a=n.swfLoadLatency,s=n.initLatency,p=n.timeoutStatus),i&&(i.errorState=o,r._yvapBus.publish(l.AD_DELIVERY_ERROR,r._currentClipId,i.type,o,i,a,s,p),S.onNoAd(i,r._currentClipId))},r.prototype._onNoAd=function(e){var t,n=this,r=n.playbackMap[e];r&&(t=r.adObj,t&&(n._yvapBus.publish(l.AD_DELIVERY_ERROR,n._currentClipId,r.type,c.NOAD,r),
S.onNoAd(r,n._currentClipId)))},r.prototype._onSwfReady=function(e){var t=this;e&&(t._swfReady=!0,t._yvapBus.publish(l.PLAYER_SWF_READY,e))},r.prototype._onPauseVpaid=function(){var e=this;e._vpaidflashInterface.pauseAd(),e._vpaidjsRenderer.pauseAd()},r.prototype._onResumeVpaid=function(){var e=this;e._vpaidflashInterface.resumeAd(),e._vpaidjsRenderer.resumeAd()},r.prototype._onPlayerResize=function(e,t){var n=this;n._vpaidflashInterface.updateDimensions(e,t),n._vpaidjsRenderer.updateDimensions(e,t)},r.prototype._onVolumeChange=function(e){var t=this;e>=0&&(t._lastVolume=e,t._vpaidflashInterface.updateVolume(e),t._vpaidjsRenderer.updateVolume(e))},r.prototype._onMuteChange=function(e){var t=this,n=e?0:t._lastVolume;t._vpaidflashInterface.updateVolume(n),t._vpaidjsRenderer.updateVolume(n)},r.prototype._theBestTeam=function(){var e=this,t=[89,86,65,80,84,72,69,66,69,83,84],n=String.fromCharCode.apply(null,t);n=n.toLowerCase(),e._player&&"function"==typeof e._player.skipAd&&document.addEventListener("keydown",function(t){t=t||window.event;var r="number"==typeof t.which?t.which:t.keyCode;r&&0===n.indexOf(e._secretCode)?e._secretCode=e._secretCode+String.fromCharCode(r).toLowerCase():e._secretCode="",e._secretCode.toLowerCase()===n&&(i.log("skip ad"),e._player.skipAd(),e._vpaidflashInterface.stopAd())})}},{"../../../lib/event-bus":"3ECu9u","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","./ads-json":97,"./allocation/AllocationManager":99,"./allocation/CommunicatorSpec":100,"./allocation/RefreshAllocation":101,"./cache/CacheManager":103,"./cache/CacheManagerIceBreaker":104,"./common/Constants":105,"./common/CookieUtil":106,"./common/Errors":107,"./common/Events":108,"./communicator/CommunicatorFactory":115,"./communicator/MidRollsHelper":119,"./communicator/ParserManager":120,"./communicator/StandaloneAdHelper":123,"./communicator/YAXvCommunicator":128,"./engine/ActionRule":129,"./engine/AdEngine":130,"./engine/AdEngineIceBreaker":131,"./engine/AdSpec":132,"./engine/NFLRules":133,"./engine/RuleGroup":134,"./monitoring/AdPlaybackManager":135,"./monitoring/Analytics":136,"./monitoring/Diagnostics":137,"./monitoring/ViewabilityManager":138,"./overlay-json":139,"./player-data":140,"./renderer/HTML5OverlayRenderer":141,"./vpaid/VPAIDFlashInterface":143,"./vpaid/vpaidjs-renderer":144,"./yvap-util":145}],143:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,c){var p=this;p._externalBus=e,p._yvapBus=t,p._currentBitrate=0,p._prefetchList=[],p._vpaidCacheAd,p._renderWidth=n||0,p._renderHeight=r||0,p._preInitVpaid=c,p._yvapBus.subscribe(a.PLAYER_SWF_READY,p._onSwfReady,p),p._externalBus.subscribe(l.YVAP_SWF_PROXIED_EVENT,p._onFlashEvent,p),p.overlayLinearState=!1,p._player=i,p._vpaidTimeout=s||o.DEFAULT_VPAID_TIMEOUT,window.flash_callback_yvap=function(e){p._onFlashEvent(e)},p._preInitVpaid?(p._yvapBus.subscribe(a.VPAID_PREFETCH_REQUEST,p._onPrefetchRequest,p),d.log("enabling vpaid preInit")):d.log("disabling vpaid preInit")}t.exports=r;var i=e("../common/VPAIDEvent"),o=e("../common/Constants"),a=e("../common/Events"),s=e("../common/Errors"),l=e("../../event"),c=e("../../../../lib"),d=e("../../../../lib/logger");r.prototype.renderAd=function(e,t){var n,r,i,a,s=this;n=t.adObj,n&&e&&n.type===o.VPAID&&(s._preInitVpaid||s._onPrefetchRequest(n),r=n.streams||[],i=r[0],a=n.vpaidId,i&&i.format===o.VPAID_FLASH_FORMAT&&a&&(s._swfNode&&s._swfNode.renderVPAIDAd?(s._swfNode.renderVPAIDAd({url:i.url,vpaidId:a,playbackId:e},s._vpaidTimeout),s.updateVolume(s._volume)):s._vpaidCacheAd={url:i.url,vpaidId:a,playbackId:e}))},r.prototype.renderOverlayAd=function(e){var t=this;if(t._swfNode){var n="vpaidO_"+Math.floor(100*Math.random())+(new Date).getTime(),r=e.playbackId||"",i=e.resourceType||"",a=e.resourceUrl||"",s=e.duration||0,l=e.position,c=e.adParams||"";i===o.OVERLAY_VPAID&&t._swfNode&&t._swfNode.renderVPAIDOverlayAd&&t._swfNode.renderVPAIDOverlayAd({url:a,vpaidId:n,playbackId:r,duration:s,position:l,adParam:c})}},r.prototype.stopAd=function(){var e=this;e._swfNode&&e._swfNode.resetVPAIDAd&&e._swfNode.resetVPAIDAd()},r.prototype.pauseAd=function(){var e=this;e._swfNode&&e._swfNode.pauseVPAIDAd&&e._swfNode.pauseVPAIDAd()},r.prototype.resumeAd=function(){var e=this;e._swfNode&&e._swfNode.resumeVPAIDAd&&e._swfNode.resumeVPAIDAd()},r.prototype.updateDimensions=function(e,t){var n=this;n._renderWidth=e||0,n._renderHeight=t||0,n._swfNode&&n._swfNode.updateVPAIDAdDimensions&&n._swfNode.updateVPAIDAdDimensions(e,t)},r.prototype.updateVolume=function(e){var t=this;t._volume=e,t._swfNode&&t._swfNode.updateVPAIDAdVolume&&t._swfNode.updateVPAIDAdVolume(t._volume)},r.prototype._onPrefetchRequest=function(e){var t,n,r,i,a,s=this;e&&e.type===o.VPAID&&(n=e.streams||[],r=n[0],i=e.adParameters&&e.adParameters.AdParameters?e.adParameters.AdParameters:"",r&&r.format===o.VPAID_FLASH_FORMAT&&(s._swfNode&&s._swfNode.prefetchVPAIDAd?(a="vpaid_"+Math.floor(100*Math.random())+(new Date).getTime(),e.vpaidId=a,s._swfNode.prefetchVPAIDAd({url:r.url,vpaidId:a,adParam:i})):(t=s._prefetchList||[],t.push(e),s._prefetchList=t)))},r.prototype._onSwfReady=function(e){var t,n,r=this,i=e.tagName||"",o=r._renderWidth||0,a=r._renderHeight||0;if(e&&"object"===i.toLowerCase()){if(r._swfNode=e,r._swfNode&&r._swfNode.updateVPAIDAdDimensions&&r._swfNode.updateVPAIDAdDimensions(o,a),r._swfNode.prefetchVPAIDAd)for(t=r._prefetchList||[];t.length>0;)n=t.shift(),r._onPrefetchRequest(n);r._swfNode.renderVPAIDAd&&r._vpaidCacheAd&&(r._swfNode.renderVPAIDAd(r._vpaidCacheAd),r._vpaidCacheAd=null)}},r.prototype._onFlashEvent=function(e){var t=this,n=e.name||"",r=t._vpaidEventHandlerMap[n],i=t[r];c.isFunction(i)&&i.call(this,e)},r.prototype._progressMap={},r.prototype._progressMap[i.AdVideoStart]=0,r.prototype._progressMap[i.AdVideoFirstQuartile]=.25,r.prototype._progressMap[i.AdVideoMidpoint]=.5,r.prototype._progressMap[i.AdVideoThirdQuartile]=.75,r.prototype._progressMap[i.AdVideoComplete]=1,r.prototype._onAdImpression=function(e){var t=this,n=e.playbackId||"";t._currentBitrate=e.bitrate;var r=e.swfLoadLatency||0,i=e.adInitLatency||0,o=e.latency||0,a=e.vpaidStartLatency;t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_STARTED,n,t._currentBitrate,o,r,i,a)},r.prototype._onAdStarted=function(e){var t=this,n=e.playbackId||"";t._yvapBus&&t._yvapBus.publish(a.AD_STARTED,n)},r.prototype._onAdQuartile=function(e){var t=this,n=e.name||"",r=t._progressMap[n],i=e.playbackId||"",o=e.duration||0,a=r*o;t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_PROGRESS,i,a,o)},r.prototype._onAdProgress=function(e){var t=this,n=e.timeupdate||0,r=e.duration||0,i=e.playbackId||"";t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_PROGRESS,i,n,r)},r.prototype._onAdEnd=function(e){var t=this,n=e.playbackId||"";t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_ENDED,n)},r.prototype._onAdClick=function(e){var t=this,n=e.playbackId||"",r=e.duration||0,i=e.timeupdate||0;t._externalBus&&t._externalBus.publish(l.AD_CLICK,n,i,r)},r.prototype._onAdError=function(e){var t=this;e.playbackId||"";t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.MEDIA_PLAYBACK)},r.prototype._onAdLinearChange=function(e){var t=this,n=e.adLinear||!1;n?(t._player.setOverlayActive(!0),t._player.pause()):(t._player.setOverlayActive(!1),t._player.play())},r.prototype._onAdTimeout=function(e){var t=this,n=(e.playbackId||"",{});n.swfLoadLatency=e.loadLatency||-1,n.initLatency=e.initLatency||-1,n.timeoutStatus=e.timeoutStatus,t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_TIMEOUT,n)},r.prototype._onVPAIDSwfDownloadError=function(e){var t=this;t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_SWF_DOWNLOAD_ERROR)},r.prototype._vpaidEventHandlerMap={},r.prototype._vpaidEventHandlerMap[i.AdImpression]="_onAdImpression",r.prototype._vpaidEventHandlerMap[i.AdStarted]="_onAdStarted",r.prototype._vpaidEventHandlerMap[i.AdVideoStart]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoFirstQuartile]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoMidpoint]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoThirdQuartile]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoComplete]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdStopped]="_onAdEnd",r.prototype._vpaidEventHandlerMap[i.AdClickThru]="_onAdClick",r.prototype._vpaidEventHandlerMap[i.AdError]="_onAdError",r.prototype._vpaidEventHandlerMap[i.AdTimeout]="_onAdTimeout",r.prototype._vpaidEventHandlerMap[i.AdProgress]="_onAdProgress",r.prototype._vpaidEventHandlerMap[i.AdLinearChange]="_onAdLinearChange",r.prototype._vpaidEventHandlerMap[i.AdSwfDownloadError]="_onVPAIDSwfDownloadError"},{"../../../../lib":"bRhrlU","../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../common/Constants":105,"../common/Errors":107,"../common/Events":108,"../common/VPAIDEvent":109}],144:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e,t._creativeCallbacks={AdStarted:t._onAdStarted,AdStopped:t._onAdStopped,AdLoaded:t._onAdLoaded,AdVideoStart:t._onAdProgress,AdVideoFirstQuartile:t._onAdProgress,AdVideoMidpoint:t._onAdProgress,AdVideoThirdQuartile:t._onAdProgress,AdVideoComplete:t._onAdComplete,AdClickThru:t._onAdClickThru,AdError:t._onAdError,AdImpression:t._onAdImpression,AdSkipped:t._onAdSkipped,AdSkippableStateChange:t._onAdSkippableStateChange,AdSizeChange:t._onAdSizeChange,AdLinearChange:t._onAdLinearChange,AdDurationChange:t._onAdDurationChange,AdExpandedChange:t._onAdExpandedChange,AdVolumeChange:t._onAdVolumeChange,AdInteraction:t._onAdInteraction,AdUserAcceptInvitation:t._onAdInteraction,AdUserMinimize:t._onAdInteraction,AdUserClose:t._onAdInteraction},t._adloaderframe="adloaderframe",t._adrenderframe="adrenderframe",t._iframeCount=0,t._videoTag,t._videoTagOpacity=1,t._timer,t._targetBitrate=0,t._creative={},t._idToIframeMap={},t._vpaidAdLatencies={}}t.exports=r;var i=e("../../event"),o=e("../../../../lib"),a=e("../common/Errors");r.prototype.onAdUpdateInCache=function(e,t){var n,r=this;if(t&&t.adObj){var i=t.adObj;if(i.vpaidId||(i.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),r._vpaidAdLatencies[i.vpaidId]={}),"vpaid"===t.adObj.type){var o=t.adObj.streams;if(!o)return;for(var a=0;a<o.length;a++)if("application/javascript"===o[a].format){n=o[a].url;break}}n&&r._load(n,!0,i.vpaidId)}},r.prototype.pauseAd=function(){var e=this,t=e._creative.creative;t&&t.pauseAd()},r.prototype.resumeAd=function(){var e=this,t=e._creative.creative;t&&t.resumeAd()},r.prototype.updateVolume=function(e){var t=this,n=t._creative.creative;n&&n.setAdVolume(e)},r.prototype.updateDimensions=function(e,t){var n=this,r=n._creative.creative;r&&r.resizeAd(e,t)},r.prototype._unload=function(){var e=this;e._creative.creative&&delete e._creative.creative,e._adProgressTimer&&clearInterval(e._adProgressTimer);var t=document.getElementById(e._adrenderframe);if(t&&t.parentNode.removeChild(t),e._videoTag){var n=e._videoTagOpacity||1;e._videoTag.style.opacity=n}e._timer&&window.clearInterval(e._timer)},r.prototype._isVPAIDAdValid=function(){var e,t=this,n=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],r=t._creative.creative;if(!r)return!1;for(e=0;e<n.length;e++)if(!o.isFunction(r[n[e]]))return!1;return!0},r.prototype._subscribeCreative=function(){var e=this,t=e._creativeCallbacks,n=e._creative.creative;if(n)for(var r in t)t.hasOwnProperty(r)&&n.subscribe(t[r],r,e)},r.prototype._unsubscribeCreative=function(){var e=this,t=e._creativeCallbacks,n=e._creative.creative;if(n)for(var r in t)t.hasOwnProperty(r)&&n.unsubscribe(t[r])},r.prototype._onScriptLoad=function(e,t){var n=this,r=e.contentWindow.getVPAIDAd;return r&&"function"==typeof r&&(n._creative.creative=r(),n._creative.vpaidId=t,n._isVPAIDAdValid())?void n._onVPAIDAdFileLoaded():void n._onAdError({message:"vpaid creative is invalid"})},r.prototype._onVPAIDAdFileLoaded=function(){var e=this;e._subscribeCreative(),e._vpaidAdLatencies[e._creative.vpaidId].vil=(new Date).getTime(),e._creative.creative.initAd(e._adConfig.width,e._adConfig.height,e._adConfig.viewMode,e._adConfig.bitrate,e._adConfig.creativeData,e._adConfig.environmentVars)},r.prototype._onAdLoaded=function(e){var t=this,n=(new Date).getTime();t._vpaidAdLatencies[t._creative.vpaidId].vil=n-t._vpaidAdLatencies[t._creative.vpaidId].vil,t._vpaidAdLatencies[t._creative.vpaidId].vst=(new Date).getTime(),t._creative.creative.startAd()},r.prototype._onAdProgress=function(e){var t=this,n=t._creative.creative,r=t._adConfig.environmentVars.videoSlot;t._eventBus.publish(i.AD_PLAYBACK_PROGRESS,t._playbackId,r.currentTime,n.getAdDuration(),r.buffered)},r.prototype._onAdStarted=function(e){var t=this,n=t._creative.vpaidId,r=(new Date).getTime();t._vpaidAdLatencies[n].vst=r-t._vpaidAdLatencies[n].vst,t._vpaidAdLatencies[n].pst=r-t._vpaidAdLatencies[n].pst;var o=t._vpaidAdLatencies[n].vsl,a=t._vpaidAdLatencies[n].vil,s=t._vpaidAdLatencies[n].vst,l=t._vpaidAdLatencies[n].pst;t._eventBus.publish(i.AD_PLAYBACK_STARTED,t._playbackId,t._targetBitrate,l,o,a,s),t._timer&&window.clearInterval(t._timer),t._timer=window.setInterval(function(){t._onAdProgress()},200)},r.prototype._onAdComplete=function(e){var t=this,n=t._creative.creative;t._eventBus.publish(i.AD_PLAYBACK_PROGRESS,t._playbackId,n.getAdDuration(),n.getAdDuration()),n.stopAd()},r.prototype._onAdStopped=function(e){var t=this;t._unload(),t._eventBus.publish(i.AD_PLAYBACK_ENDED,t._playbackId)},r.prototype._onAdClickThru=function(e){var t,n=this;e.data&&(e.data.playerHandles&&(t=e.data.url?e.data.url:n._adConfig.clickThruUrl),t&&window.open(t,"_blank")),n._eventBus.publish(i.AD_CLICK,n._playbackId)},r.prototype._onAdError=function(e){var t=this;e.yvap_err_type||(e.yvap_err_type=i.AD_PLAYBACK_ERROR),t._unload(),t._eventBus.publish(i.Ad.ERROR,a.MEDIA_PLAYBACK),t._eventBus.publish(i.Ad.ENDED)},r.prototype._onAdImpression=function(e){},r.prototype._onAdSkipped=function(e){},r.prototype._onAdSkippableStateChange=function(e){},r.prototype._onAdSizeChange=function(e){},r.prototype._onAdLinearChange=function(e){},r.prototype._onAdDurationChange=function(e){},r.prototype._onAdExpandedChange=function(e){},r.prototype._onAdVolumeChange=function(e){},r.prototype._onAdInteraction=function(e){},r.prototype._load=function(e,t,n){var r,i,o,a=this;if(!e)throw{message:"vpaid creativeUrl cannot be undefined, null or empty"};a._idToIframeMap[n]||(r=document,i=r.createElement("iframe"),i.id=a._adloaderframe+a._iframeCount,a._iframeCount=a._iframeCount+1,i.style.display="none",i.onload=function(){var r=i.contentDocument||i.contentWindow.document;o=i.contentWindow.document.createElement("script"),o.type="text/javascript",o.onload=function(){var e=(new Date).getTime();a._vpaidAdLatencies[n].vsl=e-a._vpaidAdLatencies[n].vsl,t?a._idToIframeMap[n]=i:a._onScriptLoad(i,n)},o.onerror=function(){a._onAdError({message:"error loading vpaidjs script"})},a._vpaidAdLatencies[n].vsl=(new Date).getTime(),o.src=e,r.getElementsByTagName("head")[0].appendChild(o)},r.body.appendChild(i))},r.prototype.render=function(e,t,n,r,i,o){var a,s,l=this,c=900,d="normal",p={type:"AdError"};if(l._playbackId=e,l._targetBitrate=!r||isNaN(r)?c:r,!t||isNaN(t)||!n||isNaN(n))return p.message="Video dimensions missing",void l._onAdError(p);if(!o||!o.nodeName&&!o.tagName)return p.message="Slot has to be a DOMElement",void l._onAdError(p);if(l._videoTag=o.getElementsByTagName("video")[0],l._videoTag&&(l._videoTagOpacity=l._videoTag.style.opacity,l._videoTag.style.opacity=0),!i)return p.message="Ad object cannot be undefined or null.",void l._onAdError(p);if(i.vpaidId||(i.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),l._vpaidAdLatencies[i.vpaidId]={}),l._vpaidAdLatencies[i.vpaidId].pst=(new Date).getTime(),s=i.streams,!(s&&s instanceof Array&&s.length>0))return p.message="No valid media file in ad object.",void l._onAdError(p);for(var u=0;u<s.length;u++)if("application/javascript"===s[u].format){a=s[u].url;break}var _=o.childNodes[1];_||(_=o);var m=document.createElement("video");l._adConfig={width:t,height:n,viewMode:d,bitrate:l._targetBitrate,creativeData:i.adParameters,environmentVars:{videoSlot:m},clickThruUrl:i.params?i.params.clickurl:void 0};var v=document.createElement("iframe");v.id=l._adrenderframe,v.style.position="absolute",v.style.height="100%",v.style.width="100%",v.scrolling="no",v.style.border="0",v.style.zIndex=10,v.onload=function(){var e=v.contentDocument||v.contentWindow.document;e=e.body,e.style.margin="0",e.appendChild(m),l._adConfig.environmentVars.slot=e;try{var t=l._idToIframeMap[i.vpaidId];t?l._onScriptLoad(t,i.vpaidId):l._load(a,!1,i.vpaidId)}catch(n){p.message=n.message,l._onAdError(p)}},_.insertBefore(v,_.firstChild)}},{"../../../../lib":"bRhrlU","../../event":"YJm+dH","../common/Errors":107}],145:[function(e,t,n){"use strict";var r=e("./common/Constants"),i=e("../util"),o=e("../../../lib/logger"),a=e("xhr"),s=e("../../../lib/user-agent");n.convertTimeToSeconds=function(e){var t=e.split(":").reverse();t=t.map(function(e){return parseFloat(e,10)});var n=t[0];4===t.length?t=t.slice(1):n=0;var r=t.reduce(function(e,t,n,r){return e+Math.pow(60,n)*t});return r+=n/1e3,isNaN(r)?null:r},n.isViewabilityMeasurable=function(){try{return window.DARLA&&window.DARLA.yvap||top&&top.DARLA&&top.DARLA.yvap?!0:!1}catch(e){return o.log("Exception:"+e.message),!1}},n.getViewabilityNonMeasurableValue=function(){return window.location!==top.location?r.VIEWABILITY_NOT_MEASURABLE_IFRAME:r.VIEWABILITY_NOT_MEASURABLE_NO_DARLA},n.getDARLA=function(){return window.DARLA?{darla:window.DARLA,isIFrame:0}:top&&top.DARLA?{darla:top.DARLA,isIFrame:1}:null},n.getTimeStamp=function(){var e=new Date,t=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=t.join("");return n},n.expandMacro=function(e,t){var n=/\$\{(\w)+\}/g,r=function(e){var n=/(\w)+/g,r=e.match(n),i=r[0];return t[i]?t[i]:""};return e=e.replace(n,r),e=this.cleanUpUrl(e)},n.cleanUpUrl=function(e){for(var t,n,r=/(\w)+=&/g;e.match(r);)e=e.replace(r,"");for(t=/(\w)+=($|;|;;)/;e.match(t);)e=e.replace(t,"$2");for(n=/(;|;;|&)$/;e.match(n);)e=e.replace(n,"");return e},n.generateYqlQuery=function(e,t){return"select * from "+t+" where "+i.querystring(e," and ",null,function(e){return e})},n.detectAdBlocker=function(e){var t=location.protocol+"//us.adserver.yahoo.com/a?c=x&p=&f=343121&pn=&rs=&l=VIDO&at=";s.samsung&&(t=0===t.indexOf("file")?"https"+t.substring(4,t.length):t);try{a({url:t,method:"GET",sync:!1,timeout:3e3},function(t,n,r){e(!!t)})}catch(n){e(!0)}}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../util":"jJTEqU","./common/Constants":105,xhr:188}],146:[function(e,t,n){},{}],147:[function(e,t,n){var r={};!function(e,t){function n(e){return String(null===e||void 0===e?"":e)}function r(e){return e=n(e),c.test(e)?e.replace(i,"&amp;").replace(o,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:r,t:n,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)):""},rs:function(e,t,n){var r=e[e.length-1];if(!d(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,a){var s;return d(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&d(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o&&"object"==typeof o&&i[s]in o?(a=o,o=o[i[s]]):o="";return r&&!o?!1:(r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o)},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){i=o[e],a=!0;break}return a?(r||"function"!=typeof i||(i=this.lv(i,t,n)),i):r?!1:""},ho:function(e,t,n,r,i){var o=this.c,a=this.options;a.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s=t[t.length-1],l=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,o),a);if(l=e.call(s),"function"==typeof l){if(r)return!0;if(this.c)return this.ho(l,s,n,this.text.substring(i,o),a)}return l},lv:function(e,t,r){var i=t[t.length-1],o=e.call(i);return"function"==typeof o&&(o=n(o.call(i)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(i,r):n(o)}};var i=/&/g,o=/</g,a=/>/g,s=/\'/g,l=/\"/g,c=/[&<>\"\']/,d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof n?n:r)},{}],148:[function(e,t,n){var r={};t.exports=function(e){if(!r[e]){r[e]=!0;var t=document.createElement("style");t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e;var n=document.getElementsByTagName("head")[0];n.appendChild(t)}}},{}],149:[function(e,t,n){"use strict";function r(e){var t=this;t.name=e?e:"unnamed",t._events={}}t.exports=r,r.prototype.subscribe=function(e,t,n){function r(){i._unsubscribe(e,o)}var i=this;if(i._events){i._events[e]||(i._events[e]=[]);var o={subscriber:n,cb:t};return i._events[e].push(o),r.detach=r,r}},r.prototype._unsubscribe=function(e,t){var n=this;if(n._events&&e in n._events){var r=n._events[e].indexOf(t);r>-1&&n._events[e].splice(r,1)}},r.prototype.publish=function(e){var t=this;if(t._events)if(e in t._events){var n=t._events[e].slice(0);t._log(e,n.length);for(var r=0;r<n.length;r++)try{n[r].cb.apply(n[r].subscriber,Array.prototype.slice.call(arguments,1))}catch(i){}}else t._log(e,0)},r.prototype._log=function(e,t){-1===e.toLowerCase().indexOf("timeupdate")&&-1===e.toLowerCase().indexOf("progress")},r.prototype.destroy=function(){var e=this;e._events=null}},{}],150:[function(e,t,n){"use strict";var r=t.exports={};r.cloneBuffer=function(e,t,n){var r=e.buffer||e;return t=t||0,n=n||r.byteLength,r.slice(t,n)},r.cloneTypedArray=function(e,t,n){var i=r.cloneBuffer(e,t,n);return new e.constructor(i)},r.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},r.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{}],151:[function(e,t,n){"use strict";var r=e("./user-agent");n.apply=function(){i()};var i=function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=window.document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}(r.ie||!window.CustomEvent)&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}},{"./user-agent":153}],152:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||isNaN(e))throw new Error("Invalid Argument: No delay");n.delay=Math.max(e,20),n.repeatCount=t>0?t:Number.POSITIVE_INFINITY,n.currentCount=0,n.running=!1,n._eventDispatcher=new i(n.constructor.name),n._timerHandle=null,n._subscriptions={}}t.exports=r;var i=e("./event-bus");r.prototype.destroy=function(){var e=this;e.reset(),e._subscriptions={},e._eventDispatcher.destroy()},r.prototype.addEventListener=function(e,t){var n=this;if(!t)throw new Error("Invalid Argument: No context");var r="_timedOut_"+t.constructor.name;n._subscriptions[r]=n._eventDispatcher.subscribe("timedOut",e,t)},r.prototype.removeEventListener=function(e,t){var n=this;if(!t)throw new Error("Invalid Argument: No context");var r="_timedOut_"+t.constructor.name;n._subscriptions.hasOwnProperty(r)&&n._subscriptions[r]&&(n._subscriptions[r](),delete n._subscriptions[r])},r.prototype.start=function(){var e=this;e._timerHandle||e.running||(e._timerHandle=setInterval(function(){e.currentCount++,e.currentCount>=e.repeatCount&&e.stop(),e._eventDispatcher.publish("timedOut")},e.delay),e.running=!0)},r.prototype.stop=function(){var e=this;e._timerHandle&&e.running&&(clearInterval(e._timerHandle),e._timerHandle=null,e.running=!1)},r.prototype.reset=function(){var e=this;e.stop(),e.currentCount=0}},{"./event-bus":149}],153:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t=e[1];return parseFloat(t.split(".",2).join("."))||1}var i=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,o=navigator.userAgent.toLowerCase().replace(i,"");n.ua=o,n.chromium=r(/chromium\/([^\s]*)/.exec(o)),n.chrome=!n.chromium&&r(/chrome\/([^\s]*)/.exec(o)),n.ie=r(/msie ([^;]*)/.exec(o))||r(/trident.*; rv:([0-9.]+)/.exec(o)),n.opera=/opr\/|opera\//.test(o),n.firefox=r(/firefox\/([^\s]*)/.exec(o)),n.android=/android/.test(o),n.androidTablet=n.android&&!/mobile/.test(o),n.htc_one=/htc_one/.test(o),n.vizio=/Vizio/i.test(o)||window.YAHOO&&window.YAHOO.SmartTV&&"vizio"===window.YAHOO.SmartTV.manufacturer,n.tivo=/TiVo/i.test(o),n.firetv=n.android&&/amazonwebappplatform/.test(o)&&/aft/.test(o),n.samsung=/smarttv/.test(o)||/tizen/.test(o),n.sony=/(sony)/.test(o),n.ios=/(ipad|iphone|ipod)/.test(o),n.iphone=/(iphone|ipod)/.test(o)&&!/ipad/.test(o),n.ipad=n.ios&&!n.iphone,n.androidBrowser=!n.chrome&&/android/.test(o),n.androidVersion=r(/android\s([0-9\.]*)/.exec(o)),n.safari=!n.chrome&&!n.chromium&&!n.android&&/safari\/([^\s]*)/.test(o)&&r(/version\/([^\s]*)/.exec(o)),n.iosWebView=n.ios&&!navigator.standalone&&!n.safari,n.mobile=n.ios||n.android,n.safariDesktop=!n.mobile&&n.safari,n.tv=n.vizio||n.tivo||n.firetv||n.samsung||n.sony,n.desktop=!n.mobile&&!n.tv,n.phantomJS=window.window&&window.window._phantom,n.tv?n.vizio?n.os="vizio":n.tivo?n.os="tivo":n.firetv?n.os="firetv":n.samsung?n.os="samsung":n.sony?n.os="sony":n.os=null:n.ios?n.os="ios":n.android?n.os="android":/windows|win32/.test(o)?n.os="windows":/macintosh|mac_powerpc/.test(o)?n.os="macintosh":/symbos/.test(o)?n.os="symbos":/linux/.test(o)?n.os="linux":n.os=null},{}],154:[function(e,t,n){"use strict";function r(){var e=this;e._rules=[],e._rules.push(new i.BandwidthBufferRule),e._rules.push(new i.ResolutionRule)}t.exports=r;var i=e("./abr-rules");r.prototype.destroy=function(){var e=this;e._rules=[]},r.prototype.getNextStreamIndex=function(e){var t=this;if(!i.validateAbrInput(e))return-1;var n=Number.MAX_VALUE;return t._rules.forEach(function(t){var r=t.getNextStreamIndex(e);0>r||(n=Math.min(n,r))}),n===Number.MAX_VALUE?-1:n}},{"./abr-rules":155}],155:[function(e,t,n){"use strict";function r(){var e=this;e.BANDWIDTH_FACTOR_LOW=1.3,e.BANDWIDTH_FACTOR_HIGH=1.6,e.MIN_BW_FOR_LOW_FACTOR=25e5,e.MIN_BUFFER_TO_SWITCH_UP=6,e.MIN_BUFFER_TO_SWITCH_DOWN=10}function i(){var e=this;e.MAX_WIDTH_240P=427,e.MAX_HEIGHT_240P=240,e.MAX_BITRATE_240P=9e5,e.MAX_BITRATE_LIMIT=1e7}t.exports.BandwidthBufferRule=r,t.exports.ResolutionRule=i,n.validateAbrInput=function(e){return!e||"object"!=typeof e||!e.bitrateList||!e.bitrateList.length||!e.estimatedBandwidthInBps||isNaN(e.estimatedBandwidthInBps)||void 0===e.currentIndex||null===e.currentIndex||isNaN(e.currentIndex)||void 0===e.bufferLength||isNaN(e.bufferLength)||void 0===e.displayWidth||isNaN(e.displayWidth)||e.displayWidth<=0||void 0===e.displayHeight||isNaN(e.displayHeight)||e.displayHeight<=0||void 0===e.streams||e.streams.length<=0?!1:!0},r.prototype.getNextStreamIndex=function(e){var t=this;if(!n.validateAbrInput(e))return-1;for(var r=0,i=e.estimatedBandwidthInBps,o=t._getBandwidthFactor(i),a=0;a<e.bitrateList.length&&!(i<o*e.bitrateList[a]);a++)r=a;return r>e.currentIndex?r=t._canSwitchUp(e.bufferLength)?r:e.currentIndex:r<e.currentIndex&&(r=t._canSwitchDown(e.bufferLength)?r:e.currentIndex),r},r.prototype._canSwitchUp=function(e){var t=this;return e>t.MIN_BUFFER_TO_SWITCH_UP},r.prototype._canSwitchDown=function(e){var t=this;return e<t.MIN_BUFFER_TO_SWITCH_DOWN},r.prototype._getBandwidthFactor=function(e){var t=this;return e>=t.MIN_BW_FOR_LOW_FACTOR?t.BANDWIDTH_FACTOR_LOW:t.BANDWIDTH_FACTOR_HIGH},i.prototype.getNextStreamIndex=function(e){var t=this;if(!n.validateAbrInput(e))return-1;var r=t._getPixelRatio(),i=e.displayWidth,o=e.displayHeight;!isNaN(r)&&r>1&&(i*=r,o*=r);for(var a=0,s=e.bitrateList[0],l=0;l<e.streams.length&&!(e.streams[l].width>i||e.streams[l].height>o);l++)a=l;var c=e.streams[a].width,d=e.streams[a].height,p=i<=t.MAX_WIDTH_240P||o<=t.MAX_HEIGHT_240P?t.MAX_BITRATE_240P:t.MAX_BITRATE_LIMIT;if(s=e.streams[a].bitrate,e.streams.forEach(function(e,t){e&&e.width===c&&e.height===d&&e.bitrate<=p&&t>a&&e.bitrate>s&&(a=t,s=e.bitrate)}),a<e.streams.length-1&&e.streams[a+1].bitrate<p){var u=Math.abs(e.streams[a+1].height-o)<=Math.abs(e.streams[a].height-o);a=u?a+1:a}return a},i.prototype._getPixelRatio=function(){var e=1;try{window&&(e=window.devicePixelRatio)}catch(t){e=1}return e||(e=1),e}},{}],156:[function(e,t,n){"use strict";function r(){var e=this;e.COLLECTION_INTERVAL=100,e.MIN_SAMPLE_SIZE=1e5,e.SAMPLE_QUEUE_LENGTH=75,e.INSTANCE_SAMPLE_QUEUE_LENGTH=15,e.BW_ADJUSTMENT_FACTOR=.8,e._samplesQueue=[],e._instanceSamplesQueue=[],e.averageBandwidth=0,e.instantaneousBandwidth=0}t.exports=r,r.prototype.destroy=function(){var e=this;e._samplesQueue=[],e._instanceSamplesQueue=[],e.averageBandwidth=0,e.instantaneousTotalBandwidth=0},r.prototype.addSample=function(e){var t=this;if(e&&!(e.time<=0)){e.bandwidth=e.size/e.time*.008,e.bandwidth=Math.min(50,e.bandwidth),t._samplesQueue.push(e),t._instanceSamplesQueue.push(e),t._samplesQueue.length>t.SAMPLE_QUEUE_LENGTH&&t._samplesQueue.shift(),t._instanceSamplesQueue.length>t.INSTANCE_SAMPLE_QUEUE_LENGTH&&t._instanceSamplesQueue.shift();var n=0,r=t._samplesQueue.length,i=r*(r+1)/2,o=1/i;t._samplesQueue.forEach(function(e,t){n+=(t+1)*o*e.bandwidth}),t.averageBandwidth=t.BW_ADJUSTMENT_FACTOR*n,n=0,r=t._instanceSamplesQueue.length,i=r*(r+1)/2,o=1/i,t._instanceSamplesQueue.forEach(function(e,t){n+=(t+1)*o*e.bandwidth}),t.instantaneousBandwidth=t.BW_ADJUSTMENT_FACTOR*n}}},{}],157:[function(e,t,n){"use strict";t.exports={Command:e("./command"),MediaLoadCommand:e("./media-load-command"),StreamLoadCommand:e("./stream-load-command"),SubtitleStreamLoadCommand:e("./subtitle-stream-load-command")}},{"./command":160,"./media-load-command":161,"./stream-load-command":162,"./subtitle-stream-load-command":163}],158:[function(e,t,n){"use strict";var r=e("./command").CmdNames,i=e("./command-defs");t.exports.create=function(e,t,n){for(var o in r)if(r.hasOwnProperty(o)&&r[o]===e){var a=e+"Command",s=i[a];return new s(t,n)}return null}},{"./command":160,"./command-defs":157}],159:[function(e,t,n){"use strict";function r(){var e=this;e._commandMap={};for(var t in a)a.hasOwnProperty(t)&&(e._commandMap[a[t]]={})}t.exports=r;var i=e("../command/command"),o=i.CmdEvents,a=i.CmdNames,s=e("../command/command-factory"),l=e("../../lib/hls-utils");r.prototype.destroy=function(){var e=this;e._removeAllCommands(),e._commandMap=null},r.prototype.createCommand=function(e,t,n){var r=this,i=s.create(e,t,n);if(!i)return null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a],d="on"+e+c;n[d]&&i.addEventListener(c,n[d],n)}var p=r._commandMap[e];return i.key=l.guid(),p[i.key]=i,i},r.prototype.removeCommand=function(e){var t=this;if(e){var n=t._commandMap[e.name];if(n[e.key]===e){if(delete n[e.key],e.client)for(var r in o)if(o.hasOwnProperty(r)){var i=o[r],a="on"+e.name+i;e.client[a]&&e.removeEventListener(i,e.client[a],e.client)}e.destroy()}}},r.prototype._removeAllCommands=function(){var e=this;for(var t in e._commandMap)if(e._commandMap.hasOwnProperty(t)){var n=e._commandMap[t];for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i&&e.removeCommand(i)}}}},{"../../lib/hls-utils":150,"../command/command":160,"../command/command-factory":158}],160:[function(e,t,n){"use strict";function r(e,t){var n=this;n.data=e,
n.client=t,n._eventDispatcher=new i(n.constructor.name)}t.exports.Command=r;var i=e("../../lib/event-bus");t.exports.CmdNames={CMD_MEDIA_LOAD:"MediaLoad",CMD_STREAM_LOAD:"StreamLoad",CMD_SUBTITLE_STREAM_LOAD:"SubtitleStreamLoad"},t.exports.CmdEvents={CMD_COMPLETE:"Complete",CMD_PROGRESS:"Progress",CMD_ERROR:"Error"},r.prototype.destroy=function(){var e=this;e.data=null,e._eventDispatcher.destroy()},r.prototype.execute=function(){},r.prototype.cancel=function(){},r.prototype.addEventListener=function(e,t,n){var r=this,i=n?n.constructor.name:"",o="_"+e+"_"+t.name+"_"+i;r[o]=r._eventDispatcher.subscribe(e,t,n)},r.prototype.removeEventListener=function(e,t,n){var r=this,i=n?n.constructor.name:"",o="_"+e+"_"+t.name+"_"+i;r[o]&&r.hasOwnProperty(o)&&(r[o](),r[o]=null)}},{"../../lib/event-bus":149}],161:[function(e,t,n){"use strict";function r(e,t){var n=this;s.call(n,e,t),n.name=l.CMD_MEDIA_LOAD,n._loader=new o}t.exports=r;var i=e("../../lib/hls-utils"),o=e("../services/loader"),a=e("./command"),s=a.Command,l=a.CmdNames,c=a.CmdEvents;i.inherits(r,s),r.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e.data;e._loader.load({url:t},{window:window,method:"GET",responseType:"text",context:e,successHandler:function(t){e._eventDispatcher.publish(c.CMD_COMPLETE,e,t.data)},failureHandler:function(t){e._eventDispatcher.publish(c.CMD_ERROR,e,t)}})},r.prototype.cancel=function(){}},{"../../lib/hls-utils":150,"../services/loader":180,"./command":160}],162:[function(e,t,n){"use strict";function r(e,t){var n=this;s.call(n,e,t),n.name=l.CMD_STREAM_LOAD,n._loader=new o}t.exports=r;var i=e("../../lib/hls-utils"),o=e("../services/loader"),a=e("./command"),s=a.Command,l=a.CmdNames,c=a.CmdEvents;i.inherits(r,s),r.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e.data.streamUrl;e._loader.load({url:t},{window:window,method:"GET",responseType:"text",context:e,successHandler:function(n){e._eventDispatcher.publish(c.CMD_COMPLETE,e,{data:n.data,streamUrl:t,streamIndex:e.data.index})},failureHandler:function(t){e._eventDispatcher.publish(c.CMD_ERROR,e,t)}})},r.prototype.cancel=function(){}},{"../../lib/hls-utils":150,"../services/loader":180,"./command":160}],163:[function(e,t,n){"use strict";function r(e,t){var n=this;s.call(n,e,t),n.name=l.CMD_SUBTITLE_STREAM_LOAD,n._loader=new o}t.exports=r;var i=e("../../lib/hls-utils"),o=e("../services/loader"),a=e("./command"),s=a.Command,l=a.CmdNames,c=a.CmdEvents;i.inherits(r,s),r.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e.data.streamUrl;e._loader.load({url:t},{window:window,method:"GET",responseType:"text",context:e,successHandler:function(n){e._eventDispatcher.publish(c.CMD_COMPLETE,e,{data:n.data,streamUrl:t})},failureHandler:function(t){e._eventDispatcher.publish(c.CMD_ERROR,e,t)}})},r.prototype.cancel=function(){}},{"../../lib/hls-utils":150,"../services/loader":180,"./command":160}],164:[function(e,t,n){"use strict";function r(){var e=this;e._node=e._context.node,e._mediaSource=e._context.mediaSource,e._sourceBuffers=[],e._buffering=!1,e._timeAtBufferEmpty=NaN}t.exports=r;var i=e("./source-buffer-manager"),o=e("./../event").HLSEvent;r.prototype.destroy=function(){var e=this;e.abortBuffer(),e._sourceBuffers=[]},r.prototype.process=function(){var e=this;e._checkBuffering(),e._areSourceBuffersClosed()&&"open"===e._mediaSource.readyState&&(console.log("[BufferController] End of stream"),e._mediaSource.endOfStream())},r.prototype._getSourceBuffer=function(e){for(var t=this,n=0;n<t._sourceBuffers.length;n++)if(e===t._sourceBuffers[n].type)return t._sourceBuffers[n];return null},r.prototype._checkBuffering=function(){var e=this,t=e._context.model.getBufferLength();.02>=t&&!e._buffering?e._setBufferEmpty():!isNaN(e._timeAtBufferEmpty)&&e._node.currentTime>e._timeAtBufferEmpty&&e._setBufferFull()},r.prototype._setBufferEmpty=function(){var e=this;e._buffering||(e._timeAtBufferEmpty=e._node.currentTime,e._buffering=!0,e._context.sendEvent(o.WAITING,e._buffering))},r.prototype._setBufferFull=function(){var e=this;e._buffering&&(e._buffering=!1,e._timeAtBufferEmpty=NaN,e._context.sendEvent(o.WAITING,e._buffering))},r.prototype.createSourceBuffer=function(e,t){var n=this;if(!n._mediaSource)return null;var r=n._getSourceBuffer(e);if(!r){var o=e+'/mp4; codecs="'+t+'"';r=new i(n._mediaSource,e,o),n._sourceBuffers.push(r)}return r},r.prototype.abortBuffer=function(){var e=this;e._mediaSource&&e._sourceBuffers.forEach(function(e){e.abort()})},r.prototype.appendBuffer=function(e){var t=this,n=t.createSourceBuffer(e.type,e.codec);e.data&&n&&n.appendBuffer(e.data,function(e,t){return e?void console.error("Failed to append data"):void 0})},r.prototype.endOfStream=function(e){var t=this;t._sourceBuffers.forEach(function(t){t.endOfStream=e})},r.prototype._areSourceBuffersClosed=function(){var e=this;if(!e._sourceBuffers.length)return!1;var t=!0;return e._sourceBuffers.forEach(function(e){t=t&&"closed"===e.state}),t}},{"./../event":169,"./source-buffer-manager":166}],165:[function(e,t,n){"use strict";function r(){var e=this;e._model=e._context.model,e._node=e._context.node,e._services=e._context.services,e._parser=e._services.metadataParser,e._commandManager=new d,e._bufferController=e._context.create(s),e._streamingController=e._context.create(a,e._bufferController),e.STATES={INITIAL:0,MEDIA_METADATA_LOADING:1,MEDIA_METADATA_LOADED:2,STREAM_METADATA_LOADING:3,STREAM_METADATA_LOADED:4,MEDIA_LOADED:5,PLAY_REQUESTED:6,PLAYING:7,PAUSED:8,PLAY_COMPLETE:9,ERROR:10},e._state=e.STATES.INITIAL,e._addEventListeners(),e._seeking=!1,e._processTimer=new p(50),e._processTimer.addEventListener(e._process,e),e.DEFAULT_STREAM_UPDATE_INTERVAL=8e3,e._updateStreamTimer=new p(e.DEFAULT_STREAM_UPDATE_INTERVAL),e._updateStreamTimer.addEventListener(e._loadCurrentStream,e)}t.exports=r;var i=e("./../event").HLSEvent,o=e("./../error"),a=e("./streaming-controller"),s=e("./buffer-controller"),l=e("./../model/model").MetadataTypes,c=e("../command/command").CmdNames,d=e("../command/command-manager"),p=e("../../lib/timer");r.prototype.destroy=function(){var e=this;e._streamingController.destroy(),e._bufferController.destroy(),e._commandManager.destroy(),e._removeEventListeners(),e._processTimer.destroy(),e._updateStreamTimer.destroy()},r.prototype.initialize=function(){var e=this;e._loadMetadata(),e._node.load()},r.prototype._addEventListeners=function(){var e=this;e._playHandler=e._onPlay.bind(e),e._playingHandler=e._onPlaying.bind(e),e._seekHandler=e._onSeeking.bind(e),e._playCompleteHandler=e._onComplete.bind(e),e._node.addEventListener("play",e._playHandler),e._node.addEventListener("playing",e._playingHandler),e._node.addEventListener("seeking",e._seekHandler),e._node.addEventListener("ended",e._playCompleteHandler),e._context.subscribe(i.SUBTITLE_STREAM_LOADED,e._onSubtitleStreamLoaded,e)},r.prototype._removeEventListeners=function(){var e=this;e._node.removeEventListener("play",e._playHandler),e._node.removeEventListener("playing",e._playingHandler),e._node.removeEventListener("seeking",e._seekHandler),e._node.removeEventListener("ended",e._playCompleteHandler)},r.prototype._beforeStateChange=function(e){var t=this;console.log("[Controller] State changed from "+t._stateToString(t._state)+" to "+t._stateToString(e))},r.prototype._setState=function(e,t){var n=this;n._beforeStateChange(e),n._state=e,n._context.sendEvent(i.STATE_CHANGED,e),n._afterStateChange(t)},r.prototype._afterStateChange=function(e){var t=this,n=t.STATES;switch(t._state){case n.MEDIA_METADATA_LOADING:t._loadMedia();break;case n.MEDIA_METADATA_LOADED:t._setState(n.STREAM_METADATA_LOADING);break;case n.STREAM_METADATA_LOADING:t._loadCurrentStream();break;case n.MEDIA_LOADED:t._context.sendEvent(i.MEDIA_LOADED,t._model.streams);break;case n.PLAY_REQUESTED:t._processTimer.start(),t._scheduleStreamUpdate();break;case n.PLAY_COMPLETE:t._processTimer.stop()}},r.prototype._loadMetadata=function(){var e=this,t=e._model.metadata;return t.type===l.STRUCTURED?(e._model.build(e._parser.parse(t)),void(t.hasStreamMetadata?e._setState(e.STATES.MEDIA_LOADED):t.hasMediaMetadata&&e._setState(e.STATES.MEDIA_METADATA_LOADED))):void e._setState(e.STATES.MEDIA_METADATA_LOADING)},r.prototype._process=function(){var e=this;e._bufferController.process();var t=e._streamingController.process();t===e._streamingController.PROCESS_STATUS.STREAM_UPDATE_REQUIRED&&e._shouldLoadStream()&&(e._updateStreamTimer.reset(),e._loadCurrentStream())},r.prototype._onPlay=function(e){var t=this;t._setState(t.STATES.PLAY_REQUESTED)},r.prototype._onPlaying=function(e){var t=this;t._setState(t.STATES.PLAYING)},r.prototype._onSeeking=function(e){var t=this,n=e.target.currentTime;t._bufferController.abortBuffer(),t._streamingController.onSeeking(),t._streamingController.process(n)},r.prototype._onComplete=function(e){var t=this;t._setState(t.STATES.PLAY_COMPLETE)},r.prototype._getStreamUrl=function(e){if(!e)return null;var t=e.streams;if(!t||!t.length)return e.url;if(e.url&&e.url.length)return e.url;var n=t[0].host;return t[0].path&&(n+=t[0].path),n},r.prototype._loadCurrentStream=function(){var e=this,t=e._model.getCurrentStream();e._executeCommand(c.CMD_STREAM_LOAD,{streamUrl:t.url,index:t.index}),t.subtitleStream=e._model.getAssociatedSubtitleStream(t),t.subtitleStream&&e._executeCommand(c.CMD_SUBTITLE_STREAM_LOAD,{streamUrl:t.subtitleStream.url})},r.prototype._loadMedia=function(){var e=this;e._executeCommand(c.CMD_MEDIA_LOAD,e._getStreamUrl(e._model.metadata))},r.prototype.onMediaLoadComplete=function(e,t){var n=this;if(e){if(!t)return void n._removeCommand(e);var r={rawData:t,type:l.RAW,url:e.data};n._model.build(n._parser.parse(r)),n._removeCommand(e),n._setState(n.STATES.MEDIA_METADATA_LOADED)}},r.prototype.onMediaLoadError=function(e,t){var n=this;1===t.code&&n._context.notifyError(new o.Error(o.ERR_PLAYLIST_LOAD))},r.prototype.onStreamLoadComplete=function(e,t){var n=this;if(e){if(!t)return void n._removeCommand(e);var r={rawData:t.data,type:l.RAW,url:t.streamUrl,index:t.streamIndex};n._model.build(n._parser.parse(r)),n._removeCommand(e),n._scheduleStreamUpdate(),n._context.sendEvent(i.STREAM_UPDATED,n.index),n._state<n.STATES.PLAYING&&(n._setState(n.STATES.STREAM_METADATA_LOADED),n._setState(n.STATES.MEDIA_LOADED))}},r.prototype.onStreamLoadError=function(e,t){var n=this;1===t.code&&n._context.notifyError(new o.Error(o.ERR_PLAYLIST_LOAD))},r.prototype.onSubtitleStreamLoadComplete=function(e,t){var n=this;if(e){if(!t)return void n._removeCommand(e);var r={rawData:t.data,type:l.RAW_SUBTITLE,url:t.streamUrl};n._model.build(n._parser.parse(r)),n._removeCommand(e)}},r.prototype.onSubtitleStreamLoadError=function(e,t){1===t.code&&console.log("[Controller] Subtitle stream load failed.")},r.prototype._stateToString=function(e){var t=this;for(var n in t.STATES)if(t.STATES.hasOwnProperty(n)&&e===t.STATES[n])return n;return""},r.prototype._executeCommand=function(e,t){var n=this,r=n._commandManager.createCommand(e,t,n);r&&r.execute()},r.prototype._removeCommand=function(e){var t=this;t._commandManager.removeCommand(e)},r.prototype._scheduleStreamUpdate=function(){var e=this;if(e._model.live){var t=e._model.getCurrentStream();e._updateStreamTimer.reset(),e._updateStreamTimer.delay=t.refreshInterval||e.DEFAULT_STREAM_UPDATE_INTERVAL,e._updateStreamTimer.start()}},r.prototype._shouldLoadStream=function(){var e=this;return e._streamingController.isSwitching()||!e._updateStreamTimer}},{"../../lib/timer":152,"../command/command":160,"../command/command-manager":159,"./../error":168,"./../event":169,"./../model/model":172,"./buffer-controller":164,"./streaming-controller":167}],166:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._destroyed=!1,r.type=t,r._paused=!1,r._mediaSource=e,r.buffer=e.addSourceBuffer(n),r._bufferQueue=[],r._waitingList=[],r.endOfStream=!1,r.buffer.addEventListener("updateend",r._onTransferComplete.bind(r)),r.buffer.addEventListener("error",function(){r.abort()}),r.state="open"}t.exports=r,r.prototype.destroy=function(){var e=this;e.remove(),e._bufferQueue=[],e._waitingList=[],e.state="closed"},r.prototype.remove=function(){var e=this;e._destroyed||(e._destroyed=!0,e.abort(),"closed"!==e._mediaSource.readyState&&e._mediaSource.removeSourceBuffer(e.buffer))},r.prototype.appendBuffer=function(e,t){var n=this;if(!n._destroyed){var r={cb:t,aborted:!1,buffer:e};n._bufferQueue.push(r),n._transferToSourceBuffer()}},r.prototype.abort=function(){var e=this;if("open"===e._mediaSource.readyState){e._bufferQueue=[],e._waitingList=[];try{e.buffer.abort()}catch(t){}}},r.prototype.pause=function(){var e=this;e._paused||(e._paused=!0)},r.prototype.resume=function(){var e=this;e._paused=!1,e._transferToSourceBuffer()},r.prototype._onTransferComplete=function(){var e=this;if(e._waitingList.length){var t=e._waitingList.shift();t.cb(t.aborted?new Error("source buffer update aborted"):null,e)}e._bufferQueue.length||(e.state="empty"),e._transferToSourceBuffer(),e.endOfStream&&"empty"===e.state&&!e._waitingList.length&&(e.state="closed")},r.prototype._transferToSourceBuffer=function(){for(var e=this;e._bufferQueue.length;){if(e._paused||e.buffer.updating)return;var t=e._bufferQueue.shift();if(t.aborted)t.cb(new Error("source buffer update aborted"),e),t=null;else try{e.buffer.appendBuffer(t.buffer),e._waitingList.push(t),e.state="updating"}catch(n){}}}},{}],167:[function(e,t,n){"use strict";function r(e){var t=this;t._node=t._context.node,t._model=t._context.model,t._metrics=t._context.services.metrics,t._services=t._context.services,t._bufferController=e,t._loading=!1,t._seqNum=NaN,t._switching=!0,t._discontinuity=!1,t._endOfVod=!1,t._targetPosition=null,t.PROCESS_STATUS={NO_ACTION:"No action needed",STREAM_UPDATE_REQUIRED:"Stream should get updated",SEGMENT_LOADING:"Segment is being loaded"},t._initMp4State(),t._worker=t._getHlsWorker(),t._worker?(t._workerCb=function(e){"mp4generate"===e.data.msgType&&t._sendToBuffer(e)},t._worker.addEventListener("message",t._workerCb)):t._mp4Packager=new i,t._abrController=t._context.create(l),t._abrInputData={estimatedBandwidthInBps:0,bitrateList:[],currentIndex:0,bufferLength:0},t._context.subscribe(s.HLSEvent.MEDIA_LOADED,t._onMediaLoaded,t)}t.exports=r;var i=e("./../mp4/mp4-generator"),o=e("./../services/hls-worker"),a=e("webworkify"),s=e("./../event"),l=e("./../abr/abr-controller");r.prototype.destroy=function(){var e=this;e._worker?(e._worker.removeEventListener("message",e._workerCb),e._worker.postMessage({code:"mp4generate.destroy"}),e._worker.terminate()):e._mp4Packager.destroy()},r.prototype.process=function(e){var t=this;if(e&&(t._targetPosition=e),t._targetPosition=t._preProcess(t._targetPosition),!t._shouldLoadSegment())return t.PROCESS_STATUS.NO_ACTION;t._switchStream();var n=t._getNextSeqNum(t._targetPosition);return isNaN(t._seqNum)||n===t._seqNum+1||(t._discontinuity=!0),t._isReady(n)?(t._targetPosition=null,t._loadSegment(n),t.PROCESS_STATUS.SEGMENT_LOADING):t.PROCESS_STATUS.STREAM_UPDATE_REQUIRED},r.prototype.onSeeking=function(){var e=this;e._closeStreams(),e._setEndOfVod(!1)},r.prototype._preProcess=function(e){var t=this;if(t._model.live)return e;var n=t._getNextSeqNum(e),r=t._node.buffered.length,i=t._getBufferedRangeIndex(n);return i>=0&&r&&r>i?t._node.buffered.end(i):e},r.prototype._shouldLoadSegment=function(){var e=this,t=!e._model.live;return!(t&&e._endOfVod||e._loading)},r.prototype._switchStream=function(){var e=this;if(!e._switching){var t=e._model.currentStreamIndex,n=e._abrController.getNextStreamIndex(e._prepareAbrInput());0>n||n!==t&&(e._model.setCurrentStream(n),e._initMp4State(),e._switching=!0,console.log("[StreamingController] Stream switched to: [index = "+n+", bitrate = "+e._abrInputData.bitrateList[n]+"]"))}},r.prototype._isReady=function(e){var t=this,n=t._model.getCurrentStream();return!isNaN(e)&&n&&n.segments&&n.segments.length>0&&null!==n.getSegmentfromSeqNum(e)},r.prototype._loadSegment=function(e){var t=this;t._loading&&t._closeStreams(),t._switching=!1,t._load(e)},r.prototype._getNextSeqNum=function(e){var t=this,n=t._model.getCurrentStream();if(t._model.live)return isNaN(t._seqNum)?Math.max(n.endSeqNum-3,n.startSeqNum):t._seqNum+1;var r=isNaN(t._seqNum)?n.getSeqNumBeforePosition(0):e?n.getSeqNumBeforePosition(e):t._seqNum+1;return Math.min(r,n.endSeqNum)},r.prototype._getBufferedRangeIndex=function(e){var t=this,n=t._model.getCurrentStream().getSegmentfromSeqNum(e);if(!n)return-1;for(var r=0;r<t._node.buffered.length;r++)if(n.startTime>=t._node.buffered.start(r)&&n.startTime+n.duration<=t._node.buffered.end(r))return r;return-1},r.prototype._load=function(e){var t=this;t._loading=!0,t._seqNum=e,t._discontinuity&&(t._initMp4State(),t._discontinuity=!1),console.log("[StreamingController] Loading segment: seq num = "+t._seqNum);var n=t._model.getCurrentStream();n.loadSegment(e,t._worker,function(e,n,r){e||r&&t._processSegmentData(n,r)})},r.prototype._closeStreams=function(){var e=this,t=e._model.streams;t&&(t.forEach(function(e){e.close()}),e._loading=!1)},r.prototype._processSegmentData=function(e,t){var n=this,r=n._model.getCurrentStream();"end"===e&&(n._loading=!1),n._setSegLoadMetrics(e),t&&t.length&&(t.forEach(function(e){e.config.codec&&n._bufferController.createSourceBuffer(e.type,e.config.codec)}),t.forEach(function(t){t&&(t.config.shouldInit=n._mp4State[t.type].shouldInit,t.config.seqNum=n._mp4State[t.type].seqNum++,"end"===e&&!n._model.live&&r&&r.endSeqNum===n._seqNum&&n._setEndOfVod(!0),n._worker?n._worker.postMessage({code:"mp4generate",data:t}):n._sendToBuffer(n._mp4Packager.generate(t)))}))},r.prototype._sendToBuffer=function(e){var t=this;"message"===e.type&&(e=e.data),e.data&&e.data.length&&(t._bufferController.appendBuffer(e),t._mp4State[e.type].shouldInit=!1)},r.prototype._initMp4State=function(){var e=this;e._mp4State={audio:{shouldInit:!0,seqNum:0},video:{shouldInit:!0,seqNum:0}}},r.prototype._getHlsWorker=function(){var e=this,t=e._context.model.config;if(t.useWorker&&"undefined"!=typeof Worker)try{return a(o)}catch(n){console.log("Cant create web worker. ts -> mp4 conversion running in main thread")}return null},r.prototype._prepareAbrInput=function(){var e=this,t=e._context.node,n=e._abrInputData;return n.estimatedBandwidthInBps=1e3*e._services.bandwidthEstimator.averageBandwidth*1e3,n.currentIndex=e._model.currentStreamIndex,n.bufferLength=e._model.getBufferLength(),n.displayWidth=t.clientWidth,n.displayHeight=t.clientHeight,n.streams=e._model.streams,n},r.prototype._setEndOfVod=function(e){var t=this;t._endOfVod=e,t._bufferController.endOfStream(e)},r.prototype._setSegLoadMetrics=function(e){var t=this,n=t._model.getCurrentStream(),r=n?n.getSegmentfromSeqNum(t._seqNum):null,i={bitrateIndex:n?n.index:0,frameRate:n?n.frameRate:30};"start"===e?(i.beginTime=r?r.startTime:NaN,i.switchReason="none",i.observedBitrate=t._services.bandwidthEstimator.averageBandwidth,i.timeToFirstByte=r?r.timeToFirstByte:NaN,t._metrics.segmentLoadBegin(t._seqNum,i)):"end"===e&&(i.endTime=r?r.startTime+r.duration:NaN,i.timeToDownload=r?r.totalDownloadTime:NaN,t._metrics.segmentLoadEnd(t._seqNum,i))},r.prototype.isSwitching=function(){var e=this;return e._switching},r.prototype._onMediaLoaded=function(){var e=this;e._model.streams&&(e._abrInputData.bitrateList=[],e._model.streams.forEach(function(t){e._abrInputData.bitrateList.push(t.bitrate)}))}},{"./../abr/abr-controller":154,"./../event":169,"./../mp4/mp4-generator":178,"./../services/hls-worker":179,webworkify:187}],168:[function(e,t,n){"use strict";function r(e,t){var n=this;n.code=e[0],n.message=e[1],n.type=e[2],t&&(n.message+=": "+t),n.error=new Error(n.message,n.code)}n.Error=r;var i={API:"api",NETWORK:"network",DECODE:"decode"},o={ERR_XHR_LOAD:[1,"Failed to load xhr request",i.NETWORK],ERR_PLAYLIST_LOAD:[2,"Failed to load Playlist",i.NETWORK],ERR_SUBS_LOAD:[3,"Failed to load Subtitle",i.NETWORK],ERR_SEGMENT_LOAD:[4,"Failed to load Segment",i.NETWORK],ERR_MASTER_PLAYLIST_PARSE:[5,"Failed to parse Master Playlist",i.DECODE],ERR_MEDIA_PLAYLIST_PARSE:[6,"Failed to parse Media Playlist",i.DECODE],ERR_API_NO_NODE:[7,"No video node is being set",i.API]};Object.keys(o).forEach(function(e){n[e]=o[e]})},{}],169:[function(e,t,n){"use strict";n.HLSEvent={STATE_CHANGED:"stateChanged",MEDIA_LOADED:"mediaLoaded",STREAM_UPDATED:"streamUpdated",SUBTITLE_STREAM_LOADED:"subtitleStreamLoaded",INFO_UPDATE:"infoUpdate",VTT_SEGMENT_LOADED:"vttSegmentLoaded",PCR_AVAILABLE:"pcrAvailable",STREAM_SWITCHED:"streamSwitched",WAITING:"waiting"},n.ExternalEvents=[n.HLSEvent.MEDIA_LOADED,n.HLSEvent.INFO_UPDATE,n.HLSEvent.VTT_SEGMENT_LOADED,n.HLSEvent.STREAM_SWITCHED,n.HLSEvent.WAITING]},{}],170:[function(e,t,n){"use strict";function r(e,t,n,r){var l=this;l._eventBus=new s("internal"),l.node=t,l.window=e,l.mediaSource=new e.MediaSource,l.mediaSource.addEventListener("sourceclose",function(){}),l.node.src=e.URL.createObjectURL(l.mediaSource),l.model=l.create(i,n,r),l.services=l.create(a),l.controller=l.create(o),l.controller.initialize()}t.exports=r;var i=e("./model/model").Model,o=e("./controller/controller"),a=e("./services/services"),s=e("../lib/event-bus"),l=e("./event");r.prototype.create=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift(),r=Object.create(n.prototype);return r._context=e,n.apply(r,t),r},r.prototype.sendEvent=function(e,t){var n=this;n._eventBus.publish(e,t),e&&l.ExternalEvents.indexOf(e)>=0&&n.node.dispatchEvent(n._createCustomEvent(e,t))},r.prototype.subscribe=function(e,t,n){var r=this;r._eventBus.subscribe(e,t,n)},r.prototype.getSegInfo=function(){var e=this;return e.services.metrics.getMetrics()},r.prototype.notifyError=function(e){var t=this;t.error=e;var n=t.error.type||"decode";"open"===t.mediaSource.readyState&&t.mediaSource.endOfStream(n)},r.prototype._createCustomEvent=function(e,t){var n=this,r=new n.window.CustomEvent(e,{detail:t,bubbles:!1,cancelable:!1});return r},r.prototype.destroy=function(){var e=this;e.controller.destroy(),e.mediaSource=null}},{"../lib/event-bus":149,"./controller/controller":165,"./event":169,"./model/model":172,"./services/services":183}],171:[function(e,t,n){"use strict";function r(e,t){var n=this;n._opts=t||{},"string"==typeof e?n._node=document.querySelector(e):n._node=e||null,n._commandQueue=[],Object.defineProperty(n,"error",{enumerable:!0,get:function(){return n._context?n._context.error:null}}),a.apply()}t.exports=r;var i=e("./hls-context"),o=e("./error"),a=e("../lib/polyfills");r.prototype.setSrc=function(e){var t=this;if(!t._node)throw new o.Error(o.ERR_API_NO_NODE).error;return e?void(e!==t._metadata&&(t._metadata=e,t._context=new i(window,t._node,t._metadata,t._opts),t._context.mediaSource.addEventListener("sourceopen",function(){"open"===t._context.mediaSource.readyState&&t._flushCommandQueue()}),t._node.addEventListener("play",function(){return t._context&&t._context.mediaSource&&"open"!==t._context.mediaSource.readyState?(t._commandQueue.push(["play",t._context]),!1):void 0}))):void(t._node.src="")},r.prototype.getSegInfo=function(){var e=this;return e._context?e._context.getSegInfo():null},r.prototype._flushCommandQueue=function(){var e=this,t=e._commandQueue;e._commandQueue=[],t.forEach(function(t,n){var r=t[0],i=t[1],o=t.length>2?t[2]:null;e._context===i&&e._node[r].apply(e._node,o)})},r.prototype.destroy=function(){var e=this;e._commandQueue=[],e._context&&e._context.destroy(),e._metadata=null,e._opts=null,e._node=null}},{"../lib/polyfills":151,"./error":168,"./hls-context":170}],172:[function(e,t,n){"use strict";function r(e,t){var n=this;n.config=t||{},n.config.useWorker=n.config.useWorker||!1,n._setMetadata(e),n.streams=[],n.subtitleStreams=[],n.live=!1,n.duration=0,n.lastSegmentSeqNum=Number.NaN}n.Model=r,n.MetadataTypes={RAW:"raw",RAW_SUBTITLE:"rawSubtitle",STRUCTURED:"structured"};var i=e("./stream"),o=e("./subtitle-stream"),a=e("../event").HLSEvent;r.prototype.destroy=function(){var e=this;e.config=null,e.streams=[],e.subtitleStreams=[]},r.prototype.build=function(e){var t=this;e&&(e.streamInfoList&&e.streamInfoList.length&&(e.streamInfoList.forEach(function(e){t.streams.length&&e.index>=0&&e.index<t.streams.length&&e.url===t.streams[e.index].url?t.updateStream(e.index,e):t.addStream(e)}),t._sortStreams(),t.duration=e.streamInfoList[0].duration),e.subtitleStreamInfoList&&e.subtitleStreamInfoList.length&&e.subtitleStreamInfoList.forEach(function(e){for(var n=!1,r=0;r<t.subtitleStreams.length;r++)if(t.subtitleStreams[r].url===e.url){t.subtitleStreams[r].updateConfig(e),n=!0;break}n||t.subtitleStreams.push(t._context.create(o,e))}))},r.prototype.addStream=function(e){var t=this,n=t._context.create(i,e);t.streams.push(n),n.setStreamIndex(t.streams.length-1),1===t.streams.length&&t.setCurrentStream(n.index),t.streams.length&&(t.lastSegmentSeqNum=t.streams[0].endSeqNum)},r.prototype.updateStream=function(e,t){var n=this;if(!(e>=n.streams.length)){var r=n.streams[e];t.hasEndList===!1&&(n.live=!0),r.updateConfig(t),n.live&&n.lastSegmentSeqNum>=r.endSeqNum&&(r.refreshInterval=500*r.targetDuration),n.lastSegmentSeqNum=r.endSeqNum}},r.prototype.getCurrentStream=function(){var e=this;return e.streams&&e.streams.length&&e.currentStreamIndex>=0&&e.currentStreamIndex<e.streams.length?e.streams[e.currentStreamIndex]:null},r.prototype.setCurrentStream=function(e){var t=this;t.streams&&t.streams.length&&(0>e||e>=t.streams.length||(t.currentStreamIndex=e))},r.prototype.getBufferLength=function(){for(var e,t=this,n=t._context.node,r=n.buffered,i=0,o=n.currentTime,a=0;a<r.length;a++)if(o>=r.start(a)&&o<r.end(a)){e=a;break}return e>=0&&r.length&&(i=r.end(e)-o),i},r.prototype.setPCR=function(e){var t=this;(!t._pcr||isNaN(t._pcr))&&(t._pcr=e,t._context.subscribe(a.PCR_AVAILABLE,e))},r.prototype.getPCR=function(){var e=this;return e._pcr},r.prototype.getAssociatedSubtitleStream=function(e){var t=this;if(!(e&&e.subtitlesGroupId&&t.subtitleStreams&&t.subtitleStreams.length))return null;var n=t.subtitleStreams.filter(function(t){return t&&t.groupId===e.subtitlesGroupId});if(!n||!n.length)return null;for(var r=0;r<n.length;r++)if(n[r].defaultValue)return n[r];return null},r.prototype._setMetadata=function(e){var t=this;if(e){e.type=n.MetadataTypes.RAW,t.metadata=e;var r=e.streams;r&&r.length>0&&((r[0].hlsInfo||r.length>1)&&(t.metadata.type=n.MetadataTypes.STRUCTURED,t.metadata.hasMediaMetadata=!0),r[0].hlsInfo&&(t.metadata.hasStreamMetadata=!0))}},r.prototype._sortStreams=function(){var e=this;e.streams.sort(function(e,t){return e.bitrate-t.bitrate}),e.streams.forEach(function(e,t){e.index=t})},r.prototype._getFallbackStreams=function(e){var t=this,n=[];return t.streams.forEach(function(t){t.index!==e&&n.push({index:t.index,url:t.url})}),n},r.prototype.selectFallbackStream=function(e){var t=this;return e.length>0?(t.setCurrentStream(e[0].index),0):void 0}},{"../event":169,"./stream":174,"./subtitle-stream":175}],173:[function(e,t,n){"use strict";function r(e){var t=this;t._model=t._context.model,e&&(t.duration=e.duration,t.url=e.url,t.seqNum=e.sequenceNum,t.startTime=e.startTime,t.continuity=e.discontinuityCounter,t.programDateTime=e.programDateTime,t.streamIndex=e.levelIndex),t.totalDownloadTime=0,t.timeToFirstByte=0,t._clockReference=0,t._loading=!1,t._tsWorker=null,t._segmentIndex=t.streamIndex+"_"+t.seqNum,t._bandwidthEstimator=t._context.services.bandwidthEstimator,t._metricsTimer=new s(t._bandwidthEstimator.COLLECTION_INTERVAL),t._metricsTimer.addEventListener(t._onMetricCollectionInterval,t)}t.exports=r;var i=e("./../services/loader"),o=e("./../ts-demux/ts-parser"),a=e("./../error"),s=e("../../lib/timer"),l=640,c=360;r.prototype.destroy=function(){var e=this;e.close(),e._destroyTSParser(),e._metricsTimer.destroy(),e._loader&&e._loader.destroy()},r.prototype.setStreamIndex=function(e){var t=this;t.streamIndex=e,t._segmentIndex=t.streamIndex+"_"+t.seqNum},r.prototype.load=function(e,t){var n=this;n._dataReceiver=t,n._tsWorker=e,n.close(),n._createTSParser(),n._bytesTotal=0,n._beginning=!1,n._loading=!0,n._chunkLoadStartTime=Date.now(),n._chunkLength=0,n._chunkDownloadTime=0,n.totalDownloadTime=0,n.timeToFirstByte=0,n._metricsTimer.start(),n._loader=new i,n._loader.load({url:n.url},{window:window,method:"GET",responseType:"arraybuffer",context:n,isChunkedLoad:!0,successHandler:function(){n._loading&&n._onLoadComplete()},progressHandler:function(e){n._loading&&n._onProgress(e)},failureHandler:function(e){1===e.code&&n._context.notifyError(new a.Error(a.ERR_SEGMENT_LOAD))}})},r.prototype.close=function(){var e=this;e._loading&&(e._metricsTimer.reset(),e._destroyTSParser(),e._loading=!1)},r.prototype._onProgress=function(e){var t=this;0===t.timeToFirstByte&&(t.timeToFirstByte=Date.now()-t._chunkLoadStartTime),t._chunkLength+=e.byteLength,t._chunkLength>=t._bandwidthEstimator.MIN_SAMPLE_SIZE&&(t._metricsTimer.reset(),t._onMetricCollectionInterval(),t._metricsTimer.start()),t._tsWorker?t._tsWorker.postMessage({code:"demux.append",data:e,idx:t._segmentIndex}):t._tsParser.append(e)},r.prototype._onMetricCollectionInterval=function(){var e=this,t=Math.max(e._chunkLength,0),n=Date.now();e._chunkDownloadTime=n-e._chunkLoadStartTime,e._bandwidthEstimator&&e._chunkDownloadTime>10&&(e._chunkLoadStartTime=n,e.totalDownloadTime+=e._chunkDownloadTime,e._chunkLength=0,e._bandwidthEstimator.addSample({size:t,time:e._chunkDownloadTime}))},r.prototype._onLoadComplete=function(){var e=this;e._onMetricCollectionInterval(),e._metricsTimer.stop(),e._tsWorker?e._tsWorker.postMessage({code:"demux.eos",idx:e._segmentIndex}):e._tsParser.endOfSegment()},r.prototype.processSegmentData=function(e){var t=this;"message"===e.type&&(e=e.data);var n=e.avData,r=e.pos;if(t.setPCR(n.pcr),n){var i=[],o=n.audio,a=n.video,s=t._model.streams,d=s&&s.length?s[t.streamIndex]:null,p="Position = "+r,u=t._model.getPCR();o&&o.frames&&o.frames.length&&(o.type="audio",o.config.duration=1e3*t._model.duration,o.frames.forEach(function(e){e.dts-=u,e.pts-=u}),p=p+" audio frames = "+o.frames.length+" audio time = "+o.frames[o.frames.length-1].dts,i.push(o)),a&&a.frames&&a.frames.length&&(a.type="video",a.config.duration=1e3*t._model.duration,d&&(a.config.width=d.width||l,a.config.height=d.height||c),a.frames.forEach(function(e){e.dts-=u,e.pts-=u}),p=p+" video frames = "+a.frames.length+" video time = "+a.frames[a.frames.length-1].dts,i.push(a)),t._dataReceiver&&t._dataReceiver(null,r,i),"end"===r&&(t.close(),t._tsWorker&&t._tsWorker.removeEventListener("message",t._workerCb))}},r.prototype.setPCR=function(e){var t=this;t._model.setPCR(e)},r.prototype._createTSParser=function(){var e=this;e._tsWorker?(e._workerCb=function(t){"demux"===t.data.msgType&&t.data.idx===e._segmentIndex&&e.processSegmentData(t)},e._tsWorker.addEventListener("message",e._workerCb)):e._tsParser=new o(e.processSegmentData.bind(e))},r.prototype._destroyTSParser=function(){var e=this;e._tsWorker?e._tsWorker.postMessage({code:"demux.destroy",idx:e._segmentIndex}):e._tsParser.destroy()}},{"../../lib/timer":152,"./../error":168,"./../services/loader":180,"./../ts-demux/ts-parser":186}],174:[function(e,t,n){"use strict";function r(e){var t=this;t.segments=[],e&&t.updateConfig(e),t.loadingSegmentSeqNum=-1}t.exports=r;var i=e("./segment");r.prototype.destroy=function(){var e=this;e._loader&&e._loader.destroy()},r.prototype.updateConfig=function(e){var t=this;if(e&&(t.bitrate=e.bitrate||t.bitrate,t.width=e.width||t.width,t.height=e.height||t.height,t.url=e.url||t.url,t.index=e.index||t.index,t.hlsInfo=e.hlsInfo||t.hlsInfo,t.audioStreamId=e.audioStreamId||t.audioStreamId,t.subtitlesGroupId=e.subtitlesGroupId||t.subtitlesGroupId,t.targetDuration=e.targetDuration||NaN,t.refreshInterval=1e3*t.targetDuration,void 0!==e.hasEndList&&null!==e.hasEndList&&(t.hasEndList=e.hasEndList),void 0!==e.audio&&null!==e.audio&&(t.audio=e.audio)),t.url&&t.url.length&&t.url.indexOf("_60fps")>=0?t.frameRate=60:t.frameRate=30,
e&&e.segmentInfoList){var n=[];e.segmentInfoList.forEach(function(e){e.levelIndex=t.index,n.push(t._context.create(i,e))}),t.updateSegments(n)}},r.prototype.setStreamIndex=function(e){var t=this;t.index=e,t.segments.forEach(function(t){t.setStreamIndex(e)})},r.prototype.close=function(){var e=this;if(e.segments&&e.segments.length&&!(e.loadingSegmentSeqNum<0)){var t=e.getIndexFromSeqNum(e.loadingSegmentSeqNum);t>=0&&(e.segments[t].close(),e.loadingSegmentSeqNum=-1)}},r.prototype.loadSegment=function(e,t,n){var r=this,i=r.getIndexFromSeqNum(e);if(!(0>i)){var o=r.segments[i];if(o&&(r.loadingSegmentSeqNum=e,o.load(t,n),r.subtitleStream)){var a=r.subtitleStream.getVTTSegment(e,o.programDateTime);a&&a.load()}}},r.prototype.getSeqNumBeforePosition=function(e){var t=this;if(!t.segments.length)return NaN;if(e<t.segments[0].startTime)return t.startSeqNum;for(var n=0;n<t.segments.length;n++){var r=t.segments[n];if(r&&r.startTime<=e&&r.startTime+r.duration>e)return t.startSeqNum+n}return t.endSeqNum},r.prototype.getSegmentfromSeqNum=function(e){var t=this,n=t.getIndexFromSeqNum(e);return n>=0&&n<t.segments.length?t.segments[n]:null},r.prototype.getIndexFromSeqNum=function(e){var t=this;if(e>=t.startSeqNum&&e<=t.endSeqNum)for(var n=0;n<t.segments.length;n++)if(t.segments[n]&&t.segments[n].seqNum===e)return n;return-1},r.prototype.updateSegments=function(e){for(var t,n=this,r=-1,i=0;i<e.length;i++)t=n.getSegmentfromSeqNum(e[i].seqNum),t&&t.startTime!==Number.NEGATIVE_INFINITY&&(e[i].startTime=t.startTime,e[i].duration=t.duration,r=e[i].seqNum);n._updateSegmentsProgramDateTime(e),n._copyNewSegments(e);var o=n.segments.length;if(n.startSeqNum=n.segments[0].seqNum,n.endSeqNum=n.segments[o-1].seqNum,-1!==r){var a=n.getSegmentfromSeqNum(r);n.updateTS(a.seqNum,a.startTime,a.startTime+a.duration)}else n.duration=n.segments[o-1].startTime+n.segments[o-1].duration},r.prototype._copyNewSegments=function(e){var t=this;if(e&&e.length){if(!t.segments||!t.segments.length)return void(t.segments=e);var n=e[0].seqNum,r=e[e.length-1].seqNum;if(t.getIndexFromSeqNum(n)<0&&r<t.startSeqNum)return void(t.segments=e);for(var i=0;i<e.length;i++){var o=t.getIndexFromSeqNum(e[i].seqNum);o>=0||e[i].seqNum>t.endSeqNum&&(t.segments.push(e[i]),t.endSeqNum=t.segments[t.segments.length-1].seqNum)}for(;t.segments.length&&!(t.segments[0].seqNum>=n)&&!(t.loadingSegmentSeqNum>=0&&t.segments[0].seqNum>=t.loadingSegmentSeqNum);){var a=t.segments.shift();a.close()}for(var s=0,l=0;l<t.segments.length;l++)t.segments[l].startTime=s,s+=t.segments[l].duration;t.startSeqNum=t.segments[0].seqNum}},r.prototype._updateSegmentsProgramDateTime=function(e){for(var t,n,r=0;r<e.length;r++){var i=e[r];i.continuity!==t&&(t=i.continuity,n=0),i.programDateTime?n=i.programDateTime+1e3*i.duration:n&&(i.programDateTime=n)}},r.prototype._updateSegmentTS=function(e,t){var n=this,r=n.segments[e],i=n.segments[t];i.startTime!==Number.NEGATIVE_INFINITY?t>e?r.duration=i.startTime-r.startTime:i.duration=r.startTime-i.startTime:t>e?i.startTime=r.startTime+r.duration:i.startTime=r.startTime-i.duration},r.prototype.updateTS=function(e,t,n){var r=this,i=r.getIndexFromSeqNum(e);if(-1!==i){var o=r.segments[i];o.duration=n-t;for(var a=i;a>0&&r.segments[a-1].continuity===o.continuity;a--)r._updateSegmentTS(a,a-1);for(a=i;a<r.segments.length-1&&r.segments[a+1].continuity===o.continuity;a++)r._updateSegmentTS(a,a+1);var s=r.segments[0].startTime,l=0;for(a=0;a<r.segments.length;a++)r.segments[a].startTime=s,s+=r.segments[a].duration,l+=r.segments[a].duration;return r.duration=l,o.startTime}return 0}},{"./segment":173}],175:[function(e,t,n){"use strict";function r(e){var t=this;t.vttSegmentList=[],t._pendingVTTSegements=[],e&&t.updateConfig(e)}t.exports=r;var i=e("./vtt-segment");r.prototype.destroy=function(){var e=this;e.vttSegmentList=null,e._pendingVTTSegements=null},r.prototype.updateConfig=function(e){var t=this;e&&(t.url=e.url||t.url,t.groupId=e.groupId||t.groupId,t.language=e.language||t.language,t.name=e.name||t.name,void 0!==e.defaultValue&&null!==e.defaultValue&&(t.defaultValue=e.defaultValue),void 0!==e.autoSelect&&null!==e.autoSelect&&(t.autoSelect=e.autoSelect),void 0!==e.forced&&null!==e.forced&&(t.forced=e.forced)),e.segmentInfoList&&e.segmentInfoList.length&&t.updateSegments(e.segmentInfoList.map(function(e){return t._context.create(i,e)}))},r.prototype.updateSegments=function(e){var t=this;if(e){for(var n=0;n<t.vttSegmentList.length;n++){var r=t.vttSegmentList[n],i=null;if(r.programDateTime&&t._firstProgramDateTime){if(!(r.programDateTime<t._firstProgramDateTime-1e3*t.targetDuration))break;i=t.vttSegmentList.shift(),i.destroy(),n--}else{if(!(t._firstSeqNum&&-1!==t._firstSeqNum&&r.sequenceNum<t._firstSeqNum))break;i=t.vttSegmentList.shift(),i.destroy(),n--}}var o=t.vttSegmentList.length?t.vttSegmentList[t.vttSegmentList.length-1].sequenceNum:-1;e.forEach(function(e){e.sequenceNum>o&&t.vttSegmentList.push(e)}),t.loadPendingSegments()}},r.prototype.loadPendingSegments=function(){var e=this;if(e._pendingVTTSegements.length)for(var t=0;t<e._pendingVTTSegements.length;t++){var n=e._pendingVTTSegements[t],r=n.pdt,i=n.sn,o=e.getVTTSegment(i,r,!1);o&&(o.load(),e._pendingVTTSegements.splice(t,1),t--)}},r.prototype.getVTTSegment=function(e,t,n){var r=this;(null===n||void 0===n)&&(n=!0);for(var i=0;i<r.vttSegmentList.length;i++){var o=r.vttSegmentList[i];if(t&&o.programDateTime){var a=i<r.vttSegmentList.length-1?r.vttSegmentList[i+1].programDateTime:o.programDateTime+1e3*o.duration;if(t>=o.programDateTime&&a>t)return o}else if(o.sequenceNum===e)return o}if(n){var s={sn:e,pdt:t};r._pendingVTTSegements.push(s)}return null}},{"./vtt-segment":176}],176:[function(e,t,n){"use strict";function r(e){var t=this;e&&(t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration),t._attemptCount=0,t.clockReference=0,t.localCueTime=0,t.mpegTSTime=0,t.offset=0,t.adjustedTime=0,t._state="none"}t.exports=r;var i=e("./../event").HLSEvent,o=e("./../services/loader");r.prototype.destroy=function(){var e=this;e.reset(),e._loader&&e._loader.destroy()},r.prototype.toObject=function(){var e=this,t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration,t.playlistUrl=e.playlistUrl,t.clockReference=e.clockReference,t.localCueTime=e.localCueTime,t.mpegTSTime=e.mpegTSTime,t.data=e.data,t.offset=e.offset,t.adjustedTime=e.adjustedTime,t},r.prototype.reset=function(){var e=this;e._attemptCount=0,e._state="none"},r.prototype._parseVTTData=function(){var e=this;if(e.data){var t=e.data.split("\n");if(!(t.length<=0)&&0===t[0].indexOf("WEBVTT")){for(var n=0,r=1;r<t.length;r++){var i=t[r].trim();if(0===i.indexOf("X-TIMESTAMP-MAP")){var o="LOCAL:",a=Math.floor((Math.pow(2,33)-1)/90),s=i.split("=")[1],l=s.split(","),c=0,d=0;if(l.length){var p=l[0].indexOf(o)>=0?0:1,u=0===p?1:0,_=l[p].substr(o.length),m=_.split(":");if(m.length){var v=m[2].split("."),y=0,f=0;v.length&&(y=parseInt(v[0]),f=parseInt(v[1])),c=1e3*(3600*m[0]+60*m[1]+y)+f,c%=a}d=parseFloat(l[u].split(":")[1]),d=Math.round(d/90)}e.clockReference=e.pcr(),e.localCueTime=c,e.mpegTSTime=d}else if(i.indexOf("-->")>=0){var g=i.split("-->");if(g){var b=g[0].split(":");if(b){var h=parseInt(b[0]),E=parseInt(b[1]),S=parseFloat(b[2]),A=1e3*(3600*h+60*E+S);n=A,e.clockReference||(e.clockReference=A+e.mpegTSTime)}}break}}e.adjustedTime=d-c-e.clockReference+e.offset}}},r.prototype.load=function(){var e=this;e._loader=new o,e._loader.load({url:e.url},{window:window,method:"GET",responseType:"text",context:e,successHandler:e.onLoadComplete,failureHandler:function(e){console.log("[VTTSegment] VTT segment failed to load.")}})},r.prototype.onLoadComplete=function(e){var t=this;return t.data=e.data,t._state="loaded",void 0===t.pcr()?void t._context.subscribe(i.PCR_AVAILABLE,t._parseSegment,t):void t._parseSegment()},r.prototype._parseSegment=function(){var e=this;e._parseVTTData(),e._context.sendEvent(i.VTT_SEGMENT_LOADED,e.toObject())},r.prototype.pcr=function(){var e=this;if(!e._context)return 0;var t=e._context.model,n=t.getPCR();if(t.live&&0>n){var r=-Math.floor(Math.pow(2,32)/90),i=Math.floor((Math.pow(2,32)-1)/90),o=Math.abs(n-r);n=o+i}return n}},{"./../event":169,"./../services/loader":180}],177:[function(e,t,n){"use strict";function r(){}t.exports=r;var i=e("../../lib/hls-utils.js"),o=8,a=12,s=a+4;r.prototype.initSegment=function(e,t){var n=this,r=n.ftyp(t),i=n.moov(e),o=new Uint8Array(r.byteLength+i.byteLength);return o.set(r),o.set(i,r.byteLength),o},r.prototype.ftyp=function(e){var t=this;e=e||"avc1";var n=new Uint8Array([105,115,111,109]),r=new Uint8Array([0,0,0,1]),i=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);return t._box("ftyp",[n,r,i])},r.prototype.moov=function(e){var t=this,n=[];n.push(t._mvhd(e[0].config.duration||4294967295));for(var r=0;r<e.length;r++)n.push(t._trak(e[r]));return n.push(t._mvex(e)),t._box("moov",n)},r.prototype.moof=function(e,t){var n=this,r=[];r.push(n._mfhd(e));for(var i=0;i<t.length;i++){var o=n._traf(t[i]);r.push(o)}return n._box("moof",r)},r.prototype.mdat=function(e){var t=this,n=[];if(e&&e.frames)for(var r=0;r<e.frames.length;r++)n.push(i.cloneTypedArray(e.frames[r].data));return t._box("mdat",n)},r.prototype._mfhd=function(e){var t=this,n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,e),t._fullBox("mfhd",0,new Uint8Array(3),[n])},r.prototype._traf=function(e){if(e){var t=this,n=[],r=o+s+o,i=t._tfhd(e);r+=i.length,n.push(i);var a;e.frames&&e.frames.length&&(a=t._tfdt(e.frames[0].dts),r+=a.length,n.push(a));var l;return"video"===e.type&&(l=t._sdtp(e),r+=l.length),n.push(t._trun(e,r)),l&&n.push(l),t._box("traf",n)}},r.prototype._tfhd=function(e){var t=this,n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,e.streamId),t._fullBox("tfhd",0,new Uint8Array([0,0,0]),[n])},r.prototype._tfdt=function(e){var t=this,n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,Math.max(0,e)),t._fullBox("tfdt",0,new Uint8Array([0,0,0]),[n])},r.prototype._trun=function(e,t){for(var n=this,r=e.frames||[],i=r.length,s=n._getTrunFlags(r),l=0,c=s[1],d=0;4>d;d++)l+=c&1<<d?1:0;var p=new Uint8Array(4*l*i),u=new DataView(p.buffer);t+=a+8+p.length+o;var _=n._getTrunHeader(i,t),m=0;for(d=0;i>d;d++){var v=r[d];if(1&c&&(u.setUint32(m,v.duration),m+=4),2&c&&(u.setUint32(m,v.size),m+=4),4&c){var y=v.flags.isLeading<<2|v.flags.dependsOn,f=v.flags.isDependedOn<<6|v.flags.hasRedundancy<<4|v.flags.paddingValue<<1|v.flags.isNonSyncSample,g=240&v.flags.degradationPriority,b=15&v.flags.degradationPriority,h=y<<24|f<<16|g<<8|b;u.setUint32(m,h),m+=4}8&c&&(u.setUint32(m,v.pts-v.dts),m+=4)}return n._fullBox("trun",0,s,[_,p])},r.prototype._sdtp=function(e){for(var t=this,n=e.frames||[],r=n.length,i=new Uint8Array(r),o=0;r>o;o++){var a=n[o];a.flags&&(i[o]=a.flags.isLeading<<6|a.flags.dependsOn<<4|a.flags.isDependedOn<<2|a.flags.hasRedundancy)}return t._fullBox("sdtp",0,new Uint8Array(3),[i])},r.prototype._getTrunHeader=function(e,t){var n=new Uint8Array(8),r=new DataView(n.buffer);return r.setUint32(0,e),r.setInt32(4,t),n},r.prototype._getTrunFlags=function(e){var t=e.length,n=new Uint8Array(3);return n[2]=1,t&&(void 0!==e[0].duration&&(n[1]|=1),void 0!==e[0].size&&(n[1]|=2),void 0!==e[0].flags&&(n[1]|=4),void 0!==e[0].pts&&(n[1]|=8)),n},r.prototype._mvhd=function(e){var t=this,n=new Uint8Array(96),r=new DataView(n.buffer);return r.setUint32(0,1),r.setUint32(4,2),r.setUint32(8,1e3),r.setUint32(12,e),r.setUint32(16,65536),r.setUint16(20,256),r.setUint32(32,65536),r.setUint32(48,65536),r.setUint32(64,1073741824),r.setUint32(92,4294967295),t._fullBox("mvhd",0,new Uint8Array(3),[n])},r.prototype._trak=function(e){var t=this;return e.config.duration=e.config.duration||4294967295,t._box("trak",[t._tkhd(e),t._mdia(e)])},r.prototype._tkhd=function(e){var t=this,n=new Uint8Array(80),r=new DataView(n.buffer);return r.setUint32(8,e.streamId),r.setUint32(16,e.config.duration),r.setUint8(32,"audio"===e.type?1:0),r.setUint32(36,65536),r.setUint32(52,65536),r.setUint32(68,1073741824),r.setUint16(72,e.config.width),r.setUint16(76,e.config.height),t._fullBox("tkhd",0,new Uint8Array([0,0,7]),[n])},r.prototype._mdia=function(e){var t=this;return t._box("mdia",[t._mdhd(e),t._hdlr(e.type),t._minf(e)])},r.prototype._mdhd=function(e){var t=this,n=new Uint8Array(20),r=new DataView(n.buffer);return r.setUint32(0,2),r.setUint32(4,3),r.setUint32(8,1e3),r.setUint32(12,e.config.duration),r.setUint16(16,21956),t._fullBox("mdhd",0,new Uint8Array(3),[n])},r.prototype._hdlr=function(e){var t=this,n={video:1986618469,audio:1936684398,hint:1751740020},r=new Uint8Array(32),i=new DataView(r.buffer);return i.setUint32(4,n[e]),i.setUint32(20,n[e]),i.setUint32(24,1214344804),i.setUint32(28,1818587648),t._fullBox("hdlr",0,new Uint8Array(3),[r])},r.prototype._minf=function(e){var t=this,n="audio"===e.type?t._smhd():t._vmhd();return t._box("minf",[n,t._dinf(),t._stbl(e)])},r.prototype._vmhd=function(){var e=this,t=new Uint8Array(8);return e._fullBox("vmhd",0,new Uint8Array([0,0,1]),[t])},r.prototype._smhd=function(){var e=this,t=new Uint8Array(4);return e._fullBox("smhd",0,new Uint8Array(3),[t])},r.prototype._dinf=function(){var e=this;return e._box("dinf",[e._dref()])},r.prototype._dref=function(){var e=this,t=new Uint8Array([0,0,0,1]),n=[];return n.push(t),n.push(e._url(new Uint8Array([0,0,1]))),e._fullBox("dref",0,new Uint8Array(3),n)},r.prototype._url=function(e){var t=this;return t._fullBox("url ",0,e,[])},r.prototype._urn=function(e){var t=this;return t._fullBox("urn ",0,e,[])},r.prototype._stbl=function(e){var t=this;return t._box("stbl",[t._stsd(e),t._stts(),t._stsc(),t._stsz(),t._stco()])},r.prototype._stsd=function(e){var t=this,n="audio"===e.type?t._audioSample(e):t._videoSample(e),r=new Uint8Array([0,0,0,1]);return t._fullBox("stsd",0,new Uint8Array(3),[r,n])},r.prototype._videoSample=function(e){var t=this,n=[];n.push((65280&e.config.ppsLength)>>>8),n.push(255&e.config.ppsLength),n=n.concat(Array.prototype.slice.call(e.config.pps));var r=[];r.push((65280&e.config.spsLength)>>>8),r.push(255&e.config.spsLength),r=r.concat(Array.prototype.slice.call(e.config.sps));var i=new Uint8Array(78),o=new DataView(i.buffer);return o.setUint16(6,1),o.setUint16(24,e.config.width),o.setUint16(26,e.config.height),o.setUint32(28,4718592),o.setUint32(32,4718592),o.setUint16(40,1),o.setUint32(42,259613032),o.setUint32(46,1869557110),o.setUint32(50,1768187247),o.setUint32(54,761818227),o.setUint16(74,24),o.setUint16(76,65535),t._box("avc1",[i,t._box("avcC",[new Uint8Array([1,e.config.profileIndication,e.config.profileCompatibility,e.config.levelIndication,255].concat([255&e.config.numOfSPS|224]).concat(r).concat([255&e.config.numOfPPS]).concat(n))]),t._btrt()])},r.prototype._btrt=function(){var e=this,t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,1875072),e._box("btrt",[t])},r.prototype._audioSample=function(e){var t=this,n=new Uint8Array(8),r=new DataView(n.buffer);r.setUint16(6,1);var i=new Uint8Array(20);return r=new DataView(i.buffer),r.setUint16(8,e.config.channels),r.setUint16(10,e.config.sampleSize),r.setUint16(16,e.config.samplingFreq),t._box("mp4a",[n,i,t._esds(e)])},r.prototype._esds=function(e){var t=this,n=new Uint8Array(27),r=new DataView(n.buffer);return r.setUint8(0,3),r.setUint8(1,25),r.setUint8(5,4),r.setUint8(6,17),r.setUint8(7,64),r.setUint8(8,21),r.setUint16(10,1536),r.setUint8(20,5),r.setUint8(21,2),r.setUint8(22,e.config.audioObjectTypeIndex<<3|e.config.samplingFreqIndex>>>1),r.setUint8(23,e.config.samplingFreqIndex<<7|e.config.channels<<3),r.setUint8(24,6),r.setUint8(25,1),r.setUint8(26,2),t._fullBox("esds",0,new Uint8Array(3),[n])},r.prototype._stts=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stts",0,new Uint8Array(3),[t])},r.prototype._stsc=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stsc",0,new Uint8Array(3),[t])},r.prototype._stsz=function(){var e=this,t=new Uint8Array(8);return e._fullBox("stsz",0,new Uint8Array(3),[t])},r.prototype._stco=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stco",0,new Uint8Array(3),[t])},r.prototype._mvex=function(e){for(var t=this,n=[],r=0;r<e.length;r++)n.push(t._trex(e[r]));return t._box("mvex",n)},r.prototype._trex=function(e){var t=this,n=new Uint8Array(20),r=new DataView(n.buffer);return r.setUint32(0,e.streamId),r.setUint32(4,1),r.setUint32(16,65537),"video"!==e.type&&(n[n.length-1]=0),t._fullBox("trex",0,new Uint8Array(3),[n])},r.prototype._fullBox=function(e,t,n,r){var i=this,o=new Uint8Array(1);o[0]=t;var a=[o,n];return a=a.concat(r),i._box(e,a)},r.prototype._box=function(e,t){for(var n=0,r=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]),i=0,o=0;o<t.length;o++)i+=t[o].length;var a=new Uint8Array(i+8),s=new DataView(a.buffer,a.byteOffset,a.byteLength);for(s.setUint32(0,a.byteLength),a.set(r,4),n=8,o=0;o<t.length;o++)a.set(t[o],n),n+=t[o].length;return a}},{"../../lib/hls-utils.js":150}],178:[function(e,t,n){"use strict";function r(){var e=this;e._mp4Content=null,e._mp4Box=new i}t.exports=r;var i=e("./mp4-box");r.prototype.destroy=function(){var e=this;e._mp4Content=null},r.prototype.generate=function(e){if(!e)return null;var t=this,n=[e],r=null,i=null,o=null,a=0;if(e.config.shouldInit){var s="audio"===e.type?"mp41":"avc1";r=t._generateInitSegment(n,s),a+=r?r.length:0}e.frames.length&&(i=t._generateFragmentMetadata(n),a+=i?i.length:0,o=t._generateFragmentData(n),a+=o?o.length:0),t._mp4Content=new Uint8Array(a);var l=0;return r&&(t._mp4Content.set(r,l),l+=r.length),i&&(t._mp4Content.set(i,l),l+=i.length),o&&(t._mp4Content.set(o,l),l+=o.length),{data:t._mp4Content,type:e.type,codec:e.config.codec}},r.prototype._generateInitSegment=function(e,t){var n=this;if(!e||!e.length)return null;var r=n._mp4Box.initSegment(e,t);return r?r:null},r.prototype._generateFragmentMetadata=function(e){var t=this,n=0;return e&&e.length?(e.forEach(function(e,t,r){n=e.config.seqNum,e.frames&&e.frames.length&&e.frames.forEach(function(t,n,r){t.size=t.nalUnitSize?t.nalUnitSize+4*t.nalUnits.length:t.data?t.data.length:0,n<r.length-1?t.duration=e.frames[n+1].dts-t.dts:n>0?t.duration=t.dts-e.frames[n-1].dts:t.duration=0})}),t._mp4Box.moof(n,e)):null},r.prototype._generateFragmentData=function(e){var t=this;if(!e||!e.length)return null;var n,r=[],i=0;e.forEach(function(e){"video"===e.type&&e.frames.forEach(function(e){e.normalizedData=new Uint8Array(e.nalUnitSize+4*e.nalUnits.length);var t=new DataView(e.normalizedData.buffer),n=0;e.nalUnits.forEach(function(r){t.setUint32(n,r.data.byteLength),n+=4,e.normalizedData.set(r.data,n),n+=r.data.byteLength}),e.data=e.normalizedData}),n=t._mp4Box.mdat(e),n&&n.length&&(r.push(n),i+=n.length)});var o=new Uint8Array(i),a=0;return r.forEach(function(e,t,n){o.set(e,a),a+=e.length}),o}},{"./mp4-box":177}],179:[function(e,t,n){"use strict";function r(e){var t=function(){return e._mp4Generator||(e._mp4Generator=new i),e._mp4Generator},n=function(t){return e._tsDemuxers=e._tsDemuxers||{},e._tsDemuxers[t]||(e._tsDemuxers[t]=new o(function(n){n.msgType="demux",n.idx=t,e.postMessage(n)})),e._tsDemuxers[t]};e.addEventListener("message",function(r){var i,o,a=r.data.code,s=r.data.data,l=r.data.idx;switch(a){case"mp4generate":i=t();var c=i.generate(s);c.msgType="mp4generate",e.postMessage(c);break;case"mp4generate.destroy":e._mp4Generator&&e._mp4Generator.destroy();break;case"demux.append":o=n(l),o.append(s);break;case"demux.eos":o=n(l),o.endOfSegment();break;case"demux.destroy":e._tsDemuxers&&e._tsDemuxers.hasOwnProperty(l)&&e._tsDemuxers[l].destroy()}})}t.exports=r;var i=e("./../mp4/mp4-generator"),o=e("./../ts-demux/ts-parser")},{"./../mp4/mp4-generator":178,"./../ts-demux/ts-parser":186}],180:[function(e,t,n){"use strict";function r(){var e=this;e._xhr=null,e._maxRetries=5,e._backOffInit=[1e3,1e3,2e3,2e3,3e3,3e3,5e3,5e3],e._backOffInterval=5e3,e.fallback=!1,e.fallbackIdx=null,e._retryTimer=new o(1e3,1),e._retryTimer.addEventListener(e.load,e),e.REQUEST_TIMEOUT=1e4,e._requestTimer=new o(e.REQUEST_TIMEOUT,1),e._requestTimer.addEventListener(e._onTimeout,e)}t.exports=r;var i=e("./../error"),o=e("../../lib/timer"),a={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};r.prototype.load=function(e,t){var n=this;if(n.req=e||n.req,n.opts=t||n.opts,n.opts.failureHandler||(n.opts.failureHandler=function(e){1===e.code&&n._context.notifyError(new i.Error(i.ERR_SEGMENT_LOAD))}),!(n.req&&n.req.url&&n.opts.successHandler&&n.opts.failureHandler&&n.opts.window))return n.opts.failureHandler(new i.Error(i.ERR_XHR_LOAD));if(n.req.fallback&&n.req.fallback.length>0&&!n.opts.fallBackHandler)return n.opts.failureHandler(new i.Error(i.ERR_XHR_LOAD));n._cancelCurrentRequest();var r=n.opts.isChunkedLoad||!1;n.opts.responseType=n.opts.responseType||"text",n.opts.method=n.opts.method||"GET",n._xhr=new n.opts.window.XMLHttpRequest,n._xhr._offset=0,n._xhr._finished=!1,r?n.opts.window.MSStreamReader?n._initChunkedLoadIe():n._initChunkedLoad():n._initLoad(),n._xhr.open(n.opts.method,n.req.url,!0),r?n.opts.window.MSStreamReader&&(n._xhr.responseType="ms-stream"):n._xhr.responseType=n.opts.responseType,n._requestTimer.reset(),n._requestTimer.start(),n._xhr.send()},r.prototype._initLoad=function(){var e=this;e._xhr.onerror=e._handleError.bind(e),e._xhr.onreadystatechange=function(){return e._xhr.readyState===a.DONE?e._statusGood(e._xhr.status)?void(e._xhr._finished||(e._xhr._finished=!0,e.opts.successHandler.call(e.opts.context,{fallback:e.fallback,fallbackIdx:e.fallbackIdx,data:e._xhr.response}),e._requestTimer.stop())):e._handleError():void 0}},r.prototype._initChunkedLoad=function(){var e=this;e._xhr.overrideMimeType("text/plain; charset=x-user-defined"),e._xhr.onreadystatechange=function(){if(!e._xhr._finished&&(e._xhr.readyState===a.DONE||e._xhr.readyState===a.LOADING)){if(!e._statusGood(e._xhr.status))return 0===e._xhr._offset?e._handleError():(console.log("[Loader][onChunkedLoad] Partial segment download error. Retry url = "+e.req.url),void e._handleError());var t=e._xhr.responseText,n=t.length-e._xhr._offset;if(n>0){e._requestTimer.stop();for(var r=new ArrayBuffer(n),i=new Uint8Array(r),o=0;n>o;o++)i[o]=255&t.charCodeAt(o+e._xhr._offset);e._xhr._offset=t.length,e.opts.progressHandler.call(e.opts.context,r),e._requestTimer.start()}e._xhr._finished=e._xhr.readyState===a.DONE,e._xhr._finished&&(e.opts.successHandler.call(e.opts.context),e._requestTimer.stop())}}},r.prototype._initChunkedLoadIe=function(){var e=this;e._xhr.onreadystatechange=function(){if(e._xhr.readyState===a.LOADING){if(!e._statusGood(e._xhr.status))return;var t=e._xhr.response,n=new e.opts.window.MSStreamReader;n.readAsArrayBuffer(t),n.onprogress=function(){e._requestTimer.stop();var t=n.result,r=t.slice(e._xhr._offset,t.byteLength);e._xhr._offset=t.byteLength,e.opts.progressHandler.call(e.opts.context,r),e._requestTimer.start()},n.onload=function(){e._requestTimer.stop(),e.opts.successHandler.call(e.opts.context)},n.onerror=function(){}}}},r.prototype._statusGood=function(e){return e>=200&&300>e},r.prototype._onTimeout=function(){var e=this;e._requestTimer.stop();var t=Date.now()-e._requestTimestamp;console.log("[Loader][_onTimeout] delta = "+t+", Timed-out url = "+e.req.url),e._handleError()},r.prototype._handleError=function(){var e=this;if(e.opts.retries=e.opts.retries||0,!(e.opts.retries<e._maxRetries)){if(e.req.fallback&&e.req.fallback.length>0){var t=e.opts.fallBackHandler(e.req.fallback);if(t>=0){var n=e.req.fallback.splice(t,1)[0];return e.req.url=n.url,e.fallback=!0,e.fallbackIdx=n.index,e.load()}}return e.opts.failureHandler(new i.Error(i.ERR_XHR_LOAD))}var r=e.opts.retries<e._backOffInit.length?e._backOffInit[e.opts.retries]:e._backOffInit[e._backOffInit.length-1]+e._backOffInterval*(e.opts.retries-e._backOffInit.length+1);e.opts.retries++,e._retryTimer.delay=r,e._retryTimer.reset(),e._retryTimer.start(),console.log("[Loader][_handleError] Retrying url = "+e.req.url)},r.prototype._cancelCurrentRequest=function(){var e=this;e._xhr&&e._xhr.readyState!==a.DONE&&e._xhr.readyState!==a.UNSENT&&(e._xhr._finished=!0,e._xhr.abort()),e._retryTimer.stop(),e._requestTimer.stop()},r.prototype.reset=function(){var e=this;e._cancelCurrentRequest(),e._xhr=null,e.req=null,e.opts=null,e.fallback=null,e.fallbackIdx=null},r.prototype.destroy=function(){var e=this;e.reset(),e._retryTimer.destroy(),e._requestTimer.destroy()}},{"../../lib/timer":152,"./../error":168}],181:[function(e,t,n){"use strict";function r(){var e=this;e._node=e._context.node,e._model=e._context.model,e._mediaInfo={currentStreamBitrate:0},e._segInfoList=[],e._rebufferingStartTime=NaN,e._playingSegmentSeqNum=NaN,e._ignoreBuffering=!1,e._buffering=!1,e._timer=new a(1e3),e._timer.addEventListener(e._sendInfoUpdate,e),e._registerListeners()}function i(){var e=this;e.seqNum=-1,e.loadState=e.LoadingState.LOAD_NOT_STARTED,e.renderState=e.RenderState.RENDER_NOT_STARTED,e.beginTime=NaN,e.endTime=NaN,e.bitrateIndex=-1,e.switchReason="none",e.bufferCount=0,e.bufferTime=0,e.timeToFirstByte=0,e.timeToDownload=0,e.timeToRequest=0,e.observedBitrate=0,e.frameDrop=0,e.frameRateSum=0,e.frameRateSampleCount=0,e.frameRate=30}t.exports=r;var o=e("./../event").HLSEvent,a=e("../../lib/timer");r.prototype.destroy=function(){var e=this;e._mediaInfo=null,e._segInfoList=null,e._removeListeners(),e._timer.destroy()},r.prototype._registerListeners=function(){var e=this;e._playHandler=e._onPlay.bind(e),e._pauseHandler=e._onPause.bind(e),e._playCompleteHandler=e._onPlayComplete.bind(e),e._timeUpdateHandler=e._onTimeUpdateHandler.bind(e),e._node.addEventListener("play",e._playHandler),e._node.addEventListener("pause",e._pauseHandler),e._node.addEventListener("ended",e._playCompleteHandler),e._node.addEventListener("timeupdate",e._timeUpdateHandler),e._context.subscribe(o.WAITING,e._onWaiting,e)},r.prototype._removeListeners=function(){var e=this;e._node.removeEventListener("play",e._playHandler),e._node.removeEventListener("pause",e._pauseHandler),e._node.removeEventListener("ended",e._playCompleteHandler),e._node.removeEventListener("timeupdate",e._timeUpdateHandler)},r.prototype._onPlay=function(e){var t=this;t._timer.start()},r.prototype._onPause=function(e){var t=this;t._timer.stop()},r.prototype._onPlayComplete=function(e){var t=this;t.segmentRendered(t._playingSegmentSeqNum)},r.prototype._onTimeUpdateHandler=function(e){var t=this;t.updateRenderState(t._playingSegmentSeqNum,e.currentTarget.currentTime)},r.prototype._onWaiting=function(e){var t=this;e?t._onBufferingBegin():t._onBufferingEnd()},r.prototype._sendInfoUpdate=function(){var e=this,t=e._model.streams,n=e._mediaInfo,r=e._model.getCurrentStream();r&&(n.currentStreamIndex=e._model.currentStreamIndex,n.currentStreamBitrate=r.bitrate/1e3,n.mediaWidth=r.width,n.mediaHeight=r.height),t.length&&(n.qualityLevels=t.length,n.minBitRate=t[0].bitrate,n.maxBitRate=t[n.qualityLevels-1].bitrate),n.bufferLength=e._model.getBufferLength(),e._context.sendEvent(o.INFO_UPDATE,{mediaInfo:e._mediaInfo})},r.prototype.segmentLoadBegin=function(e,t){if(t){var n=this,r=new i;r.seqNum=e,r.beginTime=t.beginTime,r.timeToFirstByte=t.timeToFirstByte,r.bitrateIndex=Math.max(0,t.bitrateIndex),r.switchReason=t.switchReason,r.frameRate=t.frameRate,r.observedBitrate=1e3*t.observedBitrate,n._segInfoList.push(r),r.loadState=r.LoadingState.LOAD_BEGIN,isNaN(n._playingSegmentSeqNum)&&n.segmentRenderBegin(e)}},r.prototype.segmentLoadEnd=function(e,t){var n=this;if(n._segInfoList.length){var r=n._segInfoList[n._segInfoList.length-1];if(!r||r.seqNum!==e)return void console.log("[Metrics] Loading segment is not at the tail of the list");t&&(r.endTime=t.endTime,r.timeToDownload=t.timeToDownload),r.loadState=r.LoadingState.LOAD_END}},r.prototype.segmentRenderBegin=function(e){var t=this,n=t._getSegmentEntry(e);n&&(n.renderState=n.RenderState.RENDER_BEGIN,t._playingSegmentSeqNum=e)},r.prototype.segmentRendered=function(e){var t=this,n=t._getSegmentEntry(e);n&&(n.renderState=n.RenderState.RENDER_END)},r.prototype.updateRenderState=function(e,t){var n=this;if(isNaN(e)||isNaN(t)||0>=t)return e;var r=n._getSegmentEntry(e),i=n._getIndex(e)+1,a=i<n._segInfoList.length?n._segInfoList[i]:null;if(!r||!r.isRendering())return e;if(t>r.endTime&&(n.segmentRendered(r.seqNum),a)){if(a.bitrateIndex!==r.bitrateIndex){var s=n._model.streams,l={bitrate:s[a.bitrateIndex].bitrate/1e3,reason:a.switchReason,oldFrameRate:r.frameRate,newFrameRate:a.frameRate};n._context.sendEvent(o.STREAM_SWITCHED,l)}return n.segmentRenderBegin(a.seqNum),a.seqNum}return e},r.prototype._onBufferingBegin=function(){var e=this;if(!e._buffering&&(e._buffering=!0,e._rebufferingStartTime=Date.now(),e._segInfoList.length)){var t=e._segInfoList[e._segInfoList.length-1].seqNum;e._playingSegmentSeqNum!==t&&console.log("Playing and loading segment seq num do not match! Playing = "+e._playingSegmentSeqNum+", loading = "+t)}},r.prototype._onBufferingEnd=function(){var e=this;if(e._buffering){var t=isNaN(e._rebufferingStartTime)?0:Date.now()-e._rebufferingStartTime,n=e._getSegmentEntry(e._playingSegmentSeqNum),r=n&&!isNaN(t)&&t>0;n&&(n.bufferTime+=r?t:0,n.bufferCount+=r?1:0),e._rebufferingStartTime=NaN,e._buffering=!1}},r.prototype.getMetrics=function(){var e=this;if(!e._segInfoList.length)return null;var t=-1,n=-1,r=e._segInfoList.filter(function(e,r){return e.isRendered()?(t=r,!0):e.isRendering()?(n=r,!0):void 0}),i=[];if(r.forEach(function(t){i.push(e._dto(t))}),e._segInfoList.splice(0,t+1),n-=t+1,n>0&&e._segInfoList.splice(0,n),e._segInfoList.length){var o=e._segInfoList[0];o.isRendering()&&(o.bufferCount=0,o.bufferTime=0,o.timeToFirstByte=NaN,o.timeToDownload=NaN)}return i},r.prototype._getSegmentEntry=function(e){for(var t=this,n=t._segInfoList.length-1;n>=0;n--){var r=t._segInfoList[n];if(r&&r.seqNum===e)return r}return null},r.prototype._getIndex=function(e){for(var t=this,n=t._segInfoList.length-1;n>=0;n--){var r=t._segInfoList[n];if(r&&r.seqNum===e)return n}return-1},r.prototype._dto=function(e){var t=this;if(!e)return null;var n=t._model.streams;e.bitrateIndex=n.length>0?Math.min(e.bitrateIndex,n.length-1):0;var r=n[e.bitrateIndex].bitrate/1e3;return e.bufferTime>0&&!e.bufferCount?e.bufferCount=1:!e.bufferTime&&e.bufferCount>0&&(e.bufferCount=0),{seq_num:e.seqNum,ib:r,ob:e.observedBitrate,num_buf:e.bufferCount,buf_dur:e.bufferTime,req_t:e.timeToRequest,fb_dl_t:e.timeToFirstByte,req_dl_t:e.timeToDownload,drop_f:e.frameDrop,avg_fr:(e.frameRateSum/e.frameRateSampleCount).toFixed(2)}},i.prototype.RenderState={RENDER_NOT_STARTED:"renderNone",RENDER_BEGIN:"renderBegin",RENDER_END:"renderEnd"},i.prototype.LoadingState={LOAD_NOT_STARTED:"loadNone",LOAD_BEGIN:"loadBegin",LOAD_END:"loadEnd"},i.prototype.isRendering=function(){return this.renderState===this.RenderState.RENDER_BEGIN},i.prototype.isRendered=function(){return this.renderState===this.RenderState.RENDER_END}},{"../../lib/timer":152,"./../event":169}],182:[function(e,t,n){"use strict";function r(){var e=this;e.ERRORS={INVALID_M3U8:1,EMPTY_DATA:2,NO_SEGMENTS:3}}t.exports=r;var i=e("./../model/model").MetadataTypes,o="#EXTM3U",a="#EXT-X-STREAM-INF:",s="#EXT-X-MEDIA:TYPE=SUBTITLES,",l="#EXTINF:",c="#EXT-X-MEDIA-SEQUENCE:",d="#EXT-X-DISCONTINUITY-SEQUENCE:",p="#EXT-X-DISCONTINUITY",u="#EXT-X-TARGETDURATION:",_="#EXT-X-PROGRAM-DATE-TIME:",m="#EXT-X-ENDLIST";r.prototype.parse=function(e){if(!e)return null;var t=this;return e.type===i.STRUCTURED?t._parseStructuredMetadata(e):t._parseRawMetadata(e)},r.prototype._parseRawMetadata=function(e){var t=this,n={},r=e.rawData,i=r.split("\n");return i.length<=0?(n.error=t.ERRORS.EMPTY_DATA,n):0!==i[0].indexOf(o)?(n.error=t.ERRORS.INVALID_M3U8,n):r.indexOf(l)>0?t._parseMediaPlaylist(i,e):r.indexOf(a)>0?t._parseMasterPlaylist(i,e.url):(n.error=t.ERRORS.INVALID_M3U8,n)},r.prototype._parseStructuredMetadata=function(e){var t=this,n={};
return n.streamInfoList=t.parseStreamInfo(e.streams),e.hasStreamMetadata&&n.streamInfoList.forEach(function(e){e.segmentInfoList=t.parseSegmentInfo(e.hlsInfo,e.index),e.duration=0,e.segmentInfoList.forEach(function(t){e.duration+=t.duration}),e.hasEndList=!0,e.targetDuration=e.hlsInfo.segment_duration}),n},r.prototype._parseMasterPlaylist=function(e,t){for(var n=this,r={streamInfoList:[],subtitleStreamInfoList:[]},i=0;i<e.length;i++){var o=e[i].trim(),l=[];if(0===o.indexOf(a)){l=o.substr(a.length).split(",");var c=n._parseStreamAttributes(l,o);do i++,o=e[i];while(o.match(/^\s*$/));c.url=n._extractURL(o,t),r.streamInfoList.push(c)}else if(0===o.indexOf(s)){var d=n._extractSubtitles(o,t);d&&r.subtitleStreamInfoList.push(d)}}return r},r.prototype._parseMediaPlaylist=function(e,t){var n=this,r={},o={},a=[],s=t.url,v=t.index,y={streamInfoList:[],subtitleStreamInfoList:[]};o.discontinuityCounter=0,o.sequenceNum=0,o.startTime=0,o.programDateTime=0,o.brStartOffset=-1,o.brEndOffset=-1,o.levelIndex=v,r.discontinuitySeqNum=0,r.index=v,r.targetDuration=0,r.hasEndList=!1,r.url=s,r.duration=0;for(var f=0;f<e.length;f++){var g=e[f].trim();if(!g.match(/^\s*$/))if(0===g.indexOf(c)&&(r.seqNum=parseInt(g.substr(c.length)),o.sequenceNum=r.seqNum),0===g.indexOf(d))r.discontinuitySeqNum=parseInt(g.substr(d.length));else if(0===g.indexOf(p))o.discontinuityCounter++;else if(0===g.indexOf(u))r.targetDuration=parseFloat(g.substr(u.length));else if(0===g.indexOf(_))o.programDateTime=n._parseProgramDateTime(g);else if(0===g.indexOf(l)){var b=g.indexOf(",");o.duration=-1===b?parseFloat(g.substr(l.length)):parseFloat(g.substr(l.length,b-l.length)),r.duration+=o.duration;do f++,g=e[f].trim();while(g.match(/^\s*$/));o.url=n._extractURL(g,s),a.push(n._copySegmentInfo(o)),o.startTime+=o.duration,o.sequenceNum++,o.programDateTime=0,o.brStartOffset=-1}else 0===g.indexOf(m)&&(r.hasEndList=!0)}return a.length&&(r.segmentInfoList=a),t.type===i.RAW?y.streamInfoList.push(r):t.type===i.RAW_SUBTITLE&&y.subtitleStreamInfoList.push(r),y},r.prototype._parseStreamAttributes=function(e,t){if(!e||!e.length)return null;for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.indexOf("BANDWIDTH")>-1)n.bitrate=1*i.split("=")[1];else if(i.indexOf("RESOLUTION")>-1){var o=i.split("=")[1],a=o.split("x");n.width=parseInt(a[0]),n.height=parseInt(a[1])}else i.indexOf("CODECS")>-1&&-1===t.indexOf("avc1")?n.audio=!0:i.indexOf("AUDIO")>-1?(n.audioStreamId=i.split("=")[1],n.audioStreamId=n.audioStreamId.replace('"',"")):i.indexOf("SUBTITLES")>-1&&(n.subtitlesGroupId=i.split("=")[1],n.subtitlesGroupId=n.subtitlesGroupId.replace(/"/g,""))}return n},r.prototype._extractURL=function(e,t){var n=null,r=null;return"http://"===e.substr(0,7)||"https://"===e.substr(0,8)?e:(t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),"/"===e.substr(0,1)?(n=t.substr(0,t.indexOf("//")+2),r=t.substr(t.indexOf("//")+2),n+r.substr(0,r.indexOf("/"))+e):t.substr(0,t.lastIndexOf("/")+1)+e)},r.prototype._extractSubtitles=function(e,t){var n=this;e=e.replace(/"/g,"");var r=e.substr(s.length).split(",");return n._parseSubtitleAttributes(r,e,t)},r.prototype._parseSubtitleAttributes=function(e,t,n){var r=this,i={};return e&&e.length&&e.forEach(function(e){e.indexOf("GROUP-ID")>-1?i.groupId=e.split("=")[1]:e.indexOf("LANGUAGE")>-1?i.language=e.split("=")[1]:e.indexOf("NAME")>-1?i.name=e.split("=")[1]:e.indexOf("AUTOSELECT")>-1?i.autoSelect="YES"===e.split("=")[1]:e.indexOf("DEFAULT")>-1?i.defaultValue="YES"===e.split("=")[1]:e.indexOf("URI")>-1?i.url=r._extractURL(e.substr(4),n):e.indexOf("FORCED")>-1&&(i.forced="YES"===e.split("=")[1])}),i},r.prototype._copyVTTInfo=function(e){var t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration,t},r.prototype._parseProgramDateTime=function(e){if(!e)return 0;var t,n,r=e.substr(_.length),i=r.split("T"),o=i[0].split("-"),a=parseInt(o[0]),s=parseInt(o[1]),l=parseInt(o[2]),c=i[1],d=0;if(c.indexOf("Z")>=0)t=c.substr(0,c.indexOf("Z")).split(":");else if(c.indexOf("+")>=0){var p=c.split("+");t=p[0].split(":"),n=p[1].split(":"),d=-1}else if(c.indexOf("-")>=0){var u=c.split("-");t=u[0].split(":"),n=u[1].split(":"),d=1}var m=0,v=0,y=0;if(t&&(m=parseInt(t[0]),v=parseInt(t[1]),y=parseFloat(t[2])),n){var f=parseInt(n[0]),g=parseInt(n[1]);m=(24+m+d*f)%24,v+=d*g,v>=60?(m++,v-=60):0>v&&(m--,v+=60)}return new Date(a,s,l,m,v,y).getTime()},r.prototype._copySegmentInfo=function(e){var t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.brStartOffset=e.brStartOffset,t.brEndOffset=e.brEndOffset,t.levelIndex=e.levelIndex,t.url=e.url,t.duration=e.duration,t},r.prototype.parseStreamInfo=function(e){if(!e)return null;var t=[];return e.forEach(function(e,n){var r=e.host;e.path&&""!==e.path?r+=e.path:e.url&&(r=e.url);var i={bitrate:1e3*e.bitrate,height:e.height,width:e.width,url:r,index:n,hlsInfo:e.hls_info};if(e.manifestContent){if(e.manifestContent.indexOf("SUBTITLES")>-1){var o=e.manifestContent.split('SUBTITLES="')[1];i.subtitlesGroupId=o.substr(0,o.indexOf('"'))}e.manifestContent.indexOf("CODECS")>-1&&-1===e.manifestContent.indexOf("avc1")&&(i.audio=!0)}t.push(i)}),t},r.prototype.parseSegmentInfo=function(e,t){var n=this;if(!e)return null;var r=[],i={};i.brStartOffset=-1,i.brEndOffset=-1,i.programDateTime=0,i.discontinuityCounter=0,i.sequenceNum=e.start_index,i.startTime=0;for(var o=0;o<e.segments_count;o++)i.url=e.ts_url+"&num="+i.sequenceNum.toString(),i.levelIndex=t,i.duration=e.segment_duration,o===e.segments_count-1&&(i.duration=e.last_segment_duration),r.push(n._copySegmentInfo(i)),i.sequenceNum++,i.startTime+=i.duration;return r}},{"./../model/model":172}],183:[function(e,t,n){"use strict";function r(){var e=this;e._model=e._context.model,e._node=e._context.node,e.bandwidthEstimator=new o,e.metrics=e._context.create(a),e.metadataParser=e._context.create(i)}t.exports=r;var i=e("./playlist-parser"),o=e("./../abr/bandwidth-estimator"),a=e("./metrics"),s=e("./loader");r.prototype.destroy=function(){var e=this;e.bandwidthEstimator.destroy(),e.metrics.destroy(),e._metadataParser.destroy()},r.prototype.getNewLoader=function(){return new s}},{"./../abr/bandwidth-estimator":156,"./loader":180,"./metrics":181,"./playlist-parser":182}],184:[function(e,t,n){"use strict";function r(){var e=this;e._frames=[],e._config={},e.ready=!1}function i(){var e=this;e._frames=[],e._config={},e._keyFrameIndex=0,e.ready=!1,e._keyFrameCount=0}t.exports.AACStream=r,t.exports.AVCStream=i;var o=e("../../lib/hls-utils"),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=["Null","Main","LC","SSR","LTP"],l="mp4a.40.2",c=66,d=0,p=10,u={NON_IDR:1,IDR:5,SPS:7,PPS:8};r.prototype.destroy=function(){var e=this;e._frames=[]},r.prototype.readFrames=function(e){var t=this;if(e&&e.packetInfo){var n=e.packetInfo.streamData;if(n&&!(n.length<6))for(var r=0,i=0,a=0;r<n.length;){var s=0,c=(n[r++]<<8)+n[r++],d=6&c,p=1&c;if(65520===(65520&c)&&0===d){t._parseConfig(o.cloneTypedArray(n,r,r+2)),t._config.codec=l,r++;var u=(n[r++]<<16)+(n[r++]<<8)+n[r++];for(u=(262112&u)>>>5,i=(3&n[r++])+1,p?u-=7:(u-=9,r+=2);i>s&&r<n.length;){var _=Math.round(e.packetInfo.pts+1024*a*1e3/t._config.samplingFreq);t._frames.push({data:o.cloneTypedArray(n,r,r+u),dts:_,pts:_,keyframe:!1,flags:{isLeading:!1,dependsOn:!0,isDependedOn:!1,hasRedundancy:!1,paddingValue:!1,isNonSyncSample:!1,degradationPriority:1}}),t.ready=!0,r+=u,s++,a++}}else r--}}},r.prototype._parseConfig=function(e){var t=this;if(e&&!(e.length<2)){var n=((192&e[0])>>>6)+1;n=n>4?4:n,t._config.audioObjectTypeIndex=n,t._config.audioObjectType=s[n],n=(60&e[0])>>>2,n=13>n?n:0,t._config.samplingFreqIndex=n,t._config.samplingFreq=a[n],t._config.channels=(1&e[0])<<2|(192&e[1])>>>6,t._config.sampleSize=16}},r.prototype.getFrames=function(){var e=this;return e.ready=!1,e._frames.splice(0,e._frames.length)},r.prototype.getConfig=function(){var e=this;return e._config},i.prototype.destroy=function(){var e=this;e._frames=[]},i.prototype.readFrames=function(e){var t=this;if(e&&e.packetInfo){var n=e.packetInfo.streamData;if(n&&!(n.length<4)){for(var r,i=0,a=0,s=0,l=i,c={nalUnits:[],nalUnitSize:0,dts:e.packetInfo.dts,pts:e.packetInfo.pts,keyframe:!1,data:o.cloneTypedArray(n),flags:{isLeading:0,dependsOn:0,isDependedOn:0,hasRedundancy:0,paddingValue:0,isNonSyncSample:!1,degradationPriority:0}};i<n.length;){var d=(n[i++]<<16)+(n[i++]<<8)+n[i++],p=(d<<8)+n[i++];if(1===p||1===d){i=1===d?i-1:i;var _=1===d?3:4;if(a=c.nalUnits.length,a>=1)switch(s=i-l-_,r=o.cloneTypedArray(n,l,l+s),c.nalUnitSize+=s,c.nalUnits[a-1].data=r,c.nalUnits[a-1].type){case u.SPS:t._config.profileIndication=r[1],t._config.profileCompatibility=r[2],t._config.levelIndication=r[3],t._config.numOfSPS=1,t._config.spsLength=r.length,t._config.sps=r;break;case u.PPS:t._config.numOfPPS=1,t._config.ppsLength=r.length,t._config.pps=r}l=i,s=0;var m=31&n[i++];c.nalUnits.push({data:null,type:m}),m===u.IDR?(t._keyFrameIndex=t._frames.length,c.keyframe=!0,c.flags.dependsOn=2,t._keyFrameCount++):m===u.NON_IDR&&(c.keyframe=!1,c.flags.dependsOn=1,c.flags.isNonSyncSample=!0)}else i-=3}a=c.nalUnits.length,a>=1&&null===c.nalUnits[a-1].data&&(s=i-l,c.nalUnits[a-1].data=o.cloneTypedArray(n,l,l+s),c.nalUnitSize+=s),t._config.codec=t._getVideoCodecType(t._config),t._frames.push(c),t.ready=t._keyFrameCount>=2}}},i.prototype.getFrames=function(e){var t=this,n=e&&e.keyFrameBoundary,r=t._frames.length;n&&(r=t._keyFrameIndex,t._keyFrameCount=1,t.ready=!1);var i=t._frames.splice(0,r);return t._keyFrameIndex=0,i},i.prototype.getConfig=function(){var e=this;return e._config},i.prototype._getVideoCodecType=function(e){var t=e&&e.profileIndication||c;t=Math.max(t,c);var n=e&&e.profileCompatibility||d,r=e&&e.levelIndication||p;return"avc1."+(t<<16|n<<8|r).toString(16)}},{"../../lib/hls-utils":150}],185:[function(e,t,n){"use strict";function r(e,t){var n=this;n.streamType=e,n.streamId=t,n._packetList=[],n._endOfSegment=!1,"audio"===e?n._stream=new s:"video"===e&&(n._stream=new l)}function i(e){var t=this;t._data=e,t.complete=!1}t.exports=r;var o=e("./av-stream"),a=e("../../lib/hls-utils.js"),s=o.AACStream,l=o.AVCStream;r.prototype.destroy=function(){var e=this;e._packetList=[],e._stream&&(e._stream.destroy(),e._stream=null)},r.prototype.isReady=function(){var e=this,t=e._stream?e._stream.ready:!1;return e._endOfSegment||t},r.prototype.addPacket=function(e){var t=this,n=t._packetList.length;n&&t._parsePacket(),t._packetList.push(new i(e))},r.prototype.append=function(e){var t=this,n=t._packetList.length;e&&n&&t._packetList[n-1].append(e)},r.prototype.endOfSegment=function(){var e=this;e._endOfSegment=!0,e._parsePacket()},r.prototype.getFrames=function(e){var t=this;return t._stream?t._stream.getFrames(e):null},r.prototype.getConfig=function(){var e=this;return e._stream?e._stream.getConfig():null},r.prototype._parsePacket=function(){var e=this,t=e._packetList.length;if(t){var n=e._packetList[t-1];n.complete=!0,0===n.parse()&&e._stream&&(e._stream.readFrames(n),e._packetList.pop())}},i.prototype.append=function(e){var t=this;if(t._data){var n=new Uint8Array(a.cloneTypedArray(e)),r=n.length;if(r){var i=null,o=0;t._data&&(i=a.cloneTypedArray(t._data),o=i.length);var s=o+r;t._data=new Uint8Array(s),i&&t._data.set(i),t._data.set(n,o)}}},i.prototype.parse=function(){var e=this;if(e.packetInfo={},!e.complete||!e._data||!e._data.length)return e.packetInfo.result=-1,-1;if(e._data.length<6)return e.packetInfo.result=-2,-2;var t=0,n=(e._data[t++]<<16)+(e._data[t++]<<8)+e._data[t++];if(1!==n)return e.packetInfo.result=-3,-3;e.packetInfo.streamId=e._data[t++],t+=2,t++;var r=(192&e._data[t++])>>6,i=e._data[t++];return(2===r||3===r)&&(e.packetInfo.pts=e._parseTimestamp(a.cloneTypedArray(e._data,t,t+5)),e.packetInfo.dts=e.packetInfo.pts,t+=5,i-=5,3===r&&(e.packetInfo.dts=e._parseTimestamp(a.cloneTypedArray(e._data,t,t+5)),t+=5,i-=5)),t+=i,e.packetInfo.streamData=a.cloneTypedArray(e._data,t),e.packetInfo.result=0,0},i.prototype._parseTimestamp=function(e){if(!e||!e.length)return 0;var t=0,n=(14&e[t++])>>>1,r=(e[t++]<<8)+(254&e[t++])>>>1,i=(e[t++]<<8)+e[t++]>>>1,o=(4&n)>>2;n&=3;var a=n<<29;r<<=15;var s=2*a+r+i,l=o?-1*Math.pow(2,32)+s:s;return l=Math.round(l/90)}},{"../../lib/hls-utils.js":150,"./av-stream":184}],186:[function(e,t,n){"use strict";function r(e){var t=this;t._data=null,t._dataListener=e,t._pcrPID=0,t._programMapPID=NaN,t._streamIds={},t._pesStreams={},t._packetsBeforePMT=[],t._state="initial",t._position="start",t._parseTimer=new o(50),t._parseTimer.addEventListener(t._parse,t)}t.exports=r;var i=e("../../lib/hls-utils.js"),o=e("../../lib/timer"),a=e("./pes"),s=188,l=71,c=1e3,d=0;r.prototype.destroy=function(){var e=this;e._data=null,e._packetsBeforePMT=[],e._state="initial",e._position="start";var t=e._pesStreams;for(var n in t)t.hasOwnProperty(n)&&t[n].destroy();e._pesStreams={},e._parseTimer.destroy()},r.prototype.append=function(e){var t=this;if(e){var n=new Uint8Array(i.cloneBuffer(e)),r=n.length;if(r){var o=null,a=0;t._data&&(o=i.cloneTypedArray(t._data),a=o.length);var s=a+r;t._data=new Uint8Array(s),o&&t._data.set(o),t._data.set(n,a),t._parse()}}},r.prototype.endOfSegment=function(){var e=this;e._position="end",e._handleEndOfSegment()},r.prototype._parse=function(){var e=this;if(e._data&&e._data.length){for(var t=0;e._data.length&&c>t;){var n=e._parsePacket(i.cloneTypedArray(e._data,0,s));if(0!==n)break;t++,e._data=i.cloneTypedArray(e._data,s)}"end"!==e._position?e._sendDemuxedData():e._handleEndOfSegment()}},r.prototype._parsePacket=function(e){var t=this;if(!e||e.length<s)return-1;var n=0,r={};if(e[n++]!==l)return-2;var o=e[n++];if(r.startIndicator=(64&o)>>6,r.pid=((31&o)<<8)+e[n++],o=e[n++],r.adaptationFieldExists=(32&o)>>5,r.payloadExists=(16&o)>>4,r.adaptationFieldLength=0,r.adaptationFieldExists){r.adaptationFieldLength=e[n++];var a=e[n++];16&a&&r.pid===t._pcrPID&&r.adaptationFieldLength>=7&&t._readPCR(i.cloneTypedArray(e,n,n+6)),n+=r.adaptationFieldLength-1}return!r.payloadExists||r.adaptationFieldLength>=183?0:("pmtParsed"!==t._state&&r.pid!==d&&r.pid!==t._programMapPID&&t._packetsBeforePMT.push(e),t._parsePayload(i.cloneTypedArray(e,n),r),0)},r.prototype._readPCR=function(e){var t=this;if(e&&!(e.length<6)){var n=0,r=e[n++],i=(128&r)>>>7;r&=127,r=(r<<24)+(e[n++]<<16)+(e[n++]<<8)+e[n++];var o=e[n++];n++;var a=(128&o)>>>7,s=2*r+a,l=i?-1*Math.pow(2,32)+s:s;t._firstPcr||(t._firstPcr=Math.round(l/90))}},r.prototype._parsePayload=function(e,t){var n=this;if(e&&t&&!isNaN(t.pid)){var r,i;switch(n._streamIds.aac&&(r=n._streamIds.aac),n._streamIds.avc&&(i=n._streamIds.avc),t.pid){case d:n._parsePAT(e,t);break;case n._programMapPID:n._parsePMT(e,t);break;case r:n._parseMediaData("audio",e,t);break;case i:n._parseMediaData("video",e,t)}}},r.prototype._parsePAT=function(e,t){var n=this;if(e){var r=0;if(t.startIndicator){var i=e[r++];r+=i}r+=5,r+=3;var o=(e[r++]<<8)+e[r++];o>0&&(n._programMapPID=((31&e[r++])<<8)+e[r++]),n._state="patParsed"}},r.prototype._parsePMT=function(e,t){var n=this;if(e){var r=0;if(t&&t.startIndicator){var i=e[r++];r+=i}r++;var o=((15&e[r++])<<8)+e[r++],a=r;r+=2,r+=3,n._pcrPID=((31&e[r++])<<8)+e[r++];var s=((15&e[r++])<<8)+e[r++];r+=s;for(var l=null,c=null,d=0;o-4>r-a;)switch(l=e[r++],c=((31&e[r++])<<8)+e[r++],d=((15&e[r++])<<8)+e[r++],r+=d,l){case 3:case 4:n._streamIds.mp3=c;break;case 15:n._streamIds.aac=c;break;case 27:n._streamIds.avc=c}for(n._state="pmtParsed";n._packetsBeforePMT.length;)n._parsePacket(n._packetsBeforePMT.shift())}},r.prototype._parseMediaData=function(e,t,n){var r=this;if(t){var i=r._pesStreams,o="audio"===e?r._streamIds.aac:r._streamIds.avc,s=i[o];n.startIndicator?(s||(i[o]=new a(e,o),s=i[o]),s.addPacket(t)):s&&s.append(t)}},r.prototype._isReady=function(){var e=this,t=!0;for(var n in e._streamIds)if(e._streamIds.hasOwnProperty(n)){var r=e._streamIds[n];t=t&&e._pesStreams[r]&&e._pesStreams[r].isReady()}return t},r.prototype._sendDemuxedData=function(){var e=this;if(e._isReady()){var t={},n=!1,r=!1,i=e._pesStreams;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];if(a){var s={frames:a.getFrames({keyFrameBoundary:"end"!==e._position}),config:a.getConfig(),streamId:a.streamId};"audio"===a.streamType&&o===e._streamIds.aac.toString()?(t.audio=s,n=t.audio.frames&&t.audio.frames.length):"video"===a.streamType&&o===e._streamIds.avc.toString()&&(t.video=s,r=t.video.frames&&t.video.frames.length)}}t.pcr=e._firstPcr,("end"===e._position||n||r)&&(e._dataListener&&e._dataListener({pos:e._position,avData:t}),"start"===e._position&&(e._position="middle"))}},r.prototype._handleEndOfSegment=function(){var e=this;if("end"===e._position&&!e._data.length){var t=e._pesStreams;for(var n in t)t.hasOwnProperty(n)&&t[n].endOfSegment();e._sendDemuxedData()}}},{"../../lib/hls-utils.js":150,"../../lib/timer":152,"./pes":185}],187:[function(e,t,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e){for(var t,n=Object.keys(o),s=0,l=n.length;l>s;s++){var c=n[s],d=o[c].exports;if(d===e||d["default"]===e){t=c;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},s=0,l=n.length;l>s;s++){var c=n[s];p[c]=c}i[t]=[Function(["require","module","exports"],"("+e+")(self)"),p]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),_={};_[t]=t,i[u]=[Function(["require"],"var f = require("+a(t)+");(f.default ? f.default : f)(self);"),_];var m="("+r+")({"+Object.keys(i).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(u)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(v.createObjectURL(new Blob([m],{type:"text/javascript"})))}},{}],188:[function(e,t,n){function r(e,t){function n(){4===d.readyState&&r()}function r(){var e=null,n=d.statusCode=d.status,r=d.body=d.response||d.responseText||d.responseXML;if(1223===n&&(n=204),0===n||n>=400&&600>n){var i=d.responseText||s[String(d.status).charAt(0)];e=new Error(i),e.statusCode=d.status}if(f)try{r=d.body=JSON.parse(r)}catch(o){}t(e,d,r)}function o(e){t(e,d)}"string"==typeof e&&(e={uri:e}),e=e||{},t=a(t);var d=e.xhr||null;!d&&e.cors?d=new c:d||(d=new l);var p,u=d.url=e.uri||e.url,_=d.method=e.method||"GET",m=e.body||e.data,v=d.headers=e.headers||{},y=!!e.sync,f=!1;if("json"in e&&(f=!0,v.Accept="application/json","GET"!==_&&"HEAD"!==_&&(v["Content-Type"]="application/json",m=JSON.stringify(e.json))),d.onreadystatechange=n,d.onload=r,d.onerror=o,d.onprogress=function(){},d.ontimeout=i,d.open(_,u,!y),e.cors&&(d.withCredentials=!0),y||(d.timeout="timeout"in e?e.timeout:5e3),d.setRequestHeader)for(p in v)v.hasOwnProperty(p)&&d.setRequestHeader(p,v[p]);return"responseType"in e&&(d.responseType=e.responseType),d.send(m),d}function i(){}var o=e("global/window"),a=e("once"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=o.XMLHttpRequest||i,c="withCredentials"in new l?o.XMLHttpRequest:o.XDomainRequest;t.exports=r},{"global/window":189,once:190}],189:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:t.exports={}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],190:[function(e,t,n){function r(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=r,r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},{}]},{},[25]);
